!function(g,O){"use strict";var z="ht",o=g[z],M="position",m="absolute",r="px",c="left",P="top",d="innerHTML",U="className",t="width",D="height",l="0",F="display",q="none",K="visibility",w="user-select",u="margin",N="padding",f=null,J=o.Color,H=o.Default,p=H.getInternal(),x=g.setTimeout,s=g.setInterval,X=g.clearTimeout,n=g.clearInterval,T=g.parseInt,I=H.isLeftButton,e=H.isDragging,A=H.startDragging,R=H.getDistance,V=H.isTouchable,Z=J.widgetIconHighlight,b=J.widgetIconBorder,W=J.widgetIconGradient,y=function(){return document},h=function(o,N){return o.querySelectorAll(N)},a=function(S){var A=y().createElement(S);return"ul"===S&&(i(A,M,"relative"),i(A,u,l),i(A,N,l),i(A,"list-style",q),i(A,"box-sizing","border-box"),i(A,"-moz-box-sizing","border-box"),i(A,F,"inline-block"),i(A,"vertical-align","text-bottom"),i(A,"border","1px solid "+H.contextMenuBorderColor),i(A,"box-shadow","0 0 16px 1px "+H.contextMenuShadowColor),i(A,"overflow","hidden"),H.contextMenuBorderRadius&&i(A,"border-radius",H.contextMenuBorderRadius+r)),A},j=function(q){var I=q.touches[0];return I?I:q.changedTouches[0]},B=function(){return a("div")},Q=function(){return a("canvas")},i=function(c,n,w){c.style.setProperty(n,w,f)},E=function(m,N,S){H.def(o.widget[m],N,S)},C=function(P,q){P.appendChild(q)},Y=function(I,B){I.removeChild(B)},G=function(){return y().body},k=function(j,o,Y,r){j.addEventListener(o,Y,!!r)},$=function(f,l,p,z){f.removeEventListener(l,p,!!z)};p.addMethod(H,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:b},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:Z}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:b},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:Z,gradient:H.imageGradient,gradientColor:W,background:Z}]},contextMenuLabelFont:(V?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var v=function(S){var M=this,q=S._view;if(M.$11b=S,M.addListeners(),k(q,"contextmenu",function(c){c.preventDefault()}),!V){var J=M.$37b=M.$36b.bind(M);k(q,"mouseover",J),k(q,"mouseout",J)}};H.def(v,O,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(K){if(H.preventDefault(K),I(K)){for(var p=this,N=p.$11b,c=p.getView(),Q=c.children,d=0;d<Q.length;d++){var $=Q[d],i=$.$24b,h=$.$25b;if(i&&i.contains(K.target))return N.scrollUp($),p.$28b=x(function(){p.$29b=s(function(){N.scrollUp($)},100)},500),A(p,K),void 0;if(h&&h.contains(K.target))return N.scrollDown($),p.$28b=x(function(){p.$29b=s(function(){N.scrollDown($)},100)},500),A(p,K),void 0}V&&(K=j(K)),p.$30b={x:K.pageX,y:K.pageY}}},handle_mousedown:function(L){this.handle_touchstart(L)},handle_touchend:function(E){if(I(E)){var U=this,e=U.$30b,d=V?{x:j(E).pageX,y:j(E).pageY}:{x:E.pageX,y:E.pageY};if(!e||R(e,d)>1)return delete U.$30b,void 0;for(var i=U.getView(),o=U.$11b,O=E.target,z=f,S=f,a=o._items,J=i.$26b,u=0;u<J.length;u++)if(S=J[u],S.contains(O)){z=S.getAttribute("data-id");break}if(z&&a){var G=o.$17b(a,function(h){return h._id===z});if(G){var C=!1;G.disabled instanceof Function?C=G.disabled.call(o,G):G.disabled===!0&&(C=!0),C||(G.items?V&&U.$36b(S,!0):o.$1b(G,E))}}delete U.$30b}},$36b:function(_,O){if(!e()){var J,D=this,s=D.$11b,z=D.getView(),j=s.$20b||z.children[0],f=s.$19b,S=z.$26b,o=z.children,I=_.target,G=z.getBoundingClientRect(),N=H.getWindowInfo(),C=N.width,w=N.height,Y=function(R){for(var E=0;E<o.length;E++){var h=o[E],l=new RegExp(R+"$"),b=h[U];if(b&&(l.test(b)||b.indexOf(R+" ")>=0))return h}},h=function(g){for(var Z=0;Z<S.length;Z++){var n=S[Z],t=new RegExp(g+"$"),N=n[U];if(N&&(t.test(N)||N.indexOf(g+" ")>=0))return n}},g=function(k){var Y=h("menu-item"+k.$45b),g=Y.getBoundingClientRect(),d=g.top-G.top,b=g.left-G.left;i(k,P,d+r),i(k,c,b+g.width+r);var Q=k.getBoundingClientRect(),N=Q.top,D=Q.left,Z=Q.height,u=Q.width,j=N+Z+2,I=D+u+2;j>w&&i(k,P,d+w-j+r),I>C&&i(k,c,b-u+r)};if(O)J=_;else{if("mouseover"===_.type){for(var $=0;$<S.length;$++){var Z=S[$];if(Z.contains(I)){J=Z;break}}if(!J&&f){var k=f.parentNode,n=Y("submenu"+f.getAttribute("data-id"));(n&&n.contains(I)||k&&k.contains(I))&&(J=f)}}else if("mouseout"===_.type){for(var d=!1,V=_.relatedTarget,$=0;$<o.length;$++){var Q=o[$];if("hidden"!==Q.style.visibility&&Q.contains(V)){d=!0;break}}if(d)return}!J&&j&&(J=h("menu-item"+(j.$45b||"NaN")))}if(J!=f){if(f)for(var y=f;y;){y[U]=y[U].replace(" menu-item-hover",""),y[U].indexOf("disabled")<0&&(i(y,"background-color",H.contextMenuBackground),i(y,"color",H.contextMenuLabelColor));var u=Y("submenu"+y.getAttribute("data-id"));u&&i(u,K,"hidden");var W=y.parentNode;y=h("menu-item"+(W.$45b||"NaN"))}if(J){for(var F=J,m=[];F;){F[U]+=" menu-item-hover",F[U].indexOf("disabled")<0&&(i(F,"background-color",H.contextMenuHoverBackground),i(F,"color",H.contextMenuHoverLabelColor));var x=Y("submenu"+F.getAttribute("data-id"));x&&(i(x,K,"visible"),m.push(x));var W=F.parentNode;F=h("menu-item"+(W.$45b||"NaN"))}m.reverse(),m.forEach(function(W){g(W)})}}s.$19b=J,s.$20b=J?J.parentNode:z.children[0]}},handle_mouseup:function(q){this.handle_touchend(q)},handleWindowTouchEnd:function(){var H=this;H.$28b!=f&&(X(H.$28b),delete H.$28b),H.$29b!=f&&(n(H.$29b),delete H.$29b),delete H.$34b,delete H.$30b,delete H.$35b},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handle_mousemove:function(J){this.handle_touchmove(J)},handle_touchmove:function(p){if(!e()&&I(p)){for(var a=this,D=a.getView().children,Q=f,B=0;B<D.length;B++){var U=D[B];if(U.contains(p.target)){Q=U;break}}var P=a.$30b,y=V?{x:j(p).pageX,y:j(p).pageY}:{x:p.pageX,y:p.pageY};Q&&P&&R(P,y)>2&&(A(a,p),a.$34b=Q,a.$35b=Q.$18b)}},handleWindowTouchMove:function(k){k.preventDefault();var Y=this,g=Y.$11b,i=Y.$34b,w=Y.$35b,H=Y.$30b;if(H&&i){var D=V?{x:j(k).pageX,y:j(k).pageY}:{x:k.pageX,y:k.pageY},f=D.y-H.y;f>0?g.scrollUp(i,i.$18b-(w-f)):g.scrollDown(i,w-f-i.$18b)}},handleWindowMouseMove:function(o){this.handleWindowTouchMove(o)},$10b:function(x,c){x.preventDefault();for(var p=this,o=p.getView().children,S=f,h=0;h<o.length;h++){var G=o[h];if(G.contains(x.target)){S=G;break}}if(S){var _=this.$11b,C=_.getRowHeight();Math.abs(c)>.05&&(c>0?_.scrollUp(S,c*C):0>c&&_.scrollDown(S,-c*C))}},handle_mousewheel:function(D){this.$10b(D,D.wheelDelta/40)},handle_DOMMouseScroll:function(r){this.$10b(r,-r.detail)},$44b:function(x){this.getView().contains(x.target)||this.$11b.hide()},$41b:function(y){this.$11b.show(y)},$4b:function(R,O){var k=this.$11b;if(O=O||k._items,O&&O.length&&R.keyCode){var i=[R.keyCode];R.shiftKey&&i.push(16),R.ctrlKey&&i.push(17),R.altKey&&i.push(18),/mac/.test(g.navigator?g.navigator.userAgent.toLowerCase():"")?R.metaKey&&i.push(17):R.metaKey&&i.push(91),i.sort();var u=i.join(),Z=k.$17b(O,function($){if($.key){var n=$.key.slice(0);return n.sort(),u===n.join()}});if(Z){Z.preventDefault!==!1&&R.preventDefault();var s=!1;Z.disabled instanceof Function?s=Z.disabled.call(k,Z):Z.disabled===!0&&(s=!0),s||k.$1b(Z,R)}}},$39b:function(i){var x=this,T=j(i);x.$32b={x:T.pageX,y:T.pageY}},$38b:function(V){var K=this,p=j(V);K.$31b={x:p.pageX,y:p.pageY},K.$33b=x(function(){K.$31b&&(K.$32b?R(K.$31b,K.$32b)<10&&K.$11b.show(V):K.$11b.show(V)),delete K.$33b,delete K.$31b,delete K.$32b},600)},$40b:function(){var i=this;i.$33b!=f&&(X(i.$33b),delete i.$33b,delete i.$31b,delete i.$32b)}}),o.widget.ContextMenu=function(I){var D=this,Q=D._view=p.createView(null,D);Q[U]="ht-widget-contextmenu",D.setItems(I),D.$13b=new v(D),i(Q,"font",H.contextMenuLabelFont),i(Q,M,m),i(Q,"cursor","default"),i(Q,"-webkit-"+w,q),i(Q,"-moz-"+w,q),i(Q,"-ms-"+w,q),i(Q,w,q),i(Q,"box-sizing","border-box"),i(Q,"-moz-box-sizing","border-box"),H.baseZIndex!=f&&i(Q,"z-index",T(H.baseZIndex)+2+""),D.$3b=function(Y){D.$13b.$4b(Y)}},E("ContextMenu",O,{$5b:0,_items:f,$21b:f,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var B=this,o=B._enableGlobalKey;o===!1&&(k(y(),"keydown",B.$3b),B._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,$(y(),"keydown",this.$3b)},setItems:function($){this._items=$},getItems:function(){return this._items},setVisibleFunc:function(B){this.$16b=B},setLabelMaxWidth:function(M){this.$43b=M},$1b:function(S,D){var t=this;if("check"===S.type)S.selected=!S.selected;else if("radio"===S.type){var f=S.groupId;t.$17b(t._items,function(A){A.groupId===f&&(A.selected=!1)}),S.selected=!0}if(t.hide(),S.action)S.action.apply(S.scope||t,[S,D]);else if(S.href){var u=S.linkTarget||"_self";g.open(S.href,u)}},getItemByProperty:function(l,i,$){var J=this;if($=$||J._items,!$||0===$.length)return f;var q=J.$17b($,function(z){return z[l]===i});return q||f},scrollUp:function(F,C){var Q=this;if(C=C==f?20:C,C=T(C),0!==C){var Y=0;F.$18b>C&&(Y=F.$18b-C),Q.$42b(F,Y),F.scrollTop=Y,F.$18b=Y}},scrollDown:function(Z,w){var B=this;if(w=w==f?20:w,w=T(w),0!==w){var J=Z.$22b,k=Z.$23b,y=J-k;k+Z.$18b+w<J&&(y=Z.$18b+w),B.$42b(Z,y),Z.scrollTop=y,Z.$18b=y}},$42b:function(l,n){n=n==f?l.$18b:n;var W=l.$24b,b=l.$25b;W&&(i(W,"top",n+r),0==n?i(W,F,q):i(W,F,"block")),b&&(i(b,"bottom",-n+r),n==l.$22b-l.$23b?i(b,F,q):i(b,F,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(g,W){for(var r=0;r<g.length;r++){var R=g[r];if(W(R))return R;if(R.items){var O=this.$17b(R.items,W);if(O)return O}}},$2b:function(J,w){for(var v=this,s=0;s<J.length;s++){v.$5b++;var I=J[s];if(!v.$16b||v.$16b.call(v,I)){var h=a("li"),X=v.$5b+"";if(i(h,"white-space","nowrap"),i(h,F,"block"),"separator"===I||I.separator===!0){var P=B();P[U]="separator",i(P,D,H.contextMenuSeparatorWidth+r),i(P,"background",H.contextMenuSeparatorColor),C(h,P)}else{I._id=X,h.setAttribute("data-id",X);var Z=a("span"),$=a("span"),V=Q(),g=B();if(i(Z,F,"inline-block"),i($,F,"inline-block"),V[U]="prefix",i(V,F,"inline-block"),i(V,t,"1em"),i(V,D,"1em"),i(V,"vertical-align","middle"),i(V,u,"0 0.2em"),"check"===I.type&&I.selected?V[U]+=" check-prefix":"radio"===I.type&&I.selected&&(V[U]+=" radio-prefix"),C(h,V),I.icon){var S=Q();S[U]="contextmenu-item-icon",i(S,F,"inline-block"),i(S,"vertical-align","middle"),i(S,D,"1.2em"),i(S,t,"1.2em"),i(S,"margin-right","0.2em"),S.$50b=I.icon,C(Z,S)}if($[d]=I.label,C(Z,$),C(h,Z),g[U]="suffix",i(g,F,"inline-block"),i(g,"margin-left","1em"),i(g,"margin-right","0.4em"),i(g,"text-align","right"),i(g,"font-size","75%"),I.items&&(g[d]=H.contextMenuSubmenuMark),I.suffix&&(g[d]=I.suffix),C(h,g),h[U]="menu-item menu-item"+X,i(h,"background-color",H.contextMenuBackground),i(h,"color",H.contextMenuLabelColor),i(h,N,"3px 0"),I.disabled instanceof Function){var R=I.disabled.call(v,I);R&&(h[U]+=" disabled",i(h,"color",H.contextMenuDisabledLabelColor))}else I.disabled&&(h[U]+=" disabled",i(h,"color",H.contextMenuDisabledLabelColor));if(I.items){v.$21b||(v.$21b=new o.List);var G=a("ul");G[U]="submenu"+X,G.$45b=X,i(G,K,"hidden"),i(G,M,m),C(v._view,G),v.$21b.add(G),v.$2b(I.items,G)}}C(w,h)}}},rebuild:function(){var u=this,L=u._items,B=u._view;if(B&&(B[d]="",u.$21b=f,u.$5b=0,u.$19b=f,u.$20b=f,B.$26b=f,L&&0!==L.length)){var p=a("ul",u._r);C(B,p),u.$2b(L,p)}},addTo:function(X){if(X){var U=this,x=U.$13b;if(U.$12b=X,U.$9b=function(U){x.$44b(U)},U.$27b=function(v){x.$41b(v)},V){var q=U.$6b=function(o){x.$38b(o)},o=U.$7b=function(N){x.$39b(N)},j=U.$8b=function(P){x.$40b(P)};k(X,"touchstart",q,!0),k(X,"touchmove",o),k(X,"touchend",j)}else k(X,"contextmenu",U.$27b)}},show:function(O,N,S){var A=this,S=S==f?!0:!1,w=A._view;if(w){if(A.invalidate(),1===arguments.length){var K=O;if(V){var L=j(K);O=L.pageX,N=L.pageY}else O=K.pageX,N=K.pageY}var J=H.getWindowInfo(),v=J.width,$=J.height,g=J.left,o=J.top,X={pageX:O,pageY:N,clientX:O-g,clientY:N-o,target:1,originEvent:K},u=X.clientX,T=X.clientY,e=function(k){k.style.height=$-6+r;var w=B(),J=B(),e=function(u){i(u,M,m),i(u,"text-align","center"),i(u,t,"100%"),i(u,"font-size",10+r),i(u,"padding","2px 0"),i(u,"border","0px solid "+H.contextMenuScrollerBorderColor),i(u,"background-color",H.contextMenuScrollerColor1),u.style.backgroundImage="-webkit-linear-gradient(top, "+H.contextMenuScrollerColor1+", "+H.contextMenuScrollerColor2+")",u.style.backgroundImage="linear-gradient(to bottom, "+H.contextMenuScrollerColor1+", "+H.contextMenuScrollerColor2+")"};w[U]="menu-arrow-item menu-arrow-item-top",J[U]="menu-arrow-item menu-arrow-item-bottom",e(w),i(w,"top",l),i(w,"left",l),i(w,"border-bottom-width",1+r),w[d]="▲",e(J),i(J,"bottom",l),i(J,"left",l),i(J,"border-top-width",1+r),J[d]="▼",k.$24b=w,k.$25b=J,k.$18b=k.scrollTop,k.$22b=k.scrollHeight,k.$23b=k.clientHeight,C(k,w),C(k,J),A.$42b(k)};A.beforeShow&&A.beforeShow(X);var z=A._items;if(z&&(K&&K.preventDefault(),z.length)){A.rebuild(),C(G(),w),w.$26b=h(w,".menu-item");var x=w.children[0];x.offsetHeight>$&&e(x);var D=T+(S?1:0),Y=u+(S?1:0),Q=function($){for(var L=0,u=0,f=0,h=A.$43b;f<$.children.length;f++){var q=$.children[f];if(q.getAttribute("data-id")){var Q=q.children[1],s=q.children[2],o=Q.children;if(h){var P=o[0];o.length>1&&(P=o[1]),P.offsetWidth>h&&(P[d]="<marquee scrollamount='3'>"+P[d]+"</marquee>",P.children[0].style.verticalAlign="text-bottom",i(P,t,h+r),i(P,F,"inline-block"))}var _=Q.offsetWidth,z=s.offsetWidth;_>L&&(L=_),z>u&&(u=z)}}for(f=0;f<$.children.length;f++){var q=$.children[f];if(q.getAttribute("data-id")){var Q=q.children[1],s=q.children[2],U=Q.children[0],M=Q.children[1];!M&&U.style.width&&i(U,t,L+r),i(Q,t,L+r),i(s,t,u+r)}}};Q(x);var I=T+3+w.offsetHeight,Z=u+3+w.offsetWidth;I>$?i(w,P,D-(I-$)+o+r):i(w,P,D+o+r),Z>v?i(w,c,Y-(Z-v)+g+r):i(w,c,Y+g+r);var W=A.$21b;W&&W.each(function(G){Q(G),G.offsetHeight>$&&e(G)}),A.$9b&&k(y(),V?"touchstart":"mousedown",A.$9b,!0),A.afterShow&&A.afterShow(X),A.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=f:!1},getRelatedView:function(){return this.$12b},hide:function(){var Q=this,f=Q._view;f&&f.parentNode&&(Y(f.parentNode,f),$(y(),V?"touchstart":"mousedown",Q.$9b,!0),Q.afterHide&&Q.afterHide())},dispose:function(){var q=this,z=q.$12b,F=q._view;F&&(F.parentNode&&Y(F.parentNode,F),q.disableGlobalKey(),z&&(V?($(z,"touchstart",q.$6b,!0),$(z,"touchmove",q.$7b),$(z,"touchend",q.$8b)):$(z,"contextmenu",q.$27b)),q._view=q._items=q.$21b=q.$19b=q.$12b=q.beforeShow=q.afterShow=q.afterHide=q.$9b=q.$3b=q.$6b=q.$7b=q.$8b=q.$27b=f)},$46b:function(e,Q,N,C){var W=p.initContext(e);p.translateAndScale(W,0,0,1),W.clearRect(0,0,N,C),H.drawStretchImage(W,H.getImage(Q),"fill",0,0,N,C),W.restore()},$47b:function(){var C,l,M,U=this,G=U._view;if(U.isShowing()){var y=h(G,".check-prefix");for(M=0;M<y.length;M++){var c=y[M];C=c.clientWidth,l=c.clientHeight,c.$48b=C,c.$49b=l,p.setCanvas(c,C,l)}var v=h(G,".radio-prefix");for(M=0;M<v.length;M++){var R=v[M];C=R.clientWidth,l=R.clientHeight,R.$48b=C,R.$49b=l,p.setCanvas(R,C,l)}var g=h(G,".contextmenu-item-icon");for(M=0;M<g.length;M++){var D=g[M];C=D.clientWidth,l=D.clientHeight,D.$48b=C,D.$49b=l,p.setCanvas(D,C,l)}}},validateImpl:function(){var C,O,T,D=this,L=D._view;if(D.isShowing()){var F=h(L,".check-prefix");for(T=0;T<F.length;T++){var Y=F[T];C=Y.$48b,O=Y.$49b,C&&O&&D.$46b(Y,H.contextMenuCheckIcon,C,O)}var p=h(L,".radio-prefix");for(T=0;T<p.length;T++){var U=p[T];C=U.$48b,O=U.$49b,C&&O&&D.$46b(U,H.contextMenuRadioIcon,C,O)}var q=h(L,".contextmenu-item-icon");for(T=0;T<q.length;T++){var G=q[T];C=G.$48b,O=G.$49b,C&&O&&D.$46b(G,H.getImage(G.$50b),C,O)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);