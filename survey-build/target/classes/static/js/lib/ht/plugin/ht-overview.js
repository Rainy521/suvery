!function(O,q){"use strict";var S="ht",X=S+".graph.",E=O[S],P=E.graph,M=E.Default,b=E.Color,r=null,R="px",x=M.getInternal(),K=x.getPinchDist,o=M.preventDefault,z=M.getTouchCount,f=M.startDragging;x.addMethod(M,{overviewBackground:b.widgetBackground,overviewMaskBackground:b.transparent,overviewContentBorderColor:b.widgetBorder,overviewContentBackground:b.background},!0),P.Overview=function(e){var k=this,X=k._view=x.createView(1,k);k._canvas=x.createCanvas(X),X.style.background=M.overviewBackground,X.appendChild(k._mask=x.createDiv()),k.setGraphView(e),k.addListeners()},M.def(X+"Overview",q,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate"],_autoUpdate:!0,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:M.overviewMaskBackground,_contentBorderColor:M.overviewContentBorderColor,_contentBackground:M.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function($){var t=this;if(t.gv!==$){var v=t.gv;t.gv=$,v&&(v.removeViewListener(t.handleGraphViewChanged,t),v.ump(t.handleGraphViewPropertyChanged,t)),$&&($.addViewListener(t.handleGraphViewChanged,t),$.mp(t.handleGraphViewPropertyChanged,t)),t.fp("graphView",v,$),t.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(T){this._autoUpdate&&"validate"===T.kind&&this.redraw()},handleGraphViewPropertyChanged:function(Z){"canvasBackground"===Z.property&&this.redraw()},redraw:function(){var x=this;x._redraw||(x._redraw=1,x.iv(50))},validateImpl:function(){var P=this,u=P.gv,c=P._canvas,v=P.getWidth(),O=P.getHeight(),L=P._redraw;if(u){var J=P._mask,A=J.style,p=u.getViewRect(),K=u.getScrollRect(),f=K.x,Q=K.y,I=K.width,s=K.height,j=P._rate=Math.max(I/v,s/O),b=P._x=(v-I/j)/2,m=P._y=(O-s/j)/2;if(0!==p.width&&0!==p.height||P.hasRetry||(M.callLater(P.iv,P,r),P.hasRetry=!0),(v!==c.clientWidth||O!==c.clientHeight)&&(x.setCanvas(c,v,O),L=1),x.isSameRect(K,P._scrollRect)||(P._scrollRect=K,L=1),L){var n=x.initContext(c),o=u.getDataModel().getBackground()||P._contentBackground,S=P._contentBorderColor,E=M.devicePixelRatio;n.clearRect(0,0,v*E,O*E),o&&x.fillRect(n,b*E,m*E,I/j*E,s/j*E,o),x.translateAndScale(n,-f/j+b,-Q/j+m,1/j),u._42(n),n.restore(),S&&x.drawBorder(n,S,b*E,m*E,I/j*E,s/j*E)}A.background=P._maskBackground,A.left=b+(p.x-f)/j+R,A.top=m+(p.y-Q)/j+R,A.width=p.width/j+R,A.height=p.height/j+R,P._redraw=null}else if(L){var n=x.initContext(c);n.clearRect(0,0,v,O),n.restore(),P._redraw=null}},center:function(j){var B=this,V=B.gv;if(V){var w=V._zoom,P=V._29I,O=B._rate,R=B._scrollRect,_=M.getLogicalPoint(j,B._canvas),G=R.x+(_.x-B._x)*O,I=R.y+(_.y-B._y)*O;V.setTranslate((P.width/2-G)*w,(P.height/2-I)*w)}},handle_mousedown:function(k){this.handle_touchstart(k)},handleWindowMouseUp:function(O){this.handleWindowTouchEnd(O)},handleWindowMouseMove:function(V){this.handleWindowTouchMove(V)},handle_mousewheel:function(P){this.handleScroll(P,P.wheelDelta)},handle_DOMMouseScroll:function($){2===$.axis&&this.handleScroll($,-$.detail)},handleScroll:function(v,Q){if(o(v),this.gv){var q=this.gv;Q>0?q.scrollZoomIn():0>Q&&q.scrollZoomOut()}},handle_touchstart:function(D){if(o(D),this.gv&&M.isLeftButton(D)){var p=this,m=p.gv,T=z(D);1===T?M.isDoubleClick(D)&&m.isResettable()?m.reset():(p.center(D),f(p,D)):2===T&&(p._dist=K(D),f(p,D))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(Y){if(this.gv){var N=this,A=N._dist,H=z(Y);1===H?N.center(Y):2===H&&A!=r&&N.gv.handlePinch(r,K(Y),A)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);