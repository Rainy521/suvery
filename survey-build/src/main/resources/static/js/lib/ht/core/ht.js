(function(e,t,n){function r(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function i(t,n){for(var r in n)t.style[r]=n[r],r==="position"&&e.document?t.style[r]=e.document.createElement("form"):r==="box-sizing"&&(t.style[r]=e.document.createElement("input"));return t}function o(e){var t="";for(var n=0;n<e.length;n++){var r=e[n].x+51;r>0&&(t+=String.fromCharCode(r));var i=e[n].y+11;i>0&&(t+=String.fromCharCode(i));var s=e[n].z+21;s>0&&(t+=String.fromCharCode(s))}return t}var s=[[{x:59,y:100,z:44},{x:57,y:90,z:93},{x:65,y:-11,z:-21}],[{x:53,y:105,z:87}],[{x:72,y:23,z:78},{x:60,y:103,z:91},{x:-17,y:47,z:11},{x:-17,y:21315,z:27867},{x:35726,y:21037,z:32908},{x:20170,y:26366,z:38459},{x:20793,y:21485,z:13},{x:-7,y:23,z:91},{x:63,y:100,z:85},{x:50,y:88,z:95},{x:-17,y:47,z:11},{x:-17,y:21476,z:35249},{x:21219,y:36805,z:32479},{x:-17,y:33,z:13},{x:64,y:105,z:76},{x:63,y:105,z:13},{x:7,y:21,z:13},{x:-1,y:37,z:28},{x:4,y:34,z:27},{x:4,y:34,z:29},{x:2,y:23,z:23},{x:-17,y:93,z:76},{x:64,y:93,z:46},{x:60,y:89,z:80},{x:-17,y:47,z:11},{x:-17,y:44,z:27},{x:5,y:39,z:28},{x:-3,y:42,z:29},{x:5,y:40,z:31},{x:3,y:90,z:80},{x:2,y:91,z:80},{x:47,y:42,z:33},{x:47,y:37,z:76},{x:46,y:38,z:31},{x:4,y:43,z:30},{x:46,y:39,z:34},{x:4,y:45,z:34},{x:-1,y:89,z:81},{x:-3,y:89,z:28},{x:1,y:44,z:35},{x:48,y:39,z:81},{x:50,y:42,z:34},{x:2,y:45,z:36},{x:48,y:88,z:32},{x:6,y:44,z:29},{x:47,y:44,z:27},{x:-2,y:87,z:36},{x:3,y:41,z:32},{x:49,y:44,z:79},{x:0,y:46,z:28},{x:2,y:43,z:34},{x:47,y:46,z:29},{x:6,y:46,z:33},{x:0,y:37,z:78},{x:49,y:46,z:31},{x:4,y:42,z:27},{x:0,y:43,z:79},{x:-2,y:38,z:76},{x:-1,y:42,z:31},{x:48,y:44,z:35},{x:47,y:42,z:78},{x:48,y:88,z:33},{x:5,y:45,z:35},{x:50,y:40,z:80},{x:-1,y:90,z:34},{x:-2,y:86,z:76},{x:46,y:38,z:35},{x:-1,y:86,z:30},{x:6,y:86,z:27},{x:51,y:91,z:35},{x:48,y:86,z:33},{x:50,y:39,z:76},{x:48,y:86,z:29},{x:3,y:91,z:78},{x:48,y:89,z:81},{x:-2,y:87,z:77},{x:5,y:88,z:81},{x:1,y:89,z:36},{x:-3,y:46,z:34},{x:51,y:42,z:30},{x:-1,y:42,z:81},{x:47,y:45,z:29},{x:3,y:88,z:77},{x:48,y:40,z:81},{x:4,y:38,z:35},{x:-2,y:42,z:76},{x:-1,y:88,z:31},{x:51,y:40,z:80},{x:0,y:87,z:27},{x:4,y:39,z:30},{x:3,y:91,z:29},{x:1,y:39,z:30},{x:51,y:44,z:81},{x:-2,y:43,z:33},{x:-1,y:91,z:29},{x:4,y:41,z:29},{x:50,y:44,z:30},{x:47,y:41,z:33},{x:3,y:46,z:80},{x:49,y:86,z:81},{x:5,y:38,z:32},{x:5,y:90,z:80},{x:6,y:45,z:81},{x:2,y:44,z:29},{x:46,y:39,z:77},{x:5,y:89,z:29},{x:2,y:43,z:80},{x:48,y:39,z:81},{x:2,y:90,z:29},{x:47,y:86,z:30},{x:4,y:90,z:13},{x:-7,y:23,z:95},{x:-2,y:23,z:37},{x:-19,y:23,z:30},{x:1,y:42,z:29},{x:0,y:43,z:29},{x:2,y:42,z:36},{x:1,y:38,z:28},{x:-1,y:23,z:23},{x:-17,y:105,z:29},{x:-17,y:47,z:11},{x:-17,y:38,z:32},{x:-3,y:38,z:27},{x:-1,y:44,z:28},{x:6,y:45,z:35},{x:1,y:41,z:13},{x:-7,y:23,z:94},{x:54,y:92,z:89},{x:46,y:105,z:96},{x:63,y:90,z:13},{x:7,y:21,z:13},{x:3,y:38,z:36},{x:2,y:44,z:79},{x:47,y:45,z:77},{x:49,y:90,z:77},{x:50,y:86,z:29},{x:-2,y:90,z:35},{x:-1,y:90,z:29},{x:5,y:38,z:33},{x:-3,y:91,z:29},{x:5,y:45,z:33},{x:6,y:87,z:30},{x:46,y:87,z:32},{x:-2,y:39,z:31},{x:3,y:42,z:28},{x:46,y:37,z:77},{x:3,y:39,z:77},{x:49,y:37,z:79},{x:6,y:39,z:33},{x:3,y:44,z:35},{x:-1,y:39,z:30},{x:-2,y:38,z:33},{x:5,y:90,z:77},{x:-1,y:88,z:80},{x:46,y:89,z:29},{x:5,y:86,z:76},{x:5,y:86,z:31},{x:0,y:39,z:79},{x:48,y:44,z:76},{x:3,y:42,z:29},{x:-3,y:37,z:30},{x:2,y:43,z:35},{x:-1,y:90,z:36},{x:3,y:43,z:35},{x:49,y:44,z:80},{x:49,y:87,z:32},{x:0,y:90,z:79},{x:47,y:44,z:36},{x:46,y:39,z:32},{x:-1,y:41,z:79},{x:50,y:87,z:33},{x:2,y:91,z:30},{x:0,y:89,z:35},{x:51,y:38,z:76},{x:-2,y:40,z:36},{x:46,y:40,z:80},{x:51,y:87,z:27},{x:3,y:46,z:36},{x:1,y:91,z:77},{x:5,y:88,z:28},{x:5,y:37,z:32},{x:50,y:40,z:34},{x:3,y:42,z:34},{x:50,y:45,z:78},{x:0,y:37,z:81},{x:51,y:46,z:33},{x:48,y:87,z:33},{x:47,y:40,z:33},{x:5,y:87,z:31},{x:4,y:43,z:35},{x:6,y:43,z:36},{x:3,y:46,z:33},{x:4,y:89,z:27},{x:4,y:40,z:36},{x:49,y:86,z:77},{x:49,y:88,z:28},{x:0,y:39,z:31},{x:46,y:42,z:31},{x:-2,y:46,z:29},{x:2,y:43,z:76},{x:-2,y:46,z:77},{x:5,y:45,z:77},{x:-3,y:90,z:29},{x:48,y:37,z:29},{x:1,y:46,z:32},{x:-1,y:39,z:33},{x:2,y:44,z:77},{x:1,y:91,z:36},{x:-3,y:91,z:33},{x:4,y:90,z:76},{x:2,y:86,z:35},{x:51,y:43,z:27},{x:6,y:43,z:29},{x:5,y:89,z:27},{x:2,y:90,z:32},{x:47,y:89,z:27},{x:3,y:23,z:104}]],u="",a,f;for(var l=0;l<s.length;l++)l===0?a=o(s[l]):l===1?f=o(s[l]):u=o(s[l]);e[a]=r&&i,e[f]=u})(typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:this,Object);!function(R,t,z){"use strict";var Q="ht";if(!R[Q]){!function(){Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),R.performance&&R.performance.now||function(){var C=Date.now();R.performance||(R.performance={}),R.performance.now=function(){return Date.now()-C}}();for(var a=Date.now(),O=16,d=["ms","moz","webkit","o"],J=0;J<d.length&&!R.requestAnimationFrame;++J)R.requestAnimationFrame=R[d[J]+"RequestAnimationFrame"],R.cancelAnimationFrame=R[d[J]+"CancelAnimationFrame"]||R[d[J]+"CancelRequestAnimationFrame"];R.requestAnimationFrame||(R.requestAnimationFrame=function(v){var w=Date.now(),k=O+a-w;return 0>k&&(k=0),a=w,R.setTimeout(function(){a=Date.now(),v(performance.now())},k)}),R.cancelAnimationFrame||(R.cancelAnimationFrame=function(j){return R.clearTimeout(j)})}();var d,_,f,e,W=R.document,v=null,n=R[Q]={},M=R[Q+"config"],r=n.Default=M&&M.Default||{},y=n.Style=M&&M.Style||{},A=n.Color=M&&M.Color||{},G=n.IsGetter=M&&M.IsGetter||{},V=Math,u=V.round,P=V.floor,p=V.ceil,L=V.sqrt,w=V.max,o=V.min,a=V.abs,C=V.cos,J=V.acos,j=V.sin,Z=V.pow,D=V.asin,K=V.PI,X=2*K,x=K/2,H=V.tan,B=V.atan2,g=V.random,N=!1,T=!1,s=R.parseInt||global.parseInt,k="2017-05-01",$=function(){try{return R.navigator.platform.indexOf("Win")>-1}catch(b){}}(),c=function(O){return O*O},m=R.setTimeout,O=R.clearTimeout,F=R.location,Y=R.navigator?R.navigator.userAgent.toLowerCase():"",I=function(B){return B.test(Y)},q=I(/msie/)||I(/trident/),i=I(/msie 10/),h=I(/edge/),l=I(/firefox/),b=I(/mac/),E=r.isTouchable===z?$?!1:W?"ontouchend"in W:!1:r.isTouchable,S="default",U="single",Te="multiple",Cf="front",uj="back",Kp="left",be="right",ph="top",ud="bottom",Dm="center",Sc="eye",sq="middle",Eo="east",Yi="west",Bh="north",_h="none",co="px",cb="absolute",gq="border",_b="triangle",xq="rect",pi="circle",Wc="cylinder",kl="shape",nb="items",rk="normal",ss="remove",zf="clear",le="width",jq="height",qq="ingroup",bq="check",jl="uncheck",re="radio",Zd="radioOn",qo="radioOff",cd="points",zd="values",Sf="series",mh="body",bo="label",fj="label2",to="note",Tp="note2",Mg="icons",Qb="labelFont",de="labelColor",$p="labelSelectColor",Rf="note.expanded",eb="note2.expanded",Pc="edge.expanded",pc="edge.points",ke="edge.type",Jh="rotation",xi="getRotation",Hj="setRotation",zm="hidden",bl="visible",uo="tuv",Ug="no",Gl="select",Nc="currentSubGraph",Gr="selectBackground",md="autoMakeVisible",Ae="autoHideScrollBar",kb="scrollBarColor",Vc="scrollBarSize",Cj="indent",yr="rowHeight",sb="columnLineColor",vk="rowLineColor",Bo="columnLineVisible",Uh="rowLineVisible",Zc="visibleFunc",Cc="expandIcon",nn="collapseIcon",Dd="checkMode",Cp="sortFunc",Kr="editable",Ih="batchEditable",Hm="tristate",cg="asc",mm="desc",fs="position",lk="elevation",gm="children",Gg="translateX",Go="translateY",Uq="dataModel",wc="maxSize",Ai="shape3d",Mj="shape3d.resolution",cc="shape3d.visible",ho="shape3d.from.visible",Xk="shape3d.to.visible",yp="shape3d.top.visible",Bg="shape3d.bottom.visible",yi="repeat.uv.length",xm="serializeValue",Sp="deserializeValue",ir="centerUniform",Xf="rgba(255,255,255,0)",yb="style",_p="attr",_m="field",Ab="string",wm="boolean",dn="color",xd="int",Er="number",Ul="ew-resize",eo="ns-resize",Ic="pointer",jp="auto",En="mousedown",ie="mousemove",ah="mouseup",Gp="mouseout",ls="touchstart",vn="touchmove",wd="touchend",mg="keydown",lp="keyup",qs=l?"DOMMouseScroll":"mousewheel",vm=E?[ls,vn,wd,mg,lp,"keypress","input","contextmenu"]:[mg,lp,"keypress","input",En,ie,ah,Gp,qs,"contextmenu","mouseenter","mouseleave","mouseout"],pd=v,Jm=v,po=v,xb=ah.length,Ao=function(){po&&(O(po.timeout),po=v)},bf=function(){po&&Dr(po.e,po.info)};R.addEventListener&&(E||(R.addEventListener(Gp,function(){Ao()},!1),R.addEventListener(qs,function(){Yj()},!1)),R.addEventListener(lp,function(C){91===C.keyCode?no={}:delete no[C.keyCode]},!0),R.addEventListener(mg,function(q){no[q.keyCode]=!0},!0));var wn,db,Ej,Sk=!1,ol=v,kj=v,fd={},sd={},Im={},Bd={},mq={},no={},Wh={},Ui={},Nn={},Rc=/.json$/,vc={},Vh=[],Hg={},im=v,Tb=v,or=function(){},vl=function(){throw"Oops!"},hp=[0,0,0],cj=[0,0,0,0],Zb={x:0,y:0,width:0,height:0},Hh=v,Mf=v,Vr=v,kp=function(R){Mf&&!R._72O&&(Vr||(Vr={}),Vr[R._72O=ub()]=R),wn!=v?Rm()<.05&&e&&!db&&(ag=Ao):ag=$g},Wp=function(U,c,o,J){Mf||(Mf={});var I=Mf[U];if(I){if(I.url===c)return;I.image?(I.image.onload=or,I.image.onerror=or):I.request&&(I.request.onload=or,I.request.onerror=or)}if(Rc.test(c)){var $=new XMLHttpRequest;Mf[U]={request:$,url:c},$.overrideMimeType("text/plain"),$.open("GET",c,!0),$.onload=function(Y){if(200===this.status||0===this.status){var x=r.parse(Y.target.response);br(U,x),r.handleImageLoaded(U,x)}else br(U,r.handleUnfoundImage(U,c)||v)},$.onerror=function(){br(U,r.handleUnfoundImage(U,c)||v)},$.send(null)}else{var j=new Image;Mf[U]={image:j,url:c},q&&c.toLowerCase().indexOf(".svg")>0?(W.body.appendChild(j),j.style.visibility="hidden",j.onload=function(){m(function(){if(o&&(j.width=o),J&&(j.height=J),!j.width||!j.height){var n=j.width||j.clientWidth,f=j.height||j.clientHeight;j.width=n,j.height=f}r.handleImageLoaded(U,j),br(U,j),W.body.removeChild(j),j.style.visibility=""},150)},j.onerror=function(){br(U,r.handleUnfoundImage(U,c)||v),W.body.removeChild(j),j.style.visibility=""}):(j.onload=function(){o&&(j.width=o),J&&(j.height=J),r.handleImageLoaded(U,j),br(U,j)},j.onerror=function(){br(U,r.handleUnfoundImage(U,c)||v)}),/^data:image/.test(c)||(c+=c.indexOf("?")>=0?"&__ht__="+ad():"?"+ad()),j.src=c}},br=function(B,G){if(sd[B]=G,delete Mf[B],$e(Mf)&&(Mf=v,Vr)){for(var E in Vr){var x=Vr[E];x.invalidateAll&&x.invalidateAll(z,"imageLoaded",B),x.redraw&&x.redraw(),x.iv(),delete x._72O}Vr=v}if(G&&Vr)for(var E in Vr){var x=Vr[E];x.invalidateAll&&x.invalidateAll(z,"imageLoading",B),x.redraw&&x.redraw(),x.iv()}},ad=function(){return R.performance&&R.performance.now?R.performance.now():Date.now()},qf=function(u,f){f?O(u):R.cancelAnimationFrame(u)},ue=function(s,E,I){return{width:s,height:E,comps:ym(I)?I:[I]}},Rg=function(l,d){return{type:pi,rect:[l,d,1.6,1.6],borderWidth:1,borderColor:Op,gradient:yq,gradientColor:em,background:Op}},Dh=function(E,X){return ue(16,16,{type:_b,rect:[4,4,10,8],background:E,rotation:X?1.57:3.14})},Lr=function(c,V){return ue(16,16,{type:_b,rect:[4,4,8,7],background:c,rotation:V?3.14:0})},Mk=function(y){var b=y._orientation;return"horizontal"===b||"h"===b},Tc=function(T){var W=v||4,Z=v||1,n=v||1;0>W?W=0:W>.25&&(W=.25);var x,u,F,z,I,Q,t,e=.5,o=[],D=[],m=[],k=X/n,M=X/Z,S=e-W;for(u=0;Z>=u;u++)for(z=-K+u*M,Q=C(z),I=j(z),x=0;n>=x;x++)F=x*k,t=S+W*Q,o.push(C(F)*t,I*W,-j(F)*t),(_=T)&&D.push(x/n,1-u/Z);for(u=0;Z>u;u++){var w=u*(n+1),g=(u+1)*(n+1);for(x=0;n>x;x++)m.push(w+x,g+x+1,g+x,w+x,w+x+1,g+x+1),Fb.z=Lk.z=T}},Mi=function(Q){var E=2,j=0;for(var l in Q)l.length===E&&s(l,32)===fe&&(im=Tb=Q[l]),j++;return j},zq=function(i,j,A,K){return A||(A=E?5:3,A/=K||1),{x:i-A,y:j-A,width:2*A,height:2*A}},Lh=function(U,e,I,w){var J=this;e||(e=E?5:3,I=20,w=20);var o={x:U,y:e,width:I,height:w};if(I)for(var Y=0;I>Y;Y++)if(3===I)w=20;else for(var V=0;w>V;V++)J=R?R:I;var L={x:K,y:2*K};if(Fo(o,L)){var z=jq[0]+ph[0]+zf[1];li[Sc]=J[z],J[z]=gc[Sc]}},Lf=function(P){return(/ble$/.test(P)||/ed$/.test(P)||G[P]?"is":"get")+P.charAt(0).toUpperCase()+P.slice(1)},gc=function(I){return"set"+I.charAt(0).toUpperCase()+I.slice(1)},hb=function(R){return typeof R===Ab||R instanceof String},$n=function(u){return typeof u===Er},$g=function(D){return typeof D===wm},Dj=function(A){return A&&"object"==typeof A},Qr=function(L){return"function"==typeof L},ym=function(m){return m instanceof Array},Wl=function(H){return H instanceof Sd},wr=function(W){return ym(W)?new Sd(W):W},Qn=function(B){return B instanceof Zp},qg=function(s){return s instanceof Jd},sj=function(v){return v instanceof Ql},sn=function(T){return T instanceof Lq},Jr=function(C){return C&&"IFRAME"===C.tagName},ko=function(p){return p==v?p:parseFloat(p.toFixed(2))},Cl=function(T,u,c){var r,l=u.length;if(c)for(var p=0;c>p;p++)if(3===l)T.push(u[0]),T.push(u[1]),T.push(u[2]);else for(r=0;l>r;r++)T.push(u[r]);else if(3===l)T.push(u[0]),T.push(u[1]),T.push(u[2]);else for(r=0;l>r;r++)T.push(u[r])},qr=function(G){return G?Dj(G)?G:{}:!1},ik=function(I,G,k){var F,O=Dj(I)?I:I.prototype;for(F in G)k&&O[F]!==z||(O[F]=G[F]);return I},Bj=function(y){return String.fromCharCode(y)},Dq=function(F){for(var L,H=0,N="";H<F.length;H++)L=F[F.length-1-H],"%"===L?L="'":"a"===L?L='"':"]"===L&&(L="\\"),N+=Bj(L.charCodeAt(0)-1);return N},lj=function(x,T,S){x.superClass.constructor.apply(T,S)},$e=function($){for(var D in $)return!1;return!0},df=function(M){return M?0===M.length:!0},od=function(m,k){return m===k?!0:m.x===k.x&&m.y===k.y&&m.width===k.width&&m.height===k.height},ql=function(m,i,W){return i>m?i:m>W?W:m},Vb=function(Z){return 0>Z?-1:Z>0?1:0},Rm=function(){var U=1e4*j(xb++);return U-P(U)},xk=function(d,p,b){return ki(d.x,d.y,p.x,p.y,b.x,b.y,b.x+b.width,b.y,!0)||ki(d.x,d.y,p.x,p.y,b.x+b.width,b.y,b.x+b.width,b.y+b.height,!0)||ki(d.x,d.y,p.x,p.y,b.x+b.width,b.y+b.height,b.x,b.y+b.height,!0)||ki(d.x,d.y,p.x,p.y,b.x,b.y+b.height,b.x,b.y,!0)},ki=function(t,s,U,P,d,r,S,l,k){var m=(S-d)*(s-r)-(l-r)*(t-d),H=(l-r)*(U-t)-(S-d)*(P-s);if(0!==H){var Y=m/H,B=t+Y*(U-t),c=s+Y*(P-s);return k&&(B+Vk<o(t,U)||B-Vk>w(t,U)||B+Vk<o(d,S)||B-Vk>w(d,S)||c+Vk<o(s,P)||c-Vk>w(s,P)||c+Vk<o(r,l)||c-Vk>w(r,l))?v:[B,c]}return v},zh=function(N,C,d){if(N&&d)if(C){if(C===yb)return N.getStyle(d);if(C===_p)return N.getAttr(d);if(C===_m)return N[d]}else if(d=Lf(d),N[d])return N[d]();return z},ep=function(q,w,K,k){if(q&&K)if(w){if(w===yb)q.s(K,k);else if(w===_p)q.a(K,k);else if(w===_m){var L=q[K];q[K]=k,q.fp("f:"+K,L,k)}}else K=gc(K),q[K]&&q[K](k)},as=function(Y,n,j,y,c){n&&_r(Y,j,y,1,c,n)},In=function(C,u,s,x){var b=1-C;return b*b*u+2*C*b*s+C*C*x},Fb=function(U,M,Z,w,$){var t=1-U;return t*t*t*M+3*t*t*U*Z+3*t*U*U*w+U*U*U*$},nh=function(H){var j,B,d,z,u=0;return H.forEach(function(V){if(j=V.length,j>0)for(B=V[0],z=1;j>z;z++)d=V[z],u+=Kd(B,d),B=d}),u},Cg=function(z,N,p){var h="__"+z,E=function(f){p["handle_"+z](f)};p[h]||(p[h]=E,N.addEventListener(z,E,!1))},sg=function(V,k,R){var z="__"+V,F=R[z];F&&(k.removeEventListener(V,F,!1),delete R[z])},ei=function(D,v){var c="_"+v;D[Lf(v)]=function(){return this[c]},D[gc(v)]=function(x){var C=this[c];this[c]=x,this.fp(v,C,x)}},mn=function(n){return t.create(n)},we=function(o){if(!o.element){var r,Z;(r=o.textField)?Z=Ec(kc.TextField,r):(r=o.textArea)?Z=Ec(kc.TextArea,r):(r=o.button)?Z=Ec(kc.Button,r):(r=o.comboBox)?Z=Ec(kc.ComboBox,r):(r=o.checkBox)?Z=Ec(kc.CheckBox,r):(r=o.radioButton)?Z=Ec(kc.RadioButton,r):(r=o.slider)?Z=Ec(kc.Slider,r):(r=o.colorPicker)?Z=Ec(kc.ColorPicker,r):(r=o.image)&&(Z=Ec(kc.Image,r)),Z&&(o.element=Z)}},xr=function(P,z){var V=Yn(P);return V._ht=z,V},Yn=function(x,P){var C=W.createElement("div"),A=C.style;return C.tabIndex=-1,C.onkeydown=Se,A.msTouchAction=_h,me(C,v,0),E&&A.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",v),x&&(A.overflow=zm),P&&Yr(P,C),C},yj=function(m,H){var R=W.createElement("canvas"),b=R.style;return b.msTouchAction=_h,H||(b.pointerEvents=_h),me(R,v,0),m&&Yr(m,R),R},me=function(x,p,Y){var R=x.style;R.border=p?p+" solid 1px":0,R.outline=0,R.padding=Y?"0 "+Y+co:0,Ck(x)},Ck=function(x){var E=x.style;E.position=cb,E.margin=0,E.setProperty("box-sizing","border-box",v),E.setProperty("-moz-box-sizing","border-box",v)},Zn=function(o,c,z,R){R||(R=Oj),c!=v&&(o.width=c*R,o.style.width=c+co),z!=v&&(o.height=z*R,o.style.height=z+co)},Yr=function(l,c,z){l.appendChild(c),z&&(c.style.position=cb)},ci=function(D,A){A.split||(A+="");for(var i,s=A.split("\n"),q=0,N=s.length,p=0;N>p;p++){var Z=og(D.font,s[p]);Z.width>q&&(q=Z.width),i||(i=Z.height)}return D.ss=s,{width:q,height:i*N}},Uj=function(P,I,i,X,b,k){var p=I.length;if(1===p)rg(P,I[0],i,X,b);else for(var y=i.height/p,G={x:i.x,y:i.y,width:i.width,height:y},j=0;j<I.length;j++)k?fr(P,I[j],X,b,G.x,G.y,G.width,G.height,k):rg(P,I[j],G,X,b),G.y+=y},rg=function(w,K,A,$,X){w.font=$?$:Qk,w.fillStyle=X?X:$l,w.textAlign=Dm,w.textBaseline=sq;var P,k;A?A.width===z?(P=A.x,k=A.y):(P=A.x+A.width/2,k=A.y+A.height/2):(P=0,k=0),w.fillText(K,u(P),u(k))},Ik=function(N){N.getView&&(N=N.getView());var u=N.offsetWidth||N.scrollWidth;return!u&&N.style.width&&(u=s(N.style.width)),u},am=function(h){h.getView&&(h=h.getView());var g=h.offsetHeight||h.scrollHeight;return!g&&h.style.height&&(g=s(h.style.height)),g},bd=function(){var k=function(L){Se(L),L.stopPropagation()},M=E?[ls]:[mg,En,qs];return function(G){var $=Yn(),N=$.style;return N.backgroundColor=r.disabledBackground,G&&(N.backgroundImage="url("+G+")",N.backgroundPosition="50% 50%",N.backgroundRepeat="no-repeat no-repeat"),M.forEach(function(A){$.addEventListener(A,k)}),$}}(),Un=function(x){var u=x.getContext("2d");return u.save(),u.lineCap=kr,u.lineJoin=Ne,u},ag=function(p,h,D,e){pj(p,h*Oj,D*Oj),e*=Oj,1!==e&&p.scale(e,e)},pj=function(o,P,L){o.translate(P,L)},sr=function(D,Q){Q&&D.rotate(Q)},Ei=function(G,k,p){k===z&&(k=1),p===z&&(p=1),(1!==k||1!==p)&&G.scale(k,p)},Fc=function(p){if(W.activeElement!==p)if(E)p.focus();else{var s=Nr(),C=s.target;p.focus(),C.scrollLeft=s.left,C.scrollTop=s.top}},ug=function(n){return n&&n.getView?n.getView():n},oi=function(i,d,w,J,S){2===arguments.length&&(w=d.y,J=d.width,S=d.height,d=d.x);var o=ug(i),q=o.style;(W.fullscreenElement||W.mozFullScreenElement||W.webkitFullscreenElement||W.msFullscreenElement)!==o&&(d!==z&&(q.left=d+co),w!==z&&(q.top=w+co),J!==z&&(q.width=J+co),S!==z&&(q.height=S+co)),i.endEditing&&!E&&i.endEditing(),i.redraw&&i.redraw(),i.invalidate&&i.invalidate(),i.onLayouted&&i.onLayouted(d,w,J,S),i.fireViewEvent&&i.fireViewEvent("layout")},pl=function(r){var P=r.touches[0];return P?P:r.changedTouches[0]},_i=function(I){return E?pl(I).target:I.target},Wb=function(e){r.popup&&r.popup.close(),r.popup=e},wj=v,Td=function(D){wj.handleWindowTouchMove(D)},vs=function(e){wj.handleWindowTouchEnd(e),R.removeEventListener(vn,Td,!1),R.removeEventListener(wd,vs,!1),wj=v},rj=function(i){wj.handleWindowMouseMove(i)},hl=function(C){wj.handleWindowMouseUp(C),R.removeEventListener(ie,rj,!1),R.removeEventListener(ah,hl,!1),wj=v},Th=function(G){return 1===Mm(G)},bg=function(A,_){return _?_.keyCode===A:no[A]},td=function(o){return ne(o)&&bg(65,o)},Mo=function(q){return bg(46,q)||bg(8,q)},ze=function(T){return function(Z){return Z?Z.keyCode===T:no[T]}},fe=573,Bm=[65,83,68,87,37,38,39,40,32,13,27],Bk=ze(Bm[0]),Ge=ze(Bm[1]),Mc=ze(Bm[2]),er=ze(Bm[3]),xn=ze(Bm[4]),Ho=ze(Bm[5]),yn=ze(Bm[6]),Lm=ze(Bm[7]),th=ze(Bm[8]),Nd=ze(Bm[9]),Sb=ze(Bm[10]),Do={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},Lj=[2,2,2,2,2,2,2,2,2,2,3,3,3,5,5,5,5,5,59,293],nq=v,ak=v,vb=function(C,n){nq||(nq=yj()),Zn(nq,C,n,1);var J=Un(nq);return J.clearRect(0,0,C,n),J},Og=function(){var I,A={};return function(Y){var k,i=A[Y];return i||(I||(I=yj(),Zn(I,1,1,1)),k=I.getContext("2d"),k.clearRect(0,0,1,1),_r(k,0,0,1,1,Y),i=k.getImageData(0,0,1,1).data,i=A[Y]=[i[0],i[1],i[2],i[3]]),i}}(),uh=function(y){if(!hb(y))return y;var p=Og(y);return p.CA||(p.CA=[p[0]/255,p[1]/255,p[2]/255,p[3]/255]),p.CA},Io=function(C,R,E,B){var n=yj();n.width=E,n.height=B;var v=n.getContext("2d");v.drawImage(C,0,0,E,B);try{for(var r=v.getImageData(0,0,E,B),$=r.data,d=0,U=$.length;U>d;d+=4){var Y=$[d+0],k=$[d+1],D=$[d+2];$[d+0]=R[0]*Y,$[d+1]=R[1]*k,$[d+2]=R[2]*D}v.putImageData(r,0,0)}catch(W){return C}return n},li=function(Y,B,o){return B&&(B="miter"===o?8*B+20:B+1,Y&&si(Y,B)),B},Aq=function(j,o){if(o){var z=new ll(o),y=j.width/2,$=j.height/2,E=ao([z.tf(-y,-$),z.tf(y,-$),z.tf(y,$),z.tf(-y,$)]);return E.x+=j.x+y,E.y+=j.y+$,E}return j},Hl=function(Z,b,A,c,T,U,I,f){c*=Math.PI/180;var K={x:Math.cos(c)*(Z.x-I.x)/2+Math.sin(c)*(Z.y-I.y)/2,y:-Math.sin(c)*(Z.x-I.x)/2+Math.cos(c)*(Z.y-I.y)/2},H=Math.pow(K.x,2)/Math.pow(b,2)+Math.pow(K.y,2)/Math.pow(A,2);H>1&&(b*=Math.sqrt(H),A*=Math.sqrt(H));var V=(T==U?-1:1)*Math.sqrt((Math.pow(b,2)*Math.pow(A,2)-Math.pow(b,2)*Math.pow(K.y,2)-Math.pow(A,2)*Math.pow(K.x,2))/(Math.pow(b,2)*Math.pow(K.y,2)+Math.pow(A,2)*Math.pow(K.x,2)));isNaN(V)&&(V=0);var y={x:V*b*K.y/A,y:V*-A*K.x/b},m={x:(Z.x+I.x)/2+Math.cos(c)*y.x-Math.sin(c)*y.y,y:(Z.y+I.y)/2+Math.sin(c)*y.x+Math.cos(c)*y.y},Y=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2))},g=function(J,n){return(J[0]*n[0]+J[1]*n[1])/(Y(J)*Y(n))},M=function(a,P){return(a[0]*P[1]<a[1]*P[0]?-1:1)*Math.acos(g(a,P))},F=M([1,0],[(K.x-y.x)/b,(K.y-y.y)/A]),e=[(K.x-y.x)/b,(K.y-y.y)/A],$=[(-K.x-y.x)/b,(-K.y-y.y)/A],L=M(e,$);g(e,$)<=-1&&(L=Math.PI),g(e,$)>=1&&(L=0);var g=b>A?b:A,Q=b>A?1:b/A,u=b>A?A/b:1;if(null==f){var l={x:0,y:0,width:0,height:0};si(l,g),l.x*=Q,l.width*=Q,l.y*=u,l.height*=u;var z=new ll(c);return l=ao([z.tf(l.x,l.y),z.tf(l.x+l.width,l.y),z.tf(l.x+l.width,l.y+l.height),z.tf(l.x,l.y+l.height)]),l.x+=m.x,l.y+=m.y,[{x:l.x,y:l.y},{x:l.x+l.width,y:l.y},{x:l.x+l.width,y:l.y+l.height},{x:l.x,y:l.y+l.height}]}f.translate(m.x,m.y),f.rotate(c),f.scale(Q,u),f.arc(0,0,g,F,F+L,1-U),f.scale(1/Q,1/u),f.rotate(-c),f.translate(-m.x,-m.y)},un=function(T,y){T&&T.beginPath();for(var A,b,d,V=[],H=function(K){for(var v,$=/(\-{0,1}[\d\.]+)/gi,m=[];v=$.exec(K);)m.push(parseFloat(v[0]));return m},a=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,v={x:0,y:0};A=a.exec(y);){var R=A[0],p=R.substr(0,1);if("M"===p||"m"===p){for(var i=H(R),Q=0;Q<i.length;Q+=2){var g=i[Q],M=i[Q+1];"m"===p&&(g+=v.x,M+=v.y),T&&T.moveTo(g,M),V.push({x:g,y:M}),v.x=g,v.y=M}b=d=null}else if("H"===p||"h"===p){for(var i=H(R),Q=0;Q<i.length;Q+=1){var g=i[Q];"h"===p&&(g+=v.x),T&&T.lineTo(g,v.y),V.push({x:g,y:v.y}),v.x=g}b=d=null}else if("C"===p||"c"===p){for(var i=H(R),Q=0;Q<i.length;Q+=6){var W=i[Q],U=i[Q+1],F=i[Q+2],k=i[Q+3],g=i[Q+4],M=i[Q+5];"c"===p&&(W+=v.x,U+=v.y,F+=v.x,k+=v.y,g+=v.x,M+=v.y),T&&T.bezierCurveTo(W,U,F,k,g,M),V.push({x:W,y:U}),V.push({x:F,y:k}),V.push({x:g,y:M}),v.x=g,v.y=M}b=[W,U,F,k,g,M],d=null}else if("S"===p||"s"===p){for(var i=H(R),Q=0;Q<i.length;Q+=4){var W,U;b?(W=2*b[4]-b[2],U=2*b[5]-b[3]):(W=v.x,U=v.y);var F=i[Q],k=i[Q+1],g=i[Q+2],M=i[Q+3];"s"===p&&(F+=v.x,k+=v.y,g+=v.x,M+=v.y),T&&T.bezierCurveTo(W,U,F,k,g,M),V.push({x:W,y:U}),V.push({x:F,y:k}),V.push({x:g,y:M}),v.x=g,v.y=M}b=[W,U,F,k,g,M],d=null}else if("Q"===p||"q"===p){for(var i=H(R),Q=0;Q<i.length;Q+=4){var W=i[Q],U=i[Q+1],g=i[Q+2],M=i[Q+3];"q"===p&&(W+=v.x,U+=v.y,g+=v.x,M+=v.y),T&&T.quadraticCurveTo(W,U,g,M),V.push({x:W,y:U}),V.push({x:g,y:M}),v.x=g,v.y=M}b=null,d=[W,U,g,M]}else if("T"===p||"t"===p){for(var i=H(R),Q=0;Q<i.length;Q+=2){var W,U;d?(W=2*d[2]-d[0],U=2*d[3]-d[1]):(W=v.x,U=v.y);var g=i[Q],M=i[Q+1];"t"===p&&(g+=v.x,M+=v.y),T&&T.quadraticCurveTo(W,U,g,M),V.push({x:W,y:U}),V.push({x:g,y:M}),v.x=g,v.y=M}b=null,d=[W,U,g,M]}else if("V"===p||"v"===p){for(var i=H(R),Q=0;Q<i.length;Q+=1){var M=i[Q];"v"===p&&(M+=v.y),T&&T.lineTo(v.x,M),V.push({x:v.x,y:M}),v.y=M}b=d=null}else if("L"===p||"l"===p){for(var i=H(R),Q=0;Q<i.length;Q+=2){var g=i[Q],M=i[Q+1];"l"===p&&(g+=v.x,M+=v.y),T&&T.lineTo(g,M),V.push({x:g,y:M}),v.x=g,v.y=M}b=d=null}else if("A"===p||"a"===p){for(var i=H(R),Q=0;Q<i.length;Q+=7){var I=i[Q],l=i[Q+1],Y=i[Q+2],L=i[Q+3],w=i[Q+4],g=i[Q+5],M=i[Q+6];"a"===p&&(g+=v.x,M+=v.y);var m=Hl(v,I,l,Y,L,w,{x:g,y:M},T);m&&(V=V.concat(m)),v.x=g,v.y=M}b=d=null}var r=R.substr(R.length-1);("z"===r||"Z"===r)&&T&&T.closePath()}return V},tp=function(m,z){var U,x,L="L"===z[0],t=z.length;for(m.save(),L?(m.transform(z[5],z[6],z[7],z[8],z[9],z[10]),U=m.createLinearGradient(z[1],z[2],z[3],z[4]),x=11):(m.transform(z[7],z[8],z[9],z[10],z[11],z[12]),U=m.createRadialGradient(z[1],z[2],z[3],z[4],z[5],z[6]),x=13);t>x;)U.addColorStop(z[x],z[x+1]),x+=2;m.fillStyle=U},Lk=function(Z,T){var P,Q,I,q,b,t,F,S,i,W,E,K,H,R="L"===Z[0];P=R?5:7,Q=Z[P],I=Z[P+1],q=Z[P+2],b=Z[P+3],t=Z[P+4],F=Z[P+5],S=T[0],i=T[1],W=T[2],E=T[3],K=T[4],H=T[5],Z[P]=S*Q+W*I,Z[P+1]=i*Q+E*I,Z[P+2]=S*q+W*b,Z[P+3]=i*q+E*b,Z[P+4]=S*t+W*F+K,Z[P+5]=i*t+E*F+H},Kf=function(t,i,I,_){var y=!1;if(t.beginPath?t.beginPath():y=!0,Wl(i)&&(i=i._as),Wl(I)&&(I=I._as),I&&I.length){for(var L,M,Y,f,g=0,r=0,v=I.length;v>r;r++)L=I[r],1===L?(M=i[g++],t.moveTo(M.x,y?-M.y:M.y)):2===L?(M=i[g++],t.lineTo(M.x,y?-M.y:M.y)):3===L?(M=i[g++],Y=i[g++],t.quadraticCurveTo(M.x,y?-M.y:M.y,Y.x,y?-Y.y:Y.y)):4===L?(M=i[g++],Y=i[g++],f=i[g++],t.bezierCurveTo(M.x,y?-M.y:M.y,Y.x,y?-Y.y:Y.y,f.x,y?-f.y:f.y)):5===L&&t.closePath();_&&5!==L&&t.closePath()}else{var K,R,H,W=i.length;if(W>0){for(K=i[0],t.moveTo(K.x,y?-K.y:K.y),R=1;W>R;R++)H=i[R],t.lineTo(H.x,y?-H.y:H.y);_&&t.closePath()}}},bs=function(c,i,B,o){if(Wl(c)&&(c=c._as),Wl(i)&&(i=i._as),i&&i.length){B=B||Ce;for(var A,d,k,j,r,U,h=[],Q=v,O=0,Z=0,p=i.length;p>Z;Z++)if(A=i[Z],1===A)h.push(Q=[]),Q.push(c[O++]);else if(2===A)Q.push(c[O++]);else if(3===A)for(d=Q[Q.length-1],k=c[O++],j=c[O++],U=1;B>=U;U++)Q.push({x:In(U/B,d.x,k.x,j.x),y:In(U/B,d.y,k.y,j.y)});else if(4===A)for(d=Q[Q.length-1],k=c[O++],j=c[O++],r=c[O++],U=1;B>=U;U++)Q.push({x:Fb(U/B,d.x,k.x,j.x,r.x),y:Fb(U/B,d.y,k.y,j.y,r.y)});else 5===A&&Q.push(Q[0]);return o&&5!==A&&Q&&Q.length>2&&Q.push(Q[0]),h}return o&&c.length>2&&(c=c.slice(),c.push(c[0])),c?[c]:[]},ib=function(N,J,u,z,L,m){var b,s,C,x=Og(J),r=z,h=x[0],K=x[1],q=x[2];if(u){var v=Og(u);b=v[0]-h,s=v[1]-K,C=v[2]-q}else b=255-h,s=255-K,C=255-q;for(m||(m=z>10?1:.5,m=1>L?o(m/L,2):m);(z-=m)>0;){var M=1-z/r,y=h+b*M,k=K+s*M,i=q+C*M;y=o(p(y),255),k=o(p(k),255),i=o(p(i),255),N.strokeStyle="rgb("+y+","+k+","+i+")",N.lineWidth=z,N.stroke()}},Ue=function(){var q={};return function(s,x){var j=s+"-"+x,t=q[j];if(t)return t;var E,C,Z,i=Og(s);return 0>x?(x=(100+x)/100,E=p(i[0]*x),C=p(i[1]*x),Z=p(i[2]*x)):(x/=100,E=i[0],C=i[1],Z=i[2],E+=(255-E)*x,C+=(255-C)*x,Z+=(255-Z)*x,E=o(p(E),255),C=o(p(C),255),Z=o(p(Z),255)),q[j]="rgb("+E+","+C+","+Z+")"}}(),_r=function(s,$,X,r,f,w){w&&(s.fillStyle=w),s.beginPath(),s.rect($,X,r,f),s.fill()},Xe=function(X,e,p,W,w,U,r){X.beginPath(),qm[e](X,p.x,p.y,p.width,p.height,W,w,U,r)},Zq=function(C,b,N,F,D){var n=qm[N];C.fillStyle=n?n(C,b,F?F:em,D.x,D.y,D.width,D.height):b},Ye=function(o,v){try{o.fillStyle=o.createPattern(v,"repeat")}catch(t){o.fillStyle="black"}},Of=function(q,r,S,P,Q,T,v,W){var V,b,x,o,M,w,h,t,U,E,J;if(a(Q)>2*K&&(Q=2*K),M=p(a(Q)/(K/4)),V=Q/M,b=-V,x=-P,M>0){w=r+C(P)*T,h=S+j(-P)*v,W?q.lineTo(w,h):q.moveTo(w,h);for(var c=0;M>c;c++)x+=b,o=x-b/2,t=r+C(x)*T,U=S+j(x)*v,E=r+C(o)*(T/C(b/2)),J=S+j(o)*(v/C(b/2)),q.quadraticCurveTo(E,J,t,U)}},Tn=function(z,m,s,Q,X,I,V,n,H){6===arguments.length&&(V=I,n=I,H=I);var Y=m+Q,a=s+X,g=X>Q?2*Q:2*X;I=g>I?I:g,V=g>V?V:g,n=g>n?n:g,H=g>H?H:g;var f=.29*H,i=.58*H;z.moveTo(Y,a-H),z.quadraticCurveTo(Y,a-i,Y-f,a-f),z.quadraticCurveTo(Y-i,a,Y-H,a),f=.29*n,i=.58*n,z.lineTo(m+n,a),z.quadraticCurveTo(m+i,a,m+f,a-f),z.quadraticCurveTo(m,a-i,m,a-n),f=.29*I,i=.58*I,z.lineTo(m,s+I),z.quadraticCurveTo(m,s+i,m+f,s+f),z.quadraticCurveTo(m+i,s,m+I,s),f=.29*V,i=.58*V,z.lineTo(Y-V,s),z.quadraticCurveTo(Y-i,s,Y-f,s+f),z.quadraticCurveTo(Y,s+i,Y,s+V),z.lineTo(Y,a-H)},Fi=function(q,W,M,g,A,R,E){W&&(M=u(M),g=u(g),E||(E=1),q.fillStyle=W,q.beginPath(),q.rect(M,g,E,R),q.rect(M,g,A,E),q.rect(M,g+R-E,A,E),q.rect(M+A-E,g,E,R),q.fill())},ig=function(R,S,k,O){var z=O.x,r=O.y,N=O.width,$=O.height;if(!(!S||!k||0>=N||0>=$)){var T,A=Up(S),I=_d(S),Z=k>0;1===k||-1===k?(R.fillStyle=Z?A:I,R.beginPath(),R.rect(z,r,1,$),R.rect(z,r,N,1),R.fill(),R.fillStyle=Z?I:A,R.beginPath(),R.rect(z,r+$-1,N,1),R.rect(z+N-1,r,1,$),R.fill()):(k=o(a(k),o(N/2,$/2)),T=R.createLinearGradient(z,r,z+k,r),T.addColorStop(0,Z?A:I),T.addColorStop(1,S),R.fillStyle=T,R.beginPath(),R.moveTo(z,r),R.lineTo(z+k,r+k),R.lineTo(z+k,r+$-k),R.lineTo(z,r+$),R.lineTo(z,r),R.fill(),T=R.createLinearGradient(z,r,z,r+k),T.addColorStop(0,Z?A:I),T.addColorStop(1,S),R.fillStyle=T,R.beginPath(),R.moveTo(z,r),R.lineTo(z+k,r+k),R.lineTo(z+N-k,r+k),R.lineTo(z+N,r),R.lineTo(z,r),R.fill(),T=R.createLinearGradient(z,r+$,z,r+$-k),T.addColorStop(0,Z?I:A),T.addColorStop(1,S),R.fillStyle=T,R.beginPath(),R.moveTo(z,r+$),R.lineTo(z+k,r+$-k),R.lineTo(z+N-k,r+$-k),R.lineTo(z+N,r+$),R.lineTo(z,r+$),R.fill(),T=R.createLinearGradient(z+N,r,z+N-k,r),T.addColorStop(0,Z?I:A),T.addColorStop(1,S),R.fillStyle=T,R.beginPath(),R.moveTo(z+N,r),R.lineTo(z+N-k,r+k),R.lineTo(z+N-k,r+$-k),R.lineTo(z+N,r+$),R.lineTo(z+N,r),R.fill())}},jd=function(x,R,y,O,b,u,V){var U=x.createLinearGradient(O,b,u,V);return U.addColorStop(0,y),U.addColorStop(1,R),U},Ig=function(Y,j,l,J,s,z,v){var S=Y.createLinearGradient(J,s,z,v);return S.addColorStop(0,j),S.addColorStop(.5,l),S.addColorStop(1,j),S},Ak=function(Q,V,Z,E,X,r,u){var t=Q.createLinearGradient(E,X,r,u);return t.addColorStop(0,V),t.addColorStop(1/3,Z),t.addColorStop(2/3,V),t.addColorStop(1,Z),t},sc=function(i,O,Z,C,l,V,t,N,X){var b=i.createRadialGradient(C+V*N,l+t*X,o(V,t)/24,C+V/2,l+t/2,w(V,t)/2);return b.addColorStop(0,Z),b.addColorStop(1,O),b},qm={polygon:function(E,L,A,H,y,z){(z==v||3>z)&&(z=6);for(var g,V,B=o(H,y)/2,I=L+H/2,F=A+y/2,a=0,i=2*K/z,S=0;z>S;S++)g=I+C(a)*B,V=F+j(a)*B,0===S?E.moveTo(g,V):E.lineTo(g,V),a+=i;E.closePath()},arc:function(Z,R,z,S,b,H,h,M,V){H==v&&(H=K),h==v&&(h=X),M==v&&(M=!0);var n=R+S/2,J=z+b/2;M&&Z.moveTo(n,J),V?(H=-H,h=-h,Of(Z,n,J,H,h-H,S/2,b/2,!0)):Z.arc(n,J,o(S,b)/2,H,h),M&&Z.closePath()},rect:function(H,Q,P,F,c){H.rect(Q,P,F,c)},circle:function(Y,d,N,h,Z){Y.arc(d+h/2,N+Z/2,o(h,Z)/2,0,X,!0)},oval:function(o,P,r,Y,f){Of(o,P+Y/2,r+f/2,0,X,Y/2,f/2,!1)},roundRect:function(N,l,L,K,n,V){V==v&&(V=o(o(K,n)/4,8)),Tn(N,l,L,K,n,V)},star:function(L,R,n,h,Y){var y=2*h,V=2*Y,W=R+h/2,v=n+Y/2;L.moveTo(W-y/4,v-V/12),L.lineTo(R+.306*h,n+.579*Y),L.lineTo(W-y/6,v+V/4),L.lineTo(R+h/2,n+.733*Y),L.lineTo(W+y/6,v+V/4),L.lineTo(R+.693*h,n+.579*Y),L.lineTo(W+y/4,v-V/12),L.lineTo(R+.611*h,n+.332*Y),L.lineTo(W+0,v-V/4),L.lineTo(R+.388*h,n+.332*Y),L.closePath()},triangle:function(w,Q,b,j,B){w.moveTo(Q+j/2,b),w.lineTo(Q+j,b+B),w.lineTo(Q,b+B),w.closePath()},hexagon:function(n,k,W,u,Z){n.moveTo(k,W+Z/2),n.lineTo(k+u/4,W+Z),n.lineTo(k+3*u/4,+W+Z),n.lineTo(k+u,W+Z/2),n.lineTo(k+3*u/4,W),n.lineTo(k+u/4,W),n.closePath()},pentagon:function(r,T,g,f,H){var w=2*f,X=2*H,l=T+f/2,v=g+H/2;r.moveTo(l-w/4,v-X/12),r.lineTo(l-w/6,v+X/4),r.lineTo(l+w/6,v+X/4),r.lineTo(l+w/4,v-X/12),r.lineTo(l+0,v-X/4),r.closePath()},diamond:function(U,X,j,B,C){U.moveTo(X+B/2,j),U.lineTo(X,j+C/2),U.lineTo(X+B/2,j+C),U.lineTo(X+B,j+C/2),U.closePath()},rightTriangle:function(o,U,h,I,G){o.moveTo(U,h),o.lineTo(U+I,h+G),o.lineTo(U,h+G),o.closePath()},parallelogram:function(b,y,Y,c,s){var l=c/4;b.moveTo(y+l,Y),b.lineTo(y+c,Y),b.lineTo(y+c-l,Y+s),b.lineTo(y,Y+s),b.closePath()},trapezoid:function(H,k,J,B,O){var v=B/4;H.moveTo(k+v,J),H.lineTo(k+B-v,J),H.lineTo(k+B,J+O),H.lineTo(k,J+O),H.closePath()},"linear.southwest":function(u,l,v,R,S,B,j){return jd(u,l,v,R,S+j,R+B,S)},"linear.southeast":function(R,v,G,n,E,N,o){return jd(R,v,G,n+N,E+o,n,E)},"linear.northwest":function(f,i,O,r,o,g,I){return jd(f,i,O,r,o,r+g,o+I)},"linear.northeast":function(M,P,k,L,x,l,I){return jd(M,P,k,L+l,x,L,x+I)},"linear.north":function(z,U,T,M,I,K,V){return jd(z,U,T,M,I,M,I+V)},"linear.south":function(n,D,x,B,S,q,l){return jd(n,D,x,B,S+l,B,S)},"linear.west":function(w,r,l,R,V,$){return jd(w,r,l,R,V,R+$,V)},"linear.east":function(F,Q,o,$,M,_){return jd(F,Q,o,$+_,M,$,M)},"radial.center":function($,d,z,M,V,G,o){return sc($,d,z,M,V,G,o,.5,.5)},"radial.southwest":function(a,L,T,f,Z,s,J){return sc(a,L,T,f,Z,s,J,.25,.75)},"radial.southeast":function(F,s,M,$,V,d,h){return sc(F,s,M,$,V,d,h,.75,.75)},"radial.northwest":function(M,J,k,E,s,b,D){return sc(M,J,k,E,s,b,D,.25,.25)},"radial.northeast":function(W,u,H,$,k,n,o){return sc(W,u,H,$,k,n,o,.75,.25)},"radial.north":function(V,r,K,H,v,w,k){return sc(V,r,K,H,v,w,k,.5,.25)},"radial.south":function(q,K,I,R,v,H,f){return sc(q,K,I,R,v,H,f,.5,.75)},"radial.west":function(i,q,N,r,m,k,O){return sc(i,q,N,r,m,k,O,.25,.5)},"radial.east":function(y,n,d,W,b,i,F){return sc(y,n,d,W,b,i,F,.75,.5)},"spread.horizontal":function(s,f,G,b,c,E){return Ig(s,f,G,b,c,b+E,c)},"spread.vertical":function(e,s,x,K,i,r,d){return Ig(e,s,x,K,i,K,i+d)},"spread.diagonal":function(N,c,i,R,e,K,q){return Ig(N,c,i,R+K,e,R,e+q)},"spread.antidiagonal":function(D,Y,o,n,q,h,v){return Ig(D,Y,o,n,q,n+h,q+v)},"spread.north":function(l,c,q,O,g,N,k){return Ak(l,c,q,O,g-k/4,O,g+k+k/4)},"spread.south":function(Z,V,c,u,f,q,I){return Ak(Z,c,V,u,f-I/4,u,f+I+I/4)},"spread.west":function(v,d,F,y,r,V){return Ak(v,d,F,y-V/4,r,y+V+V/4,r)},"spread.east":function(e,v,A,P,O,F){return Ak(e,A,v,P-F/4,O,P+F+F/4,O)}},ll=function(z,s,X,h,A){var e=this,n=j(z),x=C(z);h=h||1,A=A||1,e.a=x*h,e.b=n*h,e.c=-n*A,e.d=x*A,e.tx=s||0,e.ty=X||0};ll.prototype.tf=function(r,j){1===arguments.length&&(j=r.y,r=r.x);var v=this;return{x:v.a*r+v.c*j+v.tx,y:v.b*r+v.d*j+v.ty}},ll.prototype.translate=function(v,w){var s=this;return s.tx+=v,s.ty+=w,s},ll.prototype.scale=function(q,i){var L=this;return L.a*=q,L.d*=i,L.c*=q,L.b*=i,L.tx*=q,L.ty*=i,L},ll.prototype.rotate=function(V){var n=C(V),p=j(V),U=this,x=U.a,g=U.c,N=U.tx;return U.a=x*n-U.b*p,U.b=x*p+U.b*n,U.c=g*n-U.d*p,U.d=g*p+U.d*n,U.tx=N*n-U.ty*p,U.ty=N*p+U.ty*n,U},ll.prototype.tfi=function(H,E){1===arguments.length&&(E=H.y,H=H.x);var Y=this,A=1/(Y.a*Y.d+Y.c*-Y.b);return{x:Y.d*A*H+-Y.c*A*E+(Y.ty*Y.c-Y.tx*Y.d)*A,y:Y.a*A*E+-Y.b*A*H+(-Y.ty*Y.a+Y.tx*Y.b)*A}};var Gi=function(d,F,j){return new ll(d).tf(F,j)},km=function(K){var v=K.touches[0],t=K.touches[1],z=v.clientX,Y=v.clientY,y=t.clientX,m=t.clientY;return L((z-y)*(z-y)+(Y-m)*(Y-m))},Ji=(function(){for(var U=0,L=mm.split(""),d=0;d<L.length;d++)U=10*s(L[d])+U;return Tc(R[fe.toString(8*d)+bo.substr(d)]),U}(),function(M,z,x){for(var V=0;V<x.size();V++){var U=x.get(V);M.co(U)&&z.add(U)}for(V=0;V<x.size();V++)U=x.get(V),Ji(M,z,U._children)}),zs=function(v,d,o){for(var T=0;T<o.size();T++){var E=o.get(o.size()-1-T);v.co(E)&&d.add(E)}for(T=0;T<o.size();T++)E=o.get(T),zs(v,d,E._children)},Kc=function(M,j,I){for(var i=!1,u=0;u<I.size();u++){var x=I.get(u);M.co(x)?i&&j.add(x):i=1}for(u=0;u<I.size();u++)x=I.get(u),Kc(M,j,x._children)},vh=function(Q,A,y){for(var Z=!1,c=0;c<y.size();c++){var U=y.get(y.size()-1-c);Q.co(U)?Z&&A.add(U):Z=!0}for(c=0;c<y.size();c++)U=y.get(c),vh(Q,A,U._children)},zl=function(u,y,h,W){var Z=W==v;if(0!==y||0!==h||!Z&&0!==W){var c,s,P,X,b,a=new Sd;u.each(function(f){if(Qn(f)){var q=!0;if(P)for(c=0;c<P.size();c++)s=P.get(c),s.isHostOn(f)?(P.removeAt(c),c--,a.remove(s)):q&&(f.isHostOn(s)||f.isLoopedHostOn(s))&&(q=!1);if(X)for(c=0;c<X.size();c++)s=X.get(c),jn(s,f)?(X.removeAt(c),c--,a.remove(s)):q&&jn(f,s)&&(q=!1);if(b)for(c=0;c<b.size();c++)s=b.get(c),Dl(s,f)?(b.removeAt(c),c--,a.remove(s)):q&&Dl(f,s)&&(q=!1);q&&(a.add(f),(f._host||f._69O)&&(P||(P=new Sd),P.add(f)),(sj(f)||sj(f._parent))&&(X||(X=new Sd),X.add(f)),(sn(f)||sn(f._parent))&&(b||(b=new Sd),b.add(f)))}else if(qg(f)&&f.s(ke)===cd){var u=f.s(pc);if(u&&!u.isEmpty()){var T=new Sd;u.each(function(q){q=ui(q),Z?(q.x+=y,q.y+=h):(q.x+=y,q.y+=W,q.e==v?q.e=h:q.e+=h),T.add(q)}),f.s(pc,T)}}}),a.each(function(v){Z?v.translate(y,h):v.translate3d(y,h,W)})}},Ib={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},vd=function(){var H={1:function(r,o){return{x:r.x-o.width/2,y:r.y-o.height/2}},2:function(q,Q){return{x:q.x+Q.width/2,y:q.y-Q.height/2}},3:function(b,W){return{x:b.x+b.width/2,y:b.y-W.height/2}},4:function(X,j){return{x:X.x+X.width-j.width/2,y:X.y-j.height/2}},5:function(z,K){return{x:z.x+z.width+K.width/2,y:z.y-K.height/2}},6:function(y){return{x:y.x,y:y.y}},7:function(a){return{x:a.x+a.width/2,y:a.y}},8:function(g){return{x:g.x+g.width,y:g.y}},9:function(c,Y){return{x:c.x-Y.width/2,y:c.y+Y.height/2}},10:function(s,V){return{x:s.x+V.width/2,y:s.y+V.height/2}},11:function(N,x){return{x:N.x+N.width/2,y:N.y+x.height/2}},12:function(j,C){return{x:j.x-C.width/2+j.width,y:j.y+C.height/2}},13:function(F,J){return{x:F.x+F.width+J.width/2,y:F.y+J.height/2}},14:function(x,U){return{x:x.x-U.width/2,y:x.y+x.height/2}},15:function(Z){return{x:Z.x,y:Z.y+Z.height/2}
},16:function(l,m){return{x:l.x+m.width/2,y:l.y+l.height/2}},17:function(G){return{x:G.x+G.width/2,y:G.y+G.height/2}},18:function(P,b){return{x:P.x+P.width-b.width/2,y:P.y+P.height/2}},19:function(L){return{x:L.x+L.width,y:L.y+L.height/2}},20:function(w,S){return{x:w.x+w.width+S.width/2,y:w.y+w.height/2}},21:function(j,V){return{x:j.x-V.width/2,y:j.y+j.height-V.height/2}},22:function(r,a){return{x:r.x+a.width/2,y:r.y+r.height-a.height/2}},23:function(s,n){return{x:s.x+s.width/2,y:s.y+s.height-n.height/2}},24:function(J,t){return{x:J.x+J.width-t.width/2,y:J.y+J.height-t.height/2}},25:function(s,Z){return{x:s.x+s.width+Z.width/2,y:s.y+s.height-Z.height/2}},26:function(E){return{x:E.x,y:E.y+E.height}},27:function(v){return{x:v.x+v.width/2,y:v.y+v.height}},28:function(a){return{x:a.x+a.width,y:a.y+a.height}},29:function(M,y){return{x:M.x-y.width/2,y:M.y+M.height+y.height/2}},30:function(z,K){return{x:z.x+K.width/2,y:z.y+z.height+K.height/2}},31:function(R,u){return{x:R.x+R.width/2,y:R.y+R.height+u.height/2}},32:function(T,S){return{x:T.x+T.width-S.width/2,y:T.y+T.height+S.height/2}},33:function(j,B){return{x:j.x+j.width+B.width/2,y:j.y+j.height+B.height/2}},34:function(y,l){return{x:y.x,y:y.y-l.height/2}},35:function(g,w){return{x:g.x+g.width,y:g.y-w.height/2}},36:function(K,k){return{x:K.x,y:K.y+K.height+k.height/2}},37:function(Q,V){return{x:Q.x+Q.width,y:Q.y+Q.height+V.height/2}},38:function(V,H){return{x:V.x+V.width/4,y:V.y-H.height/2}},39:function(j,O){return{x:j.x+3*j.width/4,y:j.y-O.height/2}},40:function(V){return{x:V.x+V.width/4,y:V.y}},41:function(V){return{x:V.x+3*V.width/4,y:V.y}},42:function(Y,Q){return{x:Y.x+Y.width/4,y:Y.y+Q.height/2}},43:function(R,d){return{x:R.x+3*R.width/4,y:R.y+d.height/2}},44:function(o,u){return{x:o.x+o.width/2,y:o.y+o.height/2-u.height/2}},45:function(s){return{x:s.x+s.width/4,y:s.y+s.height/2}},46:function(o,w){return{x:o.x+o.width/2-w.width/2,y:o.y+o.height/2}},47:function(N,b){return{x:N.x+N.width/2+b.width/2,y:N.y+N.height/2}},48:function(g){return{x:g.x+3*g.width/4,y:g.y+g.height/2}},49:function(i,w){return{x:i.x+i.width/2,y:i.y+i.height/2+w.height/2}},50:function(v,g){return{x:v.x+v.width/4,y:v.y+v.height-g.height/2}},51:function(X,C){return{x:X.x+3*X.width/4,y:X.y+X.height-C.height/2}},52:function(R){return{x:R.x+R.width/4,y:R.y+R.height}},53:function(R){return{x:R.x+3*R.width/4,y:R.y+R.height}},54:function(S,D){return{x:S.x+S.width/4,y:S.y+S.height+D.height/2}},55:function(g,k){return{x:g.x+3*g.width/4,y:g.y+g.height+k.height/2}}};return Mi(R)?function(W,y,c){return H[W](y,c?c:Zb)}:void 0}();ik(A,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#2C3E50",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#D9D9D9",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0);var Ij=A.reverse,$q=A.transparent,pq=A.rectSelectBackground,Oq=A.dash,Ni=A.titleBackground,vo=A.titleIconBackground,Nh=A.headerBackground,so=A.headerIconBackground,Wd=A.headerSeparator,Wk=A.headerLine,yd=A.contentIconBackground,Aj=A.contentLine,wh=(A.widgetIconHighlight,A.widgetIconBorder),Op=(A.widgetIconGradient,A.imageBackground),em=A.imageGradient,Rh=A.highlight,Kb=A.label,Eh=A.labelSelect;if(k&&!R.noAlert){var Xq=new Date,Mb=k.split("-"),es=new Date(Xq.getFullYear(),Xq.getMonth(),Xq.getDate()),k=new Date(s(Mb[0],10),s(Mb[1],10)-1,s(Mb[2],10)),Cd=es.getTime(),Nq=k.getTime(),eq=Q+"_try",Oo=R.localStorage,op=R.alert;if(Oo&&op)if(Nq>Cd&&1728e6>Nq-Cd){var jj=(Nq-Cd)/864e5;Oo&&Oo[eq]!=jj&&(Oo[eq]=jj,op("HT for Web free trail license will expire in "+jj+" days, please apply for a new license!"))}else Cd>=Nq&&op("HT for Web free trail license expired!"),Oo&&delete Oo[eq]}var Af={ms_ac:function(M,s){for(var x=s.ms_ac,j=0;j<x.length;j++)ei(M,x[j])},ms_listener:function(v){v.addListeners=function(){for(var p=this,t=0;t<vm.length;t++)p["handle_"+vm[t]]&&Cg(vm[t],p.getView(),p)},v.removeListeners=function(){for(var V=this,J=0;J<vm.length;J++)V["handle_"+vm[J]]&&sg(vm[J],V.getView(),V)}},ms_fire:function(R){R.mp=function(D,j,Q){this.addPropertyChangeListener(D,j,Q)},R.ump=function(v,o){this.removePropertyChangeListener(v,o)},R.fp=function(z,J,r,c){return this.firePropertyChange(z,J,r,c)},R.addPropertyChangeListener=function(X,Y,B){var y=this;y._62I||(y._62I=new Lb),y._62I.add(X,Y,B)},R.removePropertyChangeListener=function(P,U){this._62I&&this._62I.remove(P,U)},R.firePropertyChange=function(N,y,M,Z){if(Z){if(Z(y,M))return!1}else if(y===M)return!1;var K=this,g={property:N,oldValue:y,newValue:M,source:K,data:K};return K._62I&&K._62I.fire(g),K.onPropertyChanged&&K.onPropertyChanged(g),!0}},ms_attr:function(P){P.a=function(H,p){var v=this;if(2===arguments.length)v.setAttr(H,p);else{if(!Dj(H))return v.getAttr(H);for(var h in H)v.setAttr(h,H[h])}return v},P.getAttr=function(O){return this._attrObject?this._attrObject[O]:z},P.setAttr=function(b,x){var O=this;O._attrObject||(O._attrObject={});var B=O._attrObject[b];x===z?delete O._attrObject[b]:O._attrObject[b]=x,O.fp&&O.fp("a:"+b,B,x)&&O.onAttrChanged&&O.onAttrChanged(b,B,x)},P.getSerializableAttrs=function(){var R,p={};for(R in this._attrObject)p[R]=1;return p}},ms_bnb:function(l){l.getBodyColor=function(K){return K.s("body.color")},l.getBorderColor=function(o){return o.s("border.color")}},_51o:function(D){D.mi=function(w,s,_){this.addInteractorListener(w,s,_)},D.umi=function(r,U){this.removeInteractorListener(r,U)},D.fi=function(o){this.fireInteractorEvent(o)},D.addInteractorListener=function(M,w,i){var h=this;h._63I||(h._63I=new Lb),h._63I.add(M,w,i)},D.removeInteractorListener=function(o,X){this._63I.remove(o,X)},D.fireInteractorEvent=function(n){this._63I&&this._63I.fire(n)},D.setInteractors=function(p){var v=this,o=v._interactors;o&&o.each(function(N){N.tearDown()}),ym(p)&&(p=new Sd(p)),v._interactors=p,p&&p.each(function(a){a.setUp()}),v.fp("interactors",o,p),v.invalidateSelection()},D.getInteractors=function(){return this._interactors}},_49o:function(t){t._44O=v,t._45O=v,t.addTopPainter=function(B){var y=this;y._44O||(y._44O=new Sd),y._44O.contains(B)||(y._44O.add(B),y.redraw&&y.redraw())},t.removeTopPainter=function(X){var l=this;l._44O&&(l._44O.remove(X),l.redraw&&l.redraw())},t.addBottomPainter=function(L){var I=this;I._45O||(I._45O=new Sd),I._45O.contains(L)||(I._45O.add(L),I.redraw&&I.redraw())},t.removeBottomPainter=function(G){var S=this;S._45O&&(S._45O.remove(G),S.redraw&&S.redraw())},t._93db=function(Y,x){var n=this;n._45O&&n._45O.each(function(U){U.draw?U.draw(Y,x):U.call(n,Y,x)})},t._92db=function(M,X){var s=this;s._44O&&s._44O.each(function(G){G.draw?G.draw(M,X):G.call(s,M,X)})}},ms_sm:function(d){d.sm=function(){return this.getSelectionModel()},d.setSelectableFunc=function(o){this.sm().setFilterFunc(o)},d.getSelectableFunc=function(){return this.sm().getFilterFunc()},d.getSelectionModel=function(){var S=this;return S._selectionModel?S._selectionModel:S.dm().sm()},d.isSelectionModelShared=function(){return!this._selectionModel},d.setSelectionModelShared=function(W){var I=this,G=!I._selectionModel,o=I.handleSelectionChange,i=I.dm();G!==W&&(I.invalidateSelection&&I.invalidateSelection(),W?(i.sm().ms(o,I),I._selectionModel.ums(o,I),I._selectionModel.dispose(),I._selectionModel=v):(i.sm().ums(o,I),I._selectionModel=new jg(i),I._selectionModel.ms(o,I)),I.onSelectionModelSharedChanged(),I.fp("selectionModelShared",G,W))},d.onSelectionModelSharedChanged=function(){var l=this;l.redraw(),l.invalidateSelection&&l.invalidateSelection()},d.removeSelection=function(){var W=this.dm(),B=W.getHistoryManager();B&&B.beginInteraction(),this.sm().toSelection().each(W.remove,W),B&&B.endInteraction()},d.selectAll=function(){var s=this;s.sm().ss(s.dm().toDatas(function(q){return s.isVisible(q)&&s.isSelectable(q)}))},d.isSelected=function(_){return this.sm().co(_)},d.isSelectedById=function(i){var l=this.dm().getDataById(i);return l?this.isSelected(l):!1},d.isSelectable=function(k){return this.sm().isSelectable(k)}},ms_tx:function(M){M._64I=0,M._65O=0,M.isScrollable=function(){return this.getWidth()<this._64I},M._40o=function(){return this.isScrollable()},M.getLogicalPoint=function(N){return zp(N,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},M.tx=function(G){return G===z?this.getTranslateX():(this.setTranslateX(G),void 0)},M.getTranslateX=function(){return this._65O},M.setTranslateX=function(b){var U=this,Q=U.getWidth()-U._64I;Q>b&&(b=Q),b>0&&(b=0),b=u(b);var i=U._65O;U._65O=b,U.fp(Gg,i,b)}},ms_ty:function(C){C._23Q=0,C._66O=0,C._41o=function(){return this.getHeight()<this._23Q},C.getLogicalPoint=function(X){return zp(X,this._canvas||this._view,this.tx?this.tx():0,this.ty())},C.ty=function(r){return r===z?this.getTranslateY():(this.setTranslateY(r),void 0)},C.getTranslateY=function(){return this._66O},C.setTranslateY=function(F){var x=this,i=x.getHeight()-x._23Q;i>F&&(F=i),F>0&&(F=0),F=u(F);var e=x._66O;x._66O=F,x.fp(Go,e,F)}},ms_txy:function(Y){Y._65O=0,Y._66O=0,Y.tx=function(H){return H===z?this.getTranslateX():(this.setTranslateX(H),void 0)},Y.ty=function(v){return v===z?this.getTranslateY():(this.setTranslateY(v),void 0)},Y.onTranslateEnded=function(){},Y.setTranslate=function(q,g,N){var i=this;if(N=qr(N)){i._65I&&i._65I.stop(!0);var x=i.tx(),R=i.ty();N.action=function(Z){i.setTranslate(x+(q-x)*Z,R+(g-R)*Z)},N._37o=function(){delete i._66I,delete i._65I,i.onTranslateEnded()},i._66I=1,i._65I=tb(N)}else i.tx(q),i.ty(g)},Y.getTranslateX=function(){return this._65O},Y.setTranslateX=function(R){var Y=this;R=Y.adjustTranslateX(R);var G=Y._65O;Y._65O=R,Y.fp(Gg,G,R)},Y.getTranslateY=function(){return this._66O},Y.setTranslateY=function(f){var A=this;f=A.adjustTranslateY(f);var u=A._66O;A._66O=f,A.fp(Go,u,f)},Y.adjustTranslateX=function(i){return u(i)},Y.adjustTranslateY=function(Z){return u(Z)},Y.translate=function(o,P,p){this.setTranslate(this.tx()+o,this.ty()+P,p)},Y.getLogicalPoint=function(y){var S=this;return zp(y,this._canvas||S._view,S.tx(),S.ty())}},ms_dm:function(I){I.dm=function(d){return d?(this.setDataModel(d),void 0):this.getDataModel()},I.getDataModel=function(){return this._dataModel}},ms_lp:function(G){G.lp=function(F){return this.getLogicalPoint(F)}},ms_v:function(n){n._disabled=!1,n.setDisabled=function(L,G){var f=this,J=f._disabled;J!==L&&(J&&(gp(f._63O),delete f._63O),L&&(Yr(f._view,f._63O=bd(G)),f.iv()),f._disabled=L,f.fp("disabled",J,L))},n.isDisabled=function(){return this._disabled},n.getView=function(){return this._view},n.addToDOM=function(){var w=this,k=w.getView(),T=k.style;W.body.appendChild(k),T.left="0",T.right="0",T.top="0",T.bottom="0",R.addEventListener("resize",function(){w.iv()},!1)},n.getWidth=function(){return this._view.clientWidth},n.getHeight=function(){return this._view.clientHeight},n.setWidth=function(_){var o=this;o._view.style.width=_+co,o.iv(),o.fp&&o.fp(le,v,_)},n.setHeight=function(r){var H=this;H._view.style.height=r+co,H.iv(),H.fp&&H.fp(jq,v,r)},n.setFocus=function(A){var f=this,N=f._currentEditor;return A&&N&&(N.getView&&(N=N.getView()),N.contains(A.target))?!1:(Fc(f._view),f.endEditing&&f.endEditing(),f.fireViewEvent("focus"),!0)},n.iv=function(T){this.invalidate(T)},n.invalidate=function(w){var M=this;M._68I||(M._68I=1,oj(M.validate,M,v,w),M.onInvalidated&&M.onInvalidated(),M.fireViewEvent("invalidate"))},n.validate=function(){var H=this,M=H._view;if(H._68I&&(delete H._68I,M.parentNode))if(0===M.offsetWidth&&0===M.offsetHeight&&H._67I!==v)H._67I===z&&(H._67I=r.reinvalidateCount),H._67I>0?H._67I--:H._67I=v,H.iv();else{H.fireViewEvent("beginValidate"),H.validateImpl(),H.onValidated&&H.onValidated(),H.fireViewEvent("validate");var p=H._63O;p&&(M.lastChild!==p&&(gp(p),Yr(M,p)),oi(p,0,0,H.getWidth(),H.getHeight())),kp(H),Ii(H)}},n.layout=function(Z,D,f,u){1===arguments.length?oi(this,Z):oi(this,Z,D,f,u)},n.addViewListener=function(f,I,P){var n=this;n._67O||(n._67O=new Lb),n._67O.add(f,I,P)},n.removeViewListener=function(A,X){this._67O.remove(A,X)},n.fireViewEvent=function(w){var m=this;m._67O&&(hb(w)&&(w={kind:w}),m._67O.fire(w)),r.viewListener&&r.viewListener(m,w)}},ms_tip:function(W){W.setToolTipEnabled=function(B){var y=this;B?E||y._13o||(y.enableToolTip(),y.fp("toolTipEnabled",!1,!0)):y._13o&&(y.disableToolTip(),y.fp("toolTipEnabled",!0,!1))},W.isToolTipEnabled=function(){return!!this._13o},W.enableToolTip=function(){var d=this;E||d._13o||(d._13o=function(k){var C=d.getToolTip(k);C!=v?r.toolTipContinual&&r.isToolTipShowing()?Dr(k,C):(Yj(),po={timeout:m(bf,lf),e:k,info:C}):Yj()},d.getView().addEventListener(ie,d._13o,!1),d.getView().addEventListener("mouseleave",r.hideToolTip,!1))},W.disableToolTip=function(){var m=this;m._13o&&(m.getView().removeEventListener(ie,m._13o,!1),m.getView().removeEventListener("mouseleave",r.hideToolTip,!1),delete m._13o)},W.getToolTip=function(T){var h=this;if(h.getDataAt){var C=h.getDataAt(T);return C?C.getToolTip():v}return h.getValue?ko(h.getValue()):void 0}},_52o:function(W){W._zoom=1,W._29I=Zb,W.zoomIn=function(V,Y){this.setZoom(this._zoom*fh,V,Y)},W.zoomOut=function(C,L){this.setZoom(this._zoom/fh,C,L)},W.zoomReset=function(b,z){this.setZoom(1,b,z)},W.scrollZoomIn=function(G){this.setZoom(this._zoom*xh,v,G)},W.scrollZoomOut=function(J){this.setZoom(this._zoom/xh,v,J)},W.pinchZoomIn=function(j){this.setZoom(this._zoom*Co,v,j)},W.pinchZoomOut=function(P){this.setZoom(this._zoom/Co,v,P)},W.adjustZoom=function(v){return Cn>v?Cn:v>Jg?Jg:v},W.getZoom=function(){return this._zoom},W.setZoom=function(E,H,s){var f=this;if(H=qr(H)){f._14o&&f._14o.stop(!0);var M=f._zoom;H.action=function(c){f._96O(M+(E-M)*c,s)},H._37o=function(){delete f._zooming,delete f._14o,f.onZoomEnded()},f._zooming=1,f._14o=tb(H)}else f._96O(E,s)},W._96O=function(s,d){var y=this;if(s=y.adjustZoom(s),s!==y._zoom){y.validate();var H=y._29I,z=y._zoom;0!==H.width&&0!==H.height&&(d=d?d:{x:H.x+H.width/2,y:H.y+H.height/2},y.tx((d.x-H.x)*z-d.x*s),y.ty((d.y-H.y)*z-d.y*s)),y._zoom=s,y.fp("zoom",z,s)}}}};ik(r,{baseZIndex:z,isTouchable:E,devicePixelRatio:R.devicePixelRatio?R.devicePixelRatio:1,reinvalidateCount:3,hitMaxArea:3e3,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:A.disabledBackground,toolTipDelay:800,toolTipContinual:!1,getDragger:function(){return wj},lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],animDuration:200,animEasing:function(L){return L*L},labelColor:Kb,labelSelectColor:Eh,labelFont:(E?"15":"12")+"px arial, sans-serif",widgetIndent:E?30:20,widgetRowHeight:E?30:20,widgetHeaderHeight:E?32:22,widgetTitleHeight:E?34:24,scrollBarColor:$q,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:E?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,intersectionLineRect:xk,intersectionLineLine:ki,isEnter:Nd,isEsc:Sb,isDelete:Mo,isSpace:th,isLeft:xn,isUp:Ho,isRight:yn,isDown:Lm,getTarget:_i,isString:hb,isNumber:$n,isBoolean:$g,isArray:ym,isSelectAll:td,isFunction:Qr,getVersion:function(){return"6.0.1"},setCompType:function(N,X){Qr(X)||Dj(X)?Wh[N]=X:Xn(N)},getCompType:function(g){return Wh[g]},getCompTypeMap:function(){return Wh},drawCompType:function(A,$,T,l,F,x){A($,T,l,F,x)},numberListener:function(){var D={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1};return function(O){var e=O.keyCode;D[e]||65===e&&r.isCtrlDown(O)||e>=35&&39>=e||(O.shiftKey||48>e||e>57)&&(96>e||e>105)&&O.preventDefault()}}(),ignoreKeyCodes:[122,123],preventDefault:function(o){var q=o.target.tagName;("DIV"===q||"CANVAS"===q)&&!(r.ignoreKeyCodes.indexOf(o.keyCode)>=0)&&("keydown"!==o.type||xn(o)||yn(o)||Ho(o)||Lm(o)||Mo(o)||65===o.keyCode&&(o.metaKey||o.ctrlKey))&&(o.preventDefault(),o.preventManipulation&&o.preventManipulation())},getWindowInfo:function(){var d=W.documentElement,v=d&&(d.scrollLeft||d.scrollTop)?d:W.body;return{target:v,left:v.scrollLeft,top:v.scrollTop,width:R.innerWidth||v.clientWidth,height:R.innerHeight||v.clientHeight}},isDragging:function(){return!!wj},isLeftButton:function(v){return E?!0:0===v.button},isInput:function(y){if(!y)return!1;var k=y.tagName;return"INPUT"===k||"TEXTAREA"===k||"SELECT"===k},getTouchCount:function(M){return E?M.touches.length:1},isDoubleClick:function(){var G={};return ol=new Date,kj=ol.getTime(),function(o){var n=(new Date).getTime(),v=o.type,P=v+"_isDoubleClick",f=G[v];if(f||(f=G[v]={details:0,timeout:null,lastPoint:null,lastTime:n}),o[P]===z){var j=sk(o);o[P]=f.lastPoint&&Kd(f.lastPoint,j)<20&&n-f.lastTime<500,f.lastTime=n,f.lastPoint=j,f.details++,f.timeout&&(O(f.timeout),f.timeout=null),f.timeout=m(function(){this.details=0,this.timeout=null,this.lastPoint=null}.bind(f),500)}return!!o[P]&&2===f.details}}(),isShiftDown:function(G){return G?G.shiftKey:no["16"]},isCtrlDown:function(h){return h?b?h.metaKey:h.ctrlKey:b?no["91"]:no["17"]},getClientPoint:function(O){return E&&(O=pl(O)),{x:O.clientX,y:O.clientY}},isMouseEvent:function(E){return E instanceof MouseEvent||0===E.type.indexOf("mouse")},getTargetElement:function(J){if(r.isMouseEvent(J)||!W.elementFromPoint)return J.target;var s=Ah(J);return W.elementFromPoint(s.x,s.y)},getPagePoint:function(e){return E&&(e=pl(e)),{x:e.pageX,y:e.pageY}},createObject:function(y,A){var o=new y;for(var I in A){var g=gc(I),t=A[I];o[g]?(o[g](t),"setToolTip"===g&&o.enableToolTip&&o.enableToolTip()):o[I]=t}return o},setImage:function(K,o,a,q){var O=arguments.length;4===O?Wp(K,q,o,a):2===O?hb(o)?Wp(K,o):sd[K]=o:1===O&&Wp(K,K)},getImage:function(U,m){var l;if(U==v)return v;if(Dj(U)?l=U:(l=sd[U],U&&l===z&&(Mf&&Mf[U]||Wp(U,U))),m&&l&&l.tagName){l.colors||(l.colors={});var a=l.colors[m];return a||(a=Io(l,uh(m),l.width,l.height),l.colors[m]=a),a}return l},getId:function(){var W=1;return function(){return++W}}(),callLater:function(s,S,c,r){var l=function(){s.apply(S,c)};return r?m(l,r):R.requestAnimationFrame(l)},asyncEach:function(p,Z,f){"function"!=typeof f&&(f=Function.prototype);var M=new Array(p.length),e=0,o=!1;p.forEach(function(S,R){Z(S,function(S,W){return o?void 0:S?(o=!0,f(null)):(M[R]=W,e++,e===p.length?f(M):void 0)})})},xhrLoad:function(j,X,Y){var T=!1;ym(j)||(T=!0,j=[j]),j.length;var e=Y&&Y.sync;tf(j,function(I,R){var y=new XMLHttpRequest;y.overrideMimeType("text/plain"),y.open("GET",I,!e),y.onload=function(D){200===this.status||0===this.status?R(null,D.target.response):R(!0)},y.onerror=function(){R(!0)},y.send(null)},function(x){"function"==typeof X&&X(T&&x?x[0]:x)})},clone:function(X){if(!X)return v;if(ym(X))return X.slice(0);if(Wl(X))return new Sd(X);if(Dj(X)){var H,E={};for(H in X)E[H]=X[H];return E}return X},handleCompTypeLoaded:function(){},handleImageLoaded:function(){},handleUnfoundImage:function(){},sortFunc:function(X,Z){if(X===Z)return 0;if(X==v&&Z!=v)return 1;if(X!=v&&Z==v)return-1;if(X==v&&Z==v)return 0;var o,f=typeof X,I=typeof Z;return f===Ab&&I===Ab?o=X.localeCompare(Z):f===Er&&I===Er&&(o=X-Z),o===z&&(o=(""+X).localeCompare(""+Z)),o>0?1:0>o?-1:0},getClassMap:function(){return fd},getClass:function(c){if(hb(c)){var k,$=fd[c];if(!$){k=c.split("."),$=R;for(var F=0;F<k.length;F++)$=$[k[F]];fd[c]=$}return $}return c},def:function(E,k,F){var x,K,w,V=function(){};if(V.prototype=k.prototype,x=new V,hb(E)){if(fd[E])throw"'"+E+"' already defined";w=Qd(E),x.getClassName=function(){return E}}else w=E;if(x.constructor=w,x.getClass=function(){return w},x.getSuperClass=function(){return k},F)for(K in F)Af[K]&&Af.hasOwnProperty(K)?Af[K](x,F):x[K]=F[K];w.prototype=x,w.superClass=k.prototype},startAnim:function(){var s=function(J){J.duration&&(J.startTime=ad()),J.timeId=oj(J.tick,v,v,J.interval)};return function(z){return z=ui(z),z.easing=z.easing||r.animEasing,z.duration||z.frames||(z.duration=r.animDuration),z.t=0,z.duration?z.interval=0:(z.frame=0,z.interval=z.interval||10),z.tick=function(){if(z.duration){var J=(ad()-z.startTime)/z.duration;J>1&&(J=1),z.t=J,z.action(z.easing(J),J),1===J?z.stop():z._isPaused||(z.timeId=oj(z.tick))}else z.frame++,J=z.t=z.frame/z.frames,z.action(z.easing(J),J),z.frame<z.frames?z._isPaused||(z.timeId=oj(z.tick,v,v,z.interval)):z.stop()},z.resume=function(){z._isPaused&&(delete z._isPaused,z.duration?z.t<1&&(z.startTime=ad()-z.duration*z.t,z.timeId=oj(z.tick)):z.frame<z.frames&&(z.timeId=oj(z.tick,v,v,z.interval)))},z.pause=function(){z._isPaused=!0},z.stop=function(s){z.isRunning()&&(z.duration?z.t<1&&s&&(z.t=1,z.action(z.easing(1))):z.frame<z.frames&&s&&(z.frame=z.frames,z.action(z.easing(1))),z._37o&&z._37o(),z.finishFunc&&z.finishFunc(),qf(z.timeId,!z.duration),delete z.timeId)},z.isRunning=function(){return z.timeId!=v},z.delay?oj(s,v,[z],z.delay):s(z),z}}(),getTextSize:function(){var $={},E=W?yj().getContext("2d"):v;return function(h,a){E.font=h?h:Qk;var V=$[E.font];return V||(V=2*E.measureText("e").width+4,$[E.font]=V),{width:E.measureText(a).width+4,height:V}}}(),drawText:function(B,d,K,g,f,n,O,E,s,w){if(d!=v){var x=og(K,d),k={};k.y=w&&w!==sq?w===ph?n+x.height/2:n+E-x.height/2:n+E/2,k.x=s&&s!==Kp?s===be?f+O-x.width/2:f+O/2:f+x.width/2,rg(B,d,k,K,g)}},getDistance:function(W,Z){var H=W.length;return Z?3===H?L(c(W[0]-Z[0])+c(W[1]-Z[1])+c(W[2]-Z[2])):2===H?L(c(W[0]-Z[0])+c(W[1]-Z[1])):W.z===z?L(c(Z.x-W.x)+c(Z.y-W.y)):L(c(Z.x-W.x)+c(Z.y-W.y)+c(Z.z-W.z)):3===H?L(c(W[0])+c(W[1])+c(W[2])):2===H?L(c(W[0])+c(W[1])):void 0},brighter:function(c,v){return 0>v&&(v=-v),Ue(c,v?v:40)},darker:function(O,u){return u>0&&(u=-u),Ue(O,u?u:-40)},unionPoint:function(j,Q){if(!j)return v;if(2===arguments.length)return j&&Q?{x:o(j.x,Q.x),y:o(j.y,Q.y),width:a(j.x-Q.x),height:a(j.y-Q.y)}:v;var S=j;if(S._as&&(S=S._as),S.length===z)return v;var d=S.length;if(0>=d)return v;for(var P=1,n=S[0],G={x:n.x,y:n.y,width:0,height:0};d>P;P++){n=S[P];var J=o(G.x,n.x),m=w(G.x+G.width,n.x),q=o(G.y,n.y),y=w(G.y+G.height,n.y);G.x=J,G.y=q,G.width=m-J,G.height=y-q}return G},unionRect:function(Y,B){if(Y&&!B)return ui(Y);if(!Y&&B)return ui(B);if(Y&&B){var T={x:o(Y.x,B.x),y:o(Y.y,B.y)};return T.width=w(Y.x+Y.width,B.x+B.width)-T.x,T.height=w(Y.y+Y.height,B.y+B.height)-T.y,T}return v},containsPoint:function(J,R){return!(!J||R.x<J.x||R.y<J.y||R.x>J.x+J.width||R.y>J.y+J.height)},containsRect:function(N,O){if(!N||!O)return!1;var L=O.x,p=O.y,E=O.width,u=O.height,k=N.width,Q=N.height;if(0>(k|Q|E|u))return!1;var C=N.x,M=N.y;if(C>L||M>p)return!1;if(k+=C,E+=L,L>=E){if(k>=C||E>k)return!1}else if(k>=C&&E>k)return!1;if(Q+=M,u+=p,p>=u){if(Q>=M||u>Q)return!1}else if(Q>=M&&u>Q)return!1;return!0},intersectsRect:function(g,K){if(!g||!K)return!1;var M=K.width,U=K.height,$=g.width,t=g.height;if(0>=$||0>=t||0>=M||0>=U)return!1;var F=K.x,E=K.y,L=g.x,n=g.y;return $+=L,t+=n,M+=F,U+=E,$>F&&t>E&&M>L&&U>n},intersection:function(p,P){if(!p||!P)return v;var T=P.x,S=P.y,I=p.x,W=p.y,r=T,Z=S,Y=I,X=W;return r+=P.width,Z+=P.height,Y+=p.width,X+=p.height,I>T&&(T=I),W>S&&(S=W),r>Y&&(r=Y),Z>X&&(Z=X),r-=T,Z-=S,0>=r||0>=Z?v:{x:T,y:S,width:r,height:Z}},grow:function(A,P){A.x-=P,A.y-=P,A.width=A.width+2*P,A.height=A.height+2*P},getLogicalPoint:function(b,C,l,Y,c,g){var U=C.getBoundingClientRect();return b=E?pl(b):b,{x:(b.clientX-U.left+C.scrollLeft-(l||0))/(c||1),y:(b.clientY-U.top+C.scrollTop-(Y||0))/(g||1)}},removeHTML:function(){var V;return function(u){return u&&u.parentNode?V===u?!0:(V=u,u.parentNode.removeChild(u),V=v,!0):!1}}(),getToolTipDiv:function(){if(!pd){pd=Yn(),Jm=Yn();var c=pd.style;r.baseZIndex!=v&&(c.zIndex=s(r.baseZIndex)+3+""),c.whiteSpace="nowrap",c.color=r.toolTipLabelColor,c.background=r.toolTipBackground,c.font=r.toolTipLabelFont,c.padding="5px",c.boxShadow="0px 0px 3px "+r.toolTipShadowColor}return pd},isToolTipShowing:function(){return pd&&pd.parentNode?!0:Jm&&Jm.parentNode?!0:!1},hideToolTip:function(){gp(pd),gp(Jm),Ao()},showToolTip:function(G,p){if(!G||p==v)return Yj(),void 0;r.getToolTipDiv();var j,Q;if(p.html?(p=p.html,j=Jm,gp(pd)):(j=pd,gp(Jm)),Q=j.style,j.innerHTML=p,j.parentNode||Yr(W.body,j),G.target){G=Ah(G);var H=Nr(),w=G.x,o=G.y,U=E?60:12;if(E){var n=j.getBoundingClientRect();Q.left=w-n.width/2+co,Q.top=o-n.height-U<H.top?o+U+co:o-n.height-U+co}else{Q.left=w+U+co,Q.top=o+U+co;var n=j.getBoundingClientRect();n.left+n.width>H.width&&(Q.left=w-U-n.width+co),n.top+n.height>H.height&&(Q.top=o-U-n.height+co),n.left<0&&(Q.left=w+U+co),n.top<0&&(Q.top=o+U+co)}}else Q.left=G.x+co,Q.top=G.y+co;Ao()},startDragging:function(d,r){d!==wj&&(wj?E?wj.handleWindowTouchEnd(r):wj.handleWindowMouseUp(r):E?(R.addEventListener(vn,Td,!1),R.addEventListener(wd,vs,!1)):(R.addEventListener(ie,rj,!1),R.addEventListener(ah,hl,!1)),wj=d)},getImageMap:function(){return sd},toBoundaries:function(Y,p,x,O){var X=[];return bs(Y,p,x,O).forEach(function(I){var g=[];I.forEach(function(o){g.push(o.x,o.y)}),X.push(g)}),X},getCurrentKeyCodeMap:function(){return no},drawCenterImage:function(l,o,$,m,Z,W,P){var f=ob(o,Z,W),C=ee(o,Z,W);Dk(l,o,u($-f/2),u(m-C/2),f,C,Z,W,P)},drawStretchImage:function(_,n,b,l,f,h,T,d,O,q,v){var i,Z=ob(n,d,O,h),W=ee(n,d,O,T);if("uniform"===b?(i=o(h/Z,T/W),Z*=i,W*=i,l+=u((h-Z)/2),f+=u((T-W)/2),h=Z,T=W):"centerUniform"===b&&((Z>h||W>T)&&(i=o(h/Z,T/W),Z*=i,W*=i),l+=u((h-Z)/2),f+=u((T-W)/2),h=Z,T=W),"center"===b){var F=v!==!1&&(Z>h||W>T);F&&(_.save(),_.beginPath(),_.rect(l,f,h,T),_.clip()),Dk(_,n,l+h/2-Z/2,f+T/2-W/2,Z,W,d,O,q),F&&_.restore()}else Dk(_,n,l,f,h,T,d,O,q)},toCanvas:function(b,G,q,u,W,B,k,c){b=Ep(b,k),G=G||ob(b,W),q=q||ee(b,W);var v=yj(),O=Un(v);return c?(Zn(v,G,q,c),O.scale(c,c)):Zn(v,G,q,1),Cb(O,b,u,0,0,G,q,W,B,k),O.restore(),v},createElement:function(M,f,s,U){var c=W.createElement(M);return me(c,f||A.widgetBorder,2),c.style.font=s?s:Qk,U!=v&&(c.value=U),r.onElementCreated&&r.onElementCreated(c),c},containedInView:function(e,L){var S=ug(L).getBoundingClientRect();return Fo({x:S.left,y:S.top,width:S.width,height:S.height},sk(e))},isIsolating:function(){return Sk},setIsolating:function(O){Sk=O},getMSMap:function(){return Af},stringify:function(x,G){var B=Date.prototype.toJSON;Date.prototype.toJSON=function(){return"__ht__date"+this.getTime()};var u=JSON.stringify(x,function(b,_){return"function"==typeof _?"__ht__"+(_.__ht__||_.toString()):_},G==v?2:G);return Date.prototype.toJSON=B,u},parse:function(Y){return JSON.parse(Y,function(y,N){if(hb(N)){if("__ht__function"==N.substr(0,14)){var E=N.indexOf("{")+1,b=N.lastIndexOf("}"),S=N.indexOf("(")+1,c=N.indexOf(")");if(E&&b&&S&&c){var A=new Function(N.substring(S,c),N.substring(E,b));return A.__ht__=N.substr(6),A}}if("__ht__date"==N.substr(0,10))return new Date(s(N.substr(10)))}return N})},loadJS:function(E,k){k&&E.push(k);var F=E.shift();if(ym(F))E=F.contact(E),r.loadJS(E);else if(Qr(F))F(),r.loadJS(E);else if(hb(F)){var h=W.createElement("script");h.onload=function(){r.loadJS(E)},h.setAttribute("src",F),W.getElementsByTagName("head")[0].appendChild(h)}else E.length&&r.loadJS(E)},toColorData:Og,setCanvas:Zn,createDiv:Yn,createDisabledDiv:bd,createView:xr,createCanvas:yj,appendChild:Yr,initContext:Un,checkLoadingImage:kp,translateAndScale:ag,layout:oi,getPosition:vd,drawPoints:Kf,drawRoundRect:Tn,drawBorder:Fi,setFocus:Fc},!0),ik(G,{autoAdjustIndex:1,adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1,doubleClickToToggle:1,continuousLayout:!0},!0);var Oc=r.disabledOpacity,lf=r.toolTipDelay,Oj=r.devicePixelRatio,ok=r.autoMakeVisible,Pb=r.autoHideScrollBar,yq=r.imageGradient,Dr=r.showToolTip,Yj=r.hideToolTip,_e=r.dashPattern,kr=r.lineCap,Ne=r.lineJoin,$l=r.labelColor,pk=r.labelSelectColor,Qk=r.labelFont,gk=r.widgetIndent,hg=r.widgetRowHeight,Xm=r.widgetHeaderHeight,nm=r.widgetTitleHeight,cm=r.scrollBarColor,Mp=r.scrollBarSize,ff=r.scrollBarTimeout,bh=r.scrollBarMinLength,Vq=r.scrollBarInteractiveSize,fh=r.zoomIncrement,xh=r.scrollZoomIncrement,Co=r.pinchZoomIncrement,Jg=r.zoomMax,Cn=r.zoomMin,Ec=r.createObject,Se=r.preventDefault,$i=r.setImage,Ep=r.getImage,Df=r.drawCenterImage,Cb=r.drawStretchImage,ub=r.getId,oj=r.callLater,tf=r.asyncEach,Mr=(r.xhrLoad,r.sortFunc),ui=r.clone,Qd=r.getClass,tb=r.startAnim,Up=r.brighter,_d=r.darker,fr=r.drawText,og=r.getTextSize,Rr=r.isLeftButton,Mm=r.getTouchCount,Gj=r.isDoubleClick,Qe=r.isShiftDown,ne=r.isCtrlDown,sk=r.getClientPoint,Ah=r.getPagePoint,Kd=r.getDistance,ao=r.unionPoint,rr=r.unionRect,Fo=r.containsPoint,Xd=r.containsRect,Eq=r.intersectsRect,Qp=r.intersection,Nr=r.getWindowInfo,si=r.grow,zp=r.getLogicalPoint,$m=r.startDragging,gp=r.removeHTML,Qf=r.createElement,Ce=r.segmentResolution,cn=r.shapeResolution,Hq=r.shapeSide,Uf=r.def,ts=function(r,d,K){Uf(Q+"."+r,d,K)},rm=function(Y,W){Y.childNodes.forEach(function(A){W(A),rm(A,W)})};ik(r,{toolTipLabelColor:$l,toolTipLabelFont:Qk,toolTipBackground:A.toolTipBackground,toolTipShadowColor:$q,setDevicePixelRatio:function(i){Oj=r.devicePixelRatio="number"==typeof i?i:R.devicePixelRatio,rm(W.body,function(I){var v=I._ht;v&&v._canvas&&(Zn(v._canvas,v.getWidth(),v.getHeight()),v.redraw?v.redraw():v.iv())})}},!0);var Vk=1e-6,Zm="undefined"!=typeof Uint16Array?Uint16Array:Array,bk="undefined"!=typeof Float32Array?Float32Array:Array,Fk=function(o,l,u){var t=[o[0]-l[0],o[1]-l[1],o[2]-l[2]];if(u){var J=Kd(t);J>0&&(t[0]/=J,t[1]/=J,t[2]/=J)}return t},wp=function(r){return[-r[0],-r[1],-r[2]]},lr=function(s,L){return 3===s.length?s[0]*L[0]+s[1]*L[1]+s[2]*L[2]:s[0]*L[0]+s[1]*L[1]},rh=function(){var d=new bk(16);return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},Lo=rh(),Yc=function(I){var B=new bk(16);return B[0]=I[0],B[1]=I[1],B[2]=I[2],B[3]=I[3],B[4]=I[4],B[5]=I[5],B[6]=I[6],B[7]=I[7],B[8]=I[8],B[9]=I[9],B[10]=I[10],B[11]=I[11],B[12]=I[12],B[13]=I[13],B[14]=I[14],B[15]=I[15],B},Vd=function(r,L){return r[0]=L[0],r[1]=L[1],r[2]=L[2],r[3]=L[3],r[4]=L[4],r[5]=L[5],r[6]=L[6],r[7]=L[7],r[8]=L[8],r[9]=L[9],r[10]=L[10],r[11]=L[11],r[12]=L[12],r[13]=L[13],r[14]=L[14],r[15]=L[15],r},Ve=function(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},wi=function(g,m){var y=g[0],D=g[1],q=g[2];return g[0]=m[0]*y+m[4]*D+m[8]*q+m[12],g[1]=m[1]*y+m[5]*D+m[9]*q+m[13],g[2]=m[2]*y+m[6]*D+m[10]*q+m[14],g},Dg=function(h,H){var v=h[0],J=h[1],u=h[2],X=h[3];return h[0]=H[0]*v+H[4]*J+H[8]*u+H[12]*X,h[1]=H[1]*v+H[5]*J+H[9]*u+H[13]*X,h[2]=H[2]*v+H[6]*J+H[10]*u+H[14]*X,h[3]=H[3]*v+H[7]*J+H[11]*u+H[15]*X,h},_l=function(){var t,V,H,C,f=Bj(Bm[1]+Bm[7]),$=Bj(Bm[0]+Bm[3]-Bm[10]),c=Bj(Bm[8]+2),M=function(){return V=H.charAt(t),t+=1,V},y=function(){var v="";if(V===c)for(;M();){if(V===c)return M(),v;v+=V}else M()},A=function(){for(;V&&" ">=V;)M()},u=function(){var F,t={};if(V===f){if(M(),A(),V===$)return M(),t;for(;V;){if(F=y(),A(),M(),t[F]=C(),A(),V===$)return M(),t;M(),A()}}};return C=function(){switch(A(),V){case f:return u();default:return y()}},function(a){if(e={},a){var X;if(H=a,t=0,V=" ",X=C(),A(),!V)return X}}}(),Md=function(D,l){if(l){var U=j(l),s=C(l),Z=D[4],g=D[5],c=D[6],z=D[7],O=D[8],R=D[9],A=D[10],f=D[11];D[4]=Z*s+O*U,D[5]=g*s+R*U,D[6]=c*s+A*U,D[7]=z*s+f*U,D[8]=O*s-Z*U,D[9]=R*s-g*U,D[10]=A*s-c*U,D[11]=f*s-z*U}},$j=function(x,l){if(l){var A=j(l),r=C(l),B=x[0],s=x[1],k=x[2],H=x[3],y=x[8],c=x[9],X=x[10],u=x[11];x[0]=B*r-y*A,x[1]=s*r-c*A,x[2]=k*r-X*A,x[3]=H*r-u*A,x[8]=B*A+y*r,x[9]=s*A+c*r,x[10]=k*A+X*r,x[11]=H*A+u*r
}},xj=function(e,w){if(w){var t=j(w),v=C(w),q=e[0],F=e[1],K=e[2],n=e[3],L=e[4],I=e[5],g=e[6],X=e[7];e[0]=q*v+L*t,e[1]=F*v+I*t,e[2]=K*v+g*t,e[3]=n*v+X*t,e[4]=L*v-q*t,e[5]=I*v-F*t,e[6]=g*v-K*t,e[7]=X*v-n*t}},Bi=function(C,o,r){return qd(v,r===!1?v:C.s3(),C.r3(),C.getRotationMode(),C.p3(),v,o)},qd=function(e,l,G,S,W,u,L){return u||(u=rh()),W&&Ag(u,W),on(u,G,S),L&&dh(u,u,L),l&&lq(u,l),e&&dh(u,u,e),u},Pp=function(G,E,v){E=s(E),v=s(v);var P=this;P.g=G,P._84O=E,P._85O=v,P._70I=!0,P.F=0,P._83O=E+v,P.pen={x:0,y:0}},hr="lineDashOffset",cq="setLineDash",qj=function(T){for(var p in T)1===p.length&&(hr=T[p]);return p?1:0},rf=function(u,$,e){return df($)?u:u[cq]?(u[cq]($),e&&(u.lineDashOffset=e),u):new Pp(u,$[0],$.length>1?$[1]:$[0])},xg=function(I,W){!df(W)&&I[cq]&&(I[cq](Vh),I.lineDashOffset=0)};if(Uf(Pp,t,{_69I:6,moveTo:function(a,d){var H=this,V=H.pen;V.x=a,V.y=d,H.g.moveTo(a,d),H.start||(H.start={x:a,y:d})},lineTo:function(m,Z){var S=this,a=S.pen,X=m-a.x,r=Z-a.y,K=B(r,X),V=C(K),L=j(K),e=S._23O(a.x,a.y,m,Z),y=S._85O,I=S._84O,c=S._83O;if(S.F){if(S.F>e)return S._70I?S._72I(m,Z):S.moveTo(m,Z),S.F-=e,void 0;if(S._70I?S._72I(a.x+V*S.F,a.y+L*S.F):S.moveTo(a.x+V*S.F,a.y+L*S.F),e-=S.F,S.F=0,S._70I=!S._70I,!e)return}var u=P(e/c);if(u){for(var D=V*I,H=L*I,R=V*y,N=L*y,Q=0;u>Q;Q++)S._70I?(S._72I(a.x+D,a.y+H),S.moveTo(a.x+R,a.y+N)):(S.moveTo(a.x+R,a.y+N),S._72I(a.x+D,a.y+H));e-=c*u}S._70I?e>I?(S._72I(a.x+V*I,a.y+L*I),S.moveTo(m,Z),S.F=y-(e-I),S._70I=!1):(S._72I(m,Z),e===I?(S.F=0,S._70I=!S._70I):(S.F=I-e,S.moveTo(m,Z))):e>y?(S.moveTo(a.x+V*y,a.y+L*y),S._72I(m,Z),S.F=I-(e-y),S._70I=!0):(S.moveTo(m,Z),e===y?(S.F=0,S._70I=!S._70I):S.F=y-e)},quadraticCurveTo:function(c,e,g,k){var Q,Y=this,x=Y.pen,v=x.x,L=x.y,y=Y._22O(v,L,c,e,g,k),b=0,K=0,H=Y._85O,d=Y._84O;if(Y.F){if(Y.F>y)return Y._70I?Y._71I(c,e,g,k):Y.moveTo(g,k),Y.F-=y,void 0;if(b=Y.F/y,Q=Y._20O(v,L,c,e,g,k,b),Y._70I?Y._71I(Q[2],Q[3],Q[4],Q[5]):Y.moveTo(Q[4],Q[5]),Y.F=0,Y._70I=!Y._70I,!y)return}var A=y-y*b,s=P(A/Y._83O),V=d/y,j=H/y;if(s)for(var l=0;s>l;l++)Y._70I?(K=b+V,Q=Y._21O(v,L,c,e,g,k,b,K),Y._71I(Q[2],Q[3],Q[4],Q[5]),b=K,K=b+j,Q=Y._21O(v,L,c,e,g,k,b,K),Y.moveTo(Q[4],Q[5])):(K=b+j,Q=Y._21O(v,L,c,e,g,k,b,K),Y.moveTo(Q[4],Q[5]),b=K,K=b+V,Q=Y._21O(v,L,c,e,g,k,b,K),Y._71I(Q[2],Q[3],Q[4],Q[5])),b=K;A=y-y*b,Y._70I?A>d?(K=b+V,Q=Y._21O(v,L,c,e,g,k,b,K),Y._71I(Q[2],Q[3],Q[4],Q[5]),Y.moveTo(g,k),Y.F=H-(A-d),Y._70I=!1):(Q=Y._19O(v,L,c,e,g,k,b),Y._71I(Q[2],Q[3],Q[4],Q[5]),y===d?(Y.F=0,Y._70I=!Y._70I):(Y.F=d-A,Y.moveTo(g,k))):A>H?(K=b+j,Q=Y._21O(v,L,c,e,g,k,b,K),Y.moveTo(Q[4],Q[5]),Q=Y._19O(v,L,c,e,g,k,K),Y._71I(Q[2],Q[3],Q[4],Q[5]),Y.F=d-(A-H),Y._70I=!0):(Y.moveTo(g,k),A===H?(Y.F=0,Y._70I=!Y._70I):Y.F=H-A)},bezierCurveTo:function(){var c=arguments;this.pen={x:c[4],y:c[5]},this.g.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5])},arc:function(G,k,n,$,P,E){E||($=-$,P=-P),Of(this,G,k,$,P-$,n,n,!1)},rect:function(q,C,H,t){var Z=this;Z.pen={x:q,y:C},Z.moveTo(q,C),Z.lineTo(q,C+t),Z.lineTo(q+H,C+t),Z.lineTo(q+H,C),Z.lineTo(q,C)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(p,K,S,R){var e=S-p,m=R-K;return L(e*e+m*m)},_22O:function(j,G,B,M,C,N,z){for(var w,R,g,O,y,A,U,o=0,u=j,K=G,f=z>0?z:this._69I,n=1;f>=n;n++)g=n/f,O=1-g,y=O*O,A=2*g*O,U=g*g,w=y*j+A*B+U*C,R=y*G+A*M+U*N,o+=this._23O(u,K,w,R),u=w,K=R;return o},_21O:function(R,p,n,U,x,H,O,o){var J=this;if(0===O)return J._20O(R,p,n,U,x,H,o);if(1===o)return J._19O(R,p,n,U,x,H,O);var f=J._20O(R,p,n,U,x,H,o);return f.push(O/o),J._19O.apply(J,f)},_20O:function(m,G,i,b,U,D,Q){if(1!==Q){var O=i+(U-i)*Q,X=b+(D-b)*Q;i=m+(i-m)*Q,b=G+(b-G)*Q,U=i+(O-i)*Q,D=b+(X-b)*Q}return[m,G,i,b,U,D]},_19O:function(z,a,H,J,i,j,W){if(1!==W){var h=z+(H-z)*W,Q=a+(J-a)*W;H+=(i-H)*W,J+=(j-J)*W,z=h+(H-h)*W,a=Q+(J-Q)*W}return[z,a,H,J,i,j]},_72I:function(R,N){var t=this.pen;(R!==t.x||N!==t.y)&&(t.x=R,t.y=N,this.g.lineTo(R,N))},_71I:function(f,K,q,M){var p=this.pen;(f!==q||K!==M||q!==p.x||M!==p.y)&&(p.x=q,p.y=M,this.g.quadraticCurveTo(f,K,q,M))}}),N&&F){var Ol=F.toString();T=Ol.indexOf(zm.substr(0,2))>0&&Ol.indexOf(ph+ph.substr(1,1))>1?!0:!1}var vf=v,ve=v,Ii=function(c){vf&&!c._72O&&(ve||(ve={}),ve[c._72O=ub()]=c)},Xn=function(G,R){if(R||(R=G),R&&(vf||(vf={}),!vf[G])){var T=new XMLHttpRequest;vf[R]={request:T,url:R},T.overrideMimeType("text/plain"),T.open("GET",R,!0),T.onload=function(D){if(200===this.status||0===this.status){var w=r.parse(D.target.response);Wm(G,w),r.handleCompTypeLoaded(G,w)}else Wm(G,v)},T.onerror=function(){Wm(G,v)},T.send(null)}},Wm=function(K,X){if(Wh[K]=X,delete vf[K],$e(vf)&&(vf=v,ve)){for(var s in ve){var e=ve[s];e.invalidateAll&&e.invalidateAll(z,"compTypeLoaded",K),e.redraw&&e.redraw(),e.iv(),delete e._72O}ve=v}if(X&&ve)for(var s in ve){var e=ve[s];e.invalidateAll&&e.invalidateAll(z,"compTypeLoading",K),e.redraw&&e.redraw(),e.iv()}},Xp=A.chart,eh=r.compStack=[],Ek=/^style@/,jm=/^attr@/,sm=/^field@/,nf={x:.5,y:.5},ob=function(Q,t,M,K){if(!Q)return 0;if(Q.fitSize&&K)return K;var m=hf(Q.width,t,M);return null==m?20:m},ee=function(A,q,w,o){if(!A)return 0;if(A.fitSize&&o)return o;var H=hf(A.height,q,w);return null==H?20:H},hf=function(q,l,r){if(!q||!q.func)return q;var g,d=q.func,k=q.value;return g=Qr(d)?r&&r.vectorDataBindingDisabled&&!q.isSafeFunc?k:d(l,r):l?jm.test(d)?l.a(d.slice(5)):Ek.test(d)?l.s(d.slice(6)):sm.test(d)?l[d.slice(6)]:l[d]?l[d](r):k:k,k!==z&&g==v?k:g},Dk=r.drawImage=function(){var D,R,e,d,m,u=function(P,s){P.getValue&&P.getValue.compType===s||(P.getValue=function(L){var p=K(P,L);if(p===z&&s.properties){var r=s.properties[L];r&&(p=r.defaultValue)}return p},P.getValue.compType=s)},K=function(B,t,i){var W=B[t];return W&&W.func?(W=hf(W,R,e),i&&(W=i(W))):i&&(W=B[t]=i(W)),W},x=function($,f){var Q=K($,f);if(m&&Q){var L=uh(m);return Q=Og(Q),"rgba("+P(Q[0]*L[0])+","+P(Q[1]*L[1])+","+P(Q[2]*L[2])+","+Q[3]+")"}return Q},p=function(B){if(ym(B)){for(var D=new Sd,Y=B.length,n=0;Y>n;n+=2)D.add({x:B[n],y:B[n+1]});B=D}return B},J=function(l){if(l.anchorX!==z||l.anchorY!==z)return{x:l.anchorX===z?nf.x:l.anchorX,y:l.anchorY===z?nf.y:l.anchorY};if(!l.name)return nf;var f=Ep(l.name);return f&&f.anchorX&&f.anchorY?{x:f.anchorX,y:f.anchorY}:nf},F=function(B,L){var q=K(B,xq),F=J(B);if(ym(q)){var V=q.length,e=K(B,"relative"),W=L.width,b=L.height;if(4===V)q={x:q[0],y:q[1],width:q[2],height:q[3]},e?(q.x*=W,q.y*=b,q.width*=W,q.height*=b):L.fitSize&&(q.x*=L.widthScale,q.width*=L.widthScale,q.y*=L.heightScale,q.height*=L.heightScale);else if(3===V){var d=q[0];q={width:q[1],height:q[2]},e?(q.width*=W,q.height*=b):L.fitSize&&(q.width*=L.widthScale,q.height*=L.heightScale),"object"==typeof d?d.length&&(d={x:d[0],y:d[1]}):d=vd(d,L,q),q.x=d.x-q.width*F.x,q.y=d.y-q.height*F.y}var f=K(B,"offsetX");f&&(L.fitSize&&(f*=L.widthScale),q.x+=f),f=K(B,"offsetY"),f&&(L.fitSize&&(f*=L.heightScale),q.y+=f)}return q},U=function(Z){return ym(Z)?new Sd(Z):Z},M=function(o,U,u,G,K,h){G===z&&(G=1),K===z&&(K=1);var R=od(U,o);if(R&&!u&&1===G&&1===K)return!1;h=h||nf;var V=o.x+o.width*h.x,Y=o.y+o.height*h.y,n=U.x+U.width*h.x,F=U.y+U.height*h.y;return D.save(),pj(D,V,Y),sr(D,u),Ei(D,G*(o.width/U.width),K*(o.height/U.height)),pj(D,-n,-F),!0},k=function(){D.restore()},q=function(E,O,c){var X=K(E,"path"),P=K(E,Jh),h=K(E,"scaleX"),b=K(E,"scaleY"),z=J(E),q=v,Y=un(null,X);if(c||(c=E.unionRect,c||(c=ao(Y),E.path.func||(E.unionRect=c)),q=c),c){q||(q=E.unionRect,q||(q=ao(Y),E.path.func||(E.unionRect=q)));var B=M(c,q,P,h,b,z),V=K(E,"borderPattern"),$=rf(D,V),G=x(E,"background"),A=x(E,"borderColor"),H=K(E,"borderWidth"),W=K(E,"gradient"),l=x(E,"gradientColor"),e=K(E,"border3d"),T=K(E,"border3dColor"),f=K(E,"border3dAccuracy"),o=D.lineJoin,u=D.lineCap;if(D.lineJoin=K(E,"borderJoin")||Ne,D.lineCap=K(E,"borderCap")||kr,G?(Zq(D,G,W,l,q),un(D,X),D.fill(),$!==D&&un(D,X)):un(D,X),H&&A){var N=K(E,"borderWidthAbsolute");N&&(D.save(),D.setTransform(1,0,0,1,0,0)),D.lineWidth=H,D.strokeStyle=A,D.stroke(),N&&D.restore(),e&&ib(D,A,T,H,d,f)}if(xg(D,V),K(E,"dash")){var R=K(E,"dashWidth")||H;if(R>0){V=K(E,"dashPattern")||_e;var $=rf(D,V,K(E,"dashOffset")),p=K(E,"dashColor")||Oq;$!==D&&un(D,X),D.strokeStyle=p,D.lineWidth=R,D.stroke(),K(E,"dash3d")&&ib(D,p,K(E,"dash3dColor"),R,d,K(E,"dash3dAccuracy")),xg(D,V)}}O===xq&&ig(D,G,K(E,"depth"),q),D.lineJoin=o,D.lineCap=u,B&&k()}},f=function(P,C,j,X){var A=K(P,cd,p);if(A&&X.fitSize){var f=new Sd;A.each(function(C){f.add({x:C.x*X.widthScale,y:C.y*X.heightScale})}),A=f}var Z=K(P,Jh),N=K(P,"scaleX"),u=K(P,"scaleY"),$=J(P),w=C===kl,B=v;if(!j&&w&&(j=P.unionRect,j||(j=ao(A),P.points.func||(P.unionRect=j)),B=j),j){w?B||(B=P.unionRect,B||(B=ao(A),P.points.func||(P.unionRect=B))):B=j;var n,b,E,W,L=M(j,B,Z,N,u,$),i=K(P,"borderPattern"),G=rf(D,i),t=x(P,"background"),_=Ep(K(P,"repeatImage"),m),o=K(P,"gradientPack"),I=x(P,"borderColor"),l=K(P,"borderWidth"),H=K(P,"segments",U),O=K(P,"gradient"),F=x(P,"gradientColor"),g=K(P,"border3d"),s=K(P,"border3dColor"),q=K(P,"border3dAccuracy"),y=K(P,"closePath"),T=K(P,"fillRule")||"nonzero",Y=D.lineJoin,r=D.lineCap;if(D.lineJoin=K(P,"borderJoin")||Ne,D.lineCap=K(P,"borderCap")||kr,w?t||_||o?(Kf(D,A,H,y),o?tp(D,o):_?Ye(D,_):Zq(D,t,O,F,B),D.fill(T),o&&D.restore(),G!==D&&Kf(G,A,H,y)):Kf(G,A,H,y):("roundRect"===C?n=K(P,"cornerRadius"):"polygon"===C?n=K(P,"polygonSide"):"arc"===C&&(n=K(P,"arcFrom"),b=K(P,"arcTo"),E=K(P,"arcClose"),W=K(P,"arcOval")),t||_||o?(Xe(D,C,B,n,b,E,W),o?tp(D,o):_?Ye(D,_):Zq(D,t,O,F,B),D.fill(T),o&&D.restore(),D!==G&&Xe(G,C,B,n,b,E,W)):Xe(G,C,B,n,b,E,W)),l&&I){var z=K(P,"borderWidthAbsolute");z&&(D.save(),D.setTransform(1,0,0,1,0,0)),D.lineWidth=l,D.strokeStyle=I,D.stroke(),z&&D.restore(),g&&ib(D,I,s,l,d,q)}if(xg(D,i),K(P,"dash")){var S=K(P,"dashWidth")||l;if(S>0){i=K(P,"dashPattern")||_e;var G=rf(D,i,K(P,"dashOffset")),c=K(P,"dashColor")||Oq;G!==D&&(w?Kf(G,A,H,y):Xe(G,C,B,n,b,E,W)),D.strokeStyle=c,D.lineWidth=S,D.stroke(),K(P,"dash3d")&&ib(D,c,K(P,"dash3dColor"),S,d,K(P,"dash3dAccuracy")),xg(D,i)}}C===xq&&ig(D,t,K(P,"depth"),B),D.lineJoin=Y,D.lineCap=r,L&&k()}},c=function(j,P){var y=m,I=m||K(j,dn),c=Ep(K(j,"name"),I);c&&(Cb(D,c,K(j,"stretch"),P.x,P.y,P.width,P.height,R,e,I),m=y)},b=function(w,J){var B=K(w,"text");B!=v&&fr(D,B,K(w,"font"),x(w,dn),J.x,J.y,J.width,J.height,K(w,"align"),K(w,"vAlign"))},Z=function($,w){Fi(D,x($,dn),w.x,w.y,w.width,w.height,K($,"width"))},s=function(h,q){var k=K(h,zd),w=0;if(k&&(k.forEach(function(p){w+=p}),w>0)){for(var W=K(h,"colors")||Xp,g=K(h,"startAngle")||0,$=K(h,"hollow"),f=K(h,bo),L=K(h,Qb),b=K(h,de),p=f?new Sd:v,a=q.x,U=q.y,y=q.width,z=q.height,T=a+y/2,F=U+z/2,S=o(y,z)/2,u=0,Q=0;Q<k.length;Q++){var H=k[Q],N=X*H/w,Y=g+N;if(D.fillStyle=W[u++],u===W.length&&(u=0),D.beginPath(),$){var Z=T+C(g)*S/2,P=F+j(g)*S/2,r=T+C(Y)*S,G=F+j(Y)*S;D.moveTo(Z,P),D.arc(T,F,S/2,g,Y,!1),D.lineTo(r,G),D.arc(T,F,S,Y,g,!0)}else D.moveTo(T,F),D.arc(T,F,S,Y,g,!0);p&&(N=(g+Y)/2,p.add({text:Qr(f)?f(H,Q,w,R):H,x:T+.75*C(N)*S,y:F+.75*j(N)*S})),D.closePath(),D.fill(),g=Y}p&&p.each(function(V){fr(D,V.text,L,b,V.x,V.y,0,0,Dm)})}},S=function(z,g){var T=K(z,Sf);if(T&&T.length>0){var k=T.length,o=K(z,bo),G=K(z,Qb),H=K(z,de),h=o?new Sd:v,N=K(z,"minValue")||0,m=K(z,"maxValue");if(m==v&&(m=0,T.forEach(function(o){o.values.forEach(function(f){m=w(m,f)})})),N===m)return;for(var B=g.height/(m-N),Z=g.y+m*B,I=K(T[0],zd).length,P=g.width/(3*I+1),d=2*P/k,J=0,n=0;k>n;n++)for(var f=T[n],W=K(f,dn),y=K(f,"colors"),i=K(f,zd),a=0;I>a;a++){y?D.fillStyle=y[a]:W?D.fillStyle=W:(D.fillStyle=Xp[J++],J===Xp.length&&(J=0));var L=i[a],Q=L*B,C=g.x+(1+3*a)*P+n*d;if(_r(D,C,Z-Q,d,Q),h){var Y=Qr(o)?o(L,a,f,R):L,_=og(G,Y).height;h.add({x:C,y:Z-Q-_,width:d,height:_,text:Y})}}h&&h.each(function(a){fr(D,a.text,G,H,a.x,a.y,a.width,a.height,Dm)})}},T=function(z,U){var y=K(z,Sf);if(y&&y.length>0){var A=y.length,c=K(y[0],zd).length,d=U.width/(3*c+1),M=0,s=K(z,"maxValue"),O=K(z,bo),_=K(z,Qb),V=K(z,de),P=O?new Sd:v;if(s==v){s=0;for(var Q=0;c>Q;Q++){for(var t=0,k=0;A>k;k++)t+=K(y[k],zd)[Q];s=w(s,t)}}if(s>0){for(var Q=0;c>Q;Q++)for(var g=U.y+U.height,k=0;A>k;k++){var o=y[k],B=K(o,dn),h=K(o,zd)[Q],Y=h/s*U.height;B?D.fillStyle=B:(D.fillStyle=Xp[M++],M===Xp.length&&(M=0)),g-=Y;var e={x:U.x+(1+3*Q)*d,y:g,width:2*d,height:Y};_r(D,e.x,e.y,e.width,e.height),P&&(e.text=Qr(O)?O(h,Q,o,R):h,P.add(e))}P&&P.each(function(z){fr(D,z.text,_,V,z.x,z.y,z.width,z.height,Dm)})}}},h=function(F,n){var $=K(F,Sf);if($&&$.length>0){for(var _=$.length,g=K($[0],zd).length,b=n.width/(3*g+1),i=0,G=K(F,bo),y=K(F,Qb),E=K(F,de),l=G?new Sd:v,N=0;g>N;N++){for(var L=0,W=0;_>W;W++)L+=K($[W],zd)[N];if(L>0){var X=n.y+n.height;for(W=0;_>W;W++){var q=$[W],B=K(q,dn),Y=K(q,zd)[N],o=Y/L*n.height;B?D.fillStyle=B:(D.fillStyle=Xp[i++],i===Xp.length&&(i=0)),X-=o;var d={x:n.x+(1+3*N)*b,y:X,width:2*b,height:o};_r(D,d.x,d.y,d.width,d.height),l&&(d.text=Qr(G)?G(Y,N,q,R):Y,l.add(d))}}}l&&l.each(function(d){fr(D,d.text,y,E,d.x,d.y,d.width,d.height,Dm)})}},V=function(c,j){var G=K(c,Sf);if(G&&G.length>0){var J=G.length,e=K(c,"minValue")||0,$=K(c,"maxValue");if($==v&&($=0,G.forEach(function(D){D.values.forEach(function(s){$=w($,s)})})),e===$)return;for(var B=j.height/($-e),S=j.y+$*B,N=K(G[0],zd).length,u=j.width/(3*N+1),A=0,b=K(c,"lineWidth")||2,I=K(c,"line3d"),o=K(c,"linePoint"),W=K(c,bo),V=K(c,Qb),g=K(c,de),p=0;J>p;p++){var z=G[p],M=K(z,dn),T=K(z,zd);M?D.strokeStyle=M:(M=D.strokeStyle=Xp[A++],A===Xp.length&&(A=0)),D.beginPath();for(var U=0;N>U;U++){var x=j.x+(2+3*U)*u,h=S-T[U]*B;0===U?D.moveTo(x,h):D.lineTo(x,h)}if(D.lineWidth=b,D.stroke(),I&&ib(D,M,v,b,d),o||W){var q,F=b/2+2;for(U=0;N>U;U++){var L=T[U];if(x=j.x+(2+3*U)*u,h=S-L*B,Qr(o)?o(D,x,h,M,U,z,R):o&&(D.fillStyle=M,D.beginPath(),D.arc(x,h,F,0,X,!0),D.fill()),Qr(W)?q=W(L,U,z,R):W&&(q=L),q){var i=og(V,q).height,r=D.shadowBlur;if(r){var l=D.shadowOffsetX,n=D.shadowOffsetY,y=D.shadowColor;D.shadowOffsetX=0,D.shadowOffsetY=0,D.shadowBlur=0,D.shadowColor=v}fr(D,q,V,g,x,h-i-F+2,0,i,Dm),r&&(D.shadowOffsetX=l,D.shadowOffsetY=n,D.shadowColor=y,D.shadowBlur=r)}}}}}},n={border:Z,image:c,text:b,pieChart:s,columnChart:S,stackedColumnChart:T,percentageColumnChart:h,lineChart:V};return function($,Z,h,a,A,x,b,P,_){if(Z&&A&&x){if(D=$,R=b,e=P,d=e?e._zoom?e._zoom:1:1,m=_,Z.tagName)return D.drawImage(Z,h,a,A,x),void 0;if(K(Z,"visible")!==!1){m||(m=hf(Z.color,R,e));var V=ob(Z,R,e,A),c=ee(Z,R,e,x),t={x:0,y:0,width:V,height:c,fitSize:K(Z,"fitSize")},o=K(Z,"clip"),Q=K(Z,"opacity");t.fitSize&&(t.widthScale=V/hf(Z.width,R,e),t.heightScale=c/hf(Z.height,R,e)),D.save();var y=V,w=c;if(wl()){var i,C;0===D[wc]?wl[0]&&(i=!0):i=!0,D.texureImage2D?wl[1]&&(C=!0):C=!0,i&&C&&(y=h,w=a)}pj(D,y,w),(V!==A||c!==x)&&D.scale(A/V,x/c),o&&(Qr(o)?o(D,V,c,R,e,Z):(D.beginPath(),D.rect(0,0,V,c),D.clip())),Q!=v&&(D.globalAlpha*=Q),K(Z,"comps").forEach(function(Y){if(K(Y,bl)!==!1){eh.splice(0,0,Y);var x=K(Y,"opacity"),o=K(Y,"shadow"),C=K(Y,"type"),A=F(Y,t);if(x!=v){var w=D.globalAlpha;D.globalAlpha*=x}if(o){var c=D.shadowOffsetX,W=D.shadowOffsetY,E=D.shadowBlur,d=D.shadowColor,s=K(Y,"shadowOffsetX"),T=K(Y,"shadowOffsetY"),i=K(Y,"shadowBlur"),S=K(Y,"shadowColor");D.shadowOffsetX=s==v?3:s,D.shadowOffsetY=T==v?3:T,D.shadowBlur=i==v?6:i,D.shadowColor=S||$q}if("restore"===C)D.restore();else if("clip"===C)D.save(),Kf(D,K(Y,"points",p),K(Y,"segments",U),!0),D.clip();else if(qm[C]||C===kl)f(Y,C,A,t);else if("SVGPath"===C)q(Y,C,A);else{A=A||{x:0,y:0,width:t.width,height:t.height};var L=K(Y,Jh),O=K(Y,"scaleX"),I=K(Y,"scaleY"),h=J(Y),Z=M(A,A,L,O,I,h);if(Qr(C))u(Y,C),r.drawCompType(C,D,A,Y,R,e);else if(r.getCompType(C)){var m=r.getCompType(C),G=m.func||m;u(Y,m),r.drawCompType(G,D,A,Y,R,e)}else n[C]?n[C](Y,A):r.getCompType(C)===z&&Rc.test(C)&&Xn(C);Z&&k()}o&&(D.shadowOffsetX=c,D.shadowOffsetY=W,D.shadowBlur=E,D.shadowColor=d),x!=v&&(D.globalAlpha=w),eh.splice(0,1)}}),D.restore()}}}}();r.getCurrentComp=function(){return eh[0]},r.getParentComp=function(){return eh[1]},r.getInternal=function(){return{isEnter:Nd,isEsc:Sb,isSpace:th,isLeft:xn,isUp:Ho,isRight:yn,isDown:Lm,addMethod:ik,superCall:lj,toPointsArray:bs,translateAndScale:ag,appendArray:Cl,createWorldMatrix:qd,vec3TransformMat4:wi,setCanvas:Zn,createDiv:Yn,createView:xr,createCanvas:yj,createImage:ue,initContext:Un,layout:oi,fillRect:_r,Mat:ll,drawBorder:Fi,isString:hb,setBorder:me,getPropertyValue:zh,setPropertyValue:ep,drawVerticalLine:as,draw3DRect:ig,getPinchDist:km,isSameRect:od,getPosition:vd,intersectionLineRect:xk,getNodeRect:Wg,getEdgeAgentPosition:cl,getImageWidth:ob,getImageHeight:ee,formatNumber:ko,initItemElement:we,drawPoints:Kf,createG2:rf,closePopup:Wb,isH:Mk,createAnim:qr,createNormalMatrix:Np,createNormals:Ki,toFloatArray:Yp,glMV:ul,batchShape:js,createNodeMatrix:Bi,getFaceInfo:$o,transformAppend:lb,drawFaceInfo:Sn,to3dPointsArray:Je,setGLDebugMode:function(Z){Fn=Z},cube:function(){return{vs:bn,is:ys,uv:ws}},ui:function(){return{DataUI:il,NodeUI:lm,EdgeUI:Eb,GroupUI:Ed,ShapeUI:tc,GridUI:Fe,Data3dUI:Ln,Node3dUI:_g,Shape3dUI:mj}},getInternalVersion:function(){return"U2FsdGVkX18WvbbV4nVZp5t4C45jBPU63Ez9tzDiSxM="},getDragger:function(){return wj},addMSMap:function(h){ik(Af,h)},k:d}},function(H){function r(l,W){l!=v&&(W==v&&Ab!=typeof l?this._54O(l,256):this._54O(l,W))}function u(){return new r(v)}function N(N,c,$,w,h,U){for(;--U>=0;){var F=c*this[N++]+$[w]+h;h=P(F/67108864),$[w++]=67108863&F}return h}function $(f,Z,T,l,I,q){for(var h=32767&Z,n=Z>>15;--q>=0;){var U=32767&this[f],O=this[f++]>>15,o=n*U+O*h;U=h*U+((32767&o)<<15)+T[l]+(1073741823&I),I=(U>>>30)+(o>>>15)+n*O+(I>>>30),T[l++]=1073741823&U}return I}function V(f,R,q,n,k,E){for(var F=16383&R,S=R>>14;--E>=0;){var Y=16383&this[f],$=this[f++]>>14,j=S*Y+$*F;Y=F*Y+((16383&j)<<14)+q[n]+k,k=(Y>>28)+(j>>14)+S*$,q[n++]=268435455&Y}return k}function F(L){return si.charAt(L)}function B(L,N){var o=Kl[L.charCodeAt(N)];return o==v?-1:o}function n(g){for(var c=this.t-1;c>=0;--c)g[c]=this[c];g.t=this.t,g.s=this.s}function z(q){this.t=1,this.s=0>q?-1:0,q>0?this[0]=q:-1>q?this[0]=q+this.DV:this.t=0}function l(U){var w=u();return w._58O(U),w}function q(a,$){var U,N=this;if(16==$)U=4;else if(8==$)U=3;else if(256==$)U=8;else if(2==$)U=1;else if(32==$)U=5;else{if(4!=$)return N.fromRadix(a,$),void 0;U=2}N.t=0,N.s=0;for(var p=a.length,C=!1,x=0;--p>=0;){var M=8==U?255&a[p]:B(a,p);0>M?"-"==a.charAt(p)&&(C=!0):(C=!1,0==x?N[N.t++]=M:x+U>N.DB?(N[N.t-1]|=(M&(1<<N.DB-x)-1)<<x,N[N.t++]=M>>N.DB-x):N[N.t-1]|=M<<x,x+=U,x>=N.DB&&(x-=N.DB))}8==U&&0!=(128&a[0])&&(N.s=-1,x>0&&(N[N.t-1]|=(1<<N.DB-x)-1<<x)),N._57O(),C&&r.ZERO._78O(N,N)}function k(){for(var O=this,F=O.s&O.DM;O.t>0&&O[O.t-1]==F;)--O.t}function G(k){var b=this;if(b.s<0)return"-"+b._85O()[xf](k);var r;if(16==k)r=4;else if(8==k)r=3;else if(2==k)r=1;else if(32==k)r=5;else{if(4!=k)return b.toRadix(k);r=2}var U,W=(1<<r)-1,e=!1,y="",Z=b.t,E=b.DB-Z*b.DB%r;if(Z-->0)for(E<b.DB&&(U=b[Z]>>E)>0&&(e=!0,y=F(U));Z>=0;)r>E?(U=(b[Z]&(1<<E)-1)<<r-E,U|=b[--Z]>>(E+=b.DB-r)):(U=b[Z]>>(E-=r)&W,0>=E&&(E+=b.DB,--Z)),U>0&&(e=!0),e&&(y+=F(U));return e?y:"0"}function a(){var R=u();return r.ZERO._78O(this,R),R}function M(){return this.s<0?this._85O():this}function E(N){var P=this,Z=P.s-N.s;if(0!=Z)return Z;var I=P.t;if(Z=I-N.t,0!=Z)return P.s<0?-Z:Z;for(;--I>=0;)if(0!=(Z=P[I]-N[I]))return Z;return 0}function e(o){var f,e=1;return 0!=(f=o>>>16)&&(o=f,e+=16),0!=(f=o>>8)&&(o=f,e+=8),0!=(f=o>>4)&&(o=f,e+=4),0!=(f=o>>2)&&(o=f,e+=2),0!=(f=o>>1)&&(o=f,e+=1),e}function m(){var J=this;return J.t<=0?0:J.DB*(J.t-1)+e(J[J.t-1]^J.s&J.DM)}function U(b,v){var A;for(A=this.t-1;A>=0;--A)v[A+b]=this[A];for(A=b-1;A>=0;--A)v[A]=0;v.t=this.t+b,v.s=this.s}function W(A,S){for(var Y=A;Y<this.t;++Y)S[Y-A]=this[Y];S.t=w(this.t-A,0),S.s=this.s}function h(m,F){var C,U=this,Q=m%U.DB,w=U.DB-Q,Y=(1<<w)-1,W=P(m/U.DB),j=U.s<<Q&U.DM;for(C=U.t-1;C>=0;--C)F[C+W+1]=U[C]>>w|j,j=(U[C]&Y)<<Q;for(C=W-1;C>=0;--C)F[C]=0;F[W]=j,F.t=U.t+W+1,F.s=U.s,F._57O()}function c(n,I){var D=this;I.s=D.s;var L=P(n/D.DB);if(L>=D.t)return I.t=0,void 0;var B=n%D.DB,i=D.DB-B,p=(1<<B)-1;I[0]=D[L]>>B;for(var m=L+1;m<D.t;++m)I[m-L-1]|=(D[m]&p)<<i,I[m-L]=D[m]>>B;B>0&&(I[D.t-L-1]|=(D.s&p)<<i),I.t=D.t-L,I._57O()}function J(k,T){for(var R=this,s=0,M=0,P=o(k.t,R.t);P>s;)M+=R[s]-k[s],T[s++]=M&R.DM,M>>=R.DB;if(k.t<R.t){for(M-=k.s;s<R.t;)M+=R[s],T[s++]=M&R.DM,M>>=R.DB;M+=R.s}else{for(M+=R.s;s<k.t;)M-=k[s],T[s++]=M&R.DM,M>>=R.DB;M-=k.s}T.s=0>M?-1:0,-1>M?T[s++]=R.DV+M:M>0&&(T[s++]=M),T.t=s,T._57O()}function A(k,P){var e=this.abs(),x=k.abs(),f=e.t;for(P.t=f+x.t;--f>=0;)P[f]=0;for(f=0;f<x.t;++f)P[f+e.t]=e.am(0,x[f],P,f,0,e.t);P.s=0,P._57O(),this.s!=k.s&&r.ZERO._78O(P,P)}function t(u){for(var b=this.abs(),w=u.t=2*b.t;--w>=0;)u[w]=0;for(w=0;w<b.t-1;++w){var y=b.am(w,b[w],u,2*w,0,1);(u[w+b.t]+=b.am(w+1,2*b[w],u,2*w+1,y,b.t-w-1))>=b.DV&&(u[w+b.t]-=b.DV,u[w+b.t+1]=1)}u.t>0&&(u[u.t-1]+=b.am(w,b[w],u,2*w,0,1)),u.s=0,u._57O()}function T(Q,w,F){var U=Q.abs(),T=this;if(!(U.t<=0)){var B=T.abs();if(B.t<U.t)return w!=v&&w._58O(0),F!=v&&T._77O(F),void 0;F==v&&(F=u());var N=u(),G=T.s,D=Q.s,X=T.DB-e(U[U.t-1]);X>0?(U._44O(X,N),B._44O(X,F)):(U._77O(N),B._77O(F));var z=N.t,I=N[z-1];if(0!=I){var i=I*(1<<T.F1)+(z>1?N[z-2]>>T.F2:0),M=T.FV/i,x=(1<<T.F1)/i,K=1<<T.F2,W=F.t,t=W-z,$=w==v?u():w;for(N._59O(t,$),F._52O($)>=0&&(F[F.t++]=1,F._78O($,F)),r.ONE._59O(z,$),$._78O(N,N);N.t<z;)N[N.t++]=0;for(;--t>=0;){var n=F[--W]==I?T.DM:P(F[W]*M+(F[W-1]+K)*x);if((F[W]+=N.am(0,n,F,t,0,z))<n)for(N._59O(t,$),F._78O($,F);F[W]<--n;)F._78O($,F)}w!=v&&(F._45O(z,w),G!=D&&r.ZERO._78O(w,w)),F.t=z,F._57O(),X>0&&F._46O(X,F),0>G&&r.ZERO._78O(F,F)}}}function y(l){var c=u();return this.abs()._49O(l,v,c),this.s<0&&c._52O(r.ZERO)>0&&l._78O(c,c),c}function x(F){this.m=F}function Y(e){return e.s<0||e._52O(this.m)>=0?e.mod(this.m):e}function i(Y){return Y}function S(o){o._49O(this.m,v,o)}function D(K,$,c){K._47O($,c),this._74O(c)}function I(A,E){A._48O(E),this._74O(E)}function K(){if(this.t<1)return 0;var g=this[0];if(0==(1&g))return 0;var y=3&g;return y=15&y*(2-(15&g)*y),y=255&y*(2-(255&g)*y),y=65535&y*(2-(65535&(65535&g)*y)),y=y*(2-g*y%this.DV)%this.DV,y>0?this.DV-y:-y}function b(D){var k=this;k.m=D,k.mp=D._50O(),k.mpl=32767&k.mp,k.mph=k.mp>>15,k.um=(1<<D.DB-15)-1,k.mt2=2*D.t}function _(X){var p=u();return X.abs()._59O(this.m.t,p),p._49O(this.m,v,p),X.s<0&&p._52O(r.ZERO)>0&&this.m._78O(p,p),p}function R(v){var N=u();return v._77O(N),this._74O(N),N}function O(c){for(var l=this;c.t<=l.mt2;)c[c.t++]=0;for(var P=0;P<l.m.t;++P){var m=32767&c[P],e=m*l.mpl+((m*l.mph+(c[P]>>15)*l.mpl&l.um)<<15)&c.DM;for(m=P+l.m.t,c[m]+=l.m.am(0,e,c,P,0,l.m.t);c[m]>=c.DV;)c[m]-=c.DV,c[++m]++}c._57O(),c._45O(l.m.t,c),c._52O(l.m)>=0&&c._78O(l.m,c)}function dj(W,c){W._48O(c),this._74O(c)}function ti(Q,N,V){Q._47O(N,V),this._74O(V)}function Kr(){return 0==(this.t>0?1&this[0]:this.s)}function Lh(Z,E){if(Z>4294967295||1>Z)return r.ONE;var Q=u(),U=u(),b=E._73O(this),d=e(Z)-1;for(b._77O(Q);--d>=0;)if(E._76O(Q,U),(Z&1<<d)>0)E._75O(U,b,Q);else{var X=Q;Q=U,U=X}return E.revert(Q)}function Go(t,y){var R;return R=256>t||y._51O()?new x(y):new b(y),this.exp(t,R)}function br(){var K=this;if(K.s<0){if(1==K.t)return K[0]-K.DV;if(0==K.t)return-1}else{if(1==K.t)return K[0];if(0==K.t)return 0}return(K[1]&(1<<32-K.DB)-1)<<K.DB|K[0]}function Nj(V,x){return new r(V,x)}function gh(){var m=this;m.n=v,m.e=0,m.d=v,m.p=v,m.q=v,m.dmp1=v,m.dmq1=v,m._10A=v}function Io(d){return d._53O(this.e,this.n)}function Tn(Y){var W,r,U,s="",j=0;for(W=0;W<Y.length&&Y.charAt(W)!=Tr;++W)U=Zq.indexOf(Y.charAt(W)),0>U||(0==j?(s+=F(U>>2),r=3&U,j=1):1==j?(s+=F(r<<2|U>>4),r=15&U,j=2):2==j?(s+=F(r),s+=F(U>>2),r=3&U,j=3):(s+=F(r<<2|U>>4),s+=F(15&U),j=0));return 1==j&&(s+=F(r<<2)),s}function fg(h){var I=h.split(""),$=Tn(h);return I.forEach(function(g){var X=g.length;X>0&&$&&(wn+=s(g))}),$}function aq(t,R){var T=An._4O.Util._56O(t,"ss"),I={},U=0;return I.v=T==R,I.t=1,I.s=0>U?-1:0,db=I.v,U>0?I[0]=U:-1>U?I[0]=U+I.DV:I.t=0,[T,I]}function Zp(l){var X=38,Q=l.substring(0,X);if(Q&&30==Q.indexOf("05000420")){var $=["ss",l.substring(X)];return $}return[]}function mr($,J){J=J.replace(as,""),J=J.replace(/[ \n]+/g,"");var B=Nj(J,16);if(B._55O()>this.n._55O())return 0;var L=this._37O(B),f=L[xf](16).replace(/^1f+00/,""),q=Zp(f);if(0==q.length)return!1;for(var V,Q,E,R=.5,g=Hq,W=[0,.5,.75,.875,.9375],S=[],D=[],z=[],U=X/g,p=q[1],c=aq($,p)[0],u=0,h=0;u<W.length;u++){var y=0===u%2?0:.5;for(V=0;g>=V;V++)Q=(V+y)*U,E=1-W[u],S.push(C(Q)*R*E,-R+2*W[u]*R,-j(Q)*R*E),D.push((V+y)/g,E)}for(u=0;u<W.length-1;u++){var b=u*(g+1),A=(u+1)*(g+1);for(V=0;g>V;V++)z.push(b+V,A+V+1,A+V,b+V,b+V+1,A+V+1)}return z.forEach(function(t){h+=t}),p==c&&h>10}var Uh,Ol=0xdeadbeefcafe,vm=15715070==(16777215&Ol),xf="toString",xg="",Pe="nat",qe=function(){};f=H["D"+11182[xf](Z(2,5))];var vd=r.prototype;Ug+=Yi.substr(0,1);var Xp=H.navigator?H.navigator.appName:"";vm&&"Microsoft Internet Explorer"==Xp?(vd.am=$,Uh=30):vm&&"Netscape"!=Xp?(vd.am=N,Uh=26):(vd.am=V,Uh=28),vd.DB=Uh,vd.DM=(1<<Uh)-1,vd.DV=1<<Uh;var Fn=52;vd.FV=Z(2,Fn),vd.F1=Fn-Uh,vd.F2=2*Uh-Fn;var Uf,Lg,si="0123456789abcdefghijklmnopqrstuvwxyz",Kl=[],$m=function(E){return String.fromCharCode(E)};for(Uf="0".charCodeAt(0),Lg=0;9>=Lg;++Lg)Kl[Uf++]=Lg;for(Uf="a".charCodeAt(0),Lg=10;36>Lg;++Lg)Kl[Uf++]=Lg;for(Uf="A".charCodeAt(0),Lg=10;36>Lg;++Lg)Kl[Uf++]=Lg;var xd=x.prototype;xd._73O=Y,xd.revert=i,xd._74O=S,xd._75O=D,xd._76O=I;var un=b.prototype;un._73O=_,un.revert=R,un._74O=O,un._75O=ti,un._76O=dj,vd._77O=n,vd._58O=z,vd._54O=q,vd._57O=k,vd._59O=U,vd._45O=W,vd._44O=h,vd._46O=c,vd._78O=J,vd._47O=A,vd._48O=t,vd._49O=T,vd._50O=K,vd._51O=Kr,vd.exp=Lh,vd.toString=G,vd._85O=a,vd.abs=M,vd._52O=E,vd._55O=m,vd.mod=y,vd._53O=Go,r.ZERO=l(0),r.ONE=l(1),vd._86O=br;var le=function(c,U){var S=this;S.isPublic=!0,typeof c!==Ab?(S.n=c,S.e=U):c!=v&&U!=v&&c.length>0&&U.length>0&&(S.n=Nj(c,16),S.e=s(U,16))};ak=function(){var m,k,X=fg(tf),e=X.substr(0,4),K=X.substr(4,2),R=X.substr(6,2),j=1,M=!j,u=d,S=[],q=eo.charAt(7);if(f&&(f[xf]().indexOf(Pe)<0||f[Ug][xf]().indexOf(Pe)<0||!X?m=_l(Lk[q]):(X=new f(e-0,K-j,R-0),k=X.setHours(9),f[Ug]()>k?m=_l(Lk[q]):M=!0)),X&&m&&u){for(var U in m)S.push(U);var z,N=m[S[0]],I=m[S[1]],T=m[S[2]],v=m[S[4]],w=m[S[5]],P=m[S[6]],C=po._27O(u);C&&P&&(z=N+I+T+v+""+w,z&&C._31O(z,P)&&(M=!0))}return M||(Xe=df),q};var yj=gh.prototype;yj._37O=Io,yj._38O=le;var Zq="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Tr="=",Jp=25,Ii=10,tf="IBcFAQ==",qo=qo||function(h,N){var M={},A=M._7A={},e=A._6A=function(){function p(){}return{_80O:function(h){p.prototype=this;var x=new p;return h&&x._5A(h),x.hasOwnProperty("_82O")||(x._82O=function(){x.$super._82O.apply(this,arguments)}),x._82O.prototype=x,x.$super=this,x},_3A:function(){var o=this._80O();return o._82O.apply(o,arguments),o},_82O:function(){},_5A:function(l){for(var Y in l)l.hasOwnProperty(Y)&&(this[Y]=l[Y]);l.hasOwnProperty(xf)&&(this.toString=l.toString)},_88O:function(){return this._82O.prototype._80O(this)}}}(),f=A._39O=e._80O({_82O:function(G,g){G=this._84O=G||[],this._65O=g!=N?g:4*G.length},toString:function(I){return(I||t).stringify(this)},_89O:function(O){var t=this._84O,H=O._84O,A=this._65O,G=O._65O;if(this._57O(),A%4)for(var J=0;G>J;J++){var L=255&H[J>>>2]>>>24-8*(J%4);t[A+J>>>2]|=L<<24-8*((A+J)%4)}else if(H.length>65535)for(var J=0;G>J;J+=4)t[A+J>>>2]=H[J>>>2];else t.push.apply(t,H);return this._65O+=G,this},_57O:function(){var I=this._84O,P=this._65O;I[P>>>2]&=4294967295<<32-8*(P%4),I.length=p(P/4)},_88O:function(){var Z=e._88O.call(this);return Z._84O=this._84O.slice(0),Z},_87O:function($){for(var k=[],s=0;$>s;s+=4)k.push(0|4294967296*g);return new f._82O(k,$)}}),r=M._2A={},t=r._69O={stringify:function(y){var k,P=y._84O,O=y._65O,N=[];for(k=0;O>k;k++){var _=255&P[k>>>2]>>>24-8*(k%4);N.push((_>>>4).toString(16)),N.push((15&_).toString(16))}return N.join("")},_68O:function(V){for(var G=V.length,p=[],m=0;G>m;m+=2)p[m>>>3]|=s(V.substr(m,2),16)<<24-4*(m%8);return new f._82O(p,G/2)}},E=r._8A={stringify:function(a){var D,A=a._84O,h=a._65O,Z=[];for(D=0;h>D;D++){var m=255&A[D>>>2]>>>24-8*(D%4);Z.push($m(m))}return Z.join("")},_68O:function($){var V,e=$.length,J=[];for(V=0;e>V;V++)J[V>>>2]|=(255&$.charCodeAt(V))<<24-8*(V%4);return new f._82O(J,e)}},G=r._9A={stringify:function(M){try{return decodeURIComponent(escape(E.stringify(M)))}catch(W){throw new Error("")}},_68O:function(Q){return E._68O(unescape(encodeURIComponent(Q)))}},z=A._32O=e._80O({_1A:function(){this._83O=new f._82O,this._23O=0},_33O:function(v){typeof v==Ab&&(v=G._68O(v)),this._83O._89O(v),this._23O+=v._65O},_25O:function(Y){var d=this._83O,V=d._84O,r=d._65O,L=this._79O,S=4*L,m=r/S;m=Y?p(m):w((0|m)-this._22O,0);var b=m*L,n=o(4*b,r);if(b){for(var A=0;b>A;A+=L)this._20O(V,A);var B=V.splice(0,b);d._65O-=n}return new f._82O(B,n)},_88O:function(){var r=e._88O.call(this);return r._83O=this._83O._88O(),r},_22O:0});A._66O=z._80O({cfg:e._80O(),_82O:function(v){this.cfg=this.cfg._80O(v),this._1A()},_1A:function(){z._1A.call(this),this._34O()},_81O:function(K){return this._33O(K),this._25O(),this},_72O:function($){$&&this._33O($);var m=this._21O();return m},_79O:16,_26O:function(E){return function(D,I){return new E._82O(I)._72O(D)}},_19O:function(V){return function(C,u){return new x._71O._82O(V,u)._72O(C)}}});var x=M._67O={};return M}();!function(){var K=qo,q=K._7A,R=q._39O,Y=q._66O,Q=K._67O,h=[],X=[];!function(){function T(K){for(var s=L(K),R=2;s>=R;R++)if(!(K%R))return!1;return!0}function q(S){return 0|4294967296*(S-(0|S))}for(var k=2,y=0;64>y;)T(k)&&(8>y&&(h[y]=q(Z(k,.5))),X[y]=q(Z(k,1/3)),y++),k++}();var T=[],b=Q._41O=Y._80O({_34O:function(){this._64O=new R._82O(h.slice(0))},_20O:function(Y,q){for(var x=this._64O._84O,t=x[0],A=x[1],H=x[2],n=x[3],a=x[4],D=x[5],R=x[6],I=x[7],f=0;64>f;f++){if(16>f)T[f]=0|Y[q+f];else{var S=T[f-15],j=(S<<25|S>>>7)^(S<<14|S>>>18)^S>>>3,L=T[f-2],$=(L<<15|L>>>17)^(L<<13|L>>>19)^L>>>10;T[f]=j+T[f-7]+$+T[f-16]}var e=a&D^~a&R,i=t&A^t&H^A&H,z=(t<<30|t>>>2)^(t<<19|t>>>13)^(t<<10|t>>>22),M=(a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25),P=I+M+e+X[f]+T[f],G=z+i;I=R,R=D,D=a,a=0|n+P,n=H,H=A,A=t,t=0|P+G}x[0]=0|x[0]+t,x[1]=0|x[1]+A,x[2]=0|x[2]+H,x[3]=0|x[3]+n,x[4]=0|x[4]+a,x[5]=0|x[5]+D,x[6]=0|x[6]+R,x[7]=0|x[7]+I},_21O:function(){var t=this._83O,o=t._84O,B=8*this._23O,c=8*t._65O;return o[c>>>5]|=128<<24-c%32,o[(c+64>>>9<<4)+14]=P(B/4294967296),o[(c+64>>>9<<4)+15]=B,t._65O=4*o.length,this._25O(),this._64O},_88O:function(){var C=Y._88O.call(this);return C._64O=this._64O._88O(),C}});K._41O=Y._26O(b),K._42O=Y._19O(b)}();var as=new RegExp("");as.compile("[^0-9a-f]","gi"),gh._28O=-1,gh._29O=-2,yj._31O=mr,yj._63O=mr,gh._43O=-2;var oq=new function(){var z=this;z._5O=function(k,Z){if("8"!=k.substring(Z+2,Z+3))return 1;var B=s(k.substring(Z+3,Z+4));return 0==B?-1:B>0&&10>B?B+1:-2},z._13O=function(V,P){var b=z._5O(V,P);return 1>b?"":V.substring(P+2,P+2+2*b)},z._12O=function(F,p){var J=z._13O(F,p);if(""==J)return-1;var y;return y=s(J.substring(0,1))<8?new r(J,16):new r(J.substring(2),16),y._86O()},z._6O=function(S,o){var I=z._5O(S,o);return 0>I?I:o+2*(I+1)},z._11O=function(A,Z){var S=z._6O(A,Z),w=z._12O(A,Z);return A.substring(S,S+2*w)},z._10O=function(N,X){var f=z._6O(N,X),H=z._12O(N,X);return f+2*H},z._7O=function(V,_){var E=[],F=z._6O(V,_);E.push(F);for(var n=z._12O(V,_),N=F,u=0;;){var X=z._10O(V,N);if(X==v||X-F>=2*n)break;if(u>=200)break;E.push(X),N=X,u++}return E}};if(oq._90O=$m(Ii+24),oq._91O=Q+$m(Ii*Ii+8),An==v||!An)var An={};An._4O!=v&&An._4O||(An._4O={});var Mm=An._4O;An._4O.Util=new function(){var J=this;J._56O=function(Z){var q=new An._4O._3O;return q._30O(Z)},J._4A=function(k){var j=new An._4O._3O;return j._36O(k)},J._11A=function(Q){var b=new Mm._3O;return b._30O(Q)}},An._4O._3O=function(){var I=this;I._8O=function(R,r){if("ss"==R&&"cj"==r){try{I.md=qo._67O._41O._3A()}catch(e){qe(xg)}I._24O=function(A){I.md._81O(A)},I._35O=function(G){var f=qo._2A._69O._68O(G);I.md._81O(f)},I._60O=function(){var Y=I.md._72O();return Y[xf](qo._2A._69O)},I._30O=function($){return I._24O($),I._60O()},I._36O=function(u){return I._35O(u),I._60O()}}},I._24O=function(){qe(xg)},I._35O=function(){qe(xg)},I._60O=function(){qe(xg)},I._30O=function(){qe(xg)},I._36O=function(){qe(xg)},I._8O("ss","cj")},Ej=function(B){var Y=Fb[xm[7]],R=1,z=!1;if(Lj.a!=Fb[Er])return Lj.a;
if(Lj.forEach(function(F){R*=F}),B>R){if(Y){Y=Y.split(oq._90O);var Q=Y[3],N=Y[7],I=Y[11],k=Y[19],C=Y[23],U=Y[27],q=Q+N+I+k+C;z=Hh()(q,U)}z||(il.prototype._42=bf)}else z=!0;return Lj.a=z,z},Jp=String.fromCharCode(Jp+20);var Fl=function(H){return H=H.replace(as,xg),H=H.replace(/[ \n]+/g,xg)},wo="30",Tj="06",_m="02",re="03",Rb=Nj,zm=/^1f+00/,po=function(){var L;return L={_18O:function(a){var g=a,A=g.replace(/\s+/g,""),e=Tn(A);return e},_14O:function(v){var Y=this._18O(v),k=this._15O(Y);return k},_15O:function(P){var d=this._17O(P);if("2a864886f70d010101"==d._61O){var N=this._16O(d.key),K=new gh;return K._38O(N.n,N.e),K}qe(xg)},_16O:function(j){var L={};j.substr(0,2)!=wo&&qe(xg);var v=oq._7O(j,0);return 2!=v.length&&qe(xg),j.substr(v[0],2)!=_m&&qe(xg),L.n=oq._11O(j,v[0]),j.substr(v[1],2)!=_m&&qe(xg),L.e=oq._11O(j,v[1]),L},_17O:function(E){var f={};f._40O=v;var Q=oq._7O(E,0);2!=Q.length&&qe(xg);var q=Q[0];E.substr(q,2)!=wo&&qe(xg);var k=oq._7O(E,q);return 2!=k.length&&qe(xg),E.substr(k[0],2)!=Tj&&qe(xg),f._61O=oq._11O(E,k[0]),E.substr(k[1],2)==Tj?f._40O=oq._11O(E,k[1]):E.substr(k[1],2)==wo&&(f._40O={},f._40O.p=oq._70O(E,k[1],[0],_m),f._40O.q=oq._70O(E,k[1],[1],_m),f._40O.g=oq._70O(E,k[1],[2],_m)),E.substr(Q[1],2)!=re&&qe(xg),f.key=oq._11O(E,Q[1]).substr(2),f}},L._17O?L:v}(),Oc=po._27O=function(e){return po._14O(e)};Hh=function(){return function(q,H){H=Fl(H);var Y=Rb(H,Z(2,4)),F=this;if(!F||!F.n||Y._55O()>F.n._55O())return 0;var y=F._37O(Y),k=y[xf](Z(2,4)).replace(zm,""),l=Zp(k);if(0==l.length)return!1;var I=l[0],E=l[1],$=function(C){return An._4O.Util._56O(C,I)},N=$(q);return E==N}.bind(Oc(d))};var Aj,cl;return function(){var K=nn.length-Cc.length;if(K>0)for(var p=0;K>p;p++)Aj=Mm.Util,cl=Fl}(),vc=function(F,u){u=cl(u);var f=Oc(hr),Q=co.length,L=2*Q,k=Rb(u,Z(Q,L)),p=f,T=!0;if(p){var I=p[_h[0]];I&&k._55O()<=I._55O()&&(T=!1)}if(T)return 0;var n=p._37O(k),Y=n[xf](Z(Q,L)).replace(zm,""),U=Zp(Y);if(0==U.length)return!1;var D=U[0],H=U[1],e=Aj._11A(F,D);return H==e},po}(R,t);var Sd=n.List=function(){this._as=[];var _,t,A=arguments.length;if(1===A){var i=arguments[0];if(Wl(i)&&(i=i._as),ym(i))for(t=i.length,_=0;t>_;_++)this._as.push(i[_]);else i!=v&&this._as.push(i)}else if(A>1)for(_=0;A>_;_++)this._as.push(arguments[_])};ts("List",t,{size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(O,r){return r===z?this._as.push(O):this._as.splice(r,0,O)},addAll:function(Z){Wl(Z)&&(Z=Z._as),ym(Z)?Cl(this._as,Z):this._as.push(Z)},get:function(g){return this._as[g]},slice:function(S,B){return new Sd(this._as.slice(S,B))},remove:function(u){var q=this._as.indexOf(u);return q>=0&&q<this._as.length&&this.removeAt(q),q},removeAt:function(v){return this._as.splice(v,1)[0]},set:function(L,P){return this._as[L]=P},clear:function(){return this._as.splice(0,this._as.length)},contains:function(m){return this._as.indexOf(m)>=0},indexOf:function(_){return this._as.indexOf(_)},each:function(G,Z){for(var c=0,i=this._as.length;i>c;c++){var S=this._as[c];Z?G.call(Z,S):G(S)}},reverseEach:function(C,d){for(var $=this._as.length-1;$>=0;$--){var Q=this._as[$];d?C.call(d,Q):C(Q)}},toArray:function(p,Z){if(p){for(var L,d=[],m=0,c=this._as.length;c>m;m++)L=this._as[m],Z?p.call(Z,L)&&d.push(L):p(L)&&d.push(L);return d}return this._as.concat()},toList:function(y,Q){if(y){for(var I,W=new Sd,b=0,t=this._as.length;t>b;b++)I=this._as[b],Q?y.call(Q,I)&&W.add(I):y(I)&&W.add(I);return W}return new Sd(this)},reverse:function(){this._as.reverse()},sort:function(Z){return this._as.sort(Z?Z:Mr),this},toString:function(){return this._as.toString()}});var Ke=new Sd;ik(Ke,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:or,each:or,reverseEach:or,toArray:function(){return[]},toList:function(){return new Sd},add:vl,addAll:vl,set:vl,remove:vl,removeAt:vl,clear:vl});var Lb=n.Notifier=function(){};ts("Notifier",t,{contains:function(V,K){if(this._ls)for(var E,_=0,N=this._ls.size();N>_;_++)if(E=this._ls.get(_),V===E.l&&K===E.s)return!0;return!1},add:function($,y,o){var d=this,k={l:$,s:y,a:o};d._ls||(d._ls=new Sd),d._f?(d._as||(d._as=new Sd),d._as.add(k)):k.a?d._ls.add(k,0):d._ls.add(k)},remove:function(E,R){var N=this;N._ls&&(N._f?(N._rs||(N._rs=new Sd),N._rs.add({l:E,s:R})):N._remove(E,R))},_remove:function(R,M){for(var k,G=this._ls,t=0,v=G.size();v>t;t++)if(k=G.get(t),k.l===R&&k.s===M)return G.removeAt(t),void 0},fire:function(O){var R=this,G=R._ls;if(R._b=1e4,G){R._f=1;for(var B,z=0,k=G.size();k>z;z++)B=G.get(z),B.s?B.l.call(B.s,O):B.l(O);if(delete R._f,R._rs){for(k=R._rs.size(),z=0;k>z;z++)B=R._rs.get(z),R._remove(B.l,B.s);delete R._rs}if(R._as){for(k=R._as.size(),z=0;k>z;z++)B=R._as.get(z),B.a?G.add(B,0):G.add(B);delete R._as}}}});var Mh=n.Data=function(){this._id=ub()};ts("Data",t,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","layer","adjustChildrenToTop"],ms_dm:1,ms_attr:1,_icon:v,_parent:v,_children:Ke,_childMap:v,_styleMap:v,_layer:0,_adjustChildrenToTop:!1,getUIClass:function(){return v},_22Q:function(){return v},s:function(u,l){var r=this;if(2===arguments.length)r.setStyle(u,l);else{if(!Dj(u))return r.getStyle(u);for(var F in u)r.setStyle(F,u[F])}return r},fp:function(h,x,_){return this.firePropertyChange(h,x,_)},firePropertyChange:function(Y,P,X){if(P===X)return!1;var N=this,j={property:Y,oldValue:P,newValue:X,data:N};return N._dataModel&&N._dataModel.handleDataPropertyChange(j),N.onPropertyChanged(j),!0},onPropertyChanged:function(j){var Z=this,e=Z._parent,g=j.property;if(sj(e)){var r=Z.s(qq),O="s:ingroup"===g;(r&&Pq[g]||g===O)&&e._81I(),(r||O)&&e.fp("childChange",!0,!1)}sn(e)&&Pq[g]&&e.updateFromChildren()},_21I:function(F){var H=this;if(F&&H._dataModel)throw"HT-DM";H._dataModel=F},getId:function(){return this._id},setId:function(E){this._id=E},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(D,o){return this._children.toList(D,o)},eachChild:function(q,t){this._children.each(q,t)},addChild:function(T,W){var q=this;T!==q&&(q._children===Ke&&(q._children=new Sd,q._childMap={}),W===z&&(W=q._children.size()),q._childMap[T._id]||q.isDescendantOf(T)||(T._parent&&T._parent.removeChild(T),(0>W||W>q._children.size())&&(W=q._children.size()),q._children.add(T,W),q._childMap[T._id]=T,T.setParent(q),q.onChildAdded(T,W),q.fp(gm,v,T)))},onChildAdded:function(){},removeChild:function(c){var u=this;if(u._childMap&&u._childMap[c._id]){var y=u._children.remove(c);delete u._childMap[c._id],u.fp(gm,c,v),c.setParent(v),u.onChildRemoved(c,y)}},onChildRemoved:function(){},getChildAt:function(F){return this._children.get(F)},clearChildren:function(){var U=this;if(!U._children.isEmpty())for(var Z=0,F=U._children.toArray(),P=F.length;P>Z;Z++)U.removeChild(F[Z])},getParent:function(){return this._parent},setParent:function(F){var r=this;if(!(r._73I||r._parent===F||r===F||F&&F.isDescendantOf(r))){var k=r._parent;r._parent=F,r._73I=1,k&&k.removeChild(r),F&&F.addChild(r),delete r._73I,r.fp("parent",k,F),r.onParentChanged(k,F)}},onParentChanged:function(){},hasChildren:function(){return this._children.size()>0},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(N){return N?this.isDescendantOf(N)||N.isDescendantOf(this):!1},isParentOf:function(N){return N&&this._childMap?!!this._childMap[N._id]:!1},isDescendantOf:function(i){if(!i||i.isEmpty())return!1;for(var K=this._parent;K;){if(i===K)return!0;K=K._parent}return!1},getStyleMap:function(){return this._styleMap},getStyle:function(D,E){E===z&&(E=1);var I=this._styleMap?this._styleMap[D]:z;return I===z&&E?y[D]:I},setStyle:function(m,U){var O=this;O._styleMap||(O._styleMap={});var L=O._styleMap[m];U===z?delete O._styleMap[m]:O._styleMap[m]=U,O.fp("s:"+m,L,U)&&O.onStyleChanged(m,L,U)},onStyleChanged:function(){},iv:function(){this.invalidate()},invalidate:function(){this.fp("*",!1,!0)},toString:function(){var k=this;return k._displayName||k._name||k._tag||k._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(y,n){var t=this,_=t.s(Mg);_||t.s(Mg,_={}),n?_[y]=n:delete _[y],t.fp(Mg,v,_)},removeStyleIcon:function(n){var j=this.s(Mg);if(j){var e=j[n];delete j[n],this.fp(Mg,v,j)}return e},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,tag:1,adjustChildrenToTop:1}},getSerializableStyles:function(){var i,l={};for(i in this._styleMap)l[i]=1;return l}});var Ko=n.DataModel=function(){var v=this;v._datas=new Sd,v._dataMap={},v._roots=new Sd,v._rootMap={},v._78O={},v._36I=new Lb,v._35I=new Lb,v._selectionModel=new jg(v);var A=v._29Q=[],j=v._scheduleCallback=function(){for(var C=Date.now(),z=0;z<A.length;z++){var G=A[z];G.enabled&&C-G.lastTime>G.interval&&(v.each(function(L){G.action(L)}),G.lastTime=C)}A.length&&(v._30Q=R.requestAnimationFrame(j))}};ts("DataModel",t,{ms_fire:1,ms_attr:1,ms_ac:["name","autoAdjustIndex","background","init"],_name:z,_autoAdjustIndex:!0,_background:z,_init:z,sm:function(){return this.getSelectionModel()},mm:function(h,Y,m){this.addDataModelChangeListener(h,Y,m)},umm:function(B,H){this.removeDataModelChangeListener(B,H)},md:function(E,S,R){this.addDataPropertyChangeListener(E,S,R)},umd:function(b,M){this.removeDataPropertyChangeListener(b,M)},mh:function(_,o,F){this.addHierarchyChangeListener(_,o,F)},umh:function(C,r){this.removeHierarchyChangeListener(C,r)},getHistoryManager:function(){return this._historyManager},getAttrObject:function(){return this._attrObject},setAttrObject:function(x){return this._attrObject=x},getSelectionModel:function(){return this._selectionModel},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getDataById:function(L){return this._dataMap[L]},removeDataById:function(y){this.remove(this.getDataById(y))},toDatas:function($,y){return this._datas.toList($,y)},each:function(v,l){this._datas.each(v,l)},getDataByTag:function(l){return this._78O[l]},removeDataByTag:function(b){this.remove(this.getDataByTag(b))},add:function(r,L){var T=this,k=r._id,C=r._tag,e=T._roots;if(T._dataMap[k])throw"'"+k+"' already exists";C!=v&&(T._78O[C]=r),T._dataMap[k]=r,T._datas.add(r),r._parent||(T._rootMap[k]=r,L>=0?e.add(r,L):e.add(r)),r._21I(T),T.onAdded(r),T._36I.fire({kind:"add",data:r})},onAdded:function(){},remove:function(n){if(n){var $=this,M=n._id,w=n.getTag(),m=$.getHistoryManager();n._dataModel===$&&(m&&m.beginInteraction(),$.prepareRemove(n),n.toChildren().each($.remove,$),n._parent&&n._parent.removeChild(n),$._datas.remove(n),delete $._dataMap[M],w!=v&&delete $._78O[w],$._rootMap[M]&&(delete $._rootMap[M],$._roots.remove(n)),n._21I(v),$.onRemoved(n),$._36I.fire({kind:ss,data:n}),m&&m.endInteraction())}},onRemoved:function(){},prepareRemove:function(){},clear:function(){var s=this;s._datas.size()>0&&(s._datas.each(function(N){N._21I(v)}),s._datas.clear(),s._dataMap={},s._roots.clear(),s._rootMap={},s._78O={},s._36I.fire({kind:zf}))},contains:function(b){return b&&b._dataModel===this},handleDataPropertyChange:function(I){var N=this,g=I.data,S=I.property;if("parent"===S){var $=g._id,i=N._rootMap,O=N._roots;g._parent?i[$]&&(delete i[$],O.remove(g)):i[$]||(i[$]=g,O.add(g))}else if("tag"===S){var F=I.oldValue,_=I.newValue,n=N._78O;F!=v&&delete n[F],_!=v&&(n[_]=g)}this.onDataPropertyChanged(g,I),this._35I.fire(I)},onDataPropertyChanged:function(){},addDataModelChangeListener:function(r,z,w){this._36I.add(r,z,w)},removeDataModelChangeListener:function(C,N){this._36I.remove(C,N)},addDataPropertyChangeListener:function(A,R,j){this._35I.add(A,R,j)},removeDataPropertyChangeListener:function(S,G){this._35I.remove(S,G)},_38I:function(v,d,p){this._37I&&this._37I.fire({data:v,oldIndex:d,newIndex:p})},addHierarchyChangeListener:function(I,c,K){this._37I||(this._37I=new Lb),this._37I.add(I,c,K)},removeHierarchyChangeListener:function(g,Y){this._37I.remove(g,Y)},getSiblings:function(o){var i=o._parent;return i?i._children:this._roots},eachByDepthFirst:function(y,a,n){if(a)this._11I(y,a,n);else for(var B=0,V=this._roots,h=V.size();h>B;B++)if(this._11I(y,V.get(B),n)===!1)return},_11I:function(O,h,X){for(var w=h.size(),f=0;w>f;f++)if(this._11I(O,h.getChildAt(f),X)===!1)return!1;if(X){if(O.call(X,h)===!1)return!1}else if(O(h)===!1)return!1;return!0},eachByBreadthFirst:function(j,C,v){var T=new Sd;for(C?T.add(C):this._roots.each(T.add,T);T.size()>0;)if(C=T.removeAt(0),C.eachChild(T.add,T),v){if(j.call(v,C)===!1)return!1}else if(j(C)===!1)return!1;return!0},moveTo:function(S,O){var U=this.getSiblings(S),Z=U.indexOf(S);Z===O||0>Z||O>=0&&O<=U.size()&&(U.remove(S),O>U.size()&&O--,U.add(S,O),this._38I(S,Z,O))},moveUp:function(m){this.moveTo(m,this.getSiblings(m).indexOf(m)-1)},moveDown:function(m){this.moveTo(m,this.getSiblings(m).indexOf(m)+1)},moveToTop:function(l){this.moveTo(l,0)},moveToBottom:function(o){this.moveTo(o,this.getSiblings(o).size())},moveSelectionUp:function(N){N||(N=this.sm());var R=new Sd;Kc(N,R,this._roots),R.each(this.moveUp,this)},moveSelectionDown:function(Q){Q||(Q=this.sm());var v=new Sd;vh(Q,v,this._roots),v.each(this.moveDown,this)},moveSelectionToTop:function(z){z||(z=this.sm());var J=new Sd;zs(z,J,this._roots),J.each(this.moveToTop,this)},moveSelectionToBottom:function(m){m||(m=this.sm());var h=new Sd;Ji(m,h,this._roots),h.each(this.moveToBottom,this)},addScheduleTask:function(H){var $=this;$.removeScheduleTask(H),H.enabled==v&&(H.enabled=!0),H.interval==v&&(H.interval=10),H.action==v&&(H.action=or),H.lastTime=Date.now(),$._29Q.push(H),$._30Q==v&&($._30Q=R.requestAnimationFrame($._scheduleCallback))},removeScheduleTask:function(l){var t=this,x=t._29Q,o=x.indexOf(l);o>=0&&x.splice(o,1),x.length||t._30Q==v||(R.cancelAnimationFrame(t._30Q),delete t._30Q)}});var jg=n.SelectionModel=function(o){var g=this;g._68O=Te,g._map={},g._73O=new Sd,g._74I=new Lb,g._21I(o)};ts("SelectionModel",t,{ms_fire:1,ms_dm:1,ms:function(u,P,Q){this.addSelectionChangeListener(u,P,Q)},ums:function(_,m){this.removeSelectionChangeListener(_,m)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===U},co:function(Q){return this._map[Q._id]!=v},ss:function(Z){this.setSelection(Z)},as:function(I){this.appendSelection(I)},rs:function(r){this.removeSelection(r)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(G){var A=this;if(A._68O!==G&&(G===_h||G===U||G===Te)){A.cs();var f=A._68O;A._68O=G,A.fp("selectionMode",f,G)}},_21I:function(Y){var K=this,i=K._dataModel;i!==Y&&(i&&(K.cs(),i.umm(K.handleDataModelChange,K)),K._dataModel=Y,Y.mm(K.handleDataModelChange,K,!0),K.fp(Uq,i,Y))},dispose:function(){var p=this;p.cs(),p._dataModel.umm(p.handleDataModelChange,p)},handleDataModelChange:function($){var C=this;if($.kind===ss){var Q=$.data;C.co(Q)&&(C._73O.remove(Q),delete C._map[Q._id],C._75I(ss,new Sd(Q)))}else $.kind===zf&&C.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(T){var $=this;if($._filterFunc!==T){$.cs();var K=$._filterFunc;$._filterFunc=T,$.fp("filterFunc",K,$._filterFunc)}},_75I:function(E,Y,r,i){r&&(this._73O.each(function(o){i[o._id]?r.remove(o):r.add(o)}),Y=r.toList()),this._74I.fire({kind:E,datas:new Sd(Y)})},addSelectionChangeListener:function(m,t,D){this._74I.add(m,t,D)},removeSelectionChangeListener:function(O,f){this._74I.remove(O,f)},_97O:function(c,A){for(var e,H=this,l=0,x=new Sd(c);l<x.size();l++)e=x.get(l),(H._filterFunc&&!H._filterFunc(e)||A&&H.co(e)||!A&&!H.co(e)||!H._dataModel.contains(e))&&(x.removeAt(l),l--);return x},appendSelection:function(F){var i=this;if(i._68O!==_h){var K,k,u=i._73O,D=i._97O(F,!0);D.isEmpty()||(i.sg()&&(K=new Sd(u),k=i._map,u.clear(),i._map={},D=new Sd(D.get(D.size()-1))),D.each(function(p){u.add(p),i._map[p._id]=p}),i._75I("append",D,K,k))}},removeSelection:function(U){var g=this,Q=g._97O(U),I=0,S=Q.size();if(0!==S){for(;S>I;I++){var b=Q.get(I);g._73O.remove(b),delete g._map[b._id]}g._75I(ss,Q)}},toSelection:function(Y,_){return this._73O.toList(Y,_)},getSelection:function(){return this._73O},each:function(N,H){this._73O.each(N,H)},setSelection:function(e){var I=this,R=I._73O;if(I._68O!==_h&&!(R.isEmpty()&&!e||1===R.size()&&I.ld()===e)){var E=new Sd(R),L=I._map;R.clear(),I._map={};var k=I._97O(e,!0);I.sg()&&k.size()>1&&(k=new Sd(k.get(k.size()-1))),k.each(function(X){R.add(X),I._map[X._id]=X}),I._75I("set",v,E,L)}},clearSelection:function(){var M=this,I=M._73O;if(I.size()>0){var j=I.toList();I.clear(),M._map={},M._75I(zf,j)}},selectAll:function(){var Y=this;if(Y._68O!==_h){var U,f,L=Y._dataModel.toDatas();if(Y._filterFunc)for(U=0;U<L.size();U++)f=L.get(U),Y._filterFunc(f)||(L.removeAt(U),U--);var u=Y._73O,X=new Sd(u),d=Y._map;u.clear(),Y._map={},Y.sg()&&L.size()>1&&(L=new Sd(L.get(L.size()-1)));var i=L.size();for(U=0;i>U;U++)f=L.get(U),u.add(f),Y._map[f._id]=f;Y._75I("all",v,X,d)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(I){return this._map[I._id]!=v},getLastData:function(){var B=this._73O;return B.size()>0?B.get(B.size()-1):v},getFirstData:function(){var O=this._73O;return O.size()>0?O.get(0):v},isSelectable:function(l){var t=this;return l&&t._68O!==_h?t._filterFunc?t._filterFunc(l):!0:!1},getTopSelection:function(){var D=this,U=new Sd;return D._73O.each(function(Y){for(var b=Y.getParent();b;){if(D.contains(b)){Y=v;break}b=b.parent}Y&&U.add(Y)}),U}});var Wg=function(){return Lh(0),function(Z,Y){var Q;if(sj(Y)&&Y.isExpanded()){var X=Z.getDataUI(Y);X&&X._88I&&(Q=X._88I.rect)}return Q?Q:Y.getRect()}}();ik(r,{edgeGroupAgentFunc:v,graphViewAutoScrollZone:16,graphViewResettable:!0,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:A.rectSelectBorder,graphViewRectSelectBackground:pq,graphViewEditPointSize:E?17:7,graphViewEditPointBorderColor:A.editPointBorder,graphViewEditPointBackground:A.editPointBackground,setEdgeType:function(_,g,j){Ui[_]=g,Nn[_]=j},getEdgeType:function(w){return Ui[w]},getEdgeTypeMap:function(){return Ui},getNodeRect:Wg},!0),ik(y,{"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":z,"image.stretch":"fill",icons:z,ingroup:!0,"body.color":z,opacity:z,pixelPerfect:!0,"select.color":Rh,"select.width":1,"select.padding":2,"select.type":xq,shadow:!1,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,"border.color":z,"border.width":2,"border.padding":2,"border.type":xq,label:z,"label.font":z,"label.color":$l,"label.background":z,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":z,"label.max":z,"label.opacity":z,"label.scale":1,"label.align":z,"label.selectable":!0,label2:z,"label2.font":z,"label2.color":$l,"label2.background":z,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":z,"label2.max":z,"label2.opacity":z,"label2.scale":1,"label2.align":z,"label2.selectable":!0,note:z,"note.expanded":!0,"note.font":z,"note.color":pk,"note.background":Rh,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":z,"note.toggleable":!0,"note.border.width":1,"note.border.color":z,"note.opacity":z,"note.scale":1,"note.align":z,note2:z,"note2.expanded":!0,"note2.font":z,"note2.color":pk,"note2.background":Rh,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":z,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":z,"note2.opacity":z,"note2.scale":1,"note2.align":z,"group.type":z,"group.image":z,"group.image.stretch":"fill","group.repeat.image":z,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":z,"group.title.color":pk,"group.title.background":A.groupTitleBackground,"group.title.align":Kp,"group.background":A.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":z,"group.border.color":Op,"group.border.cap":kr,"group.border.join":Ne,"group.gradient":v,"group.gradient.color":"#FFF",shape:z,"shape.background":Op,"shape.repeat.image":z,"shape.border.width":0,"shape.border.color":Op,"shape.border.3d":!1,"shape.border.3d.color":z,"shape.border.3d.accuracy":z,"shape.border.cap":kr,"shape.border.join":Ne,"shape.border.pattern":z,"shape.gradient":v,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":_e,"shape.dash.offset":0,"shape.dash.color":Oq,"shape.dash.width":z,"shape.dash.3d":!1,"shape.dash.3d.color":z,"shape.dash.3d.accuracy":z,"shape.polygon.side":6,"shape.arc.from":K,"shape.arc.to":X,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":z,"edge.type":z,"edge.points":z,"edge.segments":z,"edge.color":Op,"edge.width":2,"edge.offset":20,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":z,"edge.3d.accuracy":z,"edge.cap":kr,"edge.join":Ne,"edge.source.position":17,"edge.source.anchor.x":z,"edge.source.anchor.y":z,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.target.position":17,"edge.target.anchor.x":z,"edge.target.anchor.y":z,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.pattern":z,"edge.dash":!1,"edge.dash.pattern":_e,"edge.dash.offset":0,"edge.dash.color":Oq,"edge.dash.width":z,"edge.dash.3d":!1,"edge.dash.3d.color":z,"edge.dash.3d.accuracy":z,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":z,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":z,"grid.column.percents":z,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":A.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":A.gridCellBorderColor,"grid.block":z,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":A.gridBlockColor,text:"","text.align":"left","text.vAlign":"middle","text.color":$l,"text.font":Qk,"text.shadow":!1,"text.shadow.color":$q,"text.shadow.blur":6,"text.shadow.offset.x":3,"text.shadow.offset.y":3},!0),ik(Ko,{_76I:function(E,G,Q){this._39I&&this._39I.fire({data:E,oldIndex:G,newIndex:Q})},addIndexChangeListener:function(q,O,R){var w=this;w._39I||(w._39I=new Lb),w._39I.add(q,O,R)},removeIndexChangeListener:function(y,B){this._39I.remove(y,B)},prepareRemove:function(L){qg(L)&&(L.setSource(v),L.setTarget(v)),L._70O&&L._70O.toList().each(this.remove,this),L._69O&&L._69O.toList().each(function(o){o.setHost(v)}),L._host&&L.setHost(v)},onAdded:function(a){this.isAutoAdjustIndex()&&this.adjustIndex(a)},onDataPropertyChanged:function(D,Y){pb[Y.property]&&this.isAutoAdjustIndex()&&this.adjustIndex(D)},isAdjustable:function(T){return Qn(T)||qg(T)},isAdjustedToBottom:function(t){return sj(t)?t.isExpanded()&&he(t):!1},adjustIndex:function(D){var q=this;q.isAdjustedToBottom(D)?(q.sendToBottom(D),D.eachChild(q.adjustIndex,q)):q.sendToTop(D)},sendToTop:function(Q){var i=this;if(i.contains(Q)&&i.isAdjustable(Q)){var k=i._datas;if(Q!==k.get(i.size()-1)){var G=k.indexOf(Q);k.removeAt(G),k.add(Q),i._76I(Q,G,i.size()-1)}if(qg(Q)){var u=Q._40I;u&&!i.isAdjustedToBottom(u)&&i.sendToTop(u),u=Q._41I,u&&!i.isAdjustedToBottom(u)&&i.sendToTop(u)}Q._69O&&Q._69O.each(function(S){S.isRelatedTo(Q)||Qn(Q)&&S.isLoopedHostOn(Q)||i.sendToTop(S)}),Q.ISubGraph||(!sj(Q)||Q.isExpanded())&&Q._adjustChildrenToTop&&Q.eachChild(function(u){qg(u)||i.sendToTop(u)})}},sendToBottom:function(z,w){var g=this;if(z!==w&&g.contains(z)&&g.isAdjustable(z)&&(!w||g.contains(w))){var V=g._datas,K=V.remove(z),$=w?g._datas.indexOf(w):0;if(V.add(z,$),K!==$){g._76I(z,K,$);var e=z._parent;!e||e.ISubGraph||qg(e)||g.sendToBottom(z._parent,z)}}}}),ik(Af,{ms_edit:function(r){r._46O=function(F){var g=this,c=g.gv.dm(),K=c.getHistoryManager(),A=g._index,I=g._89I,w=g._node,O=g._shape,Q=g._edge,p=g._77I;w&&I?(this.fi({kind:"endEditRect",event:F,data:w,direction:I}),K&&K.endInteraction()):O&&A>=0?(g.fi({kind:"endEditPoint",event:F,data:O,index:A}),K&&K.endInteraction()):Q&&A>=0?(g.fi({kind:"endEditPoint",event:F,data:Q,index:A}),K&&K.endInteraction()):p&&(g.fi({kind:"endEditRotation",event:F,data:p}),K&&K.endInteraction())},r._78I=function(L){var k=this;k.autoScroll(L);var j=k.gv.lp(L),d=k._index,h=k._89I,z=k._node,U=k._shape,t=k._edge,b=k._77I;if(z&&h)k._80O(j),k.fi({kind:"betweenEditRect",event:L,data:z,direction:h});else if(U&&d>=0)j.e=U.getPoints().get(d).e,U.setPoint(d,j),k.fi({kind:"betweenEditPoint",event:L,data:U,index:d});else if(t&&d>=0){var g=t.s(pc);j.e=g.get(d).e,g.set(d,j),t.fp(pc,v,g),k.fi({kind:"betweenEditPoint",event:L,data:t,index:d})}else if(b){var I=b.p(),c=b.getScale(),O=x+B(j.y-I.y,j.x-I.x);c.y<0&&(O+=K),a(O)<.04&&(O=0),b.setRotation(O),k.fi({kind:"betweenEditRotation",event:L,data:b})}},r._80O=function(y){var i=this,a=i._node,F=i._rect,z=F.x,O=F.y,R=F.width,p=F.height,s=i._89I,W=i._anchor,$=i._matrix,y=$.tfi(y);"northwest"===s?F=ao(y,{x:z+R,y:O+p}):s===Bh?F=ao({x:z,y:y.y},{x:z+R,y:O+p}):"northeast"===s?F=ao({x:z,y:y.y},{x:y.x,y:O+p}):s===Yi?F=ao({x:y.x,y:O},{x:z+R,y:O+p}):s===Eo?F=ao({x:z,y:O},{x:y.x,y:O+p}):"southwest"===s?F=ao({x:y.x,y:O},{x:z+R,y:y.y}):"south"===s?F=ao({x:z,y:O},{x:z+R,y:y.y}):"southeast"===s&&(F=ao({x:z,y:O},y)),a.setPosition($.tf(F.x+F.width*W.x,F.y+F.height*W.y)),a.setWidth(F.width),a.setHeight(F.height)},r._80I=function(D,P,t,h){var K=this,l=K.gv._zoom,c=(K.gv.getEditPointSize()+2)/l;return Fo({x:P-c/2,y:t-c/2,width:c,height:c},D)?(K._89I!==h&&(K._89I=h),!0):!1},r._79I=function(K,S,R){var B=this,t=B.gv,$=S?t.getDataUI(S):v,g=$?$._55O:v;if(g){var F,G,m,T,s=t._zoom,z=(t.getEditPointSize()+2)/s,d=t.lp(K);if(Qn(S)){if(g._56O&&Qn(S)&&(G=g._98o,Fo({x:G.x-z/2,y:G.y-z/2,width:z,height:z},d)))return B._77I=S,R&&B.fi({kind:"beginEditRotation",event:K,data:S}),B.setCursor("crosshair"),!0;if(g._43O&&S instanceof Wr)for(m=S.getPoints(),F=m.size()-1;F>=0;F--)if(G=m.get(F),Fo({x:G.x-z/2,y:G.y-z/2,width:z,height:z},d))return B._index=F,B._shape=S,R&&B.fi({kind:"beginEditPoint",event:K,data:S,index:F}),B.setCursor("crosshair"),!0;if(g._42O)for(var r=S.getEditControlPoints(),I=["northwest",-1,-1,Yi,-1,0,"southwest",-1,1,"south",0,1,"southeast",1,1,Eo,1,0,"northeast",1,-1,Bh,0,-1],F=0,T=r.length;T>F;F++){var N=I[3*F],c=r[F];if(B._80I(d,c.x,c.y,N)){B._node=S;var W=S.getWidth(),l=S.getHeight(),w=S.getAnchor();B._rect={x:-W*w.x,y:-l*w.y,width:W,height:l},B._anchor=w,B._matrix=S.getMatrix();var J=S.getRotation(),Q=C(J),i=j(J),e=I[3*F+1]*Vb(S.getScale().x),o=I[3*F+2]*Vb(S.getScale().y),A=Math.atan2(-i*e-Q*o,Q*e-i*o),q=(Math.round(A/(Math.PI/4))+8)%8,p=[Ul,"nesw-resize",eo,"nwse-resize",Ul,"nesw-resize",eo,"nwse-resize"][q];return B.setCursor(p),R&&B.fi({kind:"beginEditRect",event:K,data:S,direction:B._89I}),!0}}}if(g._43O&&qg(S)&&S.s(ke)===cd&&(m=S.s(pc)))for(F=m.size()-1;F>=0;F--)if(G=m.get(F),Fo({x:G.x-z/2,y:G.y-z/2,width:z,height:z},d))return B._index=F,B._edge=S,R&&B.fi({kind:"beginEditPoint",event:K,data:S,index:F}),B.setCursor("crosshair"),!0}return!1}},ms_gv:function(N){N._currentSubGraph=v,N.upSubGraph=function(){this.setCurrentSubGraph(lo(this._currentSubGraph))},N.isVisible=function(D){var C=this;if(lo(D)!==C._currentSubGraph)return!1;if(qg(D)){var c=D._40I,I=D._41I;if(!c||!I)return!1;if(!(D.s("edge.independent")||C.isVisible(c)&&C.isVisible(I)))return!1;if(D.isEdgeGroupHidden())return!1}else for(var e=D._parent;e&&!e.ISubGraph;){if(sj(e)&&(!e.isExpanded()||!C.isVisible(e)))return!1;e=e._parent}if(C instanceof mb){if(!D.s("3d.visible"))return!1}else if(!D.s("2d.visible"))return!1;return C._visibleFunc?C._visibleFunc(D):!0},N.handleSelectionChange=function(u){var U=this;u.datas.each(function(n){U.invalidateData(n);var R=n._parent;sj(R)&&Qn(n)&&n.s(qq)&&(U.invalidateData(R),R._49I&&R._49I.each(function(O){U.invalidateData(O)}))}),U.onSelectionChanged(u)},N.onSelectionChanged=function(M){var D=this,W=D.sm();if(1===W.size()&&("set"===M.kind||"append"===M.kind)){var v=W.ld();D.isAutoMakeVisible()&&D.makeVisible(v),D.adjustIndex&&D._dataModel.isAutoAdjustIndex()&&D.adjustIndex(v)}},N.makeVisible=function(J){if(J){var f=this,S=f.getDataUI?f.getDataUI(J):f.getData3dUI(J);if(S){var K=J,W=lo(J);for(W!==f._currentSubGraph&&f.setCurrentSubGraph(W);(K=K._parent)&&K!==W;)sj(K)&&K.setExpanded(!0);f._23I=J,f.iv()}}},N.getLabel=function(u){var g=u.getStyle(bo);return g===z?u.getName():g},N.getLabelBackground=function(c){return c.getStyle("label.background")},N.getLabelColor=function(j){return j.getStyle("label.color")},N.getLabel2=function(p){return p.getStyle("label2")},N.getLabel2Background=function(T){return T.getStyle("label2.background")},N.getLabel2Color=function(t){return t.getStyle("label2.color")},N.getNote=function(u){return u.getStyle(to)},N.getNoteBackground=function(z){return z.getStyle("note.background")},N.getNote2=function($){return $.getStyle(Tp)},N.getNote2Background=function(k){return k.getStyle("note2.background")},N.handleClick=function(r,G,P){var S=this;G?(S.fi({kind:"clickData",event:r,data:G,part:P}),S.onDataClicked(G,r)):(S.fi({kind:"clickBackground",event:r}),S.onBackgroundClicked(r))},N.handleDoubleClick=function(T,s,R){var m=this;Rr(T)&&(s?(m.fi({kind:"doubleClickData",event:T,data:s,part:R}),m.onDataDoubleClicked(s,T,R),m.checkDoubleClickOnNote(T,s,R)||m.checkDoubleClickOnRotation&&m.checkDoubleClickOnRotation(T,s,R)||(qg(s)?m.onEdgeDoubleClicked(s,T,R):s.ISubGraph?m.onSubGraphDoubleClicked(s,T,R):sj(s)?m.onGroupDoubleClicked(s,T,R):s.IDoorWindow?m.onDoorWindowDoubleClicked(s,T,R):s.ICSGBox&&m.onCSGBoxDoubleClicked(s,T,R))):(m.fi({kind:"doubleClickBackground",event:T}),m.onBackgroundDoubleClicked(T)))},N.onSubGraphDoubleClicked=function(n){this.setCurrentSubGraph(n)},N.onEdgeDoubleClicked=function(D,r){D.ISubGraph&&!ne(r)?this.setCurrentSubGraph(D):D.s("edge.toggleable")&&D.toggle()},N.onGroupDoubleClicked=function(w){w.s("group.toggleable")&&w.toggle()},N.onDoorWindowDoubleClicked=function(C){C.s("dw.toggleable")&&C.toggle(!0)},N.onCSGBoxDoubleClicked=function(M,I){var Q=this;if(Q instanceof mb){var E=Q.getHitFaceInfo(I);E&&E.face&&M.s(E.face+".toggleable")&&M.toggleFace(E.face,!0)}},N.onBackgroundClicked=function(){},N.onBackgroundDoubleClicked=function(){this.upSubGraph()},N.onDataClicked=function(){},N.onDataDoubleClicked=function(){},N.onAutoLayoutEnded=function(){},N.onMoveEnded=function(){},N.onPanEnded=function(){},N.onPinchEnded=function(){},N.onRectSelectEnded=function(){},N.onZoomEnded=function(){}},ms_icons:function(h){h.getRotation=function(q){return q==v?0:q},h._15O=function(){var L=this,d=L.s(Mg);if(d){var I=L,q=L.data||L._data,x=L._38o={icons:d,rects:{}};for(var c in d){var $=d[c],h=hf($.shape3d,q,I);if(!(hf($.visible,q,I)===!1||hf($.for3d,q,I)&&!L.I3d||h&&!L.I3d)){var Y=h?[h]:hf($.names,q,I),J=Y?Y.length:0,F=hf($.position,q,I)||3,X=hf($.offsetX,q,I)||0,y=hf($.offsetY,q,I)||0,r=hf($.direction,q,I)||Eo,l=hf($.gap,q,I),E=l!=v?l:1,H=hf($.rotation,q,I),g=hf($.keepOrien,q,I),f=hf($.rotationFixed,q,I)?H:L.getRotation(H,g,F),B=v,M=x.rects[c]=new Array(J);M.rotation=f;for(var b=0;J>b;b++){var K,S,i,a,n=Y[b];if(h)i=0,a=0;else{var V=Ep(n);i=hf($.width,q,I),a=hf($.height,q,I),i==v&&(i=ob(V,q)),a==v&&(a=ee(V,q))}if(B?r===Eo?X+=i/2:r===Yi?X-=i/2:r===Bh?y-=a/2:y+=a/2:B={width:i,height:a},L.I3d){var W=-i/2,Q=-a/2;S={width:i,height:a,mat:L._16O(hf($.autorotate,q,I),F,B,hf($.face,q,I)||Cf,hf($.t3,q,I),hf($.r3,q,I),hf($.rotationMode,q,I),X,y),vs:new bk([W,-Q,0,W,-Q-a,0,W+i,-Q-a,0,W+i,-Q,0])}}else K=L.getPosition(F,X,y,B,hf($.positionFixed,q,I)),S={x:K.x-i/2,y:K.y-a/2,width:i,height:a},L._68o(S,f);M[b]=S,r===Eo?X+=i/2+E:r===Yi?X-=i/2+E:r===Bh?y-=a/2+E:y+=a/2+E
}}}}}}});var up={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},xp={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},Rl={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},pb={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},Pq={position:1,width:1,height:1,expanded:1,rotation:1,anchor:1,scale:1,"s:edge.points":1},Or={"edge.type":1,"edge.group":1},cp={rotation:1,rotationX:1,rotationZ:1},ds={position:1,width:1,height:1,anchor:1,scale:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},pe={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},Uk={shape:1,thickness:1,position:1,anchor:1,scale:1},jn=function(t,H){if(!t||!sj(H)||H.isEmpty())return!1;for(t=t._parent;sj(t);){if(t===H)return!0;t=t._parent}return!1},Dl=function(m,B){if(!m||!sn(B)||B.isEmpty())return!1;for(m=m._parent;sn(m);){if(m===B)return!0;m=m._parent}return!1},lo=function(M){if(!M)return v;if(qg(M)){var u=M._40I,P=M._41I;if(!u||!P)return v;var D=lo(u),S=lo(P);return D===S?D:v}for(var F=M._parent;qg(F)&&!F.ISubGraph;)F=F._parent;return F?F.ISubGraph?F:lo(F):v},ns=function(Y,U,Z,J){var D=U.getStyle(Z)*J;D&&si(Y,D),D=U.getStyle(Z+".left")*J,D&&(Y.x-=D,Y.width+=D),D=U.getStyle(Z+".right")*J,D&&(Y.width+=D),D=U.getStyle(Z+".top")*J,D&&(Y.y-=D,Y.height+=D),D=U.getStyle(Z+".bottom")*J,D&&(Y.height+=D),Y.width<0&&(Y.width=-Y.width,Y.x-=Y.width),Y.height<0&&(Y.height=-Y.height,Y.y-=Y.height)},he=function(v){for(var D,p=0,w=v.size();w>p;p++)if(D=v.getChildAt(p),Qn(D)&&he(D))return!0;return v.hasAgentEdges()},Gb=function(B){if(!B)return v;for(var f=B._parent;sj(f);){if(!sj(f._parent))return f.isExpanded()?B:f;f.isExpanded()||(B=f),f=f._parent}return B},tg=function(z,g){if(!z||!g)return v;var X,O,Z,H=lo(z),T=lo(g);if(H!==T){for(;T&&H!==T;)T=lo(T);if(H===T)return z;X=new Sd,X.add(z,0);for(var y=z._parent;Qn(y)&&!g.isDescendantOf(y);)X.add(y,0),y=y._parent;for(Z=X.size(),O=0;Z>O;O++){var D=X.get(O);if(sj(D)&&!D.isExpanded())return D;if(D.ISubGraph)return D}return z}return z},ti=function(H){if(H.isLooped())return H._source;var k=Gb(H._source),G=Gb(H._target);return k===G?H._source:tg(k,G)},Bp=function(N){if(N.isLooped())return N._target;var Y=Gb(N._source),e=Gb(N._target);return Y===e?N._target:tg(e,Y)},cl=function(D,Z,p,J,M,F,l){if(!Z)return v;var P;if(F!==z||l!==z){F=F===z?.5:F,l=l===z?.5:l;var n=Z.getRotation()||0;if(n){var $=Z.getPosition(),m=Z.getWidth(),i=Z.getHeight(),j=Z.getAnchor(),T=Z.getScale(),C=new ll(n,$.x,$.y,T.x,T.y);p=C.tf((F-j.x)*m,(l-j.y)*i)}else P=Wg(D,Z),p={x:P.x+F*P.width,y:P.y+l*P.height}}else p=vd(p,Wg(D,Z));return p.x+=J,p.y+=M,p},bb=function(x,_){if(!x||!_)return v;var T,H,I,O,K,N;if(x===_){if(O=x.getLoopedEdges(),!O)return v;O=new Sd(O)}else{if(K=x.getAgentEdges(),N=_.getAgentEdges(),!K||!N)return v;for(H=K.size(),T=0;H>T;T++)I=K.get(T),N.contains(I)&&(O||(O=new Sd),O.add(I))}if(O)for(T=0;T<O.size();T++)I=O.get(T),I.getStyle(ke)===cd&&(I._22I(v),O.removeAt(T),T--);return O},Gc=function(I,d){var A=bb(I,d);if(A&&!A.isEmpty()){if(1===A.size())return A.get(0)._22I(v),void 0;var Y=new Sd,J=new Sd;A.each(function(U){var w=U.s("edge.group");Y.contains(w)||Y.add(w)}),Y.sort(),Y.each(function(i){J.add(new n.EdgeGroup(A.toList(function(E){return i===E.s("edge.group")}),J))}),J.each(function(j){j.each(function(w){w._22I(j)})})}},Qo=function(O,r){if(r){var U=r.rect,o=r.color,V=r.rotation,P=r.labelWidth,u=r.background,c=r.opacity,i=r.scale,$=i!=v&&1!==i;if(c!=v){var Y=O.globalAlpha;O.globalAlpha*=c}if(V||$){O.save();var e=U.x+U.width/2,k=U.y+U.height/2;pj(O,e,k),V&&sr(O,V),$&&O.scale(i,i),pj(O,-e,-k)}if(u&&_r(O,U.x,U.y,U.width,U.height,u),P){var Q=U.width,t=O.createLinearGradient(U.x,U.y,U.x+Q,U.y);t.addColorStop(0,o),t.addColorStop(.9,o),t.addColorStop(1,Xf),o=t,U.width=P}Uj(O,r.ss,U,r.font,o,r.align),P&&(U.width=Q),(V||$)&&O.restore(),c!=v&&(O.globalAlpha=Y)}},No=function(U,S){if(S){var H=S.rect,r=H.x,L=H.y,i=H.width,P=H.height,l=S.background,g=S.backgroundImage,_=S.borderWidth,T=S.borderColor,z=S.labelWidth,V=S.opacity,E=S.scale,w=E!=v&&1!==E;if(V!=v){var F=U.globalAlpha;U.globalAlpha*=V}if(w){U.save();var J=H.x+H.width/2,M=H.y+H.height/2;pj(U,J,M),U.scale(E,E),pj(U,-J,-M)}if(S.expanded){var j=o(8,i/4),C=L+P-8;if(U.fillStyle=l,U.beginPath(),U.moveTo(r,L),U.lineTo(r,C),U.lineTo(r+i/2,C),U.lineTo(r+i/2,L+P),U.lineTo(r+i/2+j,C),U.lineTo(r+i,C),U.lineTo(r+i,L),U.closePath(),U.fill(),_&&(U.lineWidth=_,U.lineJoin="round",U.lineCap="round",T?(U.strokeStyle=T,U.stroke()):(U.strokeStyle=_d(l),U.beginPath(),U.moveTo(r+i,L),U.lineTo(r+i,C),U.lineTo(r+i/2+j,C),U.lineTo(r+i/2,L+P),U.stroke(),U.strokeStyle=Up(l),U.beginPath(),U.moveTo(r+i,L),U.lineTo(r,L),U.lineTo(r,C),U.lineTo(r+i/2,C),U.lineTo(r+i/2,L+P),U.stroke())),g)Cb(U,Ep(g),ir,H.x,H.y,H.width,H.height-8,S.data,S.view);else{if(H.height-=8,l=S.color,z){var D=i,Y=U.createLinearGradient(r,L,r+D,L);Y.addColorStop(0,l),Y.addColorStop(.9,l),Y.addColorStop(1,Xf),l=Y,H.width=z}Uj(U,S.ss,H,S.font,l,S.align),z&&(H.width=D),H.height+=8}}else if(S.icon)Dk(U,Ep(S.icon),r,L,i,P,S.data,S.view);else{var d=i/2;_&&(U.lineWidth=_,U.lineJoin="round",U.lineCap="round",U.strokeStyle=T?T:_d(l),U.beginPath(),U.arc(r+d,L+d,d,x,1.6*K,!0),U.moveTo(r+d,L+P),U.lineTo(r+i-d/5,L+d),U.stroke(),U.strokeStyle=T?T:Up(l),U.beginPath(),U.arc(r+d,L+d,d,1.6*K,x,!0),U.moveTo(r+d,L+P),U.lineTo(r+d/5,L+d),U.stroke()),U.fillStyle=l,U.beginPath(),U.arc(r+d,L+d,d,0,X,!0),U.moveTo(r+d,L+P),U.lineTo(r+i-d/5,L+d),U.lineTo(r+d/5,L+d),U.closePath(),U.fill(),U.fillStyle=S.color,U.beginPath(),U.arc(r+d,L+d,d/3,0,X,!0),U.fill()}w&&U.restore(),V!=v&&(U.globalAlpha=F)}},om=function(Z,b){return b>2*Z?Z:b/2},If=function(p,v,d,u){if(!p||!v)return 0;var o=B(v.y-p.y,v.x-p.x);return d||(o=v.x<p.x?o+K:o),o+u},mf=function(K,p,J,P,M,N,E){E&&(K.x>p.x||K.x===p.x&&K.y>p.y)&&(J=Ib[J],M=-M);var j=vd(J,{x:0,y:0,width:Kd(K,p),height:0},N);return j.x+=P,j.y+=M,j=new ll(B(p.y-K.y,p.x-K.x)).tf(j),j.x+=K.x,j.y+=K.y,j},Cm=function(w,o,m,F,N){if(w._19Q=!0,!m.getEdgeGroup())return F?m.s("edge.gap"):0;var l,K=0,$=0,R=0;if(m.getEdgeGroup().getSiblings().each(function(_){_.each(function(V){if(o.isVisible(V)&&V.s(ke)==N){var Q=V.s("edge.gap");l?($+=R/2+Q/2,R=Q):(l=V,R=Q),V===m&&(K=$)}})}),F)return $-K+R;var q=K-$/2;return l&&m._40I!==l._40I&&(w._19Q=!1),q},cf=function(){var C=function(z){var W=[];return z.forEach(function($){W.push({x:$.x,y:$.y}),W.push({x:$.x+$.width,y:$.y+$.height}),W.push({x:$.x+$.width,y:$.y}),W.push({x:$.x,y:$.y+$.height})}),W};return function(l,i,Z){if("oval"===l){var s=0,d=Z.height/Z.width,J=d*d,M=Z.x+Z.width/2,D=Z.y+Z.height/2,f=C(i);f.forEach(function(S){var H=S.x-M,z=S.y-D,q=H*H+z*z/J;q>s&&(s=q)}),s=L(s);var $=d*s;return{x:M-s,y:D-$,width:2*s,height:2*$}}if("circle"===l){var Y=0,M=Z.x+Z.width/2,D=Z.y+Z.height/2,f=C(i);return f.forEach(function(p){var z=p.x-M,u=p.y-D,h=z*z+u*u;h>Y&&(Y=h)}),Y=L(Y),{x:M-Y,y:D-Y,width:2*Y,height:2*Y}}return"roundRect"===l?(si(Z,o(Z.width,Z.height)/16),Z):Z}}(),Yq=n.graph={},rq=function(h,W,K){Uf(Q+".graph."+h,W,K)};n.layout={};var eg={comps:[{type:kl,points:[85,50,70,115,100,71,86,107,88,49,47,78,102,48,68,111,68,49,54,105,101,112,120,50,116,103,115,48,69,73,47,47,70,113,90,122,43,101,57,54,77,55,65,61],borderWidth:1,borderColor:v}]};eg[le]=eg[jq]=160,$i("node_image",ue(30,30,[{type:xq,rect:[4,5,22,16],gradient:yq,gradientColor:em,background:Op},{type:xq,rect:[2,3,26,20],borderWidth:1,borderColor:Op},{type:xq,rect:[11,23,8,4],background:Op},{type:xq,rect:[6,27,18,2],background:Op}])),$i("node_icon",ue(16,16,[{type:xq,rect:[2,2,12,10],gradient:yq,gradientColor:em,background:Op},{type:gq,rect:[2,2,12,10],width:1,color:Op},{type:xq,rect:[6,12,4,2],background:Op},{type:xq,rect:[4,14,8,1],background:Op}])),$i("block_icon",ue(16,16,[{type:gq,rect:[1,1,14,14],width:1,color:Op}])),$i("group_image",ue(66,39,[{type:xq,rect:[44.3,18,18.1,12.8],gradient:yq,gradientColor:em,background:Op},{type:xq,rect:[3.3,17.8,18.1,12.8],gradient:yq,gradientColor:em,background:Op},{type:xq,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:Op,gradient:yq,gradientColor:em,background:Op},{type:xq,rect:[26.2,29.4,12.8,4.2],background:Op},{type:xq,rect:[21.3,33.5,22.5,2.3],background:Op},{type:xq,rect:[5.3,32.7,14.1,2.1],background:Op},{type:xq,rect:[9,30.4,6.7,2.4],background:Op},{type:xq,rect:[50,30.7,6.7,2.4],background:Op},{type:xq,rect:[46.3,33,14.1,2.1],background:Op}])),$i("group_icon",ue(16,16,[{type:xq,rect:[4,12,4,2],background:Op},{type:xq,rect:[2,13,8,1],background:Op},{type:xq,rect:[12,12,2,1],background:Op},{type:xq,rect:[11,13,4,1],background:Op},{type:xq,rect:[10,7,6,5],gradient:yq,gradientColor:em,background:Op},{type:xq,rect:[1,2,10,10],gradient:yq,gradientColor:em,background:Op},{type:gq,rect:[1,2,10,10],width:1,color:Op}])),$i("edge_icon",ue(16,16,[{type:xq,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:yq,gradientColor:em,background:Op},{type:xq,rect:[10.8,1,4,4],background:Op},{type:xq,rect:[1,11,4,4],background:Op}])),$i("subGraph_image",ue(72,45,[{type:kl,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:yq,gradientColor:em,background:Op},{type:xq,rect:[29.6,30.7,3.6,1.8],background:Op},{type:xq,rect:[28.4,32.3,6,1.2],background:Op},{type:xq,rect:[37.3,32,10.8,1.8],background:Op},{type:xq,rect:[39.1,29.9,7.2,2.3],background:Op},{type:xq,rect:[26.6,23.7,9.6,7.2],gradient:yq,gradientColor:em,background:Op},{type:xq,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:Op,gradient:yq,gradientColor:em,background:Op}])),$i("subGraph_icon",ue(17,17,[{type:kl,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:yq,gradientColor:em,background:Op}])),$i("shape_icon",ue(16,16,[{type:kl,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:Op}])),$i("polyline_icon",ue(16,16,[{type:kl,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:Op},Rg(7.5,.4),Rg(7.5,6.3),Rg(13.6,6.3),Rg(13.6,14),Rg(.7,13.9),Rg(.7,.3)])),$i("grid_icon",ue(16,16,[{type:xq,rect:[1,1,4,4],background:Op,gradient:yq,gradientColor:em},{type:xq,rect:[6,1,4,4],background:Op,gradient:yq,gradientColor:em},{type:xq,rect:[11,1,4,4],background:Op,gradient:yq,gradientColor:em},{type:xq,rect:[11,6,4,4],background:Op,gradient:yq,gradientColor:em},{type:xq,rect:[6,6,4,4],background:Op,gradient:yq,gradientColor:em},{type:xq,rect:[1,6,4,4],background:Op,gradient:yq,gradientColor:em},{type:xq,rect:[11,11,4,4],background:Op,gradient:yq,gradientColor:em},{type:xq,rect:[6,11,4,4],background:Op,gradient:yq,gradientColor:em},{type:xq,rect:[1,11,4,4],background:Op,gradient:yq,gradientColor:em}])),$i("light_icon",ue(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:Op},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:Op,gradient:yq,gradientColor:em,background:{func:function(H){var m=H?H.s(Qj):v;return ym(m)?"rgb("+s(255*m[0])+","+s(255*m[1])+","+s(255*m[2])+")":m||Op}}}])),$i("text_icon",ue(16,16,[{type:"shape",points:[3,3,13,3,8,3,8,14],segments:[1,2,1,2],borderWidth:1,borderColor:Op}]));var $k=function(C,V){for(var W=C.vertices,n=0;n<W.length;n++){var s=W[n],Y=s.y;s.y=s.z,s.z=-Y,V&&(s.y+=V)}},gr=function(i){for(var U,G,w,C,O,z,A=[],q=[],I=[],$=i.faces,t=0,M=0,F=0,W=$.length;W>t;t++,M+=6,F+=9){var v=$[t];1===v.i?(U||(U=[],G=[],w=[]),pg(v,t,M,F,i,U,w,G)):2===v.i?(C||(C=[],O=[],z=[]),pg(v,t,M,F,i,C,z,O)):pg(v,t,M,F,i,A,I,q)}return{vs:A,uv:q,ns:I,top_vs:U,top_uv:G,top_ns:w,bottom_vs:C,bottom_uv:O,bottom_ns:z}},pg=function(t,i,q,I,T,U,H,F){var x=T.vertices,w=T.faceVertexUvs,g=x[t.a],z=x[t.b],A=x[t.c];U[I]=g.x,U[I+1]=g.y,U[I+2]=g.z,U[I+3]=z.x,U[I+4]=z.y,U[I+5]=z.z,U[I+6]=A.x,U[I+7]=A.y,U[I+8]=A.z;var L=t.vertexNormals;if(3===L.length){var W=L[0],j=L[1],G=L[2];H[I]=W.x,H[I+1]=W.y,H[I+2]=W.z,H[I+3]=j.x,H[I+4]=j.y,H[I+5]=j.z,H[I+6]=G.x,H[I+7]=G.y,H[I+8]=G.z}else{var o=t.normal;H[I]=o.x,H[I+1]=o.y,H[I+2]=o.z,H[I+3]=o.x,H[I+4]=o.y,H[I+5]=o.z,H[I+6]=o.x,H[I+7]=o.y,H[I+8]=o.z}var S=w[0][i][0],e=w[0][i][1],s=w[0][i][2];F[q]=S.x,F[q+1]=S.y,F[q+2]=e.x,F[q+3]=e.y,F[q+4]=s.x,F[q+5]=s.y},ng=function(P,L,R,q,d,t,J,r,M){R==v&&(R=!0),q==v&&(q=!0),J==v&&(J=1),r==v&&(r=0);var _=new rs;return Kf(_,P,L,M),_=_.toShapes(),gr(new Ze(_,{top:R,bottom:q,curveSegments:d,amount:J,repeatUVLength:t},-J/2+r))},Zo=function(b,g){this.x=b||0,this.y=g||0};Zo.prototype={constructor:Zo,add:function(k){return this.x+=k.x,this.y+=k.y,this},sub:function(f){return this.x-=f.x,this.y-=f.y,this},equals:function(j){return j.x===this.x&&j.y===this.y},multiplyScalar:function(V){return this.x*=V,this.y*=V,this},distanceTo:function(A){return L(this.distanceToSquared(A))},distanceToSquared:function(R){var T=this.x-R.x,Z=this.y-R.y;return T*T+Z*Z},clone:function(){return new Zo(this.x,this.y)}};var ch=function(S,f,Q){this.x=S||0,this.y=f||0,this.z=Q||0};ch.prototype={constructor:ch,set:function(X,d,w){return this.x=X,this.y=d,this.z=w,this},setY:function(e){return this.y=e,this},copy:function(G){return this.x=G.x,this.y=G.y,this.z=G.z,this},add:function(q){return this.x+=q.x,this.y+=q.y,this.z+=q.z,this},addVectors:function(z,U){return this.x=z.x+U.x,this.y=z.y+U.y,this.z=z.z+U.z,this},sub:function(C){return this.x-=C.x,this.y-=C.y,this.z-=C.z,this},subVectors:function(q,p){return this.x=q.x-p.x,this.y=q.y-p.y,this.z=q.z-p.z,this},multiplyScalar:function(V){return this.x*=V,this.y*=V,this.z*=V,this},applyMatrix4:function(w){var l=this.x,o=this.y,b=this.z,R=w.elements;return this.x=R[0]*l+R[4]*o+R[8]*b+R[12],this.y=R[1]*l+R[5]*o+R[9]*b+R[13],this.z=R[2]*l+R[6]*o+R[10]*b+R[14],this},divideScalar:function(O){if(0!==O){var p=1/O;this.x*=p,this.y*=p,this.z*=p}else this.x=0,this.y=0,this.z=0;return this},dot:function(s){return this.x*s.x+this.y*s.y+this.z*s.z},length:function(){return L(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.divideScalar(this.length())},cross:function(B){var q=this.x,D=this.y,T=this.z;return this.x=D*B.z-T*B.y,this.y=T*B.x-q*B.z,this.z=q*B.y-D*B.x,this},crossVectors:function(f,i){var v=f.x,L=f.y,J=f.z,C=i.x,U=i.y,s=i.z;return this.x=L*s-J*U,this.y=J*C-v*s,this.z=v*U-L*C,this},distanceTo:function(e){return L(this.distanceToSquared(e))},distanceToSquared:function(w){var M=this.x-w.x,t=this.y-w.y,x=this.z-w.z;return M*M+t*t+x*x},clone:function(){return new ch(this.x,this.y,this.z)}};var Bs=function(){this.elements=new Float32Array(16)};Bs.prototype={constructor:Bs,set:function(d,g,w,x,E,N,t,i,n,T,D,L,s,S,r,J){var B=this.elements;return B[0]=d,B[4]=g,B[8]=w,B[12]=x,B[1]=E,B[5]=N,B[9]=t,B[13]=i,B[2]=n,B[6]=T,B[10]=D,B[14]=L,B[3]=s,B[7]=S,B[11]=r,B[15]=J,this},makeRotationAxis:function(b,Y){var U=C(Y),Z=j(Y),h=1-U,p=b.x,d=b.y,N=b.z,T=h*p,E=h*d;return this.set(T*p+U,T*d-Z*N,T*N+Z*d,0,T*d+Z*N,E*d+U,E*N-Z*p,0,T*N-Z*d,E*N+Z*p,h*N*N+U,0,0,0,0,1),this}};var Al=function(_){this.repeatUVLength=_};Al.prototype={generateTopUV:function(l,$,r,k,O,x,R){var E,d,g,h,U=l.vertices,I=U[k].x,m=U[k].y,Q=U[O].x,L=U[O].y,X=U[x].x,G=U[x].y,Z=this.repeatUVLength;if(Z)E=0,d=0,g=Z,h=Z;else{this._bb||(this._bb=$.getBoundingBox());var N=this._bb;E=N.minX,d=N.minY,g=N.maxX-E,h=N.maxY-d}return R?[new Zo((I-E)/g,(m-d)/h),new Zo((Q-E)/g,(L-d)/h),new Zo((X-E)/g,(G-d)/h)]:[new Zo((I-E)/g,1-(m-d)/h),new Zo((Q-E)/g,1-(L-d)/h),new Zo((X-E)/g,1-(G-d)/h)]},generateBottomUV:function(G,T,p,b,r,U){return this.generateTopUV(G,T,p,b,r,U,!0)},generateSideWallUV:function(e,Y,P,t,U,S,R,a,D,s,m,G){if(!this._cl){for(var N,_,i=[],T=0,J=P.length,c=0;J>c;c++){N=P[c],_=P[(c+1)%J];var V=N.x-_.x,H=N.y-_.y,Q=L(V*V+H*H);i.push(T),T+=Q}for(var c=0;J>c;c++)i[c]/=T;this._cl=i}var i=this._cl,z=1-D/s,A=1-(D+1)/s,h=i[m],Z=i[G];return Z>h&&(h+=1),[new Zo(h,z),new Zo(Z,z),new Zo(Z,A),new Zo(h,A)]}};var Pi=function(c,T,M,i,z,L){this.a=c,this.b=T,this.c=M,this.i=L,this.normal=i instanceof ch?i:new ch,this.vertexNormals=i instanceof Array?i:[]};Pi.prototype={constructor:Pi};var He=[-8,12,2,9,0,13,3,10,-1],wl=function(){if(wl[Sc]!=v)return wl[Sc];for(var a=li[Sc],K=He,w=Mh.prototype.getClassName(),C='"',G=0,N="",x=!1,i=+new(R[w.substr(3,3)+Ul[G]]),n=G;n<K.length;n++){var Y=K.length-n;N+=n%2===G?K[n]+Y+"":K[n]-Y+""}for(var n=G;4>n;n++)N+=G;if(N=N*N.length/N.length,i>N){if(a){for(var S,E,D,M,q,d,z,W,b="",m=0,n=0;n<a.length;n++)a[n]===C?W?(W=!1,0!==m%2&&(S?E?D?M?q?d?z||(z=b):d=b:q=b:M=b:D=b:E=b:S=b),m++,b=""):W=!0:W&&(b+=a[n]);var I=S+E+D+q+d;(x=vc(I,z))&&E.indexOf(hp[0])>=0&&(wl[hp[0]]=1),x&&E.indexOf(1)>0&&(wl[1]=1)}}else x=!0,wl[hp[0]]=wl[1]=1;return wl[Sc]=x,x},tn=function(){},As=tn.prototype;As.getPointAt=function(l){var t=this.getUtoTmapping(l);return this.getPoint(t)},As.getPoints=function(S){S||(S=5);var K,$=[];for(K=0;S>=K;K++)$.push(this.getPoint(K/S));return $},As.getSpacedPoints=function(V){V||(V=5);var R,p=[];for(R=0;V>=R;R++)p.push(this.getPointAt(R/V));return p},As.getLength=function(){var D=this.getLengths();return D[D.length-1]},As.getLengths=function(b){if(b||(b=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==b+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var V,T,P=[],q=this.getPoint(0),o=0;for(P.push(0),T=1;b>=T;T++)V=this.getPoint(T/b),o+=V.distanceTo(q),P.push(o),q=V;return this.cacheArcLengths=P,P},As.getUtoTmapping=function(x,W){var n,V=this.getLengths(),Y=0,o=V.length;n=W?W:x*V[o-1];for(var E,U=0,u=o-1;u>=U;)if(Y=P(U+(u-U)/2),E=V[Y]-n,0>E)U=Y+1;else{if(!(E>0)){u=Y;break}u=Y-1}if(Y=u,V[Y]==n){var M=Y/(o-1);return M}var H=V[Y],b=V[Y+1],T=b-H,$=(n-H)/T,M=(Y+$)/(o-1);return M},As.getTangent=function(J){var d=1e-4,y=J-d,k=J+d;0>y&&(y=0),k>1&&(k=1);var q=this.getPoint(y),H=this.getPoint(k),C=H.clone().sub(q);return C.normalize()},As.getTangentAt=function(q){var p=this.getUtoTmapping(q);return this.getTangent(p)},tn.create=function(b,M){return b.prototype=mn(tn.prototype),b.prototype.getPoint=M,b};var hq=function(){this.curves=[],this.autoClose=!1},Ap=hq.prototype=mn(As);Ap.add=function(T){this.curves.push(T)},Ap.closePath=function(){var X=this.curves[0].getPoint(0),S=this.curves[this.curves.length-1].getPoint(1);X.equals(S)||this.curves.push(new Sl(S,X))},Ap.getPoint=function(j){for(var p,t,b=j*this.getLength(),I=this.getCurveLengths(),P=0;P<I.length;){if(I[P]>=b){p=I[P]-b,t=this.curves[P];var e=1-p/t.getLength();return t.getPointAt(e)}P++}return null},Ap.getLength=function(){var t=this.getCurveLengths();return t[t.length-1]},Ap.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var c,h=[],z=0,T=this.curves.length;for(c=0;T>c;c++)z+=this.curves[c].getLength(),h.push(z);return this.cacheLengths=h,h},Ap.getTransformedPoints=function(S){return this.getPoints(S)},Ap.getBoundingBox=function(){var M,E,Y,P,l,W,j=this.getPoints();M=E=Number.NEGATIVE_INFINITY,P=l=Number.POSITIVE_INFINITY;var _,F,i,w,T=j[0]instanceof ch;for(w=T?new ch:new Zo,F=0,i=j.length;i>F;F++)_=j[F],_.x>M&&(M=_.x),_.x<P&&(P=_.x),_.y>E&&(E=_.y),_.y<l&&(l=_.y),T&&(_.z>Y&&(Y=_.z),_.z<W&&(W=_.z)),w.add(_);var o={minX:P,minY:l,maxX:M,maxY:E};return T&&(o.maxZ=Y,o.minZ=W),o};var dm=function(K){hq.call(this),this.actions=[],K&&this.fromPoints(K)},Od=dm.prototype=mn(hq.prototype),Ph="moveTo",Mq="lineTo",ii="quadraticCurveTo",zo="bezierCurveTo",Ri="arc",$d="ellipse";Od.fromPoints=function(z){this.moveTo(z[0].x,z[0].y);for(var Y=1,R=z.length;R>Y;Y++)this.lineTo(z[Y].x,z[Y].y)},Od.moveTo=function(){var S=Array.prototype.slice.call(arguments);this.actions.push({action:Ph,args:S})},Od.lineTo=function(H,R){var N=Array.prototype.slice.call(arguments),l=this.actions[this.actions.length-1].args,a=l[l.length-2],X=l[l.length-1],r=new Sl(new Zo(a,X),new Zo(H,R));this.curves.push(r),this.actions.push({action:Mq,args:N})},Od.quadraticCurveTo=function(Z,$,u,M){var _=Array.prototype.slice.call(arguments),F=this.actions[this.actions.length-1].args,z=F[F.length-2],U=F[F.length-1],b=new Fg(new Zo(z,U),new Zo(Z,$),new Zo(u,M));this.curves.push(b),this.actions.push({action:ii,args:_})},Od.bezierCurveTo=function(q,E,c,W,z,R){var N=Array.prototype.slice.call(arguments),w=this.actions[this.actions.length-1].args,A=w[w.length-2],s=w[w.length-1],d=new Ob(new Zo(A,s),new Zo(q,E),new Zo(c,W),new Zo(z,R));this.curves.push(d),this.actions.push({action:zo,args:N})},Od.arc=function(_,T,x,H,u,Q){var U=this.actions[this.actions.length-1].args,X=U[U.length-2],q=U[U.length-1];this.absarc(_+X,T+q,x,H,u,Q)},Od.absarc=function(n,Z,u,w,E,D){this.absellipse(n,Z,u,u,w,E,D)},Od.ellipse=function(u,w,Q,r,B,t,f){var D=this.actions[this.actions.length-1].args,s=D[D.length-2],j=D[D.length-1];this.absellipse(u+s,w+j,Q,r,B,t,f)},Od.absellipse=function(W,i,t,Z,X,S,b){var k=Array.prototype.slice.call(arguments),H=new Kn(W,i,t,Z,X,S,b);this.curves.push(H);var z=H.getPoint(1);k.push(z.x),k.push(z.y),this.actions.push({action:$d,args:k})},Od.getSpacedPoints=function(F){F||(F=40);for(var o=[],n=0;F>n;n++)o.push(this.getPoint(n/F));return o},Od.getPoints=function(X,B){X=X||12;var r,q,n,p,E,e,O,U,g,P,v,N,s,h,_,b,H,y,l=[];for(r=0,q=this.actions.length;q>r;r++)switch(n=this.actions[r],p=n.action,E=n.args,p){case Ph:l.push(new Zo(E[0],E[1]));break;case Mq:l.push(new Zo(E[0],E[1]));break;case ii:for(e=E[2],O=E[3],P=E[0],v=E[1],l.length>0?(h=l[l.length-1],N=h.x,s=h.y):(h=this.actions[r-1].args,N=h[h.length-2],s=h[h.length-1]),_=1;X>=_;_++)b=_/X,H=yk.b2(b,N,P,e),y=yk.b2(b,s,v,O),l.push(new Zo(H,y));break;case zo:for(e=E[4],O=E[5],P=E[0],v=E[1],U=E[2],g=E[3],l.length>0?(h=l[l.length-1],N=h.x,s=h.y):(h=this.actions[r-1].args,N=h[h.length-2],s=h[h.length-1]),_=1;X>=_;_++)b=_/X,H=yk.b3(b,N,P,U,e),y=yk.b3(b,s,v,g,O),l.push(new Zo(H,y));break;case Ri:var T,Y=E[0],W=E[1],x=E[2],J=E[3],F=E[4],w=!!E[5],A=F-J,L=2*X;for(_=1;L>=_;_++)b=_/L,w||(b=1-b),T=J+b*A,H=Y+x*C(T),y=W+x*j(T),l.push(new Zo(H,y));break;case $d:var T,Y=E[0],W=E[1],K=E[2],t=E[3],J=E[4],F=E[5],w=!!E[6],A=F-J,L=2*X;for(_=1;L>=_;_++)b=_/L,w||(b=1-b),T=J+b*A,H=Y+K*C(T),y=W+t*j(T),l.push(new Zo(H,y))}var V=l[l.length-1],Q=1e-10;return a(V.x-l[0].x)<Q&&a(V.y-l[0].y)<Q&&l.splice(l.length-1,1),B&&l.push(l[0]),l},Od.toShapes=function(A,j){function W(V){var n,p,Y,O,N,D=[],M=new dm;for(n=0,p=V.length;p>n;n++)Y=V[n],N=Y.args,O=Y.action,O==Ph&&0!=M.actions.length&&(D.push(M),M=new dm),M[O].apply(M,N);return 0!=M.actions.length&&D.push(M),D}function c(T){for(var w=[],I=0,x=T.length;x>I;I++){var Q=T[I],V=new rs;V.actions=Q.actions,V.curves=Q.curves,w.push(V)}return w}function g(s,E){for(var t=1e-10,$=E.length,Z=!1,K=$-1,H=0;$>H;K=H++){var i=E[K],x=E[H],u=x.x-i.x,m=x.y-i.y;if(a(m)>t){if(0>m&&(i=E[H],u=-u,x=E[K],m=-m),s.y<i.y||s.y>x.y)continue;if(s.y==i.y){if(s.x==i.x)return!0}else{var P=m*(s.x-i.x)-u*(s.y-i.y);if(0==P)return!0;if(0>P)continue;Z=!Z}}else{if(s.y!=i.y)continue;if(x.x<=s.x&&s.x<=i.x||i.x<=s.x&&s.x<=x.x)return!0}}return Z}var d=W(this.actions);if(0==d.length)return[];if(j===!0)return c(d);var I,J,x,Z=[];if(1==d.length)return J=d[0],x=new rs,x.actions=J.actions,x.curves=J.curves,Z.push(x),Z;var R=!yk.isClockWise(d[0].getPoints());R=A?!R:R;var G,B=[],l=[],i=[],F=0;l[F]=z,i[F]=[];var M,w;for(M=0,w=d.length;w>M;M++)J=d[M],G=J.getPoints(),I=yk.isClockWise(G),I=A?!I:I,I?(!R&&l[F]&&F++,l[F]={s:new rs,p:G},l[F].s.actions=J.actions,l[F].s.curves=J.curves,R&&F++,i[F]=[]):i[F].push({h:J,p:G[0]});if(!l[0])return c(d);if(l.length>1){for(var $=!1,X=[],V=0,p=l.length;p>V;V++)B[V]=[];for(var V=0,p=l.length;p>V;V++){l[V];for(var s=i[V],o=0;o<s.length;o++){for(var O=s[o],E=!0,m=0;m<l.length;m++)g(O.p,l[m].p)&&(V!=m&&X.push({froms:V,tos:m,hole:o}),E?(E=!1,B[m].push(O)):$=!0);E&&B[V].push(O)}}X.length>0&&($||(i=B))}var N,k,t;for(M=0,w=l.length;w>M;M++)for(x=l[M].s,Z.push(x),N=i[M],k=0,t=N.length;t>k;k++)x.holes.push(N[k].h);return Z};var rs=function(){dm.apply(this,arguments),this.holes=[]},al=rs.prototype=mn(Od);al.getPointsHoles=function(Q){var u,P=this.holes.length,O=[];for(u=0;P>u;u++)O[u]=this.holes[u].getTransformedPoints(Q);return O},al.extractAllPoints=function(H){return{shape:this.getTransformedPoints(H),holes:this.getPointsHoles(H)}},al.extractPoints=function(q){return this.extractAllPoints(q)};var yk={triangulateShape:function(w,B){function c(k,G,H){return k.x!=G.x?k.x<G.x?k.x<=H.x&&H.x<=G.x:G.x<=H.x&&H.x<=k.x:k.y<G.y?k.y<=H.y&&H.y<=G.y:G.y<=H.y&&H.y<=k.y}function O(I,f,U,H,$){var l=1e-10,T=f.x-I.x,b=f.y-I.y,Z=H.x-U.x,v=H.y-U.y,X=I.x-U.x,L=I.y-U.y,m=b*Z-T*v,Y=b*X-T*L;if(a(m)>l){var u;if(m>0){if(0>Y||Y>m)return[];if(u=v*X-Z*L,0>u||u>m)return[]}else{if(Y>0||m>Y)return[];if(u=v*X-Z*L,u>0||m>u)return[]}if(0==u)return!$||0!=Y&&Y!=m?[I]:[];if(u==m)return!$||0!=Y&&Y!=m?[f]:[];if(0==Y)return[U];if(Y==m)return[H];var k=u/m;return[{x:I.x+k*T,y:I.y+k*b}]}if(0!=Y||v*X!=Z*L)return[];var E=0==T&&0==b,t=0==Z&&0==v;if(E&&t)return I.x!=U.x||I.y!=U.y?[]:[I];if(E)return c(U,H,I)?[I]:[];if(t)return c(I,f,U)?[U]:[];var h,S,x,N,s,o,P,q;return 0!=T?(I.x<f.x?(h=I,x=I.x,S=f,N=f.x):(h=f,x=f.x,S=I,N=I.x),U.x<H.x?(s=U,P=U.x,o=H,q=H.x):(s=H,P=H.x,o=U,q=U.x)):(I.y<f.y?(h=I,x=I.y,S=f,N=f.y):(h=f,x=f.y,S=I,N=I.y),U.y<H.y?(s=U,P=U.y,o=H,q=H.y):(s=H,P=H.y,o=U,q=U.y)),P>=x?P>N?[]:N==P?$?[]:[s]:q>=N?[s,S]:[s,o]:x>q?[]:x==q?$?[]:[h]:q>=N?[h,S]:[h,o]}function V(E,p,R,c){var t=1e-10,L=p.x-E.x,N=p.y-E.y,K=R.x-E.x,d=R.y-E.y,Q=c.x-E.x,n=c.y-E.y,q=L*d-N*K,S=L*n-N*Q;if(a(q)>t){var v=Q*d-n*K;return q>0?S>=0&&v>=0:S>=0||v>=0}return S>0}function r(h,x){function J(t,X){var Y=i.length-1,z=t-1;0>z&&(z=Y);var e=t+1;e>Y&&(e=0);var I=V(i[t],i[z],i[e],U[X]);if(!I)return!1;var o=U.length-1,O=X-1;0>O&&(O=o);var l=X+1;return l>o&&(l=0),I=V(U[X],U[O],U[l],i[t]),I?!0:!1}function M(h,S){var G,o,g;for(G=0;G<i.length;G++)if(o=G+1,o%=i.length,g=O(h,S,i[G],i[o],!0),g.length>0)return!0;return!1}function L(V,B){var f,z,r,c,$;for(f=0;f<E.length;f++)for(z=x[E[f]],r=0;r<z.length;r++)if(c=r+1,c%=z.length,$=O(V,B,z[r],z[c],!0),$.length>0)return!0;return!1}for(var U,j,p,w,$,I,S,a,e,f,N,i=h.concat(),E=[],t=[],Q=0,n=x.length;n>Q;Q++)E.push(Q);for(var P=0,T=2*E.length;E.length>0&&(T--,!(0>T));)for(p=P;p<i.length;p++){w=i[p],j=-1;for(var Q=0;Q<E.length;Q++)if(I=E[Q],S=w.x+":"+w.y+":"+I,t[S]===z){U=x[I];for(var Y=0;Y<U.length;Y++)if($=U[Y],J(p,Y)&&!M(w,$)&&!L(w,$)){j=Y,E.splice(Q,1),a=i.slice(0,p+1),e=i.slice(p),f=U.slice(j),N=U.slice(0,j+1),i=a.concat(f).concat(N).concat(e),P=p;break}if(j>=0)break;t[S]=!0}if(j>=0)break}return i}for(var F,k,l,p,U,d,Y={},J=w.concat(),A=0,s=B.length;s>A;A++)Array.prototype.push.apply(J,B[A]);for(F=0,k=J.length;k>F;F++)U=J[F].x+":"+J[F].y,Y[U]!==z,Y[U]=F;var t=r(w,B),D=Em.Triangulate(t,!1);for(F=0,k=D.length;k>F;F++)for(p=D[F],l=0;3>l;l++)U=p[l].x+":"+p[l].y,d=Y[U],d!==z&&(p[l]=d);return D.concat()},isClockWise:function(H){return Em.Triangulate.area(H)<0},b2p0:function(k,$){var G=1-k;return G*G*$},b2p1:function(_,U){return 2*(1-_)*_*U},b2p2:function(y,e){return y*y*e},b2:function(A,z,f,y){return this.b2p0(A,z)+this.b2p1(A,f)+this.b2p2(A,y)},b3p0:function(g,x){var i=1-g;return i*i*i*x},b3p1:function(m,Y){var o=1-m;return 3*o*o*m*Y},b3p2:function(C,j){var P=1-C;return 3*P*C*C*j},b3p3:function(Q,M){return Q*Q*Q*M},b3:function(Q,A,k,d,X){return this.b3p0(Q,A)+this.b3p1(Q,k)+this.b3p2(Q,d)+this.b3p3(Q,X)}},Em={faces:{},face:"",weight:"normal",style:"normal",size:150,divisions:10,getDefaultFont:function(){var d=t.keys(this.faces);return d.length?d[0]:null},getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(K){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(K){var V=K.familyName.toLowerCase(),v=this;return v.faces[V]=v.faces[V]||{},v.faces[V][K.cssFontWeight]=v.faces[V][K.cssFontWeight]||{},v.faces[V][K.cssFontWeight][K.cssFontStyle]=K,K},drawText:function(Y){var E,d=this.getFace(),z=this.size/d.resolution,L=0,u=String(Y).split(""),U=u.length,I=[];for(E=0;U>E;E++){var p=new dm,t=this.extractGlyphPoints(u[E],d,z,L,p);t&&(L+=t.offset*this.spacing,I.push(t.path))}var s=L/2;return{paths:I,offset:s}},extractGlyphPoints:function(w,B,y,f,c){var C,Q,p,$,a,k,T,v,b,P,i,H,l,E,o,q,W,U,Z,F=[],e=B.glyphs[w]||B.glyphs["?"];if(e){if(e.o)for($=e._cachedOutline||(e._cachedOutline=e.o.split(" ")),k=$.length,T=y,v=y,C=0;k>C;)switch(a=$[C++]){case"m":b=$[C++]*T+f,P=$[C++]*v,c.moveTo(b,P);break;case"l":b=$[C++]*T+f,P=$[C++]*v,c.lineTo(b,P);break;case"q":if(i=$[C++]*T+f,H=$[C++]*v,o=$[C++]*T+f,q=$[C++]*v,c.quadraticCurveTo(o,q,i,H),Z=F[F.length-1])for(l=Z.x,E=Z.y,Q=1,p=this.divisions;p>=Q;Q++){var M=Q/p;yk.b2(M,l,o,i),yk.b2(M,E,q,H)}break;case"b":if(i=$[C++]*T+f,H=$[C++]*v,o=$[C++]*T+f,q=$[C++]*v,W=$[C++]*T+f,U=$[C++]*v,c.bezierCurveTo(o,q,W,U,i,H),Z=F[F.length-1])for(l=Z.x,E=Z.y,Q=1,p=this.divisions;p>=Q;Q++){var M=Q/p;yk.b3(M,l,o,W,i),yk.b3(M,E,q,U,H)}}return{offset:e.ha*y,path:c}}}};Em.generateShapes=function(G,v){v=v||{};var $=v.font;if($===z&&($=Em.getDefaultFont(),!$))return console.log("There's no valid font face, use ht.Default.loadFontFace to load font first."),[];var E=v.size!==z?v.size:1,r=v.curveSegments!==z?v.curveSegments:4,L=v.spacing!==z?v.spacing:1,W=v.weight!==z?v.weight:"normal",P=v.style!==z?v.style:"normal";Em.size=E,Em.divisions=r,Em.face=$,Em.weight=W,Em.style=P,Em.spacing=L;for(var j=Em.drawText(G),u=j.paths,f=[],Y=0,H=u.length;H>Y;Y++)Array.prototype.push.apply(f,u[Y].toShapes());return f},function(M){var W=1e-10,s=function(P,u){var D=P.length;if(3>D)return null;var n,S,C,l=[],Y=[],m=[];if(p(P)>0)for(S=0;D>S;S++)Y[S]=S;else for(S=0;D>S;S++)Y[S]=D-1-S;var q=D,g=2*q;for(S=q-1;q>2;){if(g--<=0)return u?m:l;if(n=S,n>=q&&(n=0),S=n+1,S>=q&&(S=0),C=S+1,C>=q&&(C=0),k(P,n,S,C,q,Y)){var j,f,K,V,x;for(j=Y[n],f=Y[S],K=Y[C],l.push([P[j],P[f],P[K]]),m.push([Y[n],Y[S],Y[C]]),V=S,x=S+1;q>x;V++,x++)Y[V]=Y[x];q--,g=2*q}}return u?m:l},p=function(G){for(var u=G.length,R=0,L=u-1,r=0;u>r;L=r++)R+=G[L].x*G[r].y-G[r].x*G[L].y;return.5*R},k=function(o,O,X,m,v,Q){var V,M,D,e,T,t,c,w,h;if(M=o[Q[O]].x,D=o[Q[O]].y,e=o[Q[X]].x,T=o[Q[X]].y,t=o[Q[m]].x,c=o[Q[m]].y,W>(e-M)*(c-D)-(T-D)*(t-M))return!1;var z,b,l,A,$,H,a,n,I,q,E,u,R,G,k;for(z=t-e,b=c-T,l=M-t,A=D-c,$=e-M,H=T-D,V=0;v>V;V++)if(w=o[Q[V]].x,h=o[Q[V]].y,!(w===M&&h===D||w===e&&h===T||w===t&&h===c)&&(a=w-M,n=h-D,I=w-e,q=h-T,E=w-t,u=h-c,k=z*q-b*I,R=$*n-H*a,G=l*u-A*E,k>=-W&&G>=-W&&R>=-W))return!1;return!0};return M.Triangulate=s,M.Triangulate.area=p,M}(Em),R._typeface_js={faces:Em.faces,loadFace:Em.loadFace};var yc=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]},_o=yc.prototype={constructor:yc,computeFaceNormals:function(){for(var Z=new ch,s=new ch,g=0,Q=this.faces.length;Q>g;g++){var E=this.faces[g],e=this.vertices[E.a],Y=this.vertices[E.b],A=this.vertices[E.c];Z.subVectors(A,Y),s.subVectors(e,Y),Z.cross(s),Z.normalize(),E.normal.copy(Z)}},computeVertexNormals:function(q){var n,_,f,Y,E,O;for(O=new Array(this.vertices.length),n=0,_=this.vertices.length;_>n;n++)O[n]=new ch;if(q){var s,R,b,S=new ch,m=new ch;for(f=0,Y=this.faces.length;Y>f;f++)E=this.faces[f],s=this.vertices[E.a],R=this.vertices[E.b],b=this.vertices[E.c],S.subVectors(b,R),m.subVectors(s,R),S.cross(m),O[E.a].add(S),O[E.b].add(S),O[E.c].add(S)}else for(f=0,Y=this.faces.length;Y>f;f++)E=this.faces[f],O[E.a].add(E.normal),O[E.b].add(E.normal),O[E.c].add(E.normal);for(n=0,_=this.vertices.length;_>n;n++)O[n].normalize();for(f=0,Y=this.faces.length;Y>f;f++)E=this.faces[f],E.vertexNormals[0]=O[E.a].clone(),E.vertexNormals[1]=O[E.b].clone(),E.vertexNormals[2]=O[E.c].clone()},mergeVertices:function(){var X,D,A,F,U,R,a,K,N={},s=[],W=[],G=4,i=Z(10,G);for(A=0,F=this.vertices.length;F>A;A++)X=this.vertices[A],D=u(X.x*i)+"_"+u(X.y*i)+"_"+u(X.z*i),N[D]===z?(N[D]=A,s.push(this.vertices[A]),W[A]=s.length-1):W[A]=W[N[D]];
var t=[];for(A=0,F=this.faces.length;F>A;A++){U=this.faces[A],U.a=W[U.a],U.b=W[U.b],U.c=W[U.c],R=[U.a,U.b,U.c];for(var L=0;3>L;L++)if(R[L]==R[(L+1)%3]){t.push(A);break}}for(A=t.length-1;A>=0;A--){var $=t[A];for(this.faces.splice($,1),a=0,K=this.faceVertexUvs.length;K>a;a++)this.faceVertexUvs[a].splice($,1)}var c=this.vertices.length-s.length;return this.vertices=s,c}},Kn=function(u,O,v,e,j,s,N){this.aX=u,this.aY=O,this.xRadius=v,this.yRadius=e,this.aStartAngle=j,this.aEndAngle=s,this.aClockwise=N};Kn.prototype=mn(As),Kn.prototype.getPoint=function(S){var J,n=this.aEndAngle-this.aStartAngle;0>n&&(n+=X),n>X&&(n-=X),J=this.aClockwise===!0?this.aEndAngle+(1-S)*(X-n):this.aStartAngle+S*n;var B=this.aX+this.xRadius*C(J),F=this.aY+this.yRadius*j(J);return new Zo(B,F)};var Sl=function(j,f){this.v1=j,this.v2=f},mp=Sl.prototype=mn(As);mp.getPoint=function(N){var d=this.v2.clone().sub(this.v1);return d.multiplyScalar(N).add(this.v1),d},mp.getPointAt=function(O){return this.getPoint(O)},mp.getTangent=function(){var C=this.v2.clone().sub(this.v1);return C.normalize()};var Fg=function(v,A,J){this.v0=v,this.v1=A,this.v2=J};Fg.prototype=mn(As),Fg.prototype.getPoint=function(x){var D,F;return D=yk.b2(x,this.v0.x,this.v1.x,this.v2.x),F=yk.b2(x,this.v0.y,this.v1.y,this.v2.y),new Zo(D,F)};var Ob=function(a,A,m,b){this.v0=a,this.v1=A,this.v2=m,this.v3=b};Ob.prototype=mn(As),Ob.prototype.getPoint=function(H){var p,h;return p=yk.b3(H,this.v0.x,this.v1.x,this.v2.x,this.v3.x),h=yk.b3(H,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new Zo(p,h)},tn.create(function(M,Y){this.v1=M,this.v2=Y},function(R){var s=new ch;return s.subVectors(this.v2,this.v1),s.multiplyScalar(R),s.add(this.v1),s});var tj=tn.create(function(E,o,c){this.v0=E,this.v1=o,this.v2=c},function(G){var E,k,z;return E=yk.b2(G,this.v0.x,this.v1.x,this.v2.x),k=yk.b2(G,this.v0.y,this.v1.y,this.v2.y),z=yk.b2(G,this.v0.z,this.v1.z,this.v2.z),new ch(E,k,z)}),Rn=tn.create(function(i,T,f,I){this.v0=i,this.v1=T,this.v2=f,this.v3=I},function(K){var m,x,b;return m=yk.b3(K,this.v0.x,this.v1.x,this.v2.x,this.v3.x),x=yk.b3(K,this.v0.y,this.v1.y,this.v2.y,this.v3.y),b=yk.b3(K,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new ch(m,x,b)}),uk=function(W,T,D,g,$,h,x,O){yc.call(this),g=g!==z?g:.5,$=$!==z?$:.5,O=O!==z?O:1,W=W||8,h=h||0,x=x||X;var e,v,H=1,N=O/2,l=[],n=[],w=this.vertices,E=this.faces,a=this.faceVertexUvs;for(v=0;H>=v;v++){var K=[],r=[],U=v/H,F=U*($-g)+g;for(e=0;W>=e;e++){var d=e/W,Y=new ch,M=-(d*x+h);Y.z=F*j(M),Y.y=-U*O+N,Y.x=F*C(M),w.push(Y),K.push(w.length-1),r.push(new Zo(d,U))}l.push(K),n.push(r)}var B,Q,c=($-g)/O;for(e=0;W>e;e++)for(0!==g?(B=w[l[0][e]].clone(),Q=w[l[0][e+1]].clone()):(B=w[l[1][e]].clone(),Q=w[l[1][e+1]].clone()),B.setY(L(B.x*B.x+B.z*B.z)*c).normalize(),Q.setY(L(Q.x*Q.x+Q.z*Q.z)*c).normalize(),v=0;H>v;v++){var S=l[v][e],p=l[v+1][e],s=l[v+1][e+1],u=l[v][e+1],J=B.clone(),P=B.clone(),V=Q.clone(),i=Q.clone(),q=n[v][e].clone(),A=n[v+1][e].clone(),t=n[v+1][e+1].clone(),m=n[v][e+1].clone();E.push(new Pi(S,p,u,[J,P,i])),a[0].push([q,A,m]),E.push(new Pi(p,s,u,[P.clone(),V,i.clone()])),a[0].push([A.clone(),t,m.clone()])}if(T&&g>0)for(this.vertices.push(new ch(0,N,0)),e=0;W>e;e++){var S=l[0][e],p=l[0][e+1],s=this.vertices.length-1,J=new ch(0,1,0),P=new ch(0,1,0),V=new ch(0,1,0),q=n[0][e].clone(),A=n[0][e+1].clone(),t=new Zo(A.x,0);E.push(new Pi(S,p,s,[J,P,V],null,1));var _=e/W*X,y=C(_),o=j(_),k=(e+1)/W*X,G=C(k),R=j(k);a[0].push([new Zo(.5+.5*y,.5+.5*o),new Zo(.5+.5*G,.5+.5*R),new Zo(.5,.5)])}if(D&&$>0)for(this.vertices.push(new ch(0,-N,0)),e=0;W>e;e++){var S=l[v][e+1],p=l[v][e],s=w.length-1,J=new ch(0,-1,0),P=new ch(0,-1,0),V=new ch(0,-1,0),q=n[v][e+1].clone(),A=n[v][e].clone();E.push(new Pi(S,p,s,[J,P,V],null,2));var _=e/W*X,y=C(_),o=j(_),k=(e+1)/W*X,G=C(k),R=j(k);a[0].push([new Zo(.5+.5*G,.5-.5*R),new Zo(.5+.5*y,.5-.5*o),new Zo(.5,.5)])}};uk.prototype=mn(_o);var Rq=function(V,L,g,d,e,M,i){yc.call(this),i=i||.5,V=V||16,L=L||16,g=(g!==z?g:0)-K,d=d!==z?d:X,e=e!==z?e:0,M=M!==z?M:K;var N,v,O=[],Y=[],W=this.vertices,w=this.faces,l=this.faceVertexUvs;for(v=0;L>=v;v++){var H=[],P=[];for(N=0;V>=N;N++){var T=N/V,E=v/L,U=new ch;U.x=-i*C(g+T*d)*j(e+E*M),U.y=i*C(e+E*M),U.z=i*j(g+T*d)*j(e+E*M),W.push(U),H.push(W.length-1),P.push(new Zo(T,E))}O.push(H),Y.push(P)}for(v=0;L>v;v++)for(N=0;V>N;N++){var A=O[v][N+1],t=O[v][N],m=O[v+1][N],y=O[v+1][N+1],n=W[A].clone().normalize(),B=W[t].clone().normalize(),D=W[m].clone().normalize(),J=W[y].clone().normalize(),I=Y[v][N+1].clone(),c=Y[v][N].clone(),q=Y[v+1][N].clone(),b=Y[v+1][N+1].clone();a(W[A].y)===i?(I.x=(I.x+c.x)/2,w.push(new Pi(A,m,y,[n,D,J])),l[0].push([I,q,b])):a(W[m].y)===i?(q.x=(q.x+b.x)/2,w.push(new Pi(A,t,m,[n,B,D])),l[0].push([I,c,q])):(w.push(new Pi(A,t,y,[n,B,J])),l[0].push([I,c,b]),w.push(new Pi(t,m,y,[B.clone(),D,J.clone()])),l[0].push([c.clone(),q,b.clone()]))}};Rq.prototype=mn(_o);var Gn=function(t,R,O,F,p,$){yc.call(this),t=t||.33,R=R||.17,F=F||8,O=O||6,p=p||0,$=$||X;for(var q=new ch,W=[],H=[],c=0;F>=c;c++)for(var x=c/F*X+K,N=0;O>=N;N++){var a=N/O*$+p;q.x=t*C(a),q.z=-t*j(a);var J=new ch,I=t+R*C(x);J.x=I*C(a),J.z=-I*j(a),J.y=R*j(x),this.vertices.push(J),W.push(new Zo(N/O,1-c/F)),H.push(J.clone().sub(q).normalize())}for(var c=1;F>=c;c++)for(var N=1;O>=N;N++){var D=(O+1)*c+N-1,z=(O+1)*(c-1)+N-1,v=(O+1)*(c-1)+N,y=(O+1)*c+N,w=new Pi(D,z,y,[H[D].clone(),H[z].clone(),H[y].clone()]);this.faces.push(w),this.faceVertexUvs[0].push([W[D].clone(),W[z].clone(),W[y].clone()]),w=new Pi(z,v,y,[H[z].clone(),H[v].clone(),H[y].clone()]),this.faces.push(w),this.faceVertexUvs[0].push([W[z].clone(),W[v].clone(),W[y].clone()])}this.computeFaceNormals()};Gn.prototype=mn(_o);var Ze=function(f,W,T){return f?(yc.call(this),f=f instanceof Array?f:[f],this.addShapeList(f,W),W.convertYZ!==!1&&$k(this,T),this.computeFaceNormals(),void 0):(f=[],void 0)},Kl=Ze.prototype=mn(yc.prototype);Kl.addShapeList=function(M,d){for(var l=M.length,V=0;l>V;V++){var W=M[V];this.addShape(W,d)}},Kl.addShape=function(F,p){function s(){if(p.bottom)for(var g=0;Z>g;g++)v=S[g],t(v[2],v[1],v[0],!0);if(p.top)for(g=0;Z>g;g++)v=S[g],t(v[0]+G*c,v[1]+G*c,v[2]+G*c,!1)}function U(){var R=0;for(i(m,R),R+=m.length,I=0,L=j.length;L>I;I++)B=j[I],i(B,R),R+=B.length}function i(q,I){for(var C,X,B=q.length;--B>=0;){C=B,X=B-1,0>X&&(X=q.length-1);var E=0,i=c;for(E=0;i>E;E++){var r=G*E,L=G*(E+1),b=I+C+r,Q=I+X+r,w=I+X+L,j=I+C+L;x(b,Q,w,j,q,E,i,C,X)}}}function Y(M,x,d){A.vertices.push(new ch(M,x,d))}function t(I,X,b,R){I+=D,X+=D,b+=D,A.faces.push(new Pi(I,X,b,null,null,R?2:1));var v=R?_.generateBottomUV(A,F,p,I,X,b):_.generateTopUV(A,F,p,I,X,b);A.faceVertexUvs[0].push(v)}function x(j,O,z,g,C,L,Y,m,Z){j+=D,O+=D,z+=D,g+=D,A.faces.push(new Pi(j,O,g)),A.faces.push(new Pi(O,z,g));var w=_.generateSideWallUV(A,F,C,p,j,O,z,g,L,Y,m,Z);A.faceVertexUvs[0].push([w[0],w[1],w[3]]),A.faceVertexUvs[0].push([w[1],w[2],w[3]])}var e,X,K,u,w,a=p.amount,r=p.curveSegments||cn,c=p.steps||1,h=p.extrudePath,d=!1,_=new Al(p.repeatUVLength);h&&(e=h.getSpacedPoints(c),d=!0,X=p.frames!==z?p.frames:new fk.FrenetFrames(h,c,!1),K=new ch,u=new ch,w=new ch);var B,I,L,A=this,D=this.vertices.length,y=F.extractPoints(r),E=y.shape,j=y.holes,q=!yk.isClockWise(E);if(q){for(E=E.reverse(),I=0,L=j.length;L>I;I++)B=j[I],yk.isClockWise(B)&&(j[I]=B.reverse());q=!1}var S=yk.triangulateShape(E,j),m=E;for(I=0,L=j.length;L>I;I++)B=j[I],E=E.concat(B);for(var R,v,G=E.length,Z=S.length,l=0;G>l;l++)R=E[l],d?(u.copy(X.normals[0]).multiplyScalar(R.x),K.copy(X.binormals[0]).multiplyScalar(R.y),w.copy(e[0]).add(u).add(K),Y(w.x,w.y,w.z)):Y(R.x,R.y,0);var k;for(k=1;c>=k;k++)for(l=0;G>l;l++)R=E[l],d?(u.copy(X.normals[k]).multiplyScalar(R.x),K.copy(X.binormals[k]).multiplyScalar(R.y),w.copy(e[k]).add(u).add(K),Y(w.x,w.y,w.z)):Y(R.x,R.y,a/c*k);s(),U()};var fk=function(x,S,v,A,k){function G(s,$,K){return c.vertices.push(new ch(s,$,K))-1}yc.call(this),S=S||64,v=v||1,A=A||8,k=k||!1;var s,T,H,p,U,i,R,n,P,F,m,W,$,Y,r,g,J,d,M,B,O=[],c=this,q=S+1,w=new ch,f=new fk.FrenetFrames(x,S,k),V=f.tangents,e=f.normals,b=f.binormals;for(this.tangents=V,this.normals=e,this.binormals=b,P=0;q>P;P++)for(O[P]=[],p=P/(q-1),n=x.getPointAt(p),s=V[P],T=e[P],H=b[P],F=0;A>F;F++)U=F/A*X,i=-v*C(U),R=v*j(U),w.copy(n),w.x+=i*T.x+R*H.x,w.y+=i*T.y+R*H.y,w.z+=i*T.z+R*H.z,O[P][F]=G(w.x,w.y,w.z);for(P=0;S>P;P++)for(F=0;A>F;F++)m=k?(P+1)%S:P+1,W=(F+1)%A,$=O[P][F],Y=O[m][F],r=O[m][W],g=O[P][W],J=new Zo(P/S,F/A),d=new Zo((P+1)/S,F/A),M=new Zo((P+1)/S,(F+1)/A),B=new Zo(P/S,(F+1)/A),this.faces.push(new Pi($,Y,g)),this.faceVertexUvs[0].push([J,d,B]),this.faces.push(new Pi(Y,r,g)),this.faceVertexUvs[0].push([d.clone(),M,B.clone()]);this.computeFaceNormals(),this.computeVertexNormals()};fk.prototype=mn(_o),fk.FrenetFrames=function(b,X,D){function r(){C[0]=new ch,v[0]=new ch,W=Number.MAX_VALUE,G=a(d[0].x),O=a(d[0].y),m=a(d[0].z),W>=G&&(W=G,e.set(1,0,0)),W>=O&&(W=O,e.set(0,1,0)),W>=m&&e.set(0,0,1),p.crossVectors(d[0],e).normalize(),C[0].crossVectors(d[0],p),v[0].crossVectors(d[0],C[0])}var w,W,G,O,m,k,H,e=new ch,d=[],C=[],v=[],p=new ch,Z=new Bs,Y=X+1,U=1e-4;for(this.tangents=d,this.normals=C,this.binormals=v,k=0;Y>k;k++)H=k/(Y-1),d[k]=b.getTangentAt(H),d[k].normalize();for(r(),k=1;Y>k;k++)C[k]=C[k-1].clone(),v[k]=v[k-1].clone(),p.crossVectors(d[k-1],d[k]),p.length()>U&&(p.normalize(),w=J(ql(d[k-1].dot(d[k]),-1,1)),C[k].applyMatrix4(Z.makeRotationAxis(p,w))),v[k].crossVectors(d[k],C[k]);if(D)for(w=J(ql(C[0].dot(C[Y-1]),-1,1)),w/=Y-1,d[0].dot(p.crossVectors(C[0],C[Y-1]))>0&&(w=-w),k=1;Y>k;k++)C[k].applyMatrix4(Z.makeRotationAxis(d[k],w*k)),v[k].crossVectors(d[k],C[k])};var us=function(J,g,E,x){yc.call(this),g=g||18,E=E||0,x=x==v?X:x;for(var O=1/(J.length-1),Y=1/g,Q=0,G=g;G>=Q;Q++)for(var A=E+Q*Y*x,b=C(A),M=j(A),l=0,U=J.length;U>l;l++){var i=J[l],d=new ch;d.x=b*i.x-M*i.y,d.y=M*i.x+b*i.y,d.z=i.z,this.vertices.push(d)}for(var h=J.length,Q=0,G=g;G>Q;Q++)for(var l=0,U=J.length-1;U>l;l++){var q=l+h*Q,n=q,e=q+h,b=q+1+h,W=q+1,S=Q*Y,Z=l*O,R=S+Y,B=Z+O;this.faces.push(new Pi(n,W,e)),this.faceVertexUvs[0].push([new Zo(S,Z),new Zo(S,B),new Zo(R,Z)]),this.faces.push(new Pi(e,W,b)),this.faceVertexUvs[0].push([new Zo(R,Z),new Zo(S,B),new Zo(R,B)])}this.mergeVertices(),$k(this),this.computeFaceNormals(),this.computeVertexNormals()};us.prototype=mn(_o);var _j=function(q,e){e=e||{};var g=Em.generateShapes(q,e);e.amount=e.amount!==z?e.amount:.5,e.convertYZ=!1,e.fill!==!1&&(e.bottom=!0,e.top=!0),Ze.call(this,g,e)};_j.prototype=mn(Kl);var Zp=n.Node=function(){lj(Zp,this)},jc={X:Md,Y:$j,Z:xj},yh={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},te="xzy",on=function(M,d,u){if(d){var c=d[0],p=d[1],S=d[2];"xzy"===u?($j(M,p),xj(M,S),Md(M,c)):"xyz"===u?(xj(M,S),$j(M,p),Md(M,c)):"yxz"===u?(xj(M,S),Md(M,c),$j(M,p)):"yzx"===u?(Md(M,c),xj(M,S),$j(M,p)):"zxy"===u?($j(M,p),Md(M,c),xj(M,S)):"zyx"===u?(Md(M,c),$j(M,p),xj(M,S)):($j(M,p),xj(M,S),Md(M,c))}};ts("Node",Mh,{ms_ac:["rotationMode","tall"],_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:te,_64O:0,_rotationX:0,_53O:0,_host:v,_position:{x:0,y:0},_anchor:{x:.5,y:.5},_scale:{x:1,y:1},_tall:20,_54O:0,getUIClass:function(){return lm},_22Q:function(){return _g},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(E,u){wi(E,qd(v,v,this.r3(),this.getRotationMode())),this.translate3d(E[0]*u,E[1]*u,E[2]*u)},translateFront:function(I){this.translate3dBy([0,0,1],I)},translateBack:function(v){this.translate3dBy([0,0,-1],v)},translateLeft:function(p){this.translate3dBy([-1,0,0],p)},translateRight:function(N){this.translate3dBy([1,0,0],N)},translateTop:function(d){this.translate3dBy([0,1,0],d)},translateBottom:function(P){this.translate3dBy([0,-1,0],P)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(i,p,G){1===arguments.length&&(p=i[1],G=i[2],i=i[0]),this.p(i,G),this.setElevation(p)},translate3d:function(V,K,J){1===arguments.length&&(K=V[1],J=V[2],V=V[0]),this.translate(V,J),this.setElevation(this._54O+K)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(z,j,b){1===arguments.length&&(j=z[1],b=z[2],z=z[0]),this.setSize(z,b),this.setTall(j)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(e,H,U){1===arguments.length&&(H=e[1],U=e[2],e=e[0]),this.setRotationX(e),this.setRotation(-H),this.setRotationZ(U)},setRotationY:function(Q){this.setRotation(-Q)},getRotationY:function(){return-this._64O},lookAt:function(_,f){f=f||Cf;var L=this,Y=Fk(_,L.p3()),P=Kd(Y);f===Cf?(L.r3([-D(Y[1]/P),-B(Y[2],Y[0])+x,0]),L.setRotationMode("xzy")):f===be?(L.r3(0,-B(Y[2],Y[0]),D(Y[1]/P)),L.setRotationMode("zyx")):f===Kp?(L.r3(0,-B(Y[2],Y[0])+K,-D(Y[1]/P)),L.setRotationMode("zyx")):f===ph?(L.r3([-D(Y[1]/P)+x,-B(Y[2],Y[0])+x,0]),L.setRotationMode("xzy")):f===ud&&(L.r3([-D(Y[1]/P)-x,-B(Y[2],Y[0])+x,0]),L.setRotationMode("xzy")),f===uj&&(L.r3([-D(Y[1]/P)+K,-B(Y[2],Y[0])+x,K]),L.setRotationMode("zxy"))},getLoopedEdges:function(){return this._45I},getEdges:function(){return this._70O},getAgentEdges:function(){return this._49I},getHost:function(){return this._host},setHost:function(z){var K=this;if(K!==z&&K._host!==z){var k=K._host;k&&k._removeAttach(K),K._host=z,K._host&&K._host._addAttach(K),K.fp("host",k,z),K.onHostChanged(k,z)}},getAttaches:function(){return this._69O},_addAttach:function(t){var h=this;h._69O||(h._69O=new Sd),h._69O.add(t),h.fp("attaches",v,t)},_removeAttach:function(k){var I=this;I._69O.remove(k),I._69O.isEmpty()&&delete I._69O,I.fp("attaches",k,v)},getSourceEdges:function(){return this._42I},getTargetEdges:function(){return this._43I},_2I:function(f){var A=this;A._44I||(A._44I=new Sd),A._42I||(A._42I=new Sd),A._44I.add(f),A._42I.add(f),A._20I()},_4I:function(Y){var q=this;q._44I||(q._44I=new Sd),q._43I||(q._43I=new Sd),q._44I.add(Y),q._43I.add(Y),q._20I()},_16I:function($){var o=this;o._44I.remove($),o._42I.remove($),o._44I.isEmpty()&&delete o._44I,o._42I.isEmpty()&&delete o._42I,o._20I()},_18I:function(G){var O=this;O._44I.remove(G),O._43I.remove(G),O._44I.isEmpty()&&delete O._44I,O._43I.isEmpty()&&delete O._43I,O._20I()},_20I:function(){var X=this;if(delete X._45I,!X._44I||X._44I.isEmpty())return delete X._70O,void 0;var E;X._44I.each(function(c){c.isLooped()&&(E||(E={}),E[c._id]||(X._45I||(X._45I=new Sd),X._45I.add(c),E[c._id]=c))}),E?(X._70O=new Sd,X._44I.each(function(z){E[z._id]?"A"===E[z._id]||(E[z._id]="A",X._70O.add(z)):X._70O.add(z)})):X._70O=X._44I},hasAgentEdges:function(){return!!this._49I&&!this._49I.isEmpty()},getSourceAgentEdges:function(){return this._46I},getTargetAgentEdges:function(){return this._47I},_1I:function(Y){var i=this;i._46I||(i._46I=new Sd),i._48I||(i._48I=new Sd),i._46I.add(Y),i._48I.add(Y),i._19I()},_3I:function(f){var Q=this;Q._47I||(Q._47I=new Sd),Q._48I||(Q._48I=new Sd),Q._47I.add(f),Q._48I.add(f),Q._19I()},_15I:function(t){var s=this;s._46I.remove(t),s._48I.remove(t),s._46I.isEmpty()&&delete s._46I,s._48I.isEmpty()&&delete s._48I,s._19I()},_17I:function(_){var z=this;z._47I.remove(_),z._48I.remove(_),z._47I.isEmpty()&&delete z._47I,z._48I.isEmpty()&&delete z._48I,z._19I()},_19I:function(){var X=this;delete X._49I;var f=X._48I;if(f&&!f.isEmpty()){var q={};f.each(function(I){q[I._id]?X._49I||(X._49I=new Sd):q[I._id]=I}),X._49I?f.each(function(f){q[f._id]&&(X._49I.add(f),delete q[f._id])}):X._49I=f}},getImage:function(){return this._image},setImage:function(T){var b=this,l=b._image,I=b.getWidth(),u=b.getHeight();b._image=T,b.fp("image",l,T),b.fp(le,I,b.getWidth()),b.fp(jq,u,b.getHeight())},getElevation:function(){return this._54O},setElevation:function(X){var $=this;if(!$._50O){$._50O=1;var T=$._54O;$._54O=X,$.fp(lk,T,X),delete this._50O}},getRotation:function(){return this._64O},setRotation:function(z){var e=this;if(!e._49O){e._49O=1;var r=e._64O;e._64O=z,e.fp(Jh,r,z),delete e._49O}},getRotationX:function(){return this._rotationX},setRotationX:function(Z){var q=this;if(!q._51O){q._51O=1;var u=q._rotationX;q._rotationX=Z,q.fp("rotationX",u,Z),delete q._51O}},getRotationZ:function(){return this._53O},setRotationZ:function(M){var g=this;if(!g._52O){g._52O=1;var t=g._53O;g._53O=M,g.fp("rotationZ",t,M),delete g._52O}},getPosition:function(){return this._position},setPosition:function(E,I){var c=this;if(!c._50I){c._50I=1;var _;if(_=2===arguments.length?{x:E,y:I}:E,_.x!==c._position.x||_.y!==c._position.y){var s=c._position;c._position=_,c.fp(fs,s,_)}delete c._50I}},translate:function(F,w){var l=this._position;this.p(l.x+F,l.y+w)},getWidth:function(){var x=this;if(x._width>=0)return x._width;var H=Ep(x._image);return H?ob(H,x):20},setWidth:function(p){var P=this,K=P._width;P._width=p,P.fp(le,K,p)},getHeight:function(){var r=this;if(r._height>=0)return r._height;var X=Ep(r._image);return X?ee(X,r):20},setHeight:function(N){var m=this,s=m._height;m._height=N,m.fp(jq,s,N)},setSize:function(B,x){var l=this;2===arguments.length?(l.setWidth(B),l.setHeight(x)):(l.setWidth(B.width),l.setHeight(B.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(C,Z,m,J,B){var F=this,P=F.getAnchor(),k=F.getScale();arguments.length<=2&&(B=Z,Z=C.y,m=C.width,J=C.height,C=C.x);var a=k.x<0?1-P.x:P.x,U=k.y<0?1-P.y:P.y;F.p(C+m*a,Z+J*U),B&&(m/=Math.abs(k.x),J/=Math.abs(k.y)),F.setWidth(m),F.setHeight(J)},getMatrix:function(){var _=this,n=_._64O,B=_._position,F=_.getScale();return new ll(n,B.x,B.y,F.x,F.y)},getRect:function(){var z=this,Z=z.getWidth(),C=z.getHeight(),R=z.getAnchor(),r={x:-Z*R.x,y:-C*R.y,width:Z,height:C},U=z.getMatrix();return r=ao([U.tf(r.x,r.y),U.tf(r.x+r.width,r.y),U.tf(r.x+r.width,r.y+r.height),U.tf(r.x,r.y+r.height)])},getAnchor:function(){var Q=this;if(Q.hasOwnProperty("_anchor"))return Q._anchor;var R=Ep(Q._image);return R&&R.anchorX!==z?{x:R.anchorX,y:R.anchorY}:Q._anchor},setAnchor:function(z,$,V){var J,y=this;"number"==typeof z?J={x:z,y:$}:(J=z.length?{x:z[0],y:z[1]}:z,V=$);var r=y.getAnchor();if(r.x!==J.x||r.y!==J.y){if(y._anchor=J,V){var Z=y.getPosition(),B=y.getSize(),e=y.getRotation(),E=y.getScale(),M=-B.width*(r.x-J.x)*E.x,K=-B.height*(r.y-J.y)*E.y,R=j(e),p=C(e);y.setPosition(Z.x+p*M-R*K,Z.y+R*M+p*K)}y.fp("anchor",r,J)}},getScale:function(){return this._scale},setScale:function(L,d){var l,Z=this;l=2===arguments.length?{x:L,y:d}:L;var A=Z.getScale();(A.x!==l.x||A.y!==l.y)&&(Z._scale=l,Z.fp("scale",A,l))},getCorners:function(q,X){q==v&&(q=0),X==v&&(X=q);var P=this,Q=P.getAnchor(),F=P.getWidth(),a=P.getHeight(),N=-F*Q.x-q,C=-a*Q.y-X,f=F+2*q,w=a+2*X,r=P.getMatrix();return[r.tf(N,C),r.tf(N,C+w),r.tf(N+f,C+w),r.tf(N+f,C)]},getEditControlPoints:function(t,Y,T){Y==v&&(Y=0),T==v&&(T=Y);var G=this,u=G.getAnchor(),E=G.getWidth(),g=G.getHeight(),B=-E*u.x-Y,f=-g*u.y-T,D=E+2*Y,S=g+2*T;if(t)return[{x:B,y:f},{x:B,y:0},{x:B,y:f+S},{x:0,y:f+S},{x:B+D,y:f+S},{x:B+D,y:0},{x:B+D,y:f},{x:0,y:f}];var e=G.getMatrix();return[e.tf(B,f),e.tf(B,0),e.tf(B,f+S),e.tf(0,f+S),e.tf(B+D,f+S),e.tf(B+D,0),e.tf(B+D,f),e.tf(0,f)]},rotateAt:function(o,M,I){var O=this,F=O._position,z=O._64O,y=new ll(z,F.x,F.y).tf(o,M),r=L(o*o+M*M),f=B(F.y-y.y,F.x-y.x)+I;O.setRotation(z+I),O.p(y.x+r*C(f),y.y+r*j(f))},onParentChanged:function(){Zp.superClass.onParentChanged.apply(this,arguments),this._8I()},_8I:function(){this._70O&&this._70O.each(function(C){C._7I()})},onPropertyChanged:function(c){var x=this;Zp.superClass.onPropertyChanged.call(x,c),x._69O&&x._69O.each(function(T){T.handleHostPropertyChange(c)}),x._49I&&x._49I.each(function(U){U.fp("agentChange",!0,!1)})},onHostChanged:function(){this.updateAttach()},handleHostPropertyChange:function(q){this.updateAttach(q)},onStyleChanged:function(M){Zp.superClass.onStyleChanged.apply(this,arguments),pe[M]&&this.updateAttach()},updateAttach:function(R){var G=this;G._51I||Sk||(G._51I=1,G._71O(R),delete G._51I)},_71O:function(N){var T,b,Z,t,G,J,S=this,a=S._host,R=N?N.property:v,I=N?N.oldValue:v,h=N?N.newValue:v;if(a instanceof sf){if(R===lk)S.setElevation(S._54O+h-I);else if(!N||ds[R]){if(T=S.s("attach.row.index"),b=S.s("attach.column.index"),Z=a.getCellRect(T,b),!Z)return;t=S.s("attach.row.span"),G=S.s("attach.column.span"),(1!==t||1!==G)&&(Z=rr(Z,a.getCellRect(T+t-1,b+G-1))),ns(Z,S,"attach.padding",1),S.setRect(Z)}}else if(a instanceof Wr&&(J=S.s("attach.index"))>=0&&(!N||Uk[R])){var F=S.s("attach.thickness");F!=v&&S.setHeight(a.getThickness()*F);var M=S.s("attach.offset"),x=a.getPoints(),r=x.size();if(r>J){var O=x.get(J),X=r===J+1?x.get(0):x.get(J+1),o=[X.x-O.x,X.y-O.y],Y=Kd(o);if(Y){S.s("attach.offset.relative")&&(M*=Y),S.s("attach.offset.opposite")&&(M=Y-M);var f={x:O.x+o[0]/Y*M,y:O.y+o[1]/Y*M},Q=S.s("attach.gap");Q&&(S.s("attach.gap.relative")&&(Q*=a.getThickness()),f=Dn(v,f,X,Q)),S.p(f),S.setRotation(B(o[1],o[0]))}}}else N&&(R===fs?S.translate(h.x-I.x,h.y-I.y):R===lk?S.setElevation(S._54O+h-I):cp[R]&&S._11Q(a,R,h-I))},_11Q:function(c,i,H){var f=this,h=c.p3(),R=Fk(f.p3(),h),Y=rh(),w=yh[f.getRotationMode()],p=w[0],u=w[1],r=w[2],E=jc[p],y=jc[u],z=jc[r];i===Jh&&(i="rotationY",H=-H),i===Jh+p?(z(Y,c[xi+r]()),y(Y,c[xi+u]()),E(Y,H),y(Y,-c[xi+u]()),z(Y,-c[xi+r]()),f[Hj+p](f[xi+p]()+H)):i===Jh+u?(z(Y,c[xi+r]()),y(Y,H),z(Y,-c[xi+r]()),f[Hj+u](f[xi+u]()+H)):i===Jh+r&&(z(Y,H),f[Hj+r](f[xi+r]()+H)),wi(R,Y),f.p3(h[0]+R[0],h[1]+R[1],h[2]+R[2])},isHostOn:function(F){var f=this;if(f._host&&F&&F._69O)for(var V={},u=f._host;u&&u!==f&&!V[u._id];){if(u===F)return!0;V[u._id]=u,u=u._host}return!1},isLoopedHostOn:function(j){return this.isHostOn(j)&&j.isHostOn(this)},getSerializableProperties:function(){var i=Zp.superClass.getSerializableProperties.call(this);return ik(i,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,anchor:1,scale:1,_width:1,_height:1,tall:1,elevation:1}),i}});var Jd=n.Edge=function(U,l){var v=this;lj(Jd,v),v.setSource(U),v.setTarget(l)};ts("Edge",Mh,{_icon:"edge_icon",getUIClass:function(){return Eb},_22Q:function(){return Am},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},setSource:function(P){var V=this;if(V._source!==P){var b=V._source;V._source=P,b&&b._16I(V),P&&P._2I(V),V._7I(),V.fp("source",b,P)}},setTarget:function(e){var O=this;if(O._target!==e){var G=O._target;O._target=e,G&&G._18I(O),e&&e._4I(O),O._7I(),O.fp("target",G,e)}},isLooped:function(){var L=this;return L._source===L._target&&!!L._source&&!!L._target},_7I:function(){var A,v=this,K=ti(v);v._40I!==K&&(A=this._40I,A&&A._15I(v),v._40I=K,K&&K._1I(v),v.fp("sourceAgent",A,K),Gc(A,v._41I),Gc(K,v._41I));var p=Bp(v);v._41I!==p&&(A=v._41I,A&&A._17I(v),v._41I=p,p&&p._3I(v),v.fp("targetAgent",A,p),Gc(A,v._40I),Gc(p,v._40I))},_22I:function(k){this._52I=k,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){var r=this;return r._52I&&r._52I.get(0)!==r&&!r.getStyle(Pc)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var y=this,k=y._52I;return k&&!y.getStyle(Pc)&&k.size()>1&&y===k.get(0)},toggle:function(){var C=this._52I,f=!this.s(Pc);C&&C.size()>1&&(C.each(function(x){x.s(Pc,f)}),C.getSiblings().each(function(P){P!==C&&P.each(function(c){c.fp("edgeGroup",v,P)})}))},setStyle:function(r,s){(r===pc||"edge.segments"===r)&&(s=wr(s)),Jd.superClass.setStyle.call(this,r,s)},onStyleChanged:function(U){Jd.superClass.onStyleChanged.apply(this,arguments),Or[U]&&Gc(this._41I,this._40I)},getSerializableProperties:function(){var A=Jd.superClass.getSerializableProperties.call(this);return ik(A,{source:1,target:1}),A}});var Ql=n.Group=function(){lj(Ql,this)};ts("Group",Zp,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return Ed},onChildAdded:function(){Ql.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(){Ql.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var n=this;if(!n._54I&&!Sk){var i=n.getChildrenRect();i&&(n._53I=1,n.p(vd(n.s("group.position"),i,n.getSize())),delete n._53I)}},getChildrenRect:function(){var D,G=this;return G.eachChild(function(g){D=rr(D,G.getChildRect(g))}),D},getChildRect:function(S){var a;return Qn(S)&&S.s(qq)&&(sj(S)&&S.isExpanded()&&S.eachChild(function(v){a=rr(a,S.getChildRect(v))}),!a&&S.getRect&&(a=S.getRect())),a},setPosition:function(t,y){var w=this;if(!w._54I){var O;O=2===arguments.length?{x:t,y:y}:t,Sk||w._53I||(w._54I=1,zl(w._children,O.x-w._position.x,O.y-w._position.y),delete w._54I),Ql.superClass.setPosition.call(this,O)}},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(d){var z=this;if(z._57O!==d){var y=z._57O;z._57O=d,z.fp("expanded",y,z._57O),z._8I()}},_8I:function(){Ql.superClass._8I.call(this),this.eachChild(function(B){Qn(B)&&B._8I()})},onStyleChanged:function(P){Ql.superClass.onStyleChanged.apply(this,arguments),"group.position"===P&&this._81I()},getSerializableProperties:function(){var s=Ql.superClass.getSerializableProperties.call(this);return s.expanded=1,s}});var Lq=n.Block=function(){lj(Lq,this)};ts("Block",Zp,{_icon:"block_icon",getUIClass:function(){return yl},onChildAdded:function(){Lq.superClass.onChildAdded.apply(this,arguments),this.updateFromChildren()},onChildRemoved:function(){Lq.superClass.onChildRemoved.apply(this,arguments),this.updateFromChildren()},updateFromChildren:function(){var E=this;if(!Sk&&!E._updatingToChildren){var m,q,p,N,X,h=[],Q=E.getRotation();if(E.eachChild(function(d){Qn(d)&&h.push.apply(h,d.getCorners())}),h.length){E._updatingFromChildren=1;var d=C(-Q),M=j(-Q),L=1/0,l=-1/0,K=1/0,F=-1/0;for(N=0,X=h.length;X>N;N++)p=h[N],m=p.x,q=p.y,p.x=d*m-M*q,p.y=M*m+d*q,L=o(L,p.x),l=w(l,p.x),K=o(K,p.y),F=w(F,p.y);var G=E.getScale();E.setSize(a((l-L)/G.x),a((F-K)/G.y)),d=C(Q),M=j(Q);var T=E.getAnchor();m=L+(l-L)*T.x,q=K+(F-K)*T.y,E.setPosition(d*m-M*q,M*m+d*q),delete E._updatingFromChildren}}},setPosition:function(M,W){var V=this;if(!V._updatingToChildren){var f;f=2===arguments.length?{x:M,y:W}:M,Sk||V._updatingFromChildren||(V._updatingToChildren=1,zl(V._children,f.x-V._position.x,f.y-V._position.y),delete V._updatingToChildren),Lq.superClass.setPosition.call(this,f)}},setWidth:function(J){return this.setSize(J,this.getHeight())},setHeight:function(h){return this.setSize(this.getWidth(),h)},setSize:function(C,B){1>C&&(C=1),1>B&&(B=1);var Z=this;if(!Z._updatingToChildren){2!==arguments.length&&(B=C.height,C=C.width);var n=Z.getWidth(),i=Z.getHeight();if(C!==n&&Lq.superClass.setWidth.call(Z,C),B!==i&&Lq.superClass.setHeight.call(Z,B),!Sk&&!Z._updatingFromChildren){Z._updatingToChildren=1;var G=C/n,E=B/i;Z._adjustChildScaleOrSize(G,E,"size"),delete Z._updatingToChildren,Z.updateFromChildren()}}},_adjustChildScaleOrSize:function(l,g,N){var F=this,z=F.getPosition(),s=F.getRotation();F.eachChild(function(y){if(Qn(y)){var V=y.getPosition(),u=y.getRotation(),i=y.getWidth(),T=y.getHeight(),t=y.getScale(),c=t.x*i,Q=t.y*T,I=new ll(u,V.x,V.y,c,Q);I.translate(-z.x,-z.y),I.rotate(-s),u=B(I.b,I.a),I.scale(l,g);var k,K,$,b=C(u);if(Math.abs(b)<.001?(k=j(u),K=I.b/k,$=-I.c/k):(K=I.a/b,$=I.d/b),"scale"===N)y.setScale(K/i,$/T);else if("size"===N){var h=K/t.x,d=$/t.y;(0>h||0>d)&&y.setScale(Vb(h)*t.x,Vb(d)*t.y),y.setSize(Math.max(.1,Math.abs(h)),Math.max(.1,Math.abs(d)))}I.rotate(s),I.translate(z.x,z.y),y.setPosition(I.tx,I.ty)}})},_calcChangeFactor:function(V,R,k,Q){var u,y,K,i;return u=a(V),y=a(k),K=u>y?u/y:y/u,u=a(R),y=a(Q),i=u>y?u/y:y/u,w(K,i)},setAnchor:function(){var w=this;if(!w._updatingToChildren){var E=w.getAnchor();if(Lq.superClass.setAnchor.apply(w,arguments),!Sk&&!w._updatingFromChildren){w._updatingToChildren=1;var a=w.getAnchor();w.getPosition();var V=w.getSize(),h=w.getScale(),k=w.getRotation(),z=-V.width*h.x*(E.x-a.x),o=-V.height*h.y*(E.y-a.y),g=j(k),U=C(k),l=U*z-g*o,t=g*z+U*o;w.eachChild(function(e){if(Qn(e)){var H=e.getPosition();e.setPosition(H.x-l,H.y-t)}}),delete w._updatingToChildren}}},setRotation:function(a){var D=this;if(!D._updatingToChildren){var l=D.getRotation();if(Lq.superClass.setRotation.apply(D,arguments),!Sk&&!D._updatingFromChildren){D._updatingToChildren=1;var Y=D.getPosition(),k=a-l;D.eachChild(function(w){if(Qn(w)){var I=w.getMatrix();I.translate(-Y.x,-Y.y),I.rotate(k),I.translate(Y.x,Y.y),w.setRotation(B(I.b,I.a)),w.setPosition(I.tx,I.ty)}}),delete D._updatingToChildren}}},setScale:function(j,M){var i=this;if(!i._updatingToChildren){null==M&&(M=j.y,j=j.x);var D=i.getScale();if(a(j)<.01&&(j=.01*(Vb(j)||Vb(D.x))),a(M)<.01&&(M=.01*(Vb(M)||Vb(D.y))),Lq.superClass.setScale.call(i,j,M),!Sk&&!i._updatingFromChildren){i._updatingToChildren=1;var b=j/D.x,T=M/D.y;i._adjustChildScaleOrSize(b,T,"size"),delete i._updatingToChildren,i.updateFromChildren()}}}});var sf=n.Grid=function(){lj(sf,this)};ts("Grid",Zp,{IRotatable:!1,_icon:"grid_icon",_image:v,getUIClass:function(){return Fe},setRotation:function(){},getCellRect:function(r,z){var D=this,n=D.s("grid.row.count"),$=D.s("grid.column.count");if(0>=n||0>=$||0>r||r>=n||0>z||z>=$)return v;var q,s,u,l=D.getRect(),J=D.s("grid.row.percents"),X=D.s("grid.column.percents");if(ns(l,D,"grid.border",-1),J&&J._as&&(J=J._as),X&&X._as&&(X=X._as),J&&J.length===n){for(u=0,q=0;r>q;q++)u+=l.height*J[q];l.y+=u,l.height=l.height*J[r]}else l.height=l.height/n,l.y+=l.height*r;if(X&&X.length===$){for(s=0,q=0;z>q;q++)s+=l.width*X[q];l.x+=s,l.width=l.width*X[z]}else l.width=l.width/$,l.x+=l.width*z;return si(l,-D.s("grid.gap")),l}});var Wo=n.Text=function(){lj(Wo,this),this.setSize(100,50),this.s("text","TEXT")};ts("Text",Zp,{_icon:"text_icon",_image:"__text__",getUIClass:function(){return oo},setWidth:function(T){T||(T=.001),Wo.superClass.setWidth.call(this,T)},setHeight:function(z){z||(z=.001),Wo.superClass.setHeight.call(this,z)},toLabel:function(){return this._displayName||this._name||this.s("text")}}),$i("__text__",{width:{value:100,isSafeFunc:!0,func:function(l){return l._width}},height:{value:50,isSafeFunc:!0,func:function(x){return x._height}},comps:[{type:"text",relative:!0,rect:[0,0,1,1],text:{func:"style@text"},align:{func:"style@text.align"},vAlign:{func:"style@text.vAlign"},color:{func:"style@text.color"},font:{func:"style@text.font"},shadow:{func:"style@text.shadow"},shadowColor:{func:"style@text.shadow.color"},shadowBlur:{func:"style@text.shadow.blur"},shadowOffsetX:{func:"style@text.shadow.offset.x"},shadowOffsetY:{func:"style@text.shadow.offset.y"}}]});var Wr=n.Shape=function(){lj(Wr,this),this._59O=new Sd};Wr.__de__=eg,ts("Shape",Zp,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return tc},_22Q:function(){return mj},getLength:function(d){return nh(bs(this._59O,this._58O,d,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var G=this._58O;return G?new Sd(G._as.slice(0)):G},setSegments:function(b){var z=this._58O;b=b?ym(b)?new Sd(b.slice(0)):new Sd(b._as.slice(0)):new Sd,(z&&b&&z._as.join(",")!==b._as.join(",")||z!==b)&&(this._58O=b,this.fp("segments",z,b))},getPoints:function(){return this._59O},toPoints:function(){var B=this._59O;return new Sd(B._as.slice(0))},setPoints:function(V){var w=this._59O;V=V?ym(V)?new Sd(V.slice(0)):new Sd(V._as.slice(0)):new Sd,(w&&V&&w._as.join(",")!==V._as.join(",")||w!==V)&&(this._59O=V,this.fs(),this.fp("points",w,V))},addPoint:function(m,v){var X=this.toPoints();X.add(m,v),this.setPoints(X)},setPoint:function(k,f){var r=this.toPoints();r.set(k,f),this.setPoints(r)},removePointAt:function(A){var Q=this.toPoints();Q.removeAt(A),this.setPoints(Q)},setWidth:function(Z){var z=this;
if(1>Z&&(Z=1),!z._55I&&!Sk&&z.getWidth()){z._55I=1;var k=z._position.x,x=Z/z.getWidth(),g=z.toPoints(),K=new Sd;g.each(function(H){K.add({x:(H.x-k)*x+k,y:H.y,e:H.e})}),z.setPoints(K);var L=z.s("shape.gradient.pack");L&&Lk(L,[x,0,0,1,k*(1-x),0]),z.fs(),delete z._55I}Wr.superClass.setWidth.call(z,Z)},setHeight:function(l){var d=this;if(1>l&&(l=1),!d._55I&&!Sk&&d.getHeight()){d._55I=1;var h=d._position.y,S=l/d.getHeight(),D=d.toPoints(),Y=new Sd;D.each(function(k){Y.add({x:k.x,y:(k.y-h)*S+h,e:k.e})}),d.setPoints(Y);var r=d.s("shape.gradient.pack");r&&Lk(r,[1,0,0,S,0,h*(1-S)]),d.fs(),delete d._55I}Wr.superClass.setHeight.call(d,l)},setAnchor:function(z,H,J){var e=this;if(e._55I=!0,!J){var X,R=e.getAnchor(),y=e.getSize();X="number"==typeof z?{x:z,y:H}:z.length?{x:z[0],y:z[1]}:z,e.shiftPoints(y.width*(R.x-X.x),y.height*(R.y-X.y))}Wr.superClass.setAnchor.apply(e,arguments),delete e._55I},shiftPoints:function(Z,G){var O=this,S=O.toPoints(),g=new Sd;S.each(function(e){g.add({x:e.x+Z,y:e.y+G,e:e.e})}),O.setPoints(g),O.fs()},setPosition:function(T,G){var M,E=this;if(!E._28Q){if(E._28Q=1,!E._55I&&!Sk){M=2===arguments.length?{x:T,y:G}:T;var x=M.x-E._position.x,_=M.y-E._position.y;if(0===x&&0===_)return delete E._28Q,void 0;E._55I=1,E.shiftPoints(x,_);var k=E.s("shape.gradient.pack");k&&Lk(k,[1,0,0,1,x,_]),delete E._55I}Wr.superClass.setPosition.apply(E,arguments),delete E._28Q}},fs:function(){this.fireShapeChange()},fireShapeChange:function(){var e=this;if(!e._55I&&!Sk){var L=ao(e._59O);L&&(e._55I=1,e.setRect(L),delete e._55I)}e.fp(kl,!1,!0)},getSerializableProperties:function(){var R=Wr.superClass.getSerializableProperties.call(this);return R.segments=1,R.points=1,R.thickness=1,R.closePath=1,R}});var jk=n.Polyline=function(){lj(jk,this),this.s({"shape.background":null,"shape.border.width":2})};ts("Polyline",Wr,{IRotatable:!1,_icon:"polyline_icon",_22Q:function(){return gg},getUIClass:function(){return dl},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setClosePath:function(){},setTall:function(i){var g=this;if(!g._24Q&&!Sk&&g.getTall()){g._24Q=1;var m=g._54O,c=i/g.getTall();g._59O.each(function(R){R.e=R.e==v?m:(R.e-m)*c+m}),g.fs(),delete g._24Q}jk.superClass.setTall.call(g,i)},setElevation:function(u){var A=this;if(!A._24Q&&!Sk){A._24Q=1;var y=u-A._54O;A._59O.each(function(g){g.e==v?g.e=u:g.e+=y}),A.fs(),delete A._24Q}jk.superClass.setElevation.apply(A,arguments)},fireShapeChange:function(){var d=this,f=d._59O;if(!d._24Q&&!Sk){var b=f.size();if(b){var e=1,G=f.get(0),I=d._54O;G.e==v&&(G.e=I);for(var C=G.e,s=0;b>e;e++){G=f.get(e),G.e==v&&(G.e=I);var i=o(C,G.e),X=w(C+s,G.e);C=i,s=X-i}d._24Q=1,d.setTall(s),d.setElevation(C+s/2),delete d._24Q}}jk.superClass.fireShapeChange.apply(d,arguments)}});var zg=n.SubGraph=function(){lj(zg,this)};ts("SubGraph",Zp,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){zg.superClass._8I.call(this),this.eachChild(function(w){Qn(w)&&w._8I()})}}),n.EdgeGroup=function(f,k){this._70O=f,this._siblings=k;for(var N,Y,E=0,i=f.size(),Q=y[Pc];i>E;E++)if(N=f.get(E).getStyle(Pc,!1),N!=v){Q=N;break}Q==v&&(Q=!0);var u=r.edgeGroupAgentFunc;for(u&&(Y=u(f),Y&&Y!==f.get(0)&&(f.remove(Y),f.add(Y,0))),E=0;i>E;E++)f.get(E).s(Pc,Q)},ts("EdgeGroup",t,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(R){return this._70O.get(R)},indexOf:function(M){return this._70O.indexOf(M)},each:function(M,G){this._70O.each(M,G)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(P,E){this._siblings.each(function(U){U._70O.each(P,E)})}});var kq=n.JSONSerializer=function(i,c){this.dm=this._dataModel=i,this._hierarchical=!!c};ts("JSONSerializer",t,{ms_ac:["hierarchical"],serialize:function(N){return r.stringify(this.toJSON(),N)},toJSON:function(){var G=this,h=G.dm,b=h.getRoots(),l=G.json={v:r.getVersion(),p:{},a:{},d:[]},S=h.getSerializableAttrs();h.getInit()&&(l.init=h.getInit()),h.getName()&&(l.p.name=h.getName()),h.getBackground()&&(l.p.background=h.getBackground()),l.p.autoAdjustIndex=h.isAutoAdjustIndex();for(var _ in S){var K=h.a(_);K!==z&&G[xm](_,K,l.a)}return $e(l.a)&&delete l.a,G._hierarchical?b.each(G.serializeData,this):h.each(function(O){G.serializeData(O)}),l},isSerializable:function(){return!0},getProperties:function(Z){return Z.getSerializableProperties()},getStyles:function(n){return n.getSerializableStyles()},getAttrs:function(p){return p.getSerializableAttrs()},serializeData:function(i){var H=this;if(H.isSerializable(i)){var u,y,S,A,f=i.getClass(),Q=new f,h={c:i.getClassName(),i:i.getId(),p:{},s:{},a:{}};H.json.d.push(h),u=H.getProperties(i);for(y in u)/^_/.test(y)?(S=i[y],S!==Q[y]&&H[xm](y.substr(1),S,h.p)):(A=Lf(y),i[A]&&(S=i[A](),S!==Q[A]()&&H[xm](y,S,h.p)));u=H.getStyles(i);for(y in u)S=i.s(y),S!==Q.s(y)&&H[xm](y,S,h.s);u=H.getAttrs(i);for(y in u)S=i.a(y),S!==Q.a(y)&&H[xm](y,S,h.a);$e(h.p)&&delete h.p,$e(h.s)&&delete h.s,$e(h.a)&&delete h.a}H._hierarchical&&i.getChildren().each(H.serializeData,H)},serializeValue:function(A,S,N){Wl(S)?S={__a:S._as}:S instanceof Mh&&(S={__i:S.getId()}),N[A]=S},deserialize:function(E,o,M){Sk=!0;var X=this;E=X.json=hb(E)?r.parse(E):E,X._82I={};var q=X.dm,b=new Sd,l=new Sd,h=0,U=E.d.length;for(Qr(E.init)&&E.init(q),q.setInit(E.init);U>h;h++){var Q=E.d[h],e=Qd(Q.c),V=new e,Z=Q.i;M&&Z!=v&&(V._id=Z),X._82I[Z]=V,b.add(V),l.add(Q)}for(h=0;U>h;h++)X.deserializeData(b.get(h),l.get(h));b.each(function(M){o&&!M.getParent()&&M.setParent(o),q.add(M)});for(var s in E.a)q.a(s,X[Sp](E.a[s]));for(var d in E.p)q[gc(d)](E.p[d]);return Sk=!1,b},deserializeData:function(m,Z){for(var J in Z.p)m[gc(J)](this[Sp](Z.p[J]));for(J in Z.s)m.s(J,this[Sp](Z.s[J]));for(J in Z.a)m.a(J,this[Sp](Z.a[J]))},deserializeValue:function(J){if(Dj(J)){var m=J.__i;if(m!=v)return this._82I[m];if(m=J.__a,ym(m))return new Sd(m)}return J}}),ik(Ko,{serialize:function(x,y){return new kq(this,y).serialize(x)},toJSON:function(a){return new kq(this,a).toJSON()},deserialize:function(V,r,C){return new kq(this).deserialize(V,r,C)}}),Yq.GraphView=function(O){var V=this;V._24I={},V._34I=new Sd,V._25I={},V._56I={},V._view=xr(1,V),V._canvas=yj(V._view),V.dm(O?O:new Ko),V.setEditable(!1),V.setScrollBarVisible(r.graphViewScrollBarVisible)},rq("GraphView",t,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:["layers",kb,Vc,md,Ae,"resettable","editInteractor",Nc,"pannable","rectSelectable","autoScrollZone",Zc,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_resettable:r.graphViewResettable,_pannable:r.graphViewPannable,_rectSelectable:r.graphViewRectSelectable,_autoScrollZone:r.graphViewAutoScrollZone,_rectSelectBackground:r.graphViewRectSelectBackground,_rectSelectBorderColor:r.graphViewRectSelectBorderColor,_editPointSize:r.graphViewEditPointSize,_editPointBorderColor:r.graphViewEditPointBorderColor,_editPointBackground:r.graphViewEditPointBackground,_scrollBarColor:cm,_scrollBarSize:Mp,_autoHideScrollBar:Pb,_autoMakeVisible:ok,setEditable:function(o){var z=this,D=Yq.XEditInteractor;o?z.setInteractors([new dc(z),new Rj(z),D?new D(z):new Jq(z),new vp(z),new Gh(z),new Be(z,{editable:!D})]):z.setInteractors([new dc(z),new Rj(z),new vp(z),new Gh(z),new Be(z,{editable:!1})])},getCanvas:function(){return this._canvas},_33I:function(r){var P=r.getUIClass();return P?new P(this,r):v},getDataUI:function(A){var T=this,W=T._25I[A._id];return W===z&&(W=T._33I(A),T._25I[A._id]=W),W},getNodeRect:function(z){return r.getNodeRect(this,z)},getEdgeInfo:function(V){var G=this.getDataUI(V);return G?(G._79o(),G._78o):null},invalidateAll:function(D){var c=this;if(D){for(var A in c._25I){var l=c._25I[A];l&&l.dispose()}c._25I={},c._56I={},c._24I={},c._34I.clear(),c.redraw()}else c.dm().each(function(U){c.invalidateData(U)})},invalidateSelection:function(){var l=this;l.sm().each(function(Q){l.invalidateData(Q)})},invalidateData:function(d){var c=this;c._24I[d._id]=d,c._21Q(d),c.iv()},_21Q:function(w){var h=this,W=h._24I;if(qg(w)&&Nn[w.s(ke)]){var D=w.getSourceAgent();D&&D.getAgentEdges().each(function(F){W[F._id]=F}),D=w.getTargetAgent(),D&&D.getAgentEdges().each(function(n){W[n._id]=n}),h.iv()}},redraw:function(N){var z=this;z._32I||(N?z._34I.add(N):(z._32I=1,z._34I.clear()),z.iv())},each:function(K,o){var Y,X,D,y=0,T=this._layers,Q=this._dataModel._datas._as,W=Q.length;if(T)for(var z=T.length;z>y;y++){D=T[y];for(var Z=0;W>Z;Z++)if(Y=Q[Z],Y._layer===D&&(X=o?K.call(o,Y):K(Y),X===!1))return}else for(;W>y;y++)if(Y=Q[y],X=o?K.call(o,Y):K(Y),X===!1)return},reverseEach:function(u,e){var o,z,C,D,j=this._layers,Z=this._dataModel._datas._as,b=Z.length;if(j)for(o=j.length-1;o>=0;o--){D=j[o];for(var y=b-1;y>=0;y--)if(z=Z[y],z._layer===D&&(C=e?u.call(e,z):u(z),C===!1))return}else for(o=b-1;o>=0;o--)if(z=Z[o],C=e?u.call(e,z):u(z),C===!1)return},getViewRect:function(){return this._29I},getContentRect:function(){var D=this,i=D._84I;return i||(D.each(function(S){D.isVisible(S)&&(i=rr(i,D.getDataUIBounds(S)))}),D._84I=i?i:Zb),D._84I},getScrollRect:function(){return rr(this.getContentRect(),this._29I)},fitData:function(g,J,k,b,Y){var S=this;if(!S.getWidth()||!S.getHeight())return Y||oj(S.fitData,S,[g,J,k,b,!0],200),void 0;S.makeVisible(g),S.validate();var r=S.getDataUIBounds(g);r&&(r=ui(r),si(r,k==v?20:k),S.fitRect(r,J,b))},fitContent:function(S,N,R,G){var X=this;if(!X.getWidth()||!X.getHeight())return G||oj(X.fitContent,X,[S,N,R,!0],200),void 0;X.validate();var s=ui(X.getContentRect());si(s,N==v?20:N),X.fitRect(s,S,R)},fitRect:function(N,K,H){var Y=this,z=Y.getWidth(),J=Y.getHeight(),D=N.x+N.width/2,T=N.y+N.height/2,t=o(z/N.width,J/N.height),E=Y._zoom,b=-D*E+z/2,Q=-T*E+J/2;0===t||isNaN(t)||(H&&(t=o(1,t)),K?Y.setTranslate(b,Q,{finishFunc:function(){Y.setZoom(t,K)}}):(Y.setTranslate(b,Q),Y.setZoom(t)))},toCanvas:function($,T){T=T||this._zoom,this.validateImpl();var h=this,X=h.getContentRect();X.width||(X.width=10),X.height||(X.height=10);var L=yj(),j=X.x*T,J=X.y*T,f=X.width*T,y=X.height*T;Zn(L,f,y,1);var v=Un(L);return $=$||this._dataModel.getBackground(),$&&_r(v,0,0,f,y,$),pj(v,-j,-J),v.scale(T,T),h._42(v),v.restore(),L},toDataURL:function(g,c,y){return this.toCanvas(g,y).toDataURL(c||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(T,I){var R,o,Q=this;Q._93db(T,I),Q.each(function(_){Q._56I[_._id]&&(R=Q.getDataUI(_),R&&(o=R._79o(),n.HtmlNode&&_ instanceof n.HtmlNode?R._42(T):(!I||Eq(I,o))&&R._42(T)))}),Q._92db(T,I)},validateImpl:function(){var d,t,U,f,_,n=this,e=n.tx(),a=n.ty(),i=n._zoom,l=n._canvas,T=this.getWidth(),o=this.getHeight(),z=n._29I,V={x:-e/i,y:-a/i,width:T/i,height:o/i},r={},K=n._34I,O=n._24I,I=n._32I,H=n._23I;(T!==l.clientWidth||o!==l.clientHeight)&&(Zn(l,T,o),I=1),I||od(V,z)||(I=1),n._29I=V,n.each(function(g){t=g._id;var G=r[t]=n.isVisible(g);G!==n._56I[t]&&(O[t]=g,U=n.getDataUI(O[t]),U&&U._84o(G),n._84o(g,G))},n);for(t in O)U=n.getDataUI(O[t]),U&&(!I&&n._56I[t]&&(_=U._79o(),_&&K.add(_)),U.invalidate()),n._83I=1;if(n._56I=r,!I)for(t in O)r[t]&&(U=n.getDataUI(O[t]),U&&(_=U._79o(),_&&K.add(_)));if(I?f=V:(K.each(function(b){Eq(V,b)&&(f=rr(f,b))}),f&&(si(f,w(1,1/i)),f.x=P(f.x*i)/i,f.y=P(f.y*i)/i,f.width=p(f.width*i)/i,f.height=p(f.height*i)/i,f=Qp(V,f))),n._74O=f,f&&(d=Un(l),ag(d,e,a,i),d.beginPath(),d.rect(f.x,f.y,f.width,f.height),d.clip(),d.clearRect(f.x,f.y,f.width,f.height),n._42(d,f),d.restore(),delete n._74O),n._24I={},K.clear(),delete n._32I,H&&T>0&&o>0){var U=n.getDataUI(H);if(U){var _=U._79o(),Y=n._29I,E=Y.x,x=Y.y,h=Y.width,L=Y.height,i=n._zoom;_&&!Eq(_,Y)&&(_.x+_.width<E&&n.tx(-_.x*i),_.x>E+h&&n.tx(-(_.x+_.width-h)*i),_.y+_.height<x&&n.ty(-_.y*i),_.y>x+L&&n.ty(-(_.y+_.height-L)*i))}delete n._23I}n._83I&&(delete n._83I,delete n._84I),n._98O()},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(K){var I=this;K!==I.isScrollBarVisible()&&(K?(Yr(I._view,I._79O=Yn()),Yr(I._79O,I._27I=Yn()),Yr(I._79O,I._28I=Yn())):(gp(I._79O),delete I._79O,delete I._27I,delete I._28I),I.fp("scrollBarVisible",!K,K))},showScrollBar:function(){var f=this;f._79O&&(f._85I||(m(function(){f._86I()},ff),f.iv()),f._85I=new Date)},_86I:function(){var r=this;if(r._85I){var o=new Date,U=o.getTime();U-r._85I.getTime()>=ff?(delete r._85I,r.iv()):m(function(){r._86I()},ff)}},_98O:function(){var S=this,q=this._27I,H=this._28I;if(S._79O){if(S._autoHideScrollBar&&!S._85I)return q.style.visibility=zm,H.style.visibility=zm,void 0;var B=S.getScrollBarColor(),v=S._zoom,x=S.getScrollBarSize(),d=S.getViewRect(),p=S.getScrollRect(),m=d.height*v,$=p.height*v,R=d.width*v-x-2,f=m*((d.y-p.y)*v/$),Q=m*(m/$),r=q.style;$-.5>m?(bh>Q&&(f=f+Q/2-bh/2,0>f&&(f=0),f+bh>m&&(f=m-bh),Q=bh),oi(q,R,f,x,Q),r.visibility=bl,r.background=B,r.borderRadius=x/2+co):r.visibility=zm;var e=d.width*v,W=p.width*v,f=d.height*v-x-2,R=e*((d.x-p.x)*v/W),N=e*(e/W),r=H.style;W-.5>e?(bh>N&&(R=R+N/2-bh/2,0>R&&(R=0),R+bh>e&&(R=e-bh),N=bh),oi(H,R,f,N,x),r.visibility=bl,r.background=B,r.borderRadius=x/2+co):r.visibility=zm}},setDataModel:function(D){var o=this,m=o._dataModel,u=o._selectionModel;m!==D&&(m&&(m.ump(o.handleDataModelPropertyChange,o),m.umm(o.handleDataModelChange,o),m.umd(o.handleDataPropertyChange,o),m.removeIndexChangeListener(o._75O,o),u||m.sm().ums(o.handleSelectionChange,o)),o._dataModel=D,D.mp(o.handleDataModelPropertyChange,o),D.mm(o.handleDataModelChange,o),D.md(o.handleDataPropertyChange,o),D.addIndexChangeListener(o._75O,o),u?u._21I(D):D.sm().ms(o.handleSelectionChange,o),o.invalidateAll(!0),o.fp(Uq,m,D),o._canvas.style.background=D.getBackground()||"")},handleDataModelPropertyChange:function(C){if("background"===C.property){var m=this._canvas.style.background,Q=C.newValue||"";this._canvas.style.background=Q,this.fp("canvasBackground",m,Q)}},handleDataPropertyChange:function(B){this.invalidateData(B.data)},onPropertyChanged:function(f){var x=this,V=f.property;if(x.redraw(),"zoom"===V){var U=x.sm().getSelection();U.size()&&U.each(function(S){S.invalidate()})}Rl[V]?x.showScrollBar():V===Nc&&x.onCurrentSubGraphChanged(f)},onCurrentSubGraphChanged:function(){this.reset()},handleDataModelChange:function(q){var m=this,c=q.kind,z=q.data;if(m._83I=1,"add"===c)m.invalidateData(z),qg(z)&&z.getEdgeGroup()&&z.getEdgeGroup().eachSiblingEdge(m.invalidateData,m);else if(c===ss){m._21Q(z);var O=z._id,o=m._25I[O];if(o){if(m._56I[O]){var k=o._79o();k&&m.redraw(k)}o.dispose(),delete m._25I[O],delete m._24I[O],delete m._56I[O]}z===m._currentSubGraph&&m.setCurrentSubGraph(v)}else c===zf&&(m.invalidateAll(!0),m.setCurrentSubGraph(v))},_75O:function(D){this.invalidateData(D.data)},adjustIndex:function(j){var Q=this;if(Q.isVisible(j)){for(var x=j;x._parent&&Q.isVisible(x._parent);)x=x._parent;x&&x!==j&&Q._dataModel.adjustIndex(x),Q._dataModel.adjustIndex(j)}},_2o:function(i){return i.s("select.width")},isSelectable:function(K){return!(K.getParent()instanceof n.Block)&&K.s("2d.selectable")&&this.sm().isSelectable(K)},isMovable:function(z){var l=this;return qg(z)&&z.getStyle(ke)!==cd?!1:z.s("2d.movable")?l._movableFunc?l._movableFunc(z):!0:!1},isEditable:function(h){var O=this;if(!O._editInteractor||!O.isSelected(h))return!1;if(sj(h)){var p=O.getDataUI(h);if(!p||p._88I)return!1}return qg(h)&&h.getStyle(ke)!==cd?!1:h.s("2d.editable")?O._editableFunc?O._editableFunc(h):!0:!1},handleDelete:function(){this._editInteractor&&this.removeSelection()},isPointEditable:function($){return Qn($)&&0!==$.getRotation()?!1:this._pointEditableFunc?this._pointEditableFunc($):!0},isRectEditable:function(p){return this._rectEditableFunc?this._rectEditableFunc(p):!0},isRotationEditable:function(t){return t.setRotation&&t.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(t):!0:!1},getRotationPoint:function(q){var c=q.getAnchor(),z=q.getScale(),D=this._zoom,O=Gi(q.getRotation(),0,-q.getHeight()*z.y*c.y-(z.y<0?-1:1)*(E?32:16)/D),a=q.p();return O.x+=a.x,O.y+=a.y,O},getLogicalPoint:function(n){var D=this;return zp(n,D._canvas,D.tx(),D.ty(),D._zoom,D._zoom)},getSelectedDataAt:function(W){var g=this;return this.getDataAt(W,function(y){return g.isSelected(y)})},getDataAt:function(L,T,z){L.target&&(L=this.lp(L));var B,S=this._zoom;return this.reverseEach(function(C){return(T?T(C):this.isSelectable(C))&&this.rectIntersects(C,zq(L.x,L.y,z,S))?(B=C,!1):void 0},this),B},getIconInfoAt:function(s,b){var k=this;if(s.target&&(s=k.lp(s)),b||(b=k.getDataAt(s)),b){var p=k.getDataUI(b);if(p&&p._38o){var G,g=p._38o,V=new Sd;for(G in g.icons)V.add(G);for(var l=V.size()-1;l>=0;l--){G=V.get(l);for(var U=g.rects[G],K=U.rotation,E=U.length-1;E>=0;E--){var j=U[E],x=j.width,Z=j.height,R={x:s.x-j.x-x/2,y:s.y-j.y-Z/2};K!=v&&(R=Gi(-K,R.x,R.y));var j={x:-x/2,y:-Z/2,width:x,height:Z};if(Fo(j,R))return{key:G,index:E,name:g.icons[G].names[E],rect:U[E],point:s,rotation:K,relativeRect:j,relativePoint:R,data:b}}}}}return v},getDatasInRect:function(j,$,_){_===z&&(_=1);var D=this,U=new Sd;return D.reverseEach(function(f){_&&!D.isSelectable(f)||($?D.rectIntersects(f,j):D.rectContains(f,j))&&U.add(f)}),U},moveSelection:function(i,X){var E,c=this,s=c.dm();s&&(E=s.getHistoryManager()),E&&E.beginInteraction(),zl(c.sm().toSelection(c.isMovable,c),i,X),E&&E.endInteraction()},getDataUIBounds:function(z){var Q=this.getDataUI(z);return Q?Q._79o():v},drawData:function(f,x){var B=this.getDataUI(x);B&&B._42(f),x instanceof n.Block&&x.eachChild(function(A){this.drawData(f,A)},this)},getBoundsForGroup:function(k){return k.s(qq)?this.getDataUIBounds(k):v},rectIntersects:function(J,d){this.validate();var N=v;if(this._56I[J._id]){var R=this._25I[J._id];if(R){var c=R._79o();if(Xd(d,c))N=!0;else if((d=Qp(d,c))&&(R.rectIntersects&&(N=R.rectIntersects(d)),N==v)){if(!J.s("pixelPerfect"))return!0;var f=d.x,O=d.y,i=d.width,D=d.height,q=this._zoom,o=r.hitMaxArea,L=i*D*q*q;if(L>o){var A=Math.sqrt(o/L);q*=A}i*=q,D*=q,f*=q,O*=q;var E=vb(i,D);pj(E,-f,-O),E.scale(q,q),this._drawForChecking=!0,this.drawData(E,J),this._drawForChecking=!1;try{for(var X=0,T=E.getImageData(0,0,i,D).data;X<T.length;X+=4)if(0!==T[X+3]){N=!0;break}E.restore()}catch(n){nq=v,N=!0}}}}return N?!0:!1},rectContains:function(M,u){if(this._56I[M._id]){var b=this._25I[M._id];if(b)return Xd(u,b._79o())}return!1},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(k){if(!r.isInput(k.target)){var w=this,T=w._focusData,y=T&&w._25I[T._id],J=0,Q=w._dataModel._datas;T&&T._enabled&&T._editable&&y&&y.onKeyDown&&y.onKeyDown(k)===!0||(9===k.keyCode&&(T&&(J=Q.indexOf(T),Qe(k)?-1===--J&&(J=0):++J===Q.size()&&(J=0)),w._focusData=T=Q.get(J),w.sm().setSelection(T)),td(k)?w.selectAll():th(k)&&w.isResettable()&&w.reset(),w.sm().isEmpty()||(Mo(k)&&w.handleDelete(k),xn(k)&&(w.moveSelection(-1,0),w.fi({kind:"moveLeft"})),Ho(k)&&(w.moveSelection(0,-1),w.fi({kind:"moveUp"})),yn(k)&&(w.moveSelection(1,0),w.fi({kind:"moveRight"})),Lm(k)&&(w.moveSelection(0,1),w.fi({kind:"moveDown"}))))}},handleScroll:function(q,j){Se(q);var U=this.lp(q);j>0?this.scrollZoomIn(U):0>j&&this.scrollZoomOut(U)},handlePinch:function(u,Q,Z){this._68I||(Q>Z?this.pinchZoomIn(u):this.pinchZoomOut(u))},checkDoubleClickOnNote:function(_,I){var D=this,W=D.lp(_),M=D.getDataUI(I),H=M.note2Info;return H&&I.s("note2.toggleable")&&Fo(H.clickRect,W)?(I.s(eb,!I.s(eb)),D.fi({kind:"toggleNote2",event:_,data:I}),!0):(H=M.noteInfo,H&&I.s("note.toggleable")&&Fo(H.clickRect,W)?(I.s(Rf,!I.s(Rf)),D.fi({kind:"toggleNote",event:_,data:I}),!0):!1)},_84o:function(){},isNoteVisible:function(){return this._zoom>.15},isLabelVisible:function(){return this._zoom>.15},isSelectVisible:function(){return this._zoom>.15},isEditVisible:function(){return this._zoom>.15},autoScroll:function(A,j){var l=this,f=l.getAutoScrollZone(),n=f/l.getZoom(),I=f/4,g=l._29I,P=l.lp(A),R={x:l.tx(),y:l.ty()};return P&&f>0&&g&&(P.x-g.x<n?l.translate(I,0):g.x+g.width-P.x<n&&l.translate(-I,0),P.y-g.y<n?l.translate(0,I):g.y+g.height-P.y<n&&l.translate(0,-I)),R.x=l.tx()-R.x,R.y=l.ty()-R.y,j&&(j.x+=R.x,j.y+=R.y),R},getMoveMode:function(S,K){var G=K.s("2d.move.mode");return G?G:no["88"]?"x":no["89"]?"y":"xy"},moveTo:function(e,I,h){var p=this.dm().getDatas();null==h&&(h=p.indexOf(e)),h===I||0>h||I>=0&&I<=p.size()&&(p.remove(e),I>p.size()&&I--,p.add(e,I),this.dm()._76I(e,h,I))},bringForward:function(o){this.moveTo(o,this.dm().getDatas().indexOf(o)+1)},bringToFront:function(z){this.moveTo(z,this.dm().size())},sendBackward:function(N){this.moveTo(N,this.dm().getDatas().indexOf(N)-1)},sendToBack:function(l){this.moveTo(l,0)},bringSelectionForward:function(){for(var T=new Sd,o=this.dm().getDatas(),I=!1,i=0;i<o.size();i++){var n=o.get(o.size()-1-i);this.isSelected(n)?I&&T.add(n):I=!0}T.each(this.bringForward,this)},bringSelectionToFront:function(){for(var t=new Sd,D=this.dm().getDatas(),g=0;g<D.size();g++){var V=D.get(g);this.isSelected(V)&&t.add(V)}t.each(this.bringToFront,this)},sendSelectionBackward:function(){for(var h=new Sd,Y=this.dm().getDatas(),A=!1,T=0;T<Y.size();T++){var b=Y.get(T);this.isSelected(b)?A&&h.add(b):A=!0}h.each(this.sendBackward,this)},sendSelectionToBack:function(){for(var x=new Sd,r=this.dm().getDatas(),I=0;I<r.size();I++){var $=r.get(r.size()-1-I);this.isSelected($)&&x.add($)}x.each(this.sendToBack,this)}});var il=function(M,E){var B=this;B.gv=M,B.s=function(T){return E.getStyle(T)},B._data=E,B._87I=new Sd};Uf(il,t,{_6I:v,ms_icons:1,_84o:function(){},dispose:function(){},isShadowed:function(){return this.s("shadow")||this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},_2o:function(){var W=this,R=W.gv.isSelected(W._data);return!R||W.isShadowed()?0:W.gv._2o(W._data)},getBodyColor:function(X){var T=this._data,H=this.gv.getBodyColor(T);return H?H:X?T.getStyle(X):v},_2Q:function(_){return this.s(_)},_1Q:function(f,h,w,g){var O=this.s,R=O(h+".dash.color");f.strokeStyle=R,f.lineWidth=w,f.stroke(),O(h+".dash.3d")&&ib(f,R,O(h+".dash.3d.color"),w,this.gv._zoom,O(h+".dash.3d.accuracy")),xg(f,g)},invalidate:function(){this._6I=v},_79o:function(){var p=this;if(!p._6I){p.labelInfo=p.label2Info=p.noteInfo=p.note2Info=p._38o=v,p._87I.clear(),p._3O();var H=p._data,m=p.gv;p._55O=m.isEditable(H)?{_42O:m.isRectEditable(H),_43O:m.isPointEditable(H),_56O:m.isRotationEditable(H)}:v,p._6I=p._81o()}return p._6I},_3O:function(){},getPosition:function(){return Zb},_68o:function(H,b){H&&this._87I.add(Aq(H,b))},_81o:function(){var q=this,B=q.s;q._24O(bo,"getLabel"),q._24O(fj,"getLabel2"),q._26O(to,"getNote"),q._26O(Tp,"getNote2"),q._15O(),q._55O&&q._48O();var l;if(q._87I.each(function(b){l=rr(l,b)}),l&&q.isShadowed()){var j=ui(l);j.x+=B("shadow.offset.x"),j.y+=B("shadow.offset.y"),si(j,B("shadow.blur")),l=rr(l,j)}return q._87I.clear(),l},_42:function(g){var n=this,l=n._data,B=n.gv,T=n.s,m=T("opacity"),H=this.isShadowed();if(H){var e=g.shadowOffsetX,J=g.shadowOffsetY,b=g.shadowBlur,y=g.shadowColor;g.shadowOffsetX=T("shadow.offset.x"),g.shadowOffsetY=T("shadow.offset.y"),g.shadowBlur=T("shadow.blur"),g.shadowColor=T("select.color")}if(m!=v){var f=g.globalAlpha;g.globalAlpha=m}n._80o(g),B.isLabelVisible(l)&&((!B._drawForChecking||T("label.selectable"))&&Qo(g,n.labelInfo),(!B._drawForChecking||T("label2.selectable"))&&Qo(g,n.label2Info)),B.isNoteVisible(l)&&(No(g,n.noteInfo),No(g,n.note2Info)),n._99O(g),m!=v&&(g.globalAlpha=f),H&&(g.shadowOffsetX=e,g.shadowOffsetY=J,g.shadowBlur=b,g.shadowColor=y),n._55O&&B.isEditVisible(l)&&n._47O(g)},_80o:function(){},_47O:function(){},_24O:function(U,i){var G=this,K=G._data,F=G.gv,y=G.s,t=F[i](K);if(t!=v){var X=y(U+".scale"),$=y(U+".max"),k=y(U+".position"),z=G[U+"Info"]={label:t,scale:X,color:F[i+"Color"](K),font:y(U+".font"),opacity:y(U+".opacity"),align:y(U+".align"),rotation:G.getRotation(y(U+".rotation"),!1,k),background:F[i+"Background"](K)},M=ci(z,t);$>0&&$<M.width&&(z.labelWidth=M.width,M.width=$),1!==X&&(M.width*=X,M.height*=X);var l=G.getPosition(k,y(U+".offset.x"),y(U+".offset.y"),M,y(U+".position.fixed"));if(M.x=l.x-M.width/2,M.y=l.y-M.height/2,G._68o(z.rect=M,z.rotation),1!==X){var Y=M.width/X,P=M.height/X;z.rect={x:l.x-Y/2,y:l.y-P/2,width:Y,height:P}}}},_26O:function(u,A){var M=this,q=M.gv,l=M._data,x=M.s,$=q[A](l);if($!=v){var c,Z,Q=x(u+".scale"),Y=M[u+"Info"]={note:$,scale:Q,data:l,view:q,expanded:x(u+".expanded"),font:x(u+".font"),color:x(u+".color"),opacity:x(u+".opacity"),align:x(u+".align"),icon:x(u+".icon"),backgroundImage:x(u+".backgroundImage"),borderWidth:x(u+".border.width"),borderColor:x(u+".border.color"),background:q[A+"Background"](l)},G=M.getPosition(x(u+".position"),x(u+".offset.x"),x(u+".offset.y")),b=G.x,j=G.y;if(Y.expanded){var R,V=x(u+".max"),F=x(u+".backgroundImage");F?(F=Ep(F),R={width:ob(F,l),height:ee(F,l)}):R=ci(Y,$),R.width+=6,R.height+=2,V>0&&V<R.width&&(Y.labelWidth=R.width,R.width=V),c=R.width,Z=R.height+8,Y.clickRect={x:b-c*Q/2,y:j-Z*Q,width:c*Q,height:Z*Q*R.height/Z}}else{var m=x(u+".icon");m?(m=Ep(m),c=ob(m,l),Z=ee(m,l)):(c=12,Z=18),Y.clickRect={x:b-c*Q/2,y:j-Z*Q,width:c*Q,height:Z*Q}}Y.rect={x:b-c/2,y:j-Z*Q/2-Z/2,width:c,height:Z};var e=p(Y.borderWidth/2)*Q;M._68o({x:b-c*Q/2-e,y:j-Z*Q-e,width:c*Q+2*e,height:Z*Q+2*e})}},_48O:function(){},_99O:function(G){var u=this,R=u._38o;if(R){var k=u.gv,h=u._data,I=R.icons;for(var J in I){var C=I[J],W=R.rects[J];if(W){var T=hf(C.opacity,h,k),B=hf(C.names,h,k),n=B?B.length:0,l=W.rotation;if(T!=v){var K=G.globalAlpha;G.globalAlpha*=T}for(var U=0;n>U;U++){var y=B[U],A=Ep(y),s=W[U];if(l){var $=s.x+s.width/2,q=s.y+s.height/2;G.save(),pj(G,$,q),sr(G,l),pj(G,-$,-q)}Cb(G,A,hf(C.stretch,h,k),s.x,s.y,s.width,s.height,u._data,u.gv),l&&G.restore()}T!=v&&(G.globalAlpha=K)}}}}});var lm=function(K,s){lj(lm,this,[K,s])};Uf(lm,il,{_checkEmptyRect:!0,_40O:function(A,r){var s=this,G=s.s,H=A.rect;if((A.borderColor=s.gv.getBorderColor(s._data))&&(A.borderType=G("border.type"),A.borderWidth=G("border.width"),A.borderPadding=G("border.padding"),r=w(r,A.borderPadding+A.borderWidth/2)),A.selectWidth=s._2o()){var $=s.gv._zoom;A.selectType=G("select.type"),A._97o=G("select.color"),A.selectPadding=G("select.padding"),r=w(r,(A.selectPadding+A.selectWidth/2)/$)}if(r>0){var d=s._data.getScale();r*=w(1,w(a(d.x),a(d.y))),H=ui(H),si(H,r)}s._68o(H)},_39O:function(R,m){var U,a=this,F=m.rect;if(m.borderWidth>0&&(U=m.borderPadding,R.strokeStyle=m.borderColor,R.lineWidth=m.borderWidth,Xe(R,m.borderType,{x:F.x-U,y:F.y-U,width:F.width+2*U,height:F.height+2*U}),R.stroke()),m.selectWidth>0){var I=a.gv._zoom;if(U=m.selectPadding/I,R.strokeStyle=m._97o,R.lineWidth=m.selectWidth/I,m.rotation!=v){R.save(),R.translate(m.position.x,m.position.y),R.rotate(m.rotation);var K=a._data,S=K.getWidth(),O=K.getHeight(),$=m.scale,e=m.anchor;F={x:$.x*-S*e.x,y:$.y*-O*e.y,width:$.x*S,height:$.y*O}}Xe(R,m.selectType,{x:F.x-U,y:F.y-U,width:F.width+2*U,height:F.height+2*U}),m.rotation!=v&&R.restore(),R.stroke()}},_3O:function(){var I=this,V=I.s,x=I._data,c=x.getStyle(kl),t=I.getBodyColor(),m=I._83o=c?{shape:c,_53o:I.getBodyColor("shape.background"),_27Q:Ep(V("shape.repeat.image"),t),shapeGradientPack:V("shape.gradient.pack"),_54o:V("shape.border.width"),_55o:V("shape.border.color"),_56o:V("shape.border.3d"),_57o:V("shape.border.3d.color"),_58o:V("shape.border.3d.accuracy"),shapeGradient:V("shape.gradient"),_59o:V("shape.gradient.color"),_60o:V("shape.border.pattern"),_61o:V("shape.border.cap"),_62o:V("shape.border.join")}:{img:Ep(x.getImage(),t),bodyColor:t,stretch:V("image.stretch")};if(N&&!T);else{m.rect=x.getRect(),m.position=x.p(),m.scale=x.getScale(),m.anchor=x.getAnchor(),m.rotation=x.getRotation(),c===xq&&(m._63o=V("shape.depth"));var M=0;c&&(M=li(v,m._54o/2,m._62o),I.s("shape.dash")&&(M=w(M,(I.s("shape.dash.width")||m._54o)/2))),I._40O(m,M)}},getPosition:function(N,S,A,B){var s=vd(N,this._83o.rect,B);return s.x+=S,s.y+=A,s},_80o:function(x){var f=this,s=f.s,T=f.gv,h=f._data,W=f._83o,$=W.rect,b=W.position,E=W.rotation,Q=W.anchor,Z=W.scale,R=W.shape;if(!f._checkEmptyRect||$.width>0&&$.height>0){var a=h.getSize();if(a.x=-a.width*Q.x,a.y=-a.height*Q.y,x.save(),pj(x,b.x,b.y),sr(x,E),Ei(x,Z.x,Z.y),f.freeDraw)f.freeDraw(x,a,W);else if(R){var t,k,P,e,w=W._60o,j=rf(x,w),N=W._53o,H=W._27Q,o=W._54o,u=W._55o,L=W.shapeGradientPack,J=x.lineJoin,I=x.lineCap;if("roundRect"===R?t=s("shape.corner.radius"):"polygon"===R?t=s("shape.polygon.side"):"arc"===R&&(t=s("shape.arc.from"),k=s("shape.arc.to"),P=s("shape.arc.close"),e=s("shape.arc.oval")),x.lineJoin=W._62o,x.lineCap=W._61o,N||H||L?(Xe(x,R,a,t,k,P,e),L?tp(x,L):H?Ye(x,H):Zq(x,N,W.shapeGradient,W._59o,a),x.fill(),L&&x.restore(),x!==j&&Xe(j,R,a,t,k,P,e)):Xe(j,R,a,t,k,P,e),o>0){var B=s("shape.border.width.absolute");B&&(x.save(),x.setTransform(1,0,0,1,0,0)),x.lineWidth=o,x.strokeStyle=u,x.stroke(),B&&x.restore(),W._56o&&ib(x,u,W._57o,o,T._zoom,W._58o)}if(xg(x,w),s("shape.dash")){var _=s("shape.dash.width")||o;if(_>0){w=s("shape.dash.pattern");var j=rf(x,w,f._2Q("shape.dash.offset"));j!==x&&Xe(j,R,a,t,k,P,e),f._1Q(x,"shape",_,w)}}ig(x,N,W._63o,a),x.lineJoin=J,x.lineCap=I}else Cb(x,W.img,W.stretch,a.x,a.y,a.width,a.height,h,T,W.bodyColor);x.restore()}f._39O(x,W)},_48O:function(){var j,c=this,B=c._data,T=c.gv,I=c._55O,Q=T._zoom,g=(T.getEditPointSize()/2+2)/Q;if(I._42O&&(j=B.getRect(),si(j,g)),I._56O){var N=I._98o=T.getRotationPoint(B);j=rr(j,{x:N.x-g,y:N.y-g,width:2*g,height:2*g})}c._68o(j)},_47O:function(J){var Z=this,u=Z.gv,l=Z._55O,N=Z._data,g=u._zoom,m=u.getEditPointSize()/g,y=l._98o;if(l._42O){J.fillStyle=u.getEditPointBackground(),J.strokeStyle=u.getEditPointBorderColor(),J.lineWidth=1/g;var w=N.getEditControlPoints();w.forEach(function(R){_r(J,R.x-m/2,R.y-m/2,m,m),J.stroke()})}l._56O&&(J.fillStyle=u.getEditPointBorderColor(),J.strokeStyle=u.getEditPointBackground(),J.lineWidth=1/g,J.beginPath(),J.arc(y.x,y.y,m/2,0,X,!0),J.fill(),J.stroke())}});var Eb=function(K,j){lj(Eb,this,[K,j])},Me=function(p,d,M,m){var n=Kd(p,d);return M=m?o(M,n):om(M,n),n?M/=n:M=0,{x:p.x+(d.x-p.x)*M,y:p.y+(d.y-p.y)*M}};Uf(Eb,il,{_3O:function(){var i,x=this,c=x._data,L=x.gv,y=x.s,h=y(ke),p=c.isLooped(),k=y("edge.width"),W=y("edge.center"),s=y("edge.offset"),t=L.getBorderColor(c),d=t?y("border.width"):0,D=x._2o(),_=c._40I,U=c._41I,u=x._78o=_&&U?{looped:p,type:h,width:k,center:W,color:x.getBodyColor("edge.color"),borderColor:t,borderWidth:d,_97o:D?y("select.color"):v,selectWidth:D,pattern:y("edge.pattern"),cap:y("edge.cap"),join:y("edge.join"),is3d:y("edge.3d"),_67o:y("edge.3d.color"),_66o:y("edge.3d.accuracy")}:v;if(u){var j=r.getEdgeType(h);if(j){var M=j(c,Cm(x,L,c,p,h),L,x._19Q);M.points&&M.points.size()>1&&(u._4O=M,i=ao(u._4O.points))}else{var S=cl(L,_,y("edge.source.position"),y("edge.source.offset.x"),y("edge.source.offset.y"),y("edge.source.anchor.x"),y("edge.source.anchor.y")),l=cl(L,U,y("edge.target.position"),y("edge.target.offset.x"),y("edge.target.offset.y"),y("edge.target.anchor.x"),y("edge.target.anchor.y"));if(h===cd){var n=u.points=y(pc)||Ke,b=n.size();if(u.segments=y("edge.segments"),!W)if(s){var f=Me(S,b?n.get(0):l,s,b),o=Me(l,b?n.get(b-1):S,s,b);S=f,l=o}else{var E=Wg(L,_),F=Wg(L,U),G=xk(S,b?n.get(0):l,E);G&&(S={x:G[0],y:G[1]}),G=xk(b?n.get(b-1):S,l,F),G&&(l={x:G[0],y:G[1]})}i=rr(ao(u.points),ao(S,l))}else{var V=Cm(x,L,c,p,h);if(x._19Q||(V=-V),p)S=ui(S),S.x=L.getNodeRect(_).x,u.radius=V,i={x:S.x-V,y:S.y-V,width:2*V,height:2*V};else{var A=Kd(S,l),R=om(s,A),f={x:R,y:V},o={x:A-R,y:V},q=B(l.y-S.y,l.x-S.x),T=u.mat=new ll(q);if(u.orienAngle=q,u.angle=l.x<S.x?q+K:q,u.rect={x:f.x,y:f.y,width:o.x-f.x,height:0},u.origin=S,f=T.tf(f),f.x+=S.x,f.y+=S.y,o=T.tf(o),o.x+=S.x,o.y+=S.y,W){var C={x:A,y:0};C=T.tf(C),C.x+=S.x,C.y+=S.y,i=ao([S,f,o,C]),u.c1=S,u.c2=C}else i=ao(f,o);S=f,l=o}}u.sourcePoint=S,u.targetPoint=l}var Y=0;y("edge.dash")&&(Y=y("edge.dash.width")||k);var X="square"===u.cap?.71:.5;li(i,w(Y*X,k*X+d+D),u.join),x._68o(i)}},getRotation:function(E,w,R){E=E||0;var t=this._78o;if(t){var D,j=t.angle,l=t.points,u=t._4O;if(j!=v)return w?t.orienAngle+E:j+E;if(u){var h=u.points;return D=h.size(),xp[R]?D&&0===D%2?If(h.get(D/2-1),h.get(D/2),w,E):E:up[R]?If(h.get(0),h.get(1),w,E):If(h.get(D-2),h.get(D-1),w,E)
}if(l)return D=l.size(),xp[R]?D&&0===D%2?If(l.get(D/2-1),l.get(D/2),w,E):E:up[R]?If(t.sourcePoint,D?l.get(0):t.targetPoint,w,E):If(D?l.get(D-1):t.sourcePoint,t.targetPoint,w,E)}return E},getPosition:function(Z,l,O,N,i){var y=this._78o;if(y){var G,X=y.type,b=y.points,n=y._4O,Q=y.sourcePoint,_=y.targetPoint;if(!X)return y.looped?{x:Q.x-y.radius+l,y:Q.y+O}:(i&&Q&&_&&(Q.x>_.x||Q.x===_.x&&Q.y>_.y)&&(Z=Ib[Z],O=-O),G=vd(Z,y.rect,N),G.x+=l,G.y+=O,G=y.mat.tf(G),G.x+=y.origin.x,G.y+=y.origin.y,G);if(b){var G,$=b.size();if(xp[Z]){if($){var u=$%2;if(0===u)return mf(b.get($/2-1),b.get($/2),Z,l,O,N,i);G=b.get(($-u)/2)}else G={x:(Q.x+_.x)/2,y:(Q.y+_.y)/2};return G=vd(Z,{x:G.x,y:G.y,width:0,height:0},N),G.x+=l,G.y+=O,G}return up[Z]?mf(Q,$?b.get(0):_,Z,l,O,N,i):mf($?b.get($-1):Q,_,Z,l,O,N,i)}if(n){var v=n.points,$=v.size();if(xp[Z]){var u=$%2;return 0===u?mf(v.get($/2-1),v.get($/2),Z,l,O,N,i):(G=v.get(($-u)/2),G=vd(Z,{x:G.x,y:G.y,width:0,height:0},N),G.x+=l,G.y+=O,G)}return up[Z]?mf(v.get(0),v.get(1),Z,l,O,N,i):mf(v.get($-2),v.get($-1),Z,l,O,N,i)}}return Zb},_42:function(B){this._78o&&Eb.superClass._42.call(this,B)},drawPath:function(b,J){b.beginPath();var B=J.type,j=J.points,V=J.segments,y=J._4O;if(!B||j){var P=J.sourcePoint,n=P.x,U=P.y,C=J.targetPoint,Q=C.x,S=C.y;if(B)if(V){var i=new Sd({x:n,y:U});i.addAll(j),i.add({x:Q,y:S}),Kf(b,i,V)}else b.moveTo(n,U),j.each(function(f){b.lineTo(f.x,f.y)}),b.lineTo(Q,S);else J.looped?b.arc(n,U,J.radius,0,X,!0):J.center?(b.moveTo(J.c1.x,J.c1.y),b.lineTo(n,U),b.lineTo(Q,S),b.lineTo(J.c2.x,J.c2.y)):(b.moveTo(n,U),b.lineTo(Q,S))}else y&&Kf(b,y.points,y.segments)},_80o:function(m){var j=this,l=j.s,G=j._78o,B=G.width,z=G.selectWidth,$=G.borderWidth,x=G.color,s=m.lineJoin,R=m.lineCap,r=G.pattern;m.lineJoin=G.join,m.lineCap=G.cap,j.drawPath(rf(m,r),G);var h=l("edge.width.absolute");if(h&&(m.save(),m.setTransform(1,0,0,1,0,0)),z&&(m.strokeStyle=G._97o,m.lineWidth=B+2*($+z),m.stroke()),$&&(m.strokeStyle=G.borderColor,m.lineWidth=B+2*$,m.stroke()),m.strokeStyle=x,m.lineWidth=B,m.stroke(),G.is3d&&ib(m,x,G._67o,B,j.gv._zoom,G._66o),h&&m.restore(),xg(m,r),l("edge.dash")){r=l("edge.dash.pattern");var o=rf(m,r,j._2Q("edge.dash.offset"));o!==m&&j.drawPath(o,G),j._1Q(m,"edge",l("edge.dash.width")||B,r)}m.lineJoin=s,m.lineCap=R},_48O:function(){var x=this,C=x._78o;if(x._55O._43O&&C&&C.points){var u=ao(C.points);if(u){var f=x.gv._zoom;si(u,(x.gv.getEditPointSize()/2+2)/f),x._68o(u)}}},_47O:function(p){var x=this,C=x.gv,Q=x._78o,f=C._zoom;if(x._55O._43O&&Q&&Q.points){var E=C.getEditPointSize()/2/f;p.fillStyle=C.getEditPointBackground(),p.strokeStyle=C.getEditPointBorderColor(),p.lineWidth=1/f,Q.points.each(function(g){p.beginPath(),p.arc(g.x,g.y,E,0,X,!0),p.fill(),p.stroke()})}},_71o:function(S,c){var W=this,b=W._data;if(W._19Q=!0,!b.getEdgeGroup())return S?b.s("edge.gap"):0;var B,z=0,C=0,$=0;if(b.getEdgeGroup().getSiblings().each(function(e){e.each(function(S){if(W.gv.isVisible(S)&&S.s(ke)==c){var o=S.s("edge.gap");B?(C+=$/2+o/2,$=o):(B=S,$=o),S===b&&(z=C)}})}),S)return C-z+$;var A=z-C/2;return B&&b._40I!==B._40I&&(W._19Q=!1),A}});var Ed=function(j,G){lj(Ed,this,[j,G])};Uf(Ed,lm,{_3O:function(){var k,q,j=this,m=j.s,L=j._data,r=j.gv;if(j._88I=v,L.isExpanded()&&L.eachChild(function(S){var a=r.getBoundsForGroup(S);a&&(q||(q=[]),q.push(a),k=rr(k,a))}),k){var o=r.getLabel(L),i=m("group.type");k=cf(i,q,k),ns(k,L,"group.padding",1);var S=j._88I={type:i,rect:k,_64o:k};if(!i&&o!=v){var N,Z=j.labelInfo={label:o,color:m("group.title.color"),font:m("group.title.font")},I=ci(Z,o),u=I.width,A=I.height,V=m("group.title.align");u>k.width&&(k.width=u),Z.rect={y:k.y-A,width:I.width,height:A},N=V===Kp?k.x:V===be?k.x+k.width-u:k.x+k.width/2-u/2,Z.rect.x=N,S.titleRect={x:k.x,y:k.y-A,width:k.width,height:A+1},S.rect={x:k.x,y:k.y-A,width:k.width,height:k.height+A}}j._40O(S,m("group.border.width")/2)}else Ed.superClass._3O.call(j)},getPosition:function(f,c,n,d){var x=this._88I;if(x){var H=vd(f,x.rect,d);return H.x+=c,H.y+=n,H}return Ed.superClass.getPosition.apply(this,arguments)},_24O:function(u,n){var a=this._88I;(!a||a.type||"label2"===u)&&Ed.superClass._24O.call(this,u,n)},_80o:function(M){var D=this,P=D._88I;if(P){var A=D._data,j=D.s,g=D.gv,z=P.type,w=P.rect,Q=P._64o,x=P.titleRect,y=D.getBodyColor(),k=Ep(j("group.image"),y),B=j("group.image.stretch"),p=D.getBodyColor("group.background"),s=Ep(j("group.repeat.image"),y),G=j("group.gradient.pack"),u=j("group.gradient"),C=j("group.gradient.color"),c=j("group.depth");if(z){var n=j("group.border.pattern"),v=j("group.border.width"),T=M.lineJoin,E=M.lineCap;if(M.lineJoin=j("group.border.join"),M.lineCap=j("group.border.cap"),k){if(M.save(),Xe(M,z,w),M.clip(),Cb(M,k,B,w.x,w.y,w.width,w.height,A,g,y),M.restore(),v>0){var e=rf(M,n);Xe(e,z,w),M.lineWidth=v,M.strokeStyle=j("group.border.color"),M.stroke(),xg(M,n)}}else{var e=rf(M,n);p||s||G?(Xe(M,z,w),G?tp(M,G):s?Ye(M,s):Zq(M,p,u,C,w),M.fill(),G&&M.restore(),M!==e&&Xe(e,z,w)):Xe(e,z,w),v>0&&(M.lineWidth=v,M.strokeStyle=j("group.border.color"),M.stroke()),xg(M,n),z===xq&&ig(M,p,c,w)}M.lineJoin=T,M.lineCap=E}else if(k?Cb(M,k,B,Q.x,Q.y,Q.width,Q.height,A,g,D.getBodyColor()):(p||s)&&(s?Ye(M,s):Zq(M,p,u,C,Q),Xe(M,xq,Q),M.fill(),ig(M,p,c,Q)),x){var S=j("group.title.background");_r(M,x.x,x.y,x.width,x.height,S),ig(M,S,c,x)}D._39O(M,P)}else Ed.superClass._80o.call(D,M)}});var yl=function(c,z){lj(yl,this,[c,z])};Uf(yl,lm,{_80o:function(){}});var tc=function(c,A){lj(tc,this,[c,A])};Uf(tc,lm,{_3O:function(){var y=this,T=y._data,t=y.s,V=y.gv,r=T.getPoints(),G=V.getBorderColor(T),U=G?t("border.width"):0,b=y._2o(),Q=t("shape.border.width"),L=T.getRect(),Y=V.getBodyColor(T),O=y._99o=r.isEmpty()?v:{rect:L,rotation:T.getRotation(),fillRule:t("shape.fill.rule")||"nonzero",scale:T.getScale(),position:T.p(),points:r,segments:T.getSegments(),bodyColor:Y,borderColor:G,borderWidth:U,_94o:t("shape.border.3d"),_95o:t("shape.border.3d.color"),_96o:t("shape.border.3d.accuracy"),_97o:b?t("select.color"):v,selectWidth:b,_53o:t("shape.background"),_27Q:Ep(t("shape.repeat.image"),Y),shapeGradientPack:t("shape.gradient.pack"),_54o:Q,_55o:t("shape.border.color"),shapeGradient:t("shape.gradient"),_59o:t("shape.gradient.color"),_60o:t("shape.border.pattern"),_61o:t("shape.border.cap"),_62o:t("shape.border.join")};if(O){var C=Q*("square"===O._61o?.71:.5)+U+b;if(C){var E=T.getScale();C*=w(1,w(a(E.x),a(E.y))),L=ui(L),li(L,C,O._62o)}y._68o(L)}},getPosition:function(J,N,j,o){var S=this._99o;if(S){var F=vd(J,S.rect,o);return F.x+=N,F.y+=j,F}return Zb},_42:function(t){this._99o&&tc.superClass._42.call(this,t)},_80o:function(h){var G,D=this,g=D.s,e=D._99o,w=e.position,u=e.scale,n=e.rotation,Q=e.bodyColor,T=e.borderWidth,v=e.selectWidth,O=e._53o,N=e._27Q,W=e.shapeGradientPack,H=e._54o,K=e.points,l=e.segments,P=D._data.isClosePath(),Y=e.fillRule;h.save(),pj(h,w.x,w.y),sr(h,n),Ei(h,u.x,u.y),pj(h,-w.x,-w.y);var x=e._60o,L=rf(h,x),a=h.lineJoin,k=h.lineCap;h.lineJoin=e._62o,h.lineCap=e._61o,O||N||W?(Kf(h,K,l,P),W?tp(h,W):N?Ye(h,N):(G=Q?Q:O,Zq(h,G,e.shapeGradient,e._59o,e.rect)),h.fill(Y),W&&h.restore(),L!==h&&Kf(L,K,l,P)):Kf(L,K,l,P);var z=g("shape.border.width.absolute");if(z&&(h.save(),h.setTransform(1,0,0,1,0,0)),v&&(h.strokeStyle=e._97o,h.lineWidth=H+2*(T+v),h.stroke()),T&&(h.strokeStyle=e.borderColor,h.lineWidth=H+2*T,h.stroke()),H&&(G=e._55o,!O&&Q&&(G=Q),h.strokeStyle=G,h.lineWidth=H,h.stroke(),e._94o&&ib(h,G,e._95o,H,D.gv._zoom,e._96o)),z&&h.restore(),xg(h,x),g("shape.dash")){var E=g("shape.dash.width")||H;if(E>0){x=g("shape.dash.pattern");var L=rf(h,x,D._2Q("shape.dash.offset"));L!==h&&Kf(L,K,l,P),D._1Q(h,"shape",E,x)}}h.lineJoin=a,h.lineCap=k,h.restore()},_48O:function(){var j=this;if(tc.superClass._48O.call(j),j._55O._43O){var i=j._data.getRect(),F=j.gv._zoom;si(i,(j.gv.getEditPointSize()/2+2)/F),j._68o(i)}},_47O:function(t){var N=this;if(tc.superClass._47O.call(N,t),N._55O._43O){var U=N.gv,z=U._zoom,Y=U.getEditPointSize()/2/z;t.fillStyle=U.getEditPointBackground(),t.strokeStyle=U.getEditPointBorderColor(),t.lineWidth=1/z,N._data.getPoints().each(function(w){t.beginPath(),t.arc(w.x,w.y,Y,0,X,!0),t.fill(),t.stroke()})}}});var dl=function(i,R){lj(dl,this,[i,R])};Uf(dl,tc,{getRotation:function(j,D,q){j=j||0;var _=this._data.getPoints(),F=_.size();return F>1?xp[q]?F&&0===F%2?If(_.get(F/2-1),_.get(F/2),D,j):j:up[q]?If(_.get(0),_.get(1),D,j):If(_.get(F-2),_.get(F-1),D,j):j},getPosition:function(N,c,X,e,x){var H=this._data.getPoints(),n=H.size();if(n>1){if(xp[N]){var Q=n%2;if(0===Q)return mf(H.get(n/2-1),H.get(n/2),N,c,X,e,x);var K=H.get((n-Q)/2),O={x:K.x,y:K.y,width:0,height:0};return K=vd(N,O,e),K.x+=c,K.y+=X,K}return up[N]?mf(H.get(0),H.get(1),N,c,X,e,x):mf(H.get(n-2),H.get(n-1),N,c,X,e,x)}return Zb}});var Fe=function(r,T){lj(Fe,this,[r,T])};Uf(Fe,lm,{_3O:function(){var g=this;Fe.superClass._3O.call(g);var f=g.s,w=g._83o;g._82o=w.img||w.shape?v:{background:g.getBodyColor("grid.background"),depth:f("grid.depth"),rect:w.rect,_88o:f("grid.cell.depth"),cellBorderColor:f("grid.cell.border.color"),_89o:f("grid.row.count"),_90o:f("grid.column.count"),block:f("grid.block"),_91o:f("grid.block.color"),_92o:f("grid.block.padding"),_93o:f("grid.block.width")}},_80o:function(v){var W=this,R=W._82o;if(!R)return Fe.superClass._80o.call(W,v),void 0;var Z,h,L=W._data,t=R.background,S=R.rect,b=R.block,J=R._91o,U=R._92o,i=R._93o,x=R._88o,s=R.cellBorderColor,O=R._89o,o=R._90o;if(t)if(_r(v,S.x,S.y,S.width,S.height,t),ig(v,t,R.depth,S),x)for(Z=0;O>Z;Z++)for(h=0;o>h;h++)S=L.getCellRect(Z,h),S&&ig(v,t,x,S);else if(s){for(v.beginPath(),Z=0;O>Z;Z++)for(h=0;o>h;h++)S=L.getCellRect(Z,h),S&&v.rect(S.x,S.y,S.width,S.height);v.strokeStyle=s,v.lineWidth=1,v.stroke()}if("h"===b)for(Z=0;O>Z;Z++)S=rr(L.getCellRect(Z,0),L.getCellRect(Z,o-1)),si(S,U),Fi(v,J,S.x,S.y,S.width,S.height,i);else if("v"===b)for(h=0;o>h;h++)S=rr(L.getCellRect(0,h),L.getCellRect(O-1,h)),si(S,U),Fi(v,J,S.x,S.y,S.width,S.height,i);W._39O(v,W._83o)}});var oo=function(R,$){lj(oo,this,[R,$])};Uf(oo,lm,{_checkEmptyRect:!1,_81o:function(){var e=this._data,w=oo.superClass._81o.call(this),E=e.s("text");if(E!=v){var T,q,l=e.s("text.font"),k=e.s("text.align"),b=e.s("text.vAlign"),y=e.getRotation(),_=og(l,E),d=_.width,A=_.height;"left"===k?T=-e.getWidth()/2:"center"===k?T=-_.width/2:"right"===k&&(T=e.getWidth()/2-_.width),"top"===b?q=-e.getHeight()/2:"middle"===b?q=-_.height/2:"bottom"===b&&(q=e.getHeight()/2-_.height);var i;if(y){var H=new ll(y);i=ao([H.tf(T,q),H.tf(T+d,q),H.tf(T+d,q+A),H.tf(T,q+A)])}else i={x:T,y:q,width:d,height:A};i.x+=e.getPosition().x,i.y+=e.getPosition().y,w=rr(w,i)}return w}});var Nk=Yq.Interactor=function(o){this.gv=this._graphView=o};rq("Interactor",t,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(x){this.gv.fi(x)},setCursor:function(I){E||(this.getView().style.cursor=I)},startDragging:function(D){var _=this;_._lastClientPoint=sk(D),_._lastLogicalPoint=_.gv.lp(D),$m(_,D)},clearDragging:function(){var s=this;s._lastClientPoint=s._lastLogicalPoint=s._logicalPoint=v},autoScroll:function(F){return this.gv.autoScroll(F,this._lastClientPoint)}});var Gh=Yq.DefaultInteractor=function(r){lj(Gh,this,[r])};rq("DefaultInteractor",Nk,{handle_mousedown:function(S){Se(S);var f=this,b=f.gv,K=b.getDataAt(S);!b.setFocus(S)||b._editing||b._scrolling||(Gj(S)?b.handleDoubleClick(S,K):b.handleClick(S,K),b.isPannable()&&!K&&Rr(S)&&!ne(S)&&(f._tx=b.tx(),f._ty=b.ty(),f.startDragging(S)))},handleWindowMouseUp:function(w){var l=this,s=l.gv;s._panning&&(delete s._panning,s.onPanEnded(),l.fi({kind:"endPan",event:w})),delete l._tx,delete l._ty,l.clearDragging()},handle_mousemove:function(F){var T=this,X=T.gv;T._hoverTimer&&(O(T._hoverTimer),delete T._hoverTimer),T._hoverTimer=m(function(){T.fi({kind:"hover",event:F}),O(T._hoverTimer),delete T._hoverTimer},X.getHoverDelay()||800)},handle_touchmove:function(x){this.handle_mousemove(x)},handleWindowMouseMove:function(d){var A=this,b=A.gv,r=A._lastClientPoint;A.fi({kind:b._panning?"betweenPan":"beginPan",event:d}),b._panning=1,b.setTranslate(A._tx+d.clientX-r.x,A._ty+d.clientY-r.y)},handle_mousewheel:function(c){this.gv.handleScroll(c,c.wheelDelta)},handle_DOMMouseScroll:function(h){2===h.axis&&this.gv.handleScroll(h,-h.detail)},handle_keydown:function(V){this.gv.handleKeyDown(V)}});var Rj=Yq.SelectInteractor=function(f){lj(Rj,this,[f])};rq("SelectInteractor",Nk,{_42:function(){var I=this,L=I.gv,U=L.getZoom(),N=I.mark,q=I.div;q||(q=I.div=Yn(),Yr(I.getView(),q));var F={};F.x=N.x*U+L.tx(),F.y=N.y*U+L.ty(),F.width=N.width*U,F.height=N.height*U,oi(q,F),this.intersects()?(q.style.border="",q.style.background=L.getRectSelectBackground()):(q.style.background="",q.style.border="1px solid "+L.getRectSelectBorderColor())},handle_mousedown:function(h){var V=this,W=V.gv;if(V._57I=v,!W._editing&&!W._scrolling){var B=W.getDataAt(h),z=W.sm();B?ne(h)?z.co(B)?z.rs(B):z.as(B):z.co(B)||z.ss(B):ne(h)||!W.isPannable()?Rr(h)&&(ne(h)||z.cs(),W.isRectSelectable()&&(V.startDragging(h),W._77O=1)):V._57I=sk(h)}},handle_mouseup:function(R){var j=this,J=j._57I;J&&(Kd(J,sk(R))<=1&&j.gv.sm().cs(),j._57I=v)},handleWindowMouseUp:function(Q){this.clear(Q)},handleWindowMouseMove:function(B){var x=this,l=x.gv;x._logicalPoint=l.lp(B),x.mark?(x.fi({kind:"betweenRectSelect",event:B}),x.autoScroll(B),x.redraw()):x.fi({kind:"beginRectSelect",event:B}),x.mark=ao(x._lastLogicalPoint,x._logicalPoint),x.redraw()},intersects:function(){var V=this,E=V._lastLogicalPoint,N=V._logicalPoint;return E.x>N.x||E.y>N.y},clear:function(B){var I=this,o=I.gv,j=I.mark;if(I._57I=v,I._lastLogicalPoint){if(j){if(0!==j.width&&0!==j.height){var O=o.getDatasInRect(j,I.intersects());if(!O.isEmpty()){var y=o.sm(),U=y.toSelection();O.each(function(P){y.co(P)?U.remove(P):U.add(P)}),y.ss(U)}}gp(I.div),delete I.div,delete I.mark,I.redraw(),I.fi({kind:"endRectSelect",event:B}),o.onRectSelectEnded()}I.clearDragging(),delete o._77O}},redraw:function(){var J=this;J._draw||(J._draw=1,m(function(){J.mark&&J._42(),delete J._draw},16))}});var vp=Yq.MoveInteractor=function(u){lj(vp,this,[u])};rq("MoveInteractor",Nk,{handle_mousedown:function(o){var c=this,X=c.gv;if(Rr(o)&&!X._editing&&!X._scrolling){var A=X.getSelectedDataAt(o);A?(c._data=A,X.handleMouseDown&&X.handleMouseDown(o,A),c.startDragging(o),X.isMovable(A)&&(X._moving=1)):X._focusData=v}},handleWindowMouseUp:function(v){var g=this,C=g.gv;C.handleMouseUp&&C.handleMouseUp(v,g._data),g.clear(v)},handleWindowMouseMove:function(z){var P=this,r=P.gv,I=P._data,g=r.getDataModel(),O=g.getHistoryManager();if((!r._93O||!r._93O(z,I))&&r._moving){var X=P._logicalPoint?"betweenMove":"beginMove",v={kind:X,event:z},S=P._logicalPoint=r.lp(z);O&&"beginMove"===X&&O.beginInteraction();var C=S.x-P._lastLogicalPoint.x,k=S.y-P._lastLogicalPoint.y,Q=r.getMoveMode(z,I);Q&&("x"===Q?k=0:"y"===Q?C=0:"xy"!==Q&&(C=k=0)),r.moveSelection(C,k),P._lastLogicalPoint=S,P.autoScroll(z),P.fi(v)}},clear:function(N){var d=this,z=d.gv,a=z.getDataModel(),i=a.getHistoryManager();d._lastLogicalPoint&&(d._lastLogicalPoint=d._data=z._moving=v,d._logicalPoint&&(d.fi({kind:"endMove",event:N}),z.onMoveEnded(),i&&i.endInteraction()),d.clearDragging())}});var Jq=Yq.EditInteractor=function(q){lj(Jq,this,[q])};rq("EditInteractor",Nk,{ms_edit:1,setUp:function(){var r=this;Jq.superClass.setUp.call(r),E||r.gv.setEditInteractor(r)},tearDown:function(){var O=this;Jq.superClass.tearDown.call(O),E||O.gv.setEditInteractor(v)},clear:function(){var F=this,B=F.gv;B._editing&&(B._editing=F._77I=F._node=F._edge=F._shape=F._rect=F._89I=F._index=v,F.clearDragging(),F.setCursor(S))},handle_mousedown:function(G){var P=this,y=P.gv.dm(),N=y.getHistoryManager(),K=P._index,k=P._node,Y=P._shape,r=P._edge,t=P._77I,Z=P._89I;Rr(G)&&P.gv._editing&&(k&&Z?(P.startDragging(G),N&&N.beginInteraction(),P.fi({kind:"beginEditRect",event:G,data:k,direction:Z})):Y&&K>=0?(P.startDragging(G),N&&N.beginInteraction(),P.fi({kind:"beginEditPoint",event:G,data:Y,index:K})):r&&K>=0?(P.startDragging(G),N&&N.beginInteraction(),P.fi({kind:"beginEditPoint",event:G,data:r,index:K})):t&&(P.startDragging(G),N&&N.beginInteraction(),P.fi({kind:"beginEditRotation",event:G,data:t})))},handleWindowMouseUp:function(S){this._46O(S),this.clear()},handleWindowMouseMove:function(v){this._78I(v)},handle_mousemove:function(X){if(!wj){var v=this,M=v.gv;v._79I(X,M.getSelectedDataAt(X))?M._editing=1:v.clear()}}});var dc=Yq.ScrollBarInteractor=function(e){lj(dc,this,[e])};rq("ScrollBarInteractor",Nk,{_41o:function(){return this.gv.getViewRect().height<this.gv.getScrollRect().height},_40o:function(){return this.gv.getViewRect().width<this.gv.getScrollRect().width},isV:function(K){var q=this.gv.getViewRect();return this._41o()&&(q.x+q.width-this.gv.lp(K).x)*this.gv.getZoom()<Vq},isH:function(Q){var z=this.gv.getViewRect();return this._40o()&&(z.y+z.height-this.gv.lp(Q).y)*this.gv.getZoom()<Vq},handle_mousemove:function(z){this.handle_touchmove(z)},handle_touchmove:function(u){if(!wj&&Rr(u)){var F=this,k=F.isV(u),c=F.isH(u);F._cp?F._state||(k?F._state="vScroll":c&&(F._state="hScroll"),F._state&&($m(F,u),F.fi({kind:"beginScroll",event:u}))):(k||c)&&F.gv.showScrollBar(),F.gv._scrolling=k||c}},handleWindowMouseUp:function(l){this.handleWindowTouchEnd(l)},handleWindowTouchEnd:function(U){this._state=this._cp=this._tx=this._ty=this.gv._scrolling=v,this.fi({kind:"endScroll",event:U})},handle_mousedown:function(u){this.handle_touchstart(u)},handle_touchstart:function(L){this.gv.setFocus(L),Se(L),this.handle_touchmove(L),Mm(L)>1||!this.gv._scrolling||(this._cp=sk(L),this._tx=this.gv.tx(),this._ty=this.gv.ty())},handleWindowMouseMove:function(x){this.handleWindowTouchMove(x)},handleWindowTouchMove:function(Y){var s=sk(Y),X=this.gv.getViewRect(),t=this.gv.getScrollRect();"vScroll"===this._state?this.gv.ty(this._ty+(this._cp.y-s.y)*t.height/X.height):"hScroll"===this._state&&this.gv.tx(this._tx+(this._cp.x-s.x)*t.width/X.width),this.fi({kind:"betweenScroll",event:Y})}});var Be=Yq.TouchInteractor=function(c,f){f=f||{},f.selectable===z&&(f.selectable=!0),f.movable===z&&(f.movable=!0),f.pannable===z&&(f.pannable=!0),f.pinchable===z&&(f.pinchable=!0),f.editable===z&&(f.editable=!0),this.params=f,lj(Be,this,[c])};rq("TouchInteractor",Nk,{ms_edit:1,setUp:function(){var p=this;Be.superClass.setUp.call(p),E&&p.params.editable&&p.gv.setEditInteractor(p)},tearDown:function(){var R=this;Be.superClass.tearDown.call(R),E&&R.params.editable&&R.gv.setEditInteractor(v)},clear:function(U){var j=this,m=j.gv,N=m.dm().getHistoryManager();m._moving&&(j.fi({kind:"endMove",event:U}),delete m._moving,m.onMoveEnded(),N&&N.endInteraction()),m._panning&&(j.fi({kind:"endPan",event:U}),delete m._panning,m.onPanEnded()),m._pinching&&(j.fi({kind:"endPinch",event:U}),delete m._pinching,m.onPinchEnded()),m._editing&&(j._46O(U),j._77I=j._node=j._edge=j._shape=j._rect=j._89I=j._index=m._editing=v),j._moving=j._panning=j._pinching=j._editing=j._57I=j._data=j._beginHistory=v,j.clearDragging()},handle_touchstart:function(o){var b=this;if(!b.gv._editing){Se(o),b._57I=v;var l=b.params,A=b.gv,U=A.sm(),F=A.getDataAt(o),N=Mm(o);if(1===N)Gj(o)?A.handleDoubleClick(o,F):(A.handleClick(o,F),F&&(A.handleMouseDown&&A.handleMouseDown(o,F),b._data=F)),l.selectable||(F=v),F?(U.co(F)||U.ss(F),l.editable&&A.isEditable(F)&&b._79I(o,F,!0)?(b._editing=1,b.startDragging(o)):l.movable&&A.isMovable(F)&&(b._moving=1,b.startDragging(o))):(b._57I=sk(o),l.pannable&&A.isPannable()&&(b._panning=1,b.startDragging(o),b._translate={x:A.tx(),y:A.ty()}));else if(l.pinchable&&2===N){b._pinching=1,b.startDragging(o);var B=A.getView(),t=A.getZoom(),c=B.getBoundingClientRect(),Y=o.touches[0],f=o.touches[1],g={x:(Y.clientX+f.clientX)/2-c.left,y:(Y.clientY+f.clientY)/2-c.top};g.x-=A.tx(),g.y-=A.ty(),g.x/=t,g.y/=t,b._p=g,b._d=km(o)}}},handle_touchend:function(b){var Z=this,f=Z.gv,s=Z._57I,p=Z._data;s&&(Kd(s,sk(b))<=1&&f.sm().cs(),Z._57I=v),p&&f.handleMouseUp&&f.handleMouseUp(b,p)},handleWindowTouchEnd:function(M){this.clear(M)},handleWindowTouchMove:function(R){var Z=this,B=Z.gv,j=B.dm().getHistoryManager(),k=Mm(R);if(1===k){if(Z._editing&&(j&&!Z._beginHistory&&(Z._beginHistory=1,j.beginInteraction()),B._editing=1,Z._78I(R)),Z._moving)j&&!Z._beginHistory&&(Z._beginHistory=1,j.beginInteraction()),Z.handleMove(R);else if(Z._panning){var c=sk(R);B.setTranslate(Z._translate.x+c.x-Z._lastClientPoint.x,Z._translate.y+c.y-Z._lastClientPoint.y),Z.fi({kind:B._panning?"betweenPan":"beginPan",event:R}),B._panning=1}}else if(2===k&&Z._pinching){var M=km(R);B.handlePinch(Z._p,M,Z._d),Z._d=M,Z.fi({kind:B._pinching?"betweenPinch":"beginPinch",event:R}),B._pinching=1}},handleMove:function(C){var J=this,w=J.gv,Q=w.lp(C);w._93O&&w._93O(C,J._data)||(w.moveSelection(Q.x-J._lastLogicalPoint.x,Q.y-J._lastLogicalPoint.y),J._lastLogicalPoint=Q,J.autoScroll(C),J.fi({kind:w._moving?"betweenMove":"beginMove",event:C}),w._moving=1)}});var Ir="directional",oh="point",Li="spot",Qj="light.color";ik(r,{graph3dViewAttributes:v,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:K/60,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:pq,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewFovy:K/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewHeadlightRange:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewFogDisabled:!0,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewDashDisabled:!0,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,setShape3dModel:function(T,P){Bd[T]=P},getShape3dModel:function(O){return Bd[O]},createMatrix:function(G,l){ym(G)||(G=[G]);for(var Y=G.length-1;Y>=0;Y--){var I=G[Y];l=qd(I.mat,I.s3,I.r3,I.rotationMode,I.t3,l)}return l},transformVec:function(B,J){return wi(B,J)},createBoxModel:function(){return{vs:bn,ns:Nj,uv:ws,is:ys}},createRoundRectModel:function($,W){return kd.roundRect($,W)},createStarModel:function($,O){return kd.star($,O)},createRectModel:function(D,n){return kd.rect(D,n)},createTriangleModel:function(q,M){return kd.triangle(q,M)},createRightTriangleModel:function(y,g){return kd.rightTriangle(y,g)},createParallelogramModel:function(n,h){return kd.parallelogram(n,h)},createTrapezoidModel:function(D,W){return kd.trapezoid(D,W)},createSmoothSphereModel:function(W,L,K,R,y,v,n){return gr(new Rq(W,L,K,R,y,v,n))},createSphereModel:function(Z,h,V,b,U,W){return Z?Ie(Z,h,V,b,U,W):r.createSmoothSphereModel()},createSmoothConeModel:function(z,Y,a,p,f){return Bf(z,Y,a,p,f)},createConeModel:function(W,T,J,c,R,d){return W?Xb(W,T,J,c,R,d):Bf(d)},createSmoothCylinderModel:function(r,R,s,N,$,e,Q,G){return gr(new uk(r,R,s,N,$,e,Q,G))},createCylinderModel:function(D,i,A,$,K,k,R){return D?Ro(D,i,A,$,K,k,R):Fj(k,R)},createSmoothTorusModel:function(x,b,Q,t,n,$){return gr(new Gn(x,b,Q,t,n,$))},createTorusModel:function(u,y,f,i,o,G,B){return u?Vp(u,y,f,i,o,G,B):ap(G,B)},createExtrusionModel:function(O,x,T,z,Y,G,y,g){return _k(O,x,T,z,Y,G,y,g)},createSmoothRingModel:function(p,z,o,$,f,g){for(var m=[],u=0;u<p.length-1;u+=2)m.push({x:p[u],y:p[u+1]});for(p=bs(m,z,o)[0],m=[],u=0;u<p.length;u++){var I=p[u];m.push(new ch(I.x,0,I.y))}return gr(new us(m,g,$,f))},createTextGeometry:function(T,z){return gr(new _j(T,z))},loadFontFace:function(L,j){r.xhrLoad(L,function(Y){if(!Y)return j();var c;try{c=JSON.parse(Y)}catch(J){c=JSON.parse(Y.substring(65,Y.length-2))}Em.loadFace(c),j&&j(c.familyName.toLowerCase())},j?null:{sync:!0})},createRingModel:function(U,J,k,q,d,m,R,y,x,D){for(var S=[],n=0;n<U.length-1;n+=2)S.push({x:U[n],y:U[n+1]});m=m||r.shapeSide,R=R||0,y=y||m;var M,f,t,T,B,V,z,H,o,i,n,_,l,W,A,b,N,$,P=[],Q=[],L=x?[]:v,p=x?[]:v,g=D?[]:v,Y=D?[]:v,I=q?[]:v,X=q?[]:v,G=d?[]:v,e=d?[]:v,U=bs(S,J,k),E=nh(U),s=0,K=2*Math.PI/m;return U.forEach(function(h){if(t=h.length,t>1){if(T=h[0],q)for(V=T.x,H=T.y,n=R;y>n;n++)_=n+1,l=n*K,W=_*K,A=C(l),b=j(l),N=C(W),$=j(W),I.push(A*V,H,-b*V,N*V,H,-$*V,0,H,0),X.push(.5-.5*A,.5-.5*b,.5-.5*N,.5-.5*$,.5,.5);for(i=0;t>i;i++){for(B=h[i],V=T.x,z=B.x,H=T.y,o=B.y,M=s/E,s+=Kd(T,B),f=s/E,n=R;y>n;n++)_=n+1,l=n*K,W=_*K,A=C(l),b=j(l),N=C(W),$=j(W),P.push(A*z,o,-b*z,N*z,o,-$*z,A*V,H,-b*V,N*z,o,-$*z,N*V,H,-$*V,A*V,H,-b*V),Q.push(n/m,f,_/m,f,n/m,M,_/m,f,_/m,M,n/m,M),x&&n===R&&(L.push(0,H,0,0,o,0,A*z,o,-b*z,A*z,o,-b*z,A*V,H,-b*V,0,H,0),p.push(0,.5-H,0,.5-o,2*z,.5-o,2*z,.5-o,2*V,.5-H,0,.5-H)),D&&_===y&&(g.push(0,H,0,N*z,o,-$*z,0,o,0,N*z,o,-$*z,0,H,0,N*V,H,-$*V),Y.push(1,.5-H,1-2*z,.5-o,1,.5-o,1-2*z,.5-o,1,.5-H,1-2*V,.5-H));T=B}if(d)for(V=T.x,H=T.y,n=R;y>n;n++)_=n+1,l=n*K,W=_*K,A=C(l),b=j(l),N=C(W),$=j(W),G.push(N*V,H,-$*V,A*V,H,-b*V,0,H,0),e.push(.5-.5*N,.5+.5*$,.5-.5*A,.5+.5*b,.5,.5)}}),{vs:P,uv:Q,bottom_vs:G,bottom_uv:e,top_vs:I,top_uv:X,from_vs:L,from_uv:p,to_vs:g,to_uv:Y}}},!0),ik(y,{"3d.move.mode":z,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"shape.border.gradient.color":z,"edge.gradient.color":z,"edge.source.t3":z,"edge.target.t3":z,"light.type":oh,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":K/4,"light.range":0,"light.exponent":1,"light.intensity":1,"wf.visible":!1,"wf.width":1,"wf.color":Rh,"wf.short":!1,"wf.mat":z,batch:z,"transparent.mask":!1,brightness:z,"select.brightness":.7,"repeat.uv.length":z,"label.face":Cf,"label.t3":z,"label.r3":z,"label.texture.scale":2,"label.rotationMode":te,"label.light":!1,"label.blend":z,"label.reverse.flip":!1,"label.reverse.color":Ij,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":Cf,"label2.t3":z,"label2.r3":z,"label2.texture.scale":2,"label2.rotationMode":te,"label2.light":!1,"label2.blend":z,"label2.reverse.flip":!1,"label2.reverse.color":Ij,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":Cf,"note.t3":z,"note.r3":z,"note.texture.scale":2,"note.rotationMode":te,"note.light":!1,"note.blend":z,"note.reverse.flip":!1,"note.reverse.color":Ij,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":Cf,"note2.t3":z,"note2.r3":z,"note2.texture.scale":2,"note2.rotationMode":te,"note2.light":!1,"note2.blend":z,"note2.reverse.flip":!1,"note2.reverse.color":Ij,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,shape3d:z,"shape3d.color":Op,"shape3d.top.color":z,"shape3d.bottom.color":z,"shape3d.from.color":z,"shape3d.to.color":z,"shape3d.image":z,"shape3d.top.image":z,"shape3d.bottom.image":z,"shape3d.from.image":z,"shape3d.to.image":z,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":z,"shape3d.side.to":z,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":z,"shape3d.opacity":z,"shape3d.reverse.flip":!1,"shape3d.reverse.color":Ij,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":z,"shape3d.uv.scale":z,"shape3d.top.uv.offset":z,"shape3d.top.uv.scale":z,"shape3d.bottom.uv.offset":z,"shape3d.bottom.uv.scale":z,"shape3d.from.uv.offset":z,"shape3d.from.uv.scale":z,"shape3d.to.uv.offset":z,"shape3d.to.uv.scale":z,"shape3d.top.cap":z,"shape3d.bottom.cap":z,"shape3d.start.angle":0,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"all.light":!0,"all.visible":!0,"all.color":Op,"all.image":z,"all.blend":z,"all.opacity":z,"all.reverse.flip":!1,"all.reverse.color":Ij,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":z,"all.uv.offset":z,"all.uv.scale":z,"all.discard.selectable":!0,mat:z,"left.mat":z,"right.mat":z,"top.mat":z,"bottom.mat":z,"front.mat":z,"back.mat":z},!0);var Fn,Gq=!1,Ad=[0,0,0,1/255],Zg={left:[1/255,0,0,1],right:[2/255,0,0,1],top:[3/255,0,0,1],bottom:[4/255,0,0,1],front:[5/255,0,0,1],back:[6/255,0,0,1],m:{1:Kp,2:be,3:ph,4:ud,5:Cf,6:uj}},Zi=function(y,u,_,s){if(u.getFaceVisible(y,_)){ul(u,Bi(y,u.getFaceMat(y,_)||u.getMat(y)));var X=u._26I;u.getFaceReverseCull(y,_)?X.enable(X.CULL_FACE):X.disable(X.CULL_FACE),Oh(X,u._prg.uFixPickReverseColor,Zg[_]),hh(X),kk(X,s,6),hs(X),jr(u)}},oq=function(H){return H instanceof oe},Re=function(k){return[k.x,k.e||0,k.y]},Pg=function(o,a,t){for(var a=uh(a),K=a[0],T=a[1],r=a[2];t--;)o.push(K,T,r)},Tl=function(O,X,t){for(var X=uh(X),v=X[0],n=X[1],F=X[2],G=X[3];t--;)O.push(v,n,F,G)},lb=function(K,a,t){if(a)for(var M,F,I,z=a[0],j=a[1],v=a[2],i=a[4],k=a[5],W=a[6],x=a[8],U=a[9],e=a[10],V=a[12],l=a[13],n=a[14],h=t.length,S=0,S=0;h>S;S+=3)M=t[S],F=t[S+1],I=t[S+2],K.push(z*M+i*F+x*I+V,j*M+k*F+U*I+l,v*M+W*F+e*I+n);else Cl(K,t)},Lc=function(G,s){var h=s.s("light.intensity"),x=uh(s.s(Qj)),u=x[0],d=x[1],q=x[2];1!==h&&(u*=h,d*=h,q*=h),G.push(u,d,q,s.s("light.disabled")?1:0)},Bq=function(d,_,M){Oh(_,M.uHeadlightRange,d._headlightRange);var H=d._headlightIntensity,D=uh(d._headlightColor);1!==H&&(D=[D[0]*H,D[1]*H,D[2]*H]),Oh(_,M.uHeadlightColor,[D[0],D[1],D[2],d._headlightDisabled?1:0]);var y=d._59O,A=d._spots,E=d._dirs;if(y.length){var T=[],R=[],Y=[];y.forEach(function(l){Lc(T,l),Cl(R,l.p3()),Y.push(l.s("light.range"))}),_.uniform4fv(M.uPointColor,T),_.uniform1fv(M.uPointRange,Y),_.uniform3fv(M.uPointPosition,R)}if(A.length){var n=[],m=[],u=[],z=[],V=[],U=[];A.forEach(function(H){Lc(n,H),Cl(m,H.p3()),Cl(u,H.s("light.center")),z.push(H.s("light.range")),V.push(C(H.s("light.angle")/2)),U.push(H.s("light.exponent"))}),_.uniform4fv(M.uSpotColor,n),_.uniform1fv(M.uSpotRange,z),_.uniform1fv(M.uSpotAngle,V),_.uniform1fv(M.uSpotExponent,U),_.uniform3fv(M.uSpotPosition,m),_.uniform3fv(M.uSpotCenter,u)}if(E.length){var S=[],K=[];E.forEach(function(L){Lc(S,L),Cl(K,L.p3())}),_.uniform4fv(M.uDirColor,S),_.uniform3fv(M.uDirPosition,K)}},nc=function(j){return j>0&&0===(j-1&j)},xf=function(j){return j=w(0,o(K,j)),j=w(Vk,o(K-Vk,j))},Rd=function(){return.05+g()/2},wg=function(Q,i,e,A){var H,u=Q.getEye();return Q.isOrtho()?(H=Fk(Q.getCenter(),u),H[0]+=A[0],H[1]+=A[1],H[2]+=A[2]):H=u,Vi(i,e,A,H)},Vi=function(V,B,k,Y){var T=lr(V,B),d=Fk(Y,k,!0),I=lr(d,B);if(a(I)<Vk)return v;var x=(T-lr(k,B))/I;return[k[0]+d[0]*x,k[1]+d[1]*x,k[2]+d[2]*x]},qh=function(z,N){return{x:2*z.x-N.x,y:2*z.y-N.y}},Dn=function(K,f,X,$){var k,U;if(!K)return k=B(f.y-X.y,X.x-f.x),{x:f.x+$*j(k),y:f.y+$*C(k)};if(!X)return k=B(K.y-f.y,f.x-K.x),{x:f.x+$*j(k),y:f.y+$*C(k)};var m=Fk([K.x,K.y,0],[f.x,f.y,0],!0),P=Fk([X.x,X.y,0],[f.x,f.y,0],!0),N=-(m[0]+P[0])/2,d=-(m[1]+P[1])/2,i=L(N*N+d*d);if(Vk>i)return k=B(K.y-f.y,f.x-K.x),{x:f.x+$*j(k),y:f.y+$*C(k)};var w=K.x-f.x,v=K.y-f.y,a=X.x-f.x,M=X.y-f.y,z=L(Math.min(w*w+v*v,a*a+M*M));return k=J(lr(m,P))/2,U=m[1]*P[0]-m[0]*P[1]>0?-1:1,N/=i,d/=i,i=Math.min($/j(k),z/C(k)),{x:f.x+U*i*N,y:f.y+U*i*d}},gd=function($){var q=$[1],K=$[2],Z=$[3],r=$[6],j=$[7],Q=$[11];$[1]=$[4],$[2]=$[8],$[3]=$[12],$[4]=q,$[6]=$[9],$[7]=$[13],$[8]=K,$[9]=r,$[11]=$[14],$[12]=Z,$[13]=j,$[14]=Q},Zj=function(M){var x=M[0],h=M[1],W=M[2],R=M[3],b=M[4],j=M[5],g=M[6],J=M[7],D=M[8],K=M[9],q=M[10],Y=M[11],U=M[12],B=M[13],Z=M[14],I=M[15],F=x*j-h*b,f=x*g-W*b,C=x*J-R*b,z=h*g-W*j,P=h*J-R*j,V=W*J-R*g,O=D*B-K*U,$=D*Z-q*U,A=D*I-Y*U,w=K*Z-q*B,N=K*I-Y*B,d=q*I-Y*Z,o=F*d-f*N+C*w+z*A-P*$+V*O;return o?(o=1/o,M[0]=(j*d-g*N+J*w)*o,M[1]=(W*N-h*d-R*w)*o,M[2]=(B*V-Z*P+I*z)*o,M[3]=(q*P-K*V-Y*z)*o,M[4]=(g*A-b*d-J*$)*o,M[5]=(x*d-W*A+R*$)*o,M[6]=(Z*C-U*V-I*f)*o,M[7]=(D*V-q*C+Y*f)*o,M[8]=(b*N-j*A+J*O)*o,M[9]=(h*A-x*N-R*O)*o,M[10]=(U*P-B*C+I*F)*o,M[11]=(K*C-D*P-Y*F)*o,M[12]=(j*$-b*w-g*O)*o,M[13]=(x*w-h*$+W*O)*o,M[14]=(B*f-U*z-Z*F)*o,M[15]=(D*z-K*f+q*F)*o,void 0):v
},Ag=function(P,i){if(i){var Z=i[0],g=i[1],F=i[2];P[12]=P[0]*Z+P[4]*g+P[8]*F+P[12],P[13]=P[1]*Z+P[5]*g+P[9]*F+P[13],P[14]=P[2]*Z+P[6]*g+P[10]*F+P[14],P[15]=P[3]*Z+P[7]*g+P[11]*F+P[15]}},lq=function(N,J){if(J){var w=J[0],_=J[1],H=J[2];N[0]=N[0]*w,N[1]=N[1]*w,N[2]=N[2]*w,N[3]=N[3]*w,N[4]=N[4]*_,N[5]=N[5]*_,N[6]=N[6]*_,N[7]=N[7]*_,N[8]=N[8]*H,N[9]=N[9]*H,N[10]=N[10]*H,N[11]=N[11]*H}},dh=function(c,L,x){var O=L[0],y=L[1],l=L[2],Y=L[3],Q=L[4],i=L[5],g=L[6],P=L[7],n=L[8],M=L[9],r=L[10],s=L[11],m=L[12],f=L[13],Z=L[14],E=L[15],D=x[0],C=x[1],B=x[2],k=x[3];return c[0]=D*O+C*Q+B*n+k*m,c[1]=D*y+C*i+B*M+k*f,c[2]=D*l+C*g+B*r+k*Z,c[3]=D*Y+C*P+B*s+k*E,D=x[4],C=x[5],B=x[6],k=x[7],c[4]=D*O+C*Q+B*n+k*m,c[5]=D*y+C*i+B*M+k*f,c[6]=D*l+C*g+B*r+k*Z,c[7]=D*Y+C*P+B*s+k*E,D=x[8],C=x[9],B=x[10],k=x[11],c[8]=D*O+C*Q+B*n+k*m,c[9]=D*y+C*i+B*M+k*f,c[10]=D*l+C*g+B*r+k*Z,c[11]=D*Y+C*P+B*s+k*E,D=x[12],C=x[13],B=x[14],k=x[15],c[12]=D*O+C*Q+B*n+k*m,c[13]=D*y+C*i+B*M+k*f,c[14]=D*l+C*g+B*r+k*Z,c[15]=D*Y+C*P+B*s+k*E,c},Qh=function(f,p,H,w){var A,y,D,X,$,z,h,V,B,O,l=p[0],m=p[1],Y=p[2],d=w[0],P=w[1],I=w[2],N=H[0],b=H[1],T=H[2];return a(l-N)<Vk&&a(m-b)<Vk&&a(Y-T)<Vk?Ve(f):(h=l-N,V=m-b,B=Y-T,O=1/L(h*h+V*V+B*B),h*=O,V*=O,B*=O,A=P*B-I*V,y=I*h-d*B,D=d*V-P*h,O=L(A*A+y*y+D*D),O?(O=1/O,A*=O,y*=O,D*=O):(A=0,y=0,D=0),X=V*D-B*y,$=B*A-h*D,z=h*y-V*A,O=L(X*X+$*$+z*z),O?(O=1/O,X*=O,$*=O,z*=O):(X=0,$=0,z=0),f[0]=A,f[1]=X,f[2]=h,f[3]=0,f[4]=y,f[5]=$,f[6]=V,f[7]=0,f[8]=D,f[9]=z,f[10]=B,f[11]=0,f[12]=-(A*l+y*m+D*Y),f[13]=-(X*l+$*m+z*Y),f[14]=-(h*l+V*m+B*Y),f[15]=1,f)},ce=function(K,u,g,M,R){var d=1/H(u/2),k=1/(M-R);return K[0]=d/g,K[1]=0,K[2]=0,K[3]=0,K[4]=0,K[5]=d,K[6]=0,K[7]=0,K[8]=0,K[9]=0,K[10]=(R+M)*k,K[11]=-1,K[12]=0,K[13]=0,K[14]=2*R*M*k,K[15]=0,K},bi=function(Y,z,N,L,g,p,J){var o=1/(z-N),K=1/(L-g),m=1/(p-J);return Y[0]=-2*o,Y[1]=0,Y[2]=0,Y[3]=0,Y[4]=0,Y[5]=-2*K,Y[6]=0,Y[7]=0,Y[8]=0,Y[9]=0,Y[10]=2*m,Y[11]=0,Y[12]=(z+N)*o,Y[13]=(g+L)*K,Y[14]=(J+p)*m,Y[15]=1,Y},Qi=function(X,P){var B=P[0],Y=P[1],I=P[2],F=P[3],M=B*B+Y*Y+I*I+F*F,x=M?1/M:0;return X[0]=-B*x,X[1]=-Y*x,X[2]=-I*x,X[3]=F*x,X},Yo=function(C,q){var W=q[0]+q[5]+q[10],o=0;return W>0?(o=2*Math.sqrt(W+1),C[3]=.25*o,C[0]=(q[6]-q[9])/o,C[1]=(q[8]-q[2])/o,C[2]=(q[1]-q[4])/o):q[0]>q[5]&q[0]>q[10]?(o=2*Math.sqrt(1+q[0]-q[5]-q[10]),C[3]=(q[6]-q[9])/o,C[0]=.25*o,C[1]=(q[1]+q[4])/o,C[2]=(q[8]+q[2])/o):q[5]>q[10]?(o=2*Math.sqrt(1+q[5]-q[0]-q[10]),C[3]=(q[8]-q[2])/o,C[0]=(q[1]+q[4])/o,C[1]=.25*o,C[2]=(q[6]+q[9])/o):(o=2*Math.sqrt(1+q[10]-q[0]-q[5]),C[3]=(q[1]-q[4])/o,C[0]=(q[8]+q[2])/o,C[1]=(q[6]+q[9])/o,C[2]=.25*o),C},Qm=function(o,q,Z){var B=q[0],U=q[1],D=q[2],H=q[3],L=B+B,M=U+U,S=D+D,P=B*L,l=B*M,j=B*S,k=U*M,F=U*S,G=D*S,e=H*L,h=H*M,w=H*S;return o[0]=1-(k+G),o[1]=l+w,o[2]=j-h,o[3]=0,o[4]=l-w,o[5]=1-(P+G),o[6]=F+e,o[7]=0,o[8]=j+h,o[9]=F-e,o[10]=1-(P+k),o[11]=0,o[12]=Z[0],o[13]=Z[1],o[14]=Z[2],o[15]=1,o},_q=function(b,m){return Qh(m?m:rh(),b._eye,b._center,b._up)},Jc=function(P){var M=P.getAspect(),w=P._near,S=P._far,A=rh();if(P._ortho){var m=P._orthoWidth/2,n=m/M;bi(A,-m,m,-n,n,w,S)}else ce(A,P._fovy,M,w,S);return A},Ki=function(y,S){if(!y)return v;var o=0,W=1,d=2,D=[],z=0,R=y.length,H=R/3;if(S){for(;R>z;z++)D[z]=0;for(z=0;z<S.length;z+=3){var P=[],m=[],C=[];P[o]=y[3*S[z+1]+o]-y[3*S[z]+o],P[W]=y[3*S[z+1]+W]-y[3*S[z]+W],P[d]=y[3*S[z+1]+d]-y[3*S[z]+d],m[o]=y[3*S[z+2]+o]-y[3*S[z+1]+o],m[W]=y[3*S[z+2]+W]-y[3*S[z+1]+W],m[d]=y[3*S[z+2]+d]-y[3*S[z+1]+d],C[o]=P[W]*m[d]-P[d]*m[W],C[W]=P[d]*m[o]-P[o]*m[d],C[d]=P[o]*m[W]-P[W]*m[o];for(var Q=0;3>Q;Q++)D[3*S[z+Q]+o]+=C[o],D[3*S[z+Q]+W]+=C[W],D[3*S[z+Q]+d]+=C[d]}}else for(z=0;H>z;z+=3){var P=[],m=[],C=[];P[o]=y[3*(z+1)+o]-y[3*z+o],P[W]=y[3*(z+1)+W]-y[3*z+W],P[d]=y[3*(z+1)+d]-y[3*z+d],m[o]=y[3*(z+2)+o]-y[3*(z+1)+o],m[W]=y[3*(z+2)+W]-y[3*(z+1)+W],m[d]=y[3*(z+2)+d]-y[3*(z+1)+d],C[o]=P[W]*m[d]-P[d]*m[W],C[W]=P[d]*m[o]-P[o]*m[d],C[d]=P[o]*m[W]-P[W]*m[o];for(var Q=0;3>Q;Q++)D[3*(z+Q)+o]=C[o],D[3*(z+Q)+W]=C[W],D[3*(z+Q)+d]=C[d]}for(z=0;R>z;z+=3){var U=[];U[o]=D[z+o],U[W]=D[z+W],U[d]=D[z+d];var F=L(U[o]*U[o]+U[W]*U[W]+U[d]*U[d]);0===F&&(F=Vk),U[o]=U[o]/F,U[W]=U[W]/F,U[d]=U[d]/F,D[z+o]=U[o],D[z+W]=U[W],D[z+d]=U[d]}return new bk(D)},Fl=function(C,u,N){if(N||(N=C.createTexture()),u){var W=C.TEXTURE_2D,r=C.LINEAR,m=C.REPEAT,t=C.CLAMP_TO_EDGE,P=C.TEXTURE_MIN_FILTER;pp(C,N),C.texImage2D(W,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,u),yo(C,C.TEXTURE_MAG_FILTER,r),nc(u.width)&&nc(u.height)?(yo(C,C.TEXTURE_WRAP_S,m),yo(C,C.TEXTURE_WRAP_T,m),yo(C,P,C.LINEAR_MIPMAP_LINEAR),C.generateMipmap(W)):(yo(C,C.TEXTURE_WRAP_S,t),yo(C,C.TEXTURE_WRAP_T,t),yo(C,P,r)),pp(C,v)}return N},dd=function(a,O){var D=new Uint8Array(3);return O=O||a.createTexture(),pp(a,O),yo(a,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGB,1,1,0,a.RGB,a.UNSIGNED_BYTE,D),O},Kg=function(u){u._26I&&u._prg&&(u._26I.deleteProgram(u._prg),u._prg=v)},Yl=function(w,V,i,r){var O=w.createShader(i);return w.shaderSource(O,r),w.compileShader(O),w.attachShader(V,O),O},gi=function(f){return f.createBuffer()},pp=function(g,d){g.bindTexture(g.TEXTURE_2D,d)},Fp=function(R,V){R.bindFramebuffer(R.FRAMEBUFFER,V)},yo=function(e,I,w){e.texParameteri(e.TEXTURE_2D,I,w)},bm=function(V,A){if(A){var A=uh(A);V.clearColor(A[0],A[1],A[2],A[3])}},Rb=function(N,d){Oh(N,d.uFix,!0),Qg(N,d.aNormal)},xc=function(t,X){Oh(t,X.uFix,!1),dq(t,X.aNormal)},ai=function(t,w,H,d,N,F,g,D){t._picking||(H?(Oh(t,w.uBlend,!0),Oh(t,w.uBlendColor,H)):Oh(t,w.uBlend,!1),Oh(t,w.uLight,d==v?!0:d),$n(N)&&1!==N&&Oh(t,w.uPartOpacity,N),Oh(t,w.uReverseFlip,F==v?!1:F),Oh(t,w.uFixPickReverseColor,g||Ij)),D?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE)},Ub=function(I,d){I._picking||Oh(I,d.uPartOpacity,1)},hh=function(P,u,Q,X,l,F,c,D){if(!Q)return pp(P,P._emptyTexture),void 0;Oh(P,u.uTexture,!0),Oh(P,u.uDiscardSelectable,$g(X)?X:!0),dq(P,u.aUv),uc(P,l,F,u.aUv,2),P.activeTexture(P.TEXTURE0),pp(P,Q),P.uniform1i(u.uSampler,0);var _=[0,0,1,1];c&&(_[0]=c[0],_[1]=c[1]),D&&(_[2]=D[0],_[3]=D[1]),Oh(P,u.uOffsetScale,_)},hs=function(T,L,y){pp(T,v),y&&(Qg(T,L.aUv),Oh(T,L.uTexture,!1))},hk=function(k,V,Q,M,l,P){!Q||q||h||k.lineWidth(Q),M&&!k._picking&&Oh(k,V.uFixPickReverseColor,M),l&&uc(k,l,P,V.aPosition)},tl=function(y,m,x,X){Fn&&(X=y[Fn]),y.drawArrays(X==v?y.TRIANGLES:X,m,x)},kk=function(Q,K,W,d){Fn&&(d=Q[Fn]),Q.drawElements(d==v?Q.TRIANGLES:d,W,Q.UNSIGNED_SHORT,K==v?0:2*K)},uc=function(M,x,K,a,e){var I=M.ARRAY_BUFFER;M.bindBuffer(I,x),K&&M.bufferData(I,K,M.STATIC_DRAW),a!=v&&M.vertexAttribPointer(a,e?e:3,M.FLOAT,!1,0,0)},qe=function(c,q,H){var r=c.ELEMENT_ARRAY_BUFFER;c.bindBuffer(r,q),H&&c.bufferData(r,H,c.STATIC_DRAW)},Oh=function(K,F,H){if(H!=v&&F!=v){H=uh(H);var u=H.length;3===u?K.uniform3fv(F,H):4===u?K.uniform4fv(F,H):16===u?K.uniformMatrix4fv(F,!1,H):$g(H)?K.uniform1i(F,H?1:0):2===u?K.uniform2fv(F,H):K.uniform1f(F,H)}},dq=function(z,X){X!=v&&X>=0&&z.enableVertexAttribArray(X)},Qg=function(B,e){e!=v&&e>=0&&B.disableVertexAttribArray(e)},jr=function(K,A){var W=K.getGL(),R=K._prg;K._7O=K._8O.pop(),A&&(Oh(W,R.uMVMatrix,K._7O),K._6O=A,Oh(W,R.uNMatrix,A))},Np=function(Z,n){return n||(n=rh()),Vd(n,Z),Zj(n),gd(n),n},ul=function(E,B){var U=E.getGL(),K=E._prg,I=E._7O;B&&(E._8O.push(Yc(I)),dh(I,I,B)),Oh(U,K.uMVMatrix,I),Oh(U,K.uNMatrix,Np(I,E._6O))},mk=function(l,x,N,i,S,Z){if(N){if(i){var $=N.value++,f=[(255&$>>24)/255,(255&$>>16)/255,(255&$>>8)/255,(255&$)/255];N[$]={data:S,part:Z}}else f=Ad;return Oh(l,x.uFixPickReverseColor,f),f}},ih=function(){var d={center:function(L,I,T,h,x){var k=I[1]/2,v={x:-I[0]/2,y:k,width:I[0],height:I[1]},i=vd(L,v,T);return[i.x+h,2*k-i.y-x,Rd()]},front:function(I,R,p,C,b){var y=R[1]/2,g={x:-R[0]/2,y:y,width:R[0],height:R[1]},K=vd(I,g,p);return[K.x+C,2*y-K.y-b,R[2]/2+Rd()]},back:function(U,P,K,c,h){var b=P[0]/2,t=P[1]/2,p={x:b,y:t,width:P[0],height:P[1]},i=vd(U,p,K);return[2*b-i.x-c,2*t-i.y-h,-P[2]/2-Rd()]},left:function(x,v,X,s,j){var p=v[1]/2,R={x:-v[2]/2,y:p,width:v[2],height:v[1]},W=vd(x,R,X);return[-v[0]/2-Rd(),2*p-W.y-j,W.x+s]},right:function(A,p,n,d,L){var X=p[2]/2,T=p[1]/2,l={x:X,y:T,width:p[2],height:p[1]},Q=vd(A,l,n);return[p[0]/2+Rd(),2*T-Q.y-L,2*X-Q.x-d]},top:function(v,X,g,i,b){var U={x:-X[0]/2,y:-X[2]/2,width:X[0],height:X[2]},w=vd(v,U,g);return[w.x+i,X[1]/2+Rd(),w.y+b]},bottom:function(g,P,Z,p,d){var h=P[2]/2,o={x:-P[0]/2,y:h,width:P[0],height:P[2]},n=vd(g,o,Z);return[n.x+p,-P[1]/2-Rd(),2*h-n.y-d]}};return function(u,Y,P,j,v,E){return d[j](u,Y,P,v||0,E||0)}}(),el=function(p,N,m,s,f,o,c,C,$,z){if(f&&(N[0]+=f[0],N[1]+=f[1],N[2]+=f[2]),Ag(p,m),C){var g=rh();if(on(g,$,z),wi(N,g),Ag(p,N),p.auto=C,p.pos=wi([0,0,0],p),o){var F=p.mat2=rh();on(F,o,c)}}else on(p,$,z),Ag(p,N),s===Kp?$j(p,-x):s===be?$j(p,x):s===ph?Md(p,-x):s===ud?Md(p,x):s===uj&&$j(p,K),on(p,o,c);return p},Xo=function(I,T){var z=T.auto,u=T.mat2,m=I.gv;if(z){var L,Q=rh(),M=[0,0,0,0];L="string"==typeof z?[z.indexOf("x")<0?m._eye[0]:m._center[0],z.indexOf("y")<0?m._eye[1]:m._center[1],z.indexOf("z")<0?m._eye[2]:m._center[2]]:m._eye,Yo(M,Qh(rh(),L,m._center,m._up)),Qm(Q,Qi(M,M),T.pos),u&&dh(Q,Q,u),ul(m,Q)}else ul(m,T)},$f=function(w,Z,t,Q,W){var d=w.s,$=w.gv,p=$.getGL(),v=$._prg,O=$._buffer,R=$._1O;Fl(p,nq,R),Xo(w,t),ai(p,v,d(Z+".blend"),d(Z+".light"),d(Z+".opacity"),d(Z+".reverse.flip"),d(Z+".reverse.color"),d(Z+".reverse.cull")),hh(p,v,R,W,O.uv,_c),uc(p,O.vs,Q,v.aPosition),uc(p,O.ns,_n,v.aNormal),qe(p,O.is,nr),kk(p,0,nr.length),hs(p,v,R),Ub(p,v),jr($)},$o=function(T,C,_){var v=T.gv,e=T.data,A=T[C]={blend:v.getBodyColor(e)||v.getFaceBlend(e,C),light:v.getFaceLight(e,C),color:v.getFaceColor(e,C),opacity:v.getFaceOpacity(e,C),transparent:v.getFaceTransparent(e,C),reverseFlip:v.getFaceReverseFlip(e,C),reverseColor:v.getFaceReverseColor(e,C),reverseCull:v.getFaceReverseCull(e,C),texture:v.getFaceImage(e,C),discardSelectable:v.getFaceDiscardSelectable(e,C)};if("csg"!==C){A.uv=v.getFaceUv(e,C)||_&&_[C+"Uv"],A.uvScale=v.getFaceUvScale(e,C)||_&&_[C+"UvScale"],A.uvOffset=v.getFaceUvOffset(e,C)||_&&_[C+"UvOffset"];var U=v.getFaceMat(e,C);U&&(A.mat=Bi(e,U))}return A},Sn=function(L,V,E,b,_){if(b){if(!_(b.transparent))return;var q=L.data,R=L.gv,o=R._buffer,M=R.getTexture(b.texture,q);hh(V,E,M,b.discardSelectable,o.uv,b.tuv,b.uvOffset,b.uvScale),ai(V,E,b.blend,b.light,b.opacity,b.reverseFlip,b.reverseColor,b.reverseCull),Oh(V,E.uDiffuse,b.color),uc(V,o.vs,b.vs,E.aPosition),uc(V,o.ns,b.ns,E.aNormal),tl(V,0,b.vs.length/3),Ub(V,E),hs(V,E,M)}},Cr=function($,M,V,F,c,y){var f,Y,Z,A,g,o,b,q,h,N,r,E=[F-M,c-V],n=$?$.length:0;for(Z=0;n>Z;Z++){for(A=2,f=$[Z],g=f[0],o=f[1];A+1<f.length;){if(b=f[A],q=f[A+1],Y=ki(M,V,F,c,g,o,b,q,!0)){h=[b-g,q-o],N=Kd(h),h[0]/=N,h[1]/=N,N=lr(E,h),N=N>0?y:-y,r=[h[0]*N,h[1]*N];break}g=b,o=q,A+=2}if(r)break}if(r)for(F=M+r[0],c=V+r[1],Z=0;n>Z;Z++)for(A=2,f=$[Z],g=f[0],o=f[1];A+1<f.length;){if(b=f[A],q=f[A+1],Y=ki(M,V,F,c,g,o,b,q,!0))return[0,0];g=b,o=q,A+=2}return r?r:[F-M,c-V]},Wq=n.graph3d={},ip=function(B,t,f){Uf(Q+".graph3d."+B,t,f)},xo="~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh!gjeof$!~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj!ITBE!gfegj$!!gjeof$!~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!!gjeof$!~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!~<x{/fmbdTuftggPv!+!wVb!,!zy/fmbdTuftggPv!>!wVw|*fsvuyfUv)gj~!gjeof$!~~<*^j]opjujtpQupqTw!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEupqTw<**1/2!-^j]sfuofDupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQupqTw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~<**1/2!-^j]opjujtpQuojpQv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQuojpQw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<*opjujtpQsje!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEsjEw<**1/2!-1/1!-1/1!-1/1)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQsjEv)5dfw!+!yjsubNxfjWv)4dfw!>!opjujtpQsje!4dfw|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]sfuofDupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]opjujtpQsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<fmbdTuftggPv!5dfw!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",bc="~~<eJ!>!spmpDhbsG`mh!gjeof$!~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~!gjeof$!<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg<x/esppDhbsG`mh0{/esppDhbsG`mh!>!iuqfe!ubpmg!HPG!gfegj$!!gjeof$!~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTw)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEw)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~!gjeof$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!~<spmpd!>!eJ|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw<*yfusfWw.)f{jmbnspo!>!F!4dfw<*mbnspOw)f{jmbnspo!>!O!4dfw!gjeof$!<ftvggjEv!>!spmpd!ftmf$!~<ftvggjEv!>!spmpd|ftmf~<spmpDidubCw!>!spmpd|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!<spmpd!5dfw|!ftmf~!gjeof$!~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*!fdobutjEitbEv!?!*!fdobutjEqbHitbEv!-fdobutjEfojMw!)epn!%%!itbEv)!gj!ITBE!gfegj$!!gjeof$!<spmpDftsfwfSldjQyjGv!>!eJ!ftmf$!~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*yjGv)gj<eJ!5dfw|ftmf~!gjeof$!<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh!ftmf$!~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*ldjQv)gj~~~<1/2!>!b/spmpDwv|ftmf~<esbdtje|*5/1!=!b/spmpDwv)gj|ftmf~~<esbdtje|*1/1!>>!b/spmpDwv)gj|*uofsbqtobsUv)gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov<spmpDhpGv!5dfw!nspgjov!HPG!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<spmpDuihjmebfIv!5dfw!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUv!mppc!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov<uofsbqtobsUv!mppc!nspgjov!YJGFSQ!gjeof$!!gjeof$!!<ubpmg!qnvjefn!opjtjdfsq!!ftmf$!!<ubpmg!qihji!opjtjdfsq!!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!!TF`MH!gfegj$!";ik(r,{setBatchInfo:function(t,H){Im[t]=H},getBatchInfo:function(x){return Im[x]}},!0);var sh=[1,1,1],mo=[1,0,0,0,0,1,0,1,1,1,1,0],gs=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],oc=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],fm=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],Pd=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],yf=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],fc=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],dg=function(M,c){Ch(M,c),ij(M,c,"_wireframeModelMap","_wireframeIndexMap"),ij(M,c,"_polylineModelMap","_polylineIndexMap")},Ch=function(l,E){if(E){var f,y,_=E._id,Z=l._33O,z=l._34O,k=z[_];if(k){y=k.batch,f=Z[y];var c=k.begin,D=k.size,s=3*c,Q=3*D,m=4*c,U=4*D,w=f.vs,M=f.uv,O=f.cs,T=f.bs,I=f.rs,u=f.ds,$=k.index;if(f.invalidate=!0,delete z[_],u.splice($,1),df(u))delete Z[y];else{for(;$<u.length;$++)k=z[u[$]._id],k.index--,k.begin-=D;w.splice(s,Q),f.ns.splice(s,Q),f.ps.splice(m,U),M&&M.splice(2*c,2*D),O&&O.splice(m,U),T&&T.splice(s,Q),I&&I.splice(c,D)}}}else l._34O={},l._33O={}},ij=function(H,Y,r,n){if(Y){var t,m,q=Y._id,k=H[r],O=H[n],M=O[q];if(M){m=M.batch,t=k[m];var F=M.begin,Z=M.size,j=3*F,V=3*Z,$=4*F,Q=4*Z,K=t.ds,D=M.index;if(t.invalidate=!0,delete O[q],K.splice(D,1),df(K))delete k[m];else{for(;D<K.length;D++)M=O[K[D]._id],M.index--,M.begin-=Z;t.vs.splice(j,V),t.cs.splice($,Q),t.ps.splice($,Q),t.ls&&t.ls.splice(F,Z)}}}else H[r]={},H[n]={}},gh=function(W,e,c,H){if(!H)return v;var K=e[H];if(!K){var t=Im[H]||Hg,G=t.image?[]:v;K=e[H]={vs:[],ns:[],uv:G,cs:G?v:t.color?v:[],bs:t.blend?[]:v,ps:[],rs:t.brightness?[]:v,ds:[]}}return K.invalidate=!0,W[c._id]={index:K.ds.length,begin:K.vs.length/3,batch:H},K.ds.push(c),K},Rp=function(x,s){return s!=v&&1!==s?[x[0]*s,x[1]*s,x[2]*s,x[3]]:x},Tj=function(O,x,Q){var d=O.getBrightness(x),Z=uh(Q.color||"white"),Y=Z[3]<1,N=Math.ceil(Q.width)||1,D=(Y?"T":"O")+N,t=O._wireframeIndexMap,R=O._wireframeModelMap,$=R[D];$||($=R[D]={vs:[],cs:[],ps:[],ds:[],T:Y,W:N}),$.invalidate=!0;var v=$.vs,e=$.cs,b=$.ds,U=t[x._id]={index:b.length,begin:v.length/3,batch:D};b.push(x),lb(v,Bi(x,Q.mat),Q.short?Oe:Kk);var H=U.size=v.length/3-U.begin;Tl(e,Rp(Z,d),H)},jf=function(Q,Z,H,s,n,r,g,e,l){var W=Q.getBrightness(Z);W==v&&(W=1);var A=Rp(uh(s),W),b=A[3]<1;r=Math.ceil(r)||1;var w=(b?"T":"O")+r;if(g){var f=g[0],m=(g[1]||f)+f;w+="-"+f+"-"+m,l&&(w+="-"+Og(l)+"-"+W,l=Rp(uh(l),W))}var Y=Q._polylineIndexMap,O=Q._polylineModelMap,X=O[w];X||(X=O[w]={vs:[],cs:[],ps:[],ds:[],ls:g?[]:v,T:b,W:r},g&&(X.D=f,X.G=m,X.A=l)),X.invalidate=!0;var B,o=X.vs,E=X.cs,h=X.ds,T=X.ls,$=Y[Z._id]={index:h.length,begin:o.length/3,batch:w};h.push(Z),Cl(o,H);var k,S=$.size=o.length/3-$.begin,u=H.length,I=0,q=[];if(g||n)for(B=0;u>B;B+=6)k=Kd([H[B],H[B+1],H[B+2]],[H[B+3],H[B+4],H[B+5]]),q.push(k),I+=k;if(I&&n){var U,N=Rp(uh(n),W),i=[N[0]-A[0],N[1]-A[1],N[2]-A[2],N[3]-A[3]],F=0;for(B=0;u>B;B+=6)U=F/I,Tl(E,[A[0]+i[0]*U,A[1]+i[1]*U,A[2]+i[2]*U,A[3]+i[3]*U],1),F+=q[B/6],U=F/I,Tl(E,[A[0]+i[0]*U,A[1]+i[1]*U,A[2]+i[2]*U,A[3]+i[3]*U],1)}else Tl(E,A,S);if(g)for(F=e||0,B=0;u>B;B+=6)T.push(F),F+=q[B/6],T.push(F)},wo=function(W,B,$){if(B)for(var c=4*B.begin,H=$[B.batch].ps,R=0;R<B.size;R++)H[c++]=W[0],H[c++]=W[1],H[c++]=W[2],H[c++]=W[3]},Ar=function(p,$){var H=$+["32"],g=p[$],X=p[H];g?X&&X.length===g.length?X.set(g):p[H]=new bk(g):delete p[H]},nl=function(P,I,Z,W,V,Y,m,B,n){if(ym(Z))Z.forEach(function(x){nl(P,I,x,W,V,Y,m,B,n)});else if(hb(Z))nl(P,I,Di(W,Z),W,V,Y,m,B,n);else if(Dj(Z)){var d,X=hf(Z.mat,I,P),L=hf(Z.s3,I,P),f=hf(Z.t3,I,P),j=hf(Z.r3,I,P);if((L||j||f||X)&&(d=qd(X,L,j,hf(Z.rotationMode,I,P),f),Y.push(d)),Z.shape3d)nl(P,I,Z.shape3d,W,V,Y,m,B,Z);else{var R=W.s;n=n||Hg;var p=Y[0],b=Y.length,y=R("shape3d.color",Z.color,n.color);if(V||(V=R("shape3d.blend",Z.blend,n.blend)),b>1){p=Yc(p);for(var A=1;b>A;A++)dh(p,p,Y[A])}Z.vs&&R(cc,Z.visible,n.visible)&&bp(p,m,B,Z.vs,Z.uv,Z.is,V,y),Z.top_vs&&R(yp,Z.topVisible,n.topVisible)&&bp(p,m,B,Z.top_vs,Z.top_uv,Z.top_is,V,R("shape3d.top.color",Z.topColor,n.topColor)||y),Z.bottom_vs&&R(Bg,Z.bottomVisible,n.bottomVisible)&&bp(p,m,B,Z.bottom_vs,Z.bottom_uv,Z.bottom_is,V,R("shape3d.bottom.color",Z.bottomColor,n.bottomColor)||y),Z.from_vs&&R(ho,Z.fromVisible,n.fromVisible)&&bp(p,m,B,Z.from_vs,Z.from_uv,Z.from_is,V,R("shape3d.from.color",Z.fromColor,n.fromColor)||y),Z.to_vs&&R(Xk,Z.toVisible,n.toVisible)&&bp(p,m,B,Z.to_vs,Z.to_uv,Z.to_is,V,R("shape3d.to.color",Z.toColor,n.toColor)||y)}d&&Y.pop()}},bp=function($,o,T,Z,j,H,Q,d){var y,I=o.cs,Y=o.uv,W=o.bs;if(H){y=H.length;for(var g=0;y>g;g++){var b=H[g];lb(T,$,[Z[3*b],Z[3*b+1],Z[3*b+2]]),Y&&Cl(Y,[j[2*b],j[2*b+1]])}}else y=Z.length/3,lb(T,$,Z),Y&&Cl(Y,j);I&&Tl(I,d,y),W&&(Q?Pg(W,Q,y):Cl(W,sh,y))},js=function(v,B,e,F){var s=[];F?nl(v.gv,v.data,F,v,v.getBodyColor(),[B],e,s):(Ff(v,Kp,B,e,s),Ff(v,be,B,e,s),Ff(v,Cf,B,e,s),Ff(v,uj,B,e,s),Ff(v,ph,B,e,s),Ff(v,ud,B,e,s),Ff(v,"csg",B,e,s)),s.length&&(Cl(e.vs,s),Cl(e.ns,Ki(s)))},Ff=function(e,V,d,Q,o){var H=e[V];if(H){var i=H.tuv;if(i){var w,u,q,g,Y=H.uvScale,n=H.uvOffset;if(Y)for(w=i.length,u=Y[0],q=Y[1],g=0;w>g;g+=2)i[g]*=u,i[g+1]*=q;if(n)for(w=i.length,u=n[0],q=n[1],g=0;w>g;g+=2)i[g]+=u,i[g+1]+=q}bp(d,Q,o,H.vs,i,v,H.blend,H.color)}},Ac=function(W,k,m,P,q,g,v,w){var J,Q=m.cs,d=m.uv,N=m.bs;if(W.getFaceVisible(k,g)){var T=W.getFaceMat(k,g);if(T&&(q=Bi(k,T)),lb(v,q,w),Q&&Tl(Q,W.getFaceColor(k,g),6),d){var M=W.getFaceUv(k,g)||P[g+"Uv"],e=W.getFaceUvScale(k,g)||P[g+"UvScale"],b=W.getFaceUvOffset(k,g)||P[g+"UvOffset"];M=M?[M[6],M[7],M[0],M[1],M[2],M[3],M[2],M[3],M[4],M[5],M[6],M[7]]:mo;var o=M[0],L=M[1],z=M[2],t=M[3],i=M[4],O=M[5],r=M[6],l=M[7],Y=M[8],f=M[9],n=M[10],R=M[11];if(e){var S=e[0],X=e[1];o*=S,L*=X,z*=S,t*=X,i*=S,O*=X,r*=S,l*=X,Y*=S,f*=X,n*=S,R*=X}if(b){var H=b[0],j=b[1];o+=H,L+=j,z+=H,t+=j,i+=H,O+=j,r+=H,l+=j,Y+=H,f+=j,n+=H,R+=j}d.push(o,L,z,t,i,O,r,l,Y,f,n,R)}N&&(J=W.getBodyColor(k)||W.getFaceBlend(k,g),J?Pg(N,J,6):Cl(N,sh,6))}},Db=function(i,Z,b,G){var V=i.getGL(),U=i._prg,X=i._buffer;if(!$e(Z)){ul(i),Rb(V,U);for(var O in Z){var h=Z[O];if(!(G&&!h.T||!G&&h.T)){h.invalidate?(h.invalidate=!1,Ar(h,"vs"),Ar(h,"cs"),Ar(h,"ls"),Ar(h,"ps")):b&&Ar(h,"ps");var e=h.vs32,S=b?h.ps32:h.cs32;hk(V,U,h.W,v,X.vs,e);var q=h.D,K=!i._dashDisabled&&q;K&&(Oh(V,U.uDash,!0),Oh(V,U.uDashDistance,q),Oh(V,U.uDashGapDistance,h.G),dq(V,U.aLineDistance),uc(V,X.lineDistance,h.ls32,U.aLineDistance,1),Oh(V,U.uDiffuse,h.A||cj));var Y=!i._batchColorDisabled;Y&&(Oh(V,U.uBatchColor,!0),dq(V,U.aBatchColor),uc(V,X.batchColor,S,U.aBatchColor,4)),hh(V),tl(V,0,e.length/3,V.LINES),hs(V),Y&&(Oh(V,U.uBatchColor,!1),Qg(V,U.aBatchColor)),K&&(Oh(V,U.uDash,!1),Qg(V,U.aLineDistance))}}xc(V,U)}},af=function(u,J,b){var Z,m,c,d,E,T,x,D,H,o,L,G=u.getGL(),j=u._prg,M=u._buffer,C=u._33O;if(!$e(C)){ul(u);for(Z in C)if(m=Im[Z]||Hg,!(b&&!m.transparent||!b&&m.transparent)&&(c=C[Z],J||!m.transparentMask)){var r=b&&m.autoSort!==!1&&(u._33Q||c.invalidate);if(c.invalidate?(c.invalidate=!1,Ar(c,"vs"),Ar(c,"ns"),Ar(c,"cs"),Ar(c,"rs"),Ar(c,"ps"),Ar(c,"bs"),Ar(c,"uv")):J&&Ar(c,"ps"),E=c.vs32,T=J?c.ps32:c.cs32,H=c.uv32,x=c.bs32,D=c.rs32,L=E.length/3,r&&(c.is=Vo(E,u.getEye())),L){d=m.light,o=u.getTexture(m.image),ai(G,j,v,m.light,m.opacity,m.reverseFlip,m.reverseColor,m.reverseCull),T?u._batchColorDisabled||(Oh(G,j.uBatchColor,!0),dq(G,j.aBatchColor),uc(G,M.batchColor,T,j.aBatchColor,4)):Oh(G,j.uDiffuse,m.color);var Y=x&&!u._batchBlendDisabled;Y&&(Oh(G,j.uBatchBlend,!0),dq(G,j.aBatchBlend),uc(G,M.batchBlend,x,j.aBatchBlend));var e=D&&!u._batchBrightnessDisabled;e&&(Oh(G,j.uBatchBrightness,!0),dq(G,j.aBatchBrightness),uc(G,M.batchBrightness,D,j.aBatchBrightness,1)),H?hh(G,j,o,m.discardSelectable,M.uv,H,m.uvOffset,m.uvScale):hh(G),uc(G,M.vs,E,j.aPosition),uc(G,M.ns,c.ns32,j.aNormal),c.is?(qe(G,M.is,c.is),kk(G,0,L)):tl(G,0,L),H?hs(G,j,o):hs(G),T&&!u._batchColorDisabled&&(Oh(G,j.uBatchColor,!1),Qg(G,j.aBatchColor)),Y&&(Oh(G,j.uBatchBlend,!1),Qg(G,j.aBatchBlend)),e&&(Oh(G,j.uBatchBrightness,!1),Qg(G,j.aBatchBrightness)),Ub(G,j)}}}},Vo=function(Z,u){for(var e=Z.length/3,p=new Array(e),o=e/3,E=new Array(o),S=0;o>S;S++)E[S]=S;E.sort(function(E,b){var y=9*E,d=[(Z[y]+Z[y+3]+2*Z[y+6])/4,(Z[y+1]+Z[y+4]+2*Z[y+7])/4,(Z[y+2]+Z[y+5]+2*Z[y+8])/4];y=9*b;var q=[(Z[y]+Z[y+3]+2*Z[y+6])/4,(Z[y+1]+Z[y+4]+2*Z[y+7])/4,(Z[y+2]+Z[y+5]+2*Z[y+8])/4],B=Kd(u,d)-Kd(u,q);return B>0?-1:0>B?1:0});for(var S=0;o>S;S++){var R=3*S,J=3*E[S];p[R]=J,p[R+1]=J+1,p[R+2]=J+2}return new Zm(p)},_c=new bk([0,0,0,1,1,1,1,0]),_n=new bk([0,0,1,0,0,1,0,0,1,0,0,1]),nr=new Zm([0,1,2,2,3,0]),bn=new bk([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),ys=new Zm([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),ws=new bk([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),mr=new bk([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),Nj=Ki(bn,ys),Kk=(new bk([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new Zm([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5]),Oe=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],Ie=function(x,k,N,o,i,Q){Q=Q||16,x=x||16,k=k||0,N=N||x;var H,l,E,f,w,B,g,F,r=.5,p=[],s=[],h=X/x,b=K/Q;for(H=0;Q>H;H++)for(w=H+1,f=H*b,F=w*b,l=k;N>l;l++)B=l+1,E=l*h,g=B*h,p.push(r*j(f)*C(E),r*C(f),-r*j(f)*j(E),r*j(F)*C(g),r*C(F),-r*j(F)*j(g),r*j(f)*C(g),r*C(f),-r*j(f)*j(g),r*j(f)*C(E),r*C(f),-r*j(f)*j(E),r*j(F)*C(E),r*C(F),-r*j(F)*j(E),r*j(F)*C(g),r*C(F),-r*j(F)*j(g)),s.push(l/x,H/Q,B/x,w/Q,B/x,H/Q,l/x,H/Q,l/x,w/Q,B/x,w/Q);if(o){var z=[],y=[];for(E=k*h,H=0;Q>H;H++)w=H+1,f=H*b,F=w*b,z.push(0,0,0,r*j(F)*C(E),r*C(F),-r*j(F)*j(E),r*j(f)*C(E),r*C(f),-r*j(f)*j(E)),y.push(0,.5,k/x,w/Q,k/x,H/Q)}if(i){var G=[],q=[];for(E=N*h,H=0;Q>H;H++)w=H+1,f=H*b,F=w*b,G.push(0,0,0,r*j(f)*C(E),r*C(f),-r*j(f)*j(E),r*j(F)*C(E),r*C(F),-r*j(F)*j(E)),q.push(1,.5,N/x,H/Q,N/x,w/Q)}return{vs:p,uv:s,from_vs:z,from_uv:y,to_vs:G,to_uv:q}},ap=function(r,e,p){r=r||.17,e=e||12,p=p||18,0>r?r=0:r>.25&&(r=.25);var E,O,R,f,c,y,v,t=.5,i=[],L=[],h=[],$=X/p,D=X/e,k=t-r;for(O=0;e>=O;O++)for(f=-K+O*D,y=C(f),c=j(f),E=0;p>=E;E++)R=E*$,v=k+r*y,i.push(C(R)*v,c*r,-j(R)*v),L.push(E/p,1-O/e);for(O=0;e>O;O++){var H=O*(p+1),b=(O+1)*(p+1);for(E=0;p>E;E++)h.push(H+E,b+E+1,b+E,H+E,H+E+1,b+E+1)}return{vs:i,uv:L,is:h}},Vp=function(g,F,I,l,q,Z,p){p=p||12,g=g||18,F=F||0,I=I||g,Z=Z||.17,0>Z?Z=0:Z>.25&&(Z=.25);var r,u,c,v,A,b,i,W,w,x,$=.5,m=[],P=[],k=X/g,V=X/p,H=$-Z;for(c=0;p>c;c++)for(v=c+1,i=-K+c*V,W=-K+v*V,r=F;I>r;r++)u=r+1,A=r*k,b=u*k,w=H+Z*C(i),x=H+Z*C(W),m.push(C(A)*w,j(i)*Z,-j(A)*w,C(b)*w,j(i)*Z,-j(b)*w,C(b)*x,j(W)*Z,-j(b)*x,C(A)*w,j(i)*Z,-j(A)*w,C(b)*x,j(W)*Z,-j(b)*x,C(A)*x,j(W)*Z,-j(A)*x),P.push(r/g,1-c/p,u/g,1-c/p,u/g,1-v/p,r/g,1-c/p,u/g,1-v/p,r/g,1-v/p);if(l){var o=[],T=[];for(c=0;p>c;c++)v=c+1,i=-K+c*V,W=-K+v*V,A=F*k,w=H+Z*C(i),x=H+Z*C(W),o.push(C(A)*w,j(i)*Z,-j(A)*w,C(A)*x,j(W)*Z,-j(A)*x,C(A)*H,0,-j(A)*H),T.push(.5+.5*C(i),.5-.5*j(i),.5+.5*C(W),.5-.5*j(W),.5,.5)}if(q){var a=[],B=[];for(c=0;p>c;c++)v=c+1,i=-K+c*V,W=-K+v*V,A=I*k,w=H+Z*C(i),x=H+Z*C(W),a.push(C(A)*w,j(i)*Z,-j(A)*w,C(A)*H,0,-j(A)*H,C(A)*x,j(W)*Z,-j(A)*x),B.push(.5-.5*C(i),.5-.5*j(i),.5,.5,.5-.5*C(W),.5-.5*j(W))}return{vs:m,uv:P,from_vs:o,from_uv:T,to_vs:a,to_uv:B}},Fj=function(t,g){for(var x,F,N,$=.5,Q=16,i=[],m=[],z=[],A=X/Q,l=0;Q>=l;l++)x=l*A,F=C(x)*$,N=j(x)*$,i.push(F,-$,N,F,$,N),m.push(1-l/Q,1,1-l/Q,0);for(l=0;Q>l;l++)z.push(2*l,2*l+1,2*l+3,2*l,2*l+3,2*l+2);if(g){var I=[],q=[],c=[];for(I.push(0,-$,0),q.push(.5,.5),l=0;Q>=l;l++)x=l*A,F=C(x),N=j(x),I.push(F*$,-$,-N*$),q.push(.5+.5*F,.5+.5*N);for(l=0;Q>l;l++)c.push(0,l+2,l+1)}if(t){var O=[],S=[],Z=[];for(O.push(0,$,0),S.push(.5,.5),l=0;Q>=l;l++)x=l*A,F=C(x),N=j(x),O.push(F*$,$,-N*$),S.push(.5+.5*F,.5-.5*N);for(l=0;Q>l;l++)Z.push(0,l+1,l+2)}return{vs:i,uv:m,is:z,bottom_vs:I,bottom_uv:q,bottom_is:c,top_vs:O,top_uv:S,top_is:Z}},Ro=function(u,P,K,W,G,t,H){u=u||12,P=P||0,K=K||u;for(var _,f,v,h,l,M,$,r,A=.5,U=[],T=[],E=X/u,R=P;K>R;R++)_=R+1,f=R*E,v=_*E,h=C(f)*A,l=j(f)*A,M=C(v)*A,$=j(v)*A,U.push(h,-A,-l,M,-A,-$,h,A,-l,M,-A,-$,M,A,-$,h,A,-l),T.push(R/u,1,_/u,1,R/u,0,_/u,1,_/u,0,R/u,0);if(H){var c=[],N=[];for(R=P;K>R;R++)f=E*R,v=E*(R+1),h=C(f),l=j(f),M=C(v),$=j(v),c.push(h*A,-A,-l*A,0,-A,0,M*A,-A,-$*A),N.push(.5+.5*h,.5+.5*l,.5,.5,.5+.5*M,.5+.5*$)}if(t){var d=[],J=[];for(R=P;K>R;R++)f=E*R,v=E*(R+1),h=C(f),l=j(f),M=C(v),$=j(v),d.push(h*A,A,-l*A,M*A,A,-$*A,0,A,0),J.push(.5+.5*h,.5-.5*l,.5+.5*M,.5-.5*$,.5,.5)}if(W){var q=[],V=[];f=E*P,h=C(f)*A,l=j(f)*A,r=P/u,q.push(0,A,0,0,-A,0,h,-A,-l,h,-A,-l,h,A,-l,0,A,0),V.push(0,0,0,1,r,1,r,1,r,0,0,0)}if(G){var n=[],y=[];f=E*K,h=C(f)*A,l=j(f)*A,r=K/u,n.push(0,-A,0,0,A,0,h,A,-l,h,A,-l,h,-A,-l,0,-A,0),y.push(1,1,1,0,r,0,r,0,r,1,1,1)}return{vs:U,uv:T,bottom_vs:c,bottom_uv:N,top_vs:d,top_uv:J,from_vs:q,from_uv:V,to_vs:n,to_uv:y}},Bf=function(U,s,_,q,w){s=s||18,_=_||0,q=q==v?X:q,w=w==v?.5:w;for(var S,O,Z,E,r,I,Q=[0,.5,.75,.875,.9375],e=[],M=[],J=[],L=q/s,b=0;b<Q.length;b++){var f=0===b%2?0:.5;for(S=0;s>=S;S++)O=(S+f)*L+_,Z=1-Q[b],e.push(C(O)*w*Z,-w+2*Q[b]*w,-j(O)*w*Z),M.push((S+f)/s,Z)}for(b=0;b<Q.length-1;b++){var m=b*(s+1),t=(b+1)*(s+1);
for(S=0;s>S;S++)J.push(m+S,t+S+1,t+S,m+S,m+S+1,t+S+1)}for(I=e.length/3-(s+1),S=0;s>S;S++)e.push(0,w,0),M.push((S+.5)/s,0);for(S=0;s>S;S++)J.push(I+S,I+S+1,I+(s+1)+S);if(U){var l=[],F=[],P=[];for(l.push(0,-w,0),F.push(.5,.5),S=0;s>=S;S++)O=S*L+_,E=C(O),r=j(O),l.push(E*w,-w,-r*w),F.push(.5+.5*E,.5+.5*r);for(S=0;s>S;S++)P.push(0,S+2,S+1)}return{vs:e,uv:M,is:J,bottom_vs:l,bottom_uv:F,bottom_is:P}},Xb=function(l,k,$,V,L,B){l=l||16,k=k||0,$=$||l;for(var d=.5,S=[],I=[],s=X/l,Z=k;$>Z;Z++){var R=Z+1,z=s*Z,p=s*R;S.push(C(z)*d,-d,-j(z)*d,C(p)*d,-d,-j(p)*d,0,d,0),I.push(Z/l,1,R/l,1,(Z+R)/2/l,0)}if(B){var N=[],G=[];for(Z=k;$>Z;Z++){z=s*Z,p=s*(Z+1);var v=C(z),W=j(z),c=C(p),q=j(p);N.push(v*d,-d,-W*d,0,-d,0,c*d,-d,-q*d),G.push(.5+.5*v,.5+.5*W,.5,.5,.5+.5*c,.5+.5*q)}}if(V){var o=[],t=[];z=s*k,o.push(0,d,0,0,-d,0,C(z)*d,-d,-j(z)*d),t.push(0,0,0,1,k/l,1)}if(L){var T=[],f=[];z=s*$,T.push(0,-d,0,0,d,0,C(z)*d,-d,-j(z)*d),f.push(1,1,1,0,$/l,1)}return{vs:S,uv:I,bottom_vs:N,bottom_uv:G,from_vs:o,from_uv:t,to_vs:T,to_uv:f}},_k=function(_,Y,G,Z,H,w,T,U){for(var t=[],J=0;J<_.length-1;J+=2)t.push({x:_[J],y:_[J+1]});return ng(t,Y,G,Z,H,w,T,U,!1)},kd={roundRect:function(u,q){return _k([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],u,q,3)},star:function(Q,G){return _k([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],Q,G)},rect:function(y,R){return _k([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],y,R)},triangle:function(H,P){return _k([0,-.5,.5,.5,-.5,.5],[1,2,2,5],H,P)},rightTriangle:function(r,C){return _k([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],r,C)},parallelogram:function($,n){return _k([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],$,n)},trapezoid:function(E,v){return _k([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],E,v)}},Jo={sphere:1,cylinder:1,cone:1,torus:1},iq={torus:1,sphere:1},Zr=ik(ui(kd),{cylinder:1}),lh=ik(ui(kd),{cylinder:1,cone:1}),sp=function(q,G,w){var g,M=hf(q.mat,w,G),l=hf(q.s3,w,G),T=hf(q.t3,w,G),z=hf(q.r3,w,G);return(l||z||T||M)&&(g=Yc(G._6O),ul(G,qd(M,l,z,hf(q.rotationMode,w,G),T))),g},aq=function(y,l,Z,E,J,S,R){if(ym(Z))Z.forEach(function(g){aq(y,l,g,E,J,S,R)});else if(hb(Z))aq(y,l,Di(E,Z),E,J,S,R);else if(Dj(Z))if(Z.shape3d){var O=sp(Z,y,l);aq(y,l,Z.shape3d,E,J,S,Z),O&&jr(y,O)}else qi(y,l,Z,E.s,J,S,R)},qi=function(e,X,o,k,R,O,D){if(D=D||Hg,!O||O(k("shape3d.transparent",o.transparent,D.transparent))){var f=sp(o,e,X);Hr(o);var M=e._26I,V=e._prg,s=e._buffer,U=k("shape3d.color",o.color,D.color);R||(R=k("shape3d.blend",o.blend,D.blend)),ai(M,V,R,k("shape3d.light",o.light,D.light),k("shape3d.opacity",o.opacity,D.opacity),k("shape3d.reverse.flip",o.reverseFlip,D.reverseFlip),k("shape3d.reverse.color",o.reverseColor,D.reverseColor),k("shape3d.reverse.cull",o.reverseCull,D.reverseCull)),o.vs&&k(cc,o.visible,D.visible)&&Hf(M,V,s,U,e.getTexture(k("shape3d.image",o.image,D.image),X),k("shape3d.discard.selectable",o.discardSelectable,D.discardSelectable),o.vs,o.uv,o.ns,o.is,k("shape3d.uv.offset",o.uvOffset,D.uvOffset),k("shape3d.uv.scale",o.uvScale,D.uvScale)),o.top_vs&&k(yp,o.topVisible,D.topVisible)&&Hf(M,V,s,k("shape3d.top.color",o.topColor,D.topColor)||U,e.getTexture(k("shape3d.top.image",o.topImage,D.topImage),X),k("shape3d.top.discard.selectable",o.topDiscardSelectable,D.topDiscardSelectable),o.top_vs,o.top_uv,o.top_ns,o.top_is,k("shape3d.top.uv.offset",o.topUvOffset,D.topUvOffset),k("shape3d.top.uv.scale",o.topUvScale,D.topUvScale)),o.bottom_vs&&k(Bg,o.bottomVisible,D.bottomVisible)&&Hf(M,V,s,k("shape3d.bottom.color",o.bottomColor,D.bottomColor)||U,e.getTexture(k("shape3d.bottom.image",o.bottomImage,D.bottomImage),X),k("shape3d.bottom.discard.selectable",o.bottomDiscardSelectable,D.bottomDiscardSelectable),o.bottom_vs,o.bottom_uv,o.bottom_ns,o.bottom_is,k("shape3d.bottom.uv.offset",o.bottomUvOffset,D.bottomUvOffset),k("shape3d.bottom.uv.scale",o.bottomUvScale,D.bottomUvScale)),o.from_vs&&k(ho,o.fromVisible,D.fromVisible)&&Hf(M,V,s,k("shape3d.from.color",o.fromColor,D.fromColor)||U,e.getTexture(k("shape3d.from.image",o.fromImage,D.fromImage),X),k("shape3d.from.discard.selectable",o.fromDiscardSelectable,D.fromDiscardSelectable),o.from_vs,o.from_uv,o.from_ns,o.from_is,k("shape3d.from.uv.offset",o.fromUvOffset,D.fromUvOffset),k("shape3d.from.uv.scale",o.fromUvScale,D.fromUvScale)),o.to_vs&&k(Xk,o.toVisible,D.toVisible)&&Hf(M,V,s,k("shape3d.to.color",o.toColor,D.toColor)||U,e.getTexture(k("shape3d.to.image",o.toImage,D.toImage),X),k("shape3d.to.discard.selectable",o.toDiscardSelectable,D.toDiscardSelectable),o.to_vs,o.to_uv,o.to_ns,o.to_is,k("shape3d.to.uv.offset",o.toUvOffset,D.toUvOffset),k("shape3d.to.uv.scale",o.toUvScale,D.toUvScale)),Ub(M,V),f&&jr(e,f)}},Hf=function(X,r,T,$,f,B,d,Q,o,t,h,b){d&&(Oh(X,r.uDiffuse,$),Q?hh(X,r,f,B,T.uv,Q,h,b):hh(X),uc(X,T.vs,d,r.aPosition),uc(X,T.ns,o,r.aNormal),t?(qe(X,T.is,t),kk(X,0,t.length)):tl(X,0,d.length/3),Q?hs(X,r,f):hs(X))},Di=function(a,m){var f=a.s;if(m||(m=f(Ai)),!m)return v;if(Dj(m))return m;var P=Bd[m];if(P)return P;if("text"===m){var n={amount:f("shape3d.text.amount"),size:f("shape3d.text.size"),font:f("shape3d.text.font"),style:f("shape3d.text.style"),weight:f("shape3d.text.weight"),fill:f("shape3d.text.fill"),curveSegments:f("shape3d.text.curveSegments"),spacing:f("shape3d.text.spacing")},u=a.gv.getShape3dText(a.data),H=u;for(var M in n)H+="_"+(n[M]===z?"U":n[M]);return a._cachedTextKey===H?a._cachedTextGeometry:(a._cachedTextKey=H,a._cachedTextGeometry=r.createTextGeometry(u,n))}var M=m;if(Jo[m]){var l=f("shape3d.side"),D=f("shape3d.side.from"),X=f("shape3d.side.to"),b=f(ho),S=f(Xk);3>l?(l=0,D=0,X=0,b=!1,S=!1):((D==v||0>D)&&(D=0),(X==v||X>l)&&(X=l),0===D&&X===l&&(b=!1,S=!1)),M+="-"+l+"-"+D+"-"+X+"-"+b+"-"+S}if(Zr[m]){var W=f(yp);M+="-"+W}if(lh[m]){var G=f(Bg);M+="-"+G}if("torus"===m){var e=f("shape3d.torus.radius");0>e?e=0:e>.25&&(e=.25),M+="-"+e}if(iq[m]){var N=f(Mj);M+="-"+N}return P=mq[M],P||("box"===m?P=r.createBoxModel():kd[m]?P=kd[m](W,G):"sphere"===m?P=r.createSphereModel(l,D,X,b,S,N):m===Wc?P=r.createCylinderModel(l,D,X,b,S,W,G):"cone"===m?P=r.createConeModel(l,D,X,b,S,G):"torus"===m&&(P=r.createTorusModel(l,D,X,b,S,e,N)),mq[M]=P),P},Hr=function(){var u=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],P=["is","top_is","bottom_is","from_is","to_is"];return d=Dq(xo.substr(xo.indexOf("^#")+2)),qj(r[Lf(xd+u[15]+"n"+u[16])]())&&ak()?function($){$&&!$._complete_&&($._complete_=!0,$.vs&&df($.ns)&&($.ns=Ki($.vs,$.is)),$.top_vs&&df($.top_ns)&&($.top_ns=Ki($.top_vs,$.top_is)),$.bottom_vs&&df($.bottom_ns)&&($.bottom_ns=Ki($.bottom_vs,$.bottom_is)),$.from_vs&&df($.from_ns)&&($.from_ns=Ki($.from_vs,$.from_is)),$.to_vs&&df($.to_ns)&&($.to_ns=Ki($.to_vs,$.to_is)),u.forEach(function(O){var u=$[O];ym(u)&&($[O]=new bk(u))}),P.forEach(function(w){var l=$[w];ym(l)&&($[w]=new Zm(l))}))}:void 0}(),Yp=function(j,E){var Z=j[E];ym(Z)&&(j[E]=new bk(Z))};ik(Af,{_25Q:function(q){q._16O=function(r,I,x,U,v,e,G,z,R){var K=this.info;if(K){var l,S,P,A,q,u,t=rh();if(xp[I]?(l=K.p3,S=K.c1,P=K.c2):up[I]?(S=K.s1||K.c1,P=K.s2||K.c2):(S=K.t1||K.c1,P=K.t2||K.c2),l)u=ih(I,hp,x,U,z,R);else{var Z=Fk(P,S),b=Kd(S,P);A=[0,-B(Z[2],Z[0]),D(Z[1]/b)],q="zyx",l=[(S[0]+P[0])/2,(S[1]+P[1])/2,(S[2]+P[2])/2],u=ih(I,[b,0,0],x,U,z,R)}return el(t,u,l,U,v,e,G,r,A,q)}return Lo},q._80o=function(u,Y,D){var G=this,f=G.shapeModel;if(f){var L=G.gv;ul(L),aq(L,G.data,f,G,G.getBodyColor(),D)}},q.createLineModel=function(X,O,g,U,y){for(var x=this,n=x.s,s=Je(X,O,n(Mj)),q=[],V=0;V<s.length;V++){var p=s[V],i=p.length;if(i>1){var a=p[0];q.push(a.x,a.y,a.z);for(var L=1;i-1>L;L++)a=p[L],q.push(a.x,a.y,a.z),q.push(a.x,a.y,a.z);a=p[i-1],q.push(a.x,a.y,a.z)}}var e,$,T,M=n(U+".color"),C=n(y),r=0;return C&&($=n(y+".color"),e=n(y+".pattern"),r=n(y+".offset"),T=M),jf(x.gv,x.data,q,$||M,T?v:n(U+".gradient.color"),g,e||n(U+".pattern"),r,T),s},q.createTubeModel=function(q,d,G,O){for(var Y=this,e=Y.s,o=e("shape3d.side")||Hq,H=e("shape3d.start.angle"),B=e(yp)?e("shape3d.top.cap"):v,c=e(Bg)?e("shape3d.bottom.cap"):v,K="flat"===B,$="flat"===c,L=K&&(O?O.uv:e("shape3d.top.image")),w=$&&(O?O.uv:e("shape3d.bottom.image")),j=O?O.uv:e("shape3d.image"),M={vs:[],uv:j?[]:v,top_vs:K?[]:v,top_uv:L?[]:v,bottom_vs:$?[]:v,bottom_uv:w?[]:v},P=Je(q,d,e(Mj),G),N=0,I=P.length;I>N;N++)Zh(M,P[N],e(yi),G,o,H,B,c);if(O){var p=[];nl(Y.gv,Y.data,M,Y,Y.getBodyColor(),[],O,p),p.length&&(Cl(O.vs,p),Cl(O.ns,Ki(p)))}else Y.shapeModel=M;return P},q.getCache=function(){var R=this.info;if(R){var o=R.list;if(o){var b=R.cache;return b||(b=R.cache=Ti(o)),b}}return v}}});var Sj=function(q,M){for(var o,g=0,N=q.length,D=0,Q=N-1;Q>=D;)if(g=P(D+(Q-D)/2),o=q[g].length-M,0>o)D=g+1;else{if(!(o>0)){Q=g;break}Q=g-1}g=Q;var e=q[g],h=e.point;return g===N-1||e.length===M||(h=(new ch).subVectors(q[g+1].point,h).normalize().multiplyScalar(M-e.length).add(h)),{point:h,tangent:e.tangent}},Ti=function(p){for(var b,E,X=[],j=0,Q=0;Q<p.length;Q++){for(var l=p[Q],Z=0;Z<l.length;Z++){b=l[Z],E&&(j+=E.distanceTo(b));var N=new ch,r=l[Z+1];r?N.subVectors(r,b):E?N.subVectors(b,E):N.x=1,N.normalize(),X.push({point:b,length:j,tangent:N}),E=b}E=null}return X},Je=function(Y,N,p,j){p=p||Ce;for(var P=[],B=0,w=Y.size();w>B;B++){var G=Y.get(B);P.push(new ch(G.x,G.e||0,G.y))}Wl(N)&&(N=N._as);for(var H,T,s,y,l,I=[],K=0,$=0,M=N?N.length:w;M>$;$++)if(l=N?N[$]:0===$?1:2,1===l)I.push(s=[]),s.push(P[K++]);else if(2===l||5===l)if(y=2===l?P[K++]:s[0],j){var k=N?N[$+1]:M>$+1?2:v;if(2===k||5===k){var U=s[s.length-1],E=2===k?P[K]:s[0],n=(new ch).subVectors(U,y),r=(new ch).subVectors(E,y),J=n.length(),A=r.length();if(j>J/2&&j>A/2)s.push(y);else for(n.multiplyScalar(o(j,J/2)/J).add(y),r.multiplyScalar(o(j,A/2)/A).add(y),H=new tj(n,y,r).getPoints(p),T=0;p>=T;T++)s.push(H[T])}else s.push(y)}else s.push(y);else if(3===l)for(H=new tj(s[s.length-1],P[K++],P[K++]).getPoints(p),T=1;p>=T;T++)s.push(H[T]);else if(4===l)for(H=new Rn(s[s.length-1],P[K++],P[K++],P[K++]).getPoints(p),T=1;p>=T;T++)s.push(H[T]);return I},nd=function(r){for(var k,A,d=new ch,V=[],I=[],X=[],O=0,x=r.length;x>O;O++)k=r[O],A=r[O+1],A?d.subVectors(A,k):d.subVectors(k,r[O-1]),V.push(d.normalize().clone());var U,z,c,t,e=new ch,E=new ch,b=new Bs,S=1e-4,s=Number.MAX_VALUE,R=V[0],m=I[0]=new ch,Z=X[0]=new ch;for(z=a(R.x),c=a(R.y),t=a(R.z),s>=z&&(s=z,e.set(1,0,0)),s>=c&&(s=c,e.set(0,1,0)),s>=t&&e.set(0,0,1),E.crossVectors(R,e).normalize(),m.crossVectors(R,E),Z.crossVectors(R,m),O=1;x>O;O++)I[O]=I[O-1].clone(),X[O]=X[O-1].clone(),E.crossVectors(V[O-1],V[O]),E.length()>S&&(E.normalize(),U=J(ql(V[O-1].dot(V[O]),-1,1)),I[O].applyMatrix4(b.makeRotationAxis(E,U))),X[O].crossVectors(V[O],I[O]);return{B:X,T:V,N:I}},Zh=function(){var G=function(R){for(var d=1;d<arguments.length;d++){var X=arguments[d];R.push(X.x,X.y,X.z)}},u=function(t){for(var Q=1;Q<arguments.length;Q++){var U=arguments[Q].uv;t.push(U[0],U[1])}},w=function($,b,q,Z,u){var y=-Z*C(u),I=Z*j(u);return new ch($.x+y*q.x+I*b.x,$.y+y*q.y+I*b.y,$.z+y*q.z+I*b.z)},m=function(Y,K,x,d,q,p,f){for(var N=[],m=X/q,r=0;q>=r;r++){var t=w(Y,K,x,d,r*m+p);N.push(t),f!=v&&(t.uv=[f,r/q])}return N},_=function(Y,V,k,T,t,U,v,d){var N=V?Y.top_vs:Y.bottom_vs;if(N)for(var i=V?Y.top_uv:Y.bottom_uv,x=X/v,y=0;v>y;y++){var I,R;V?(I=y*x+d,R=(y+1)*x+d):(R=y*x+d,I=(y+1)*x+d),G(N,w(k,T,t,U,I),w(k,T,t,U,R),k),i&&i.push(.5-.5*C(I),.5-.5*j(I),.5-.5*C(R),.5-.5*j(R),.5,.5)}};return function(d,h,n,O,r,a,X,V){var Q=h.length;if(Q>1){var D,E,J,K,q,g,f,l=nd(h),S=l.T,P=l.N,o=l.B;"flat"===X&&_(d,!0,h[0],o[0],P[0],O,r,a),"flat"===V&&_(d,!1,h[Q-1],o[Q-1],P[Q-1],O,r,a);var F,w,T=[],W=p(r/2),R="round"===X,i="round"===V,$=h[0],U=S[0],H=o[0],y=P[0],B=h[Q-1],s=S[Q-1],Y=o[Q-1],j=P[Q-1];if(R){for(J=1;W>=J;J++)P.splice(0,0,y),o.splice(0,0,H),S.splice(0,0,U),w=-J/W*O,h.splice(0,0,U.clone().multiplyScalar(w).add($)),T[W-J]=L(O*O-w*w);Q+=W}if(i){for(J=1;W>=J;J++)P.push(j),o.push(Y),S.push(s),w=J/W*O,h.push(s.clone().multiplyScalar(w).add(B)),T[h.length-1]=L(O*O-w*w);Q+=W}if(d.uv){var Z=0,M=0,e=[];for(n&&(Z=n),q=h[0],e[0]=0,J=1;Q>J;J++)K=h[J],e[J]=q.distanceTo(K),q=K,n||(Z+=e[J]);for(F=[],J=0;Q>J;J++)M+=e[J],F[J]=Z?M/Z:0}for(J=0;Q>J;J++){if(K=h[J],g=o[J],f=P[J],D=m(K,g,f,T[J]===z?O:T[J],r,a,F?F[J]:v),E)for(var A=0;r>A;A++){var k=E[A],c=E[A+1]||E[0],N=D[A],x=D[A+1]||D[0];G(d.vs,c,k,N,N,x,c),d.uv&&u(d.uv,c,k,N,N,x,c)}E=D}}}}();ik(r,{getLineLength:function(z){return z[z.length-1].length},getLineOffset:function(e,L){return Sj(e,L)},getLineCacheInfo:function(n,e,h,J){return Ti(Je(n,e,h,J))}});var oe=n.Light=function(){lj(oe,this),this.s(Qj,y[Qj]),this.s(Ai,"sphere"),this.s3(20,20,20)};ts("Light",Zp,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(z,x,C){oe.superClass.onStyleChanged.apply(this,arguments),z===Qj&&this.s("shape3d.color",C)}});var mb=Wq.Graph3dView=function(T,x){var i=this;i._attributes=x||r.graph3dViewAttributes,i._25I={},i._view=xr(1,i);var y=i._canvas=yj(i._view);y.addEventListener("webglcontextlost",function(k){k.preventDefault(),Kg(i),i._26I=v,i._1o.texture=v,i._35O=!0},!1),y.addEventListener("webglcontextrestored",function(){i._35O=!1,i.iv()},!1),i._34O={},i._33O={},i._wireframeIndexMap={},i._wireframeModelMap={},i._polylineIndexMap={},i._polylineIndexMap={},i._8O=[],i._7O=rh(),i._6O=rh(),i._1o=new nj(i),i._30O=new qn(i),i._31O=new dk(i),i._32O=new Si(i),i._33Q=!0,i._eye=ui(r.graph3dViewEye),i._center=ui(r.graph3dViewCenter),i._up=ui(r.graph3dViewUp),i._lightChanged=!1,i._59O=[],i._spots=[],i._dirs=[],i.dm(T?T:new Ko),i.setInteractors([new gj(i)])},Nf={fogDisabled:1,dashDisabled:1,batchColorDisabled:1,batchBlendDisabled:1,batchBrightnessDisabled:1};ip("Graph3dView",t,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable",Nc,md,"firstPersonMode",Zc,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightColor","headlightIntensity","headlightDisabled","ortho","orthoWidth","fovy","near","far",Sc,Dm,"up","aspect","fogDisabled","fogColor","fogNear","fogFar","dashDisabled","batchColorDisabled","batchBlendDisabled","batchBrightnessDisabled"],_editable:!1,_devicePixelRatio:z,_boundaries:z,_moveStep:r.graph3dViewMoveStep,_rotateStep:r.graph3dViewRotateStep,_pannable:r.graph3dViewPannable,_rotatable:r.graph3dViewRotatable,_walkable:r.graph3dViewWalkable,_resettable:r.graph3dViewResettable,_zoomable:r.graph3dViewZoomable,_firstPersonMode:r.graph3dViewFirstPersonMode,_mouseRoamable:r.graph3dViewMouseRoamable,_gridVisible:r.graph3dViewGridVisible,_gridSize:r.graph3dViewGridSize,_gridGap:r.graph3dViewGridGap,_gridColor:r.graph3dViewGridColor,_originAxisVisible:r.graph3dViewOriginAxisVisible,_centerAxisVisible:r.graph3dViewCenterAxisVisible,_axisXColor:r.graph3dViewAxisXColor,_axisYColor:r.graph3dViewAxisYColor,_axisZColor:r.graph3dViewAxisZColor,_ortho:r.graph3dViewOrtho,_orthoWidth:r.graph3dViewOrthoWidth,_fovy:r.graph3dViewFovy,_near:r.graph3dViewNear,_far:r.graph3dViewFar,_headlightColor:r.graph3dViewHeadlightColor,_headlightIntensity:r.graph3dViewHeadlightIntensity,_headlightRange:r.graph3dViewHeadlightRange,_headlightDisabled:r.graph3dViewHeadlightDisabled,_rectSelectable:r.graph3dViewRectSelectable,_rectSelectBackground:r.graph3dViewRectSelectBackground,_editSizeColor:r.graph3dViewEditSizeColor,_autoMakeVisible:ok,_fogDisabled:r.graph3dViewFogDisabled,_fogColor:r.graph3dViewFogColor,_fogNear:r.graph3dViewFogNear,_fogFar:r.graph3dViewFogFar,_dashDisabled:r.graph3dViewDashDisabled,_batchColorDisabled:r.graph3dViewBatchColorDisabled,_batchBlendDisabled:r.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:r.graph3dViewBatchBrightnessDisabled,setEye:function(X,k,S){1===arguments.length&&(k=X[1],S=X[2],X=X[0]);var E=this._eye;E[0]=X,E[1]=k,E[2]=S,this.fp(Sc,v,E)},setCenter:function(S,r,e){1===arguments.length&&(r=S[1],e=S[2],S=S[0]);var J=this._center;J[0]=S,J[1]=r,J[2]=e,this.fp(Dm,v,J)},setUp:function(m,b,L){1===arguments.length&&(b=m[1],L=m[2],m=m[0]);var s=this._up;s[0]=m,s[1]=b,s[2]=L,this.fp("up",v,s)},isTransparentMask:function(J){return J.s("transparent.mask")},getAspect:function(){var s=this,U=s._aspect;return U?U:s.getWidth()/s.getHeight()},getCanvas:function(){return this._canvas},setDataModel:function(m){var D=this,r=D._dataModel,h=D._selectionModel;r!==m&&(r&&(r.umm(D.handleDataModelChange,D),r.umd(D.handleDataPropertyChange,D),h||r.sm().ums(D.handleSelectionChange,D)),D._dataModel=m,m.mm(D.handleDataModelChange,D),m.md(D.handleDataPropertyChange,D),h?h._21I(m):m.sm().ms(D.handleSelectionChange,D),D.invalidateAll(!0),D.invalidateLight(),D.fp(Uq,r,m))},handleDataPropertyChange:function(Y){var I=Y.data;this.invalidateData(I),oq(I)&&"s:light.type"===Y.property&&this.invalidateLight()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(o){var n=this,X=o.property;n.iv(),n._18Q=v,"eye"===X?n._33Q=!0:"devicePixelRatio"===X?n._42(v,n._devicePixelRatio||Oj):Nf[X]&&Kg(n)},_5O:function(k){var B=k._22Q();return B?new B(this,k):v},getData3dUI:function(B){var T=this._25I[B._id];return T===z&&(T=this._5O(B),this._25I[B._id]=T),T},invalidateAll:function(B){var U=this;if(B){for(var x in U._25I){var A=U._25I[x];A&&A.dispose()}U._25I={},U.iv(),dg(U)}else U.dm().each(function(h){U.invalidateData(h)})},invalidateSelection:function(){var w=this;w.sm().each(function(e){w.invalidateData(e)})},invalidateData:function(m){var u=this,W=u.getData3dUI(m);W&&(W.iv(),u.iv()),dg(u,m)},getShape3dText:function(N){return N.getStyle("shape3d.text")||this.getLabel(N)},invalidateBatch:function(X){var t=this,J=t._33O,M=J[X],r=[],Q={};if(M){M.ds.forEach(function(y){var m=t.getData3dUI(y);m&&m.iv(),delete t._34O[y._id],r.push(y._id)}),delete J[X];for(var c,v,H,n,T,F,x,u,f,L=0;2>L;L++){var E=t[["_wireframeModelMap","_polylineModelMap"][L]],W=t[["_wireframeIndexMap","_polylineIndexMap"][L]];for(Q={},u=0;u<r.length;u++){var Z=W[r[u]];if(Z){delete W[r[u]],f=Z.batch,c=E[f];var A=Z.begin,K=Z.size,k=3*A,G=3*K,g=4*A,o=4*K;for(v=c.ds,H=c.vs,n=c.cs,T=c.ps,F=c.ls,x=Z.index,c.invalidate=!0,v[x]=z,x=k;k+G>x;x++)H[x]=z;for(x=g;g+o>x;x++)n[x]=z;for(x=g;g+o>x;x++)T[x]=z;if(F)for(x=k;k+G>x;x++)F[x]=z;Q[f]=!0}}for(f in Q){c=E[f],v=c.ds,H=c.vs,n=c.cs,T=c.ps,F=c.ls;var w=[];for(x=0;x<v.length;x++)v[x]!==z&&w.push(v[x]);if(0===w.length)delete E[f];else{for(c.ds=w,w=[],x=0;x<H.length;x++)H[x]!==z&&w.push(H[x]);for(c.vs=w,w=[],x=0;x<n.length;x++)n[x]!==z&&w.push(n[x]);for(c.cs=w,w=[],x=0;x<T.length;x++)T[x]!==z&&w.push(T[x]);if(c.ps=w,F){for(w=[],x=0;x<F.length;x++)F[x]!==z&&w.push(F[x]);c.ls=w}}}}t.iv()}},handleDataModelChange:function(F){var Y=this,R=F.kind,A=F.data;if("add"===R)Y.invalidateData(A),qg(A)&&A.getEdgeGroup()&&A.getEdgeGroup().eachSiblingEdge(Y.invalidateData,Y),oq(A)&&Y.invalidateLight();else if(R===ss){var x=A._id,Q=Y._25I[x];Q&&(Q.dispose(),delete Y._25I[x],Y.iv()),A===Y._currentSubGraph&&Y.setCurrentSubGraph(v),dg(Y,A),oq(A)&&Y.invalidateLight()}else R===zf&&(Y.invalidateAll(!0),Y.setCurrentSubGraph(v),dg(Y),Y.invalidateLight())},toCanvas:function(z){var f=this,e=f.getGL();if(f.validate(),z){var M=e.getParameter(e.COLOR_CLEAR_VALUE);bm(e,z)}f._42(v,1);var g=f.getWidth(),O=f.getHeight(),w=new Uint8Array(4*g*O),S=yj(),n=S.getContext("2d");e.readPixels(0,0,g,O,e.RGBA,e.UNSIGNED_BYTE,w),Zn(S,g,O,1);for(var W=n.getImageData(0,0,g,O),s=W.data,u=0;u<s.length;u+=4){var X=u/4,q=P(X/g),Q=X-q*g;X=4*((O-1-q)*g+Q),s[X]=w[u],s[X+1]=w[u+1],s[X+2]=w[u+2],s[X+3]=w[u+3]}return n.putImageData(W,0,0),z&&bm(e,M),f._42(v,f._devicePixelRatio||Oj),S},toDataURL:function(M,w){var t=this,G=t.getGL();if(t.validate(),M){var T=G.getParameter(G.COLOR_CLEAR_VALUE);bm(G,M)}t._42(v,1);var B=t._canvas.toDataURL(w||"image/png",1);return M&&bm(G,T),t._42(v,t._devicePixelRatio||Oj),B},getGL:function(){var f=this,h=f._26I,K=f._prg;if(!h)try{f._2O={},h=f._26I=f._canvas.getContext("webgl",f._attributes)||f._canvas.getContext("experimental-webgl",f._attributes),h._emptyTexture=dd(h),f._buffer={vs:gi(h),ns:gi(h),is:gi(h),uv:gi(h),batchColor:gi(h),batchBlend:gi(h),batchBrightness:gi(h),lineDistance:gi(h)},f._1O=Fl(h);var $=f._cube={vs:gi(h),ns:gi(h),is:gi(h),uv:gi(h)};uc(h,$.vs,bn),uc(h,$.ns,Nj),uc(h,$.uv,ws),qe(h,$.is,ys)}catch(p){}if(h&&!K){if(K=f._prg=h.createProgram(),!K)return v;var w=f._dirs.length,A=f._spots.length,k=f._59O.length,H=["uPMatrix","uMVMatrix","uNMatrix","uViewMatrix","aNormal","aUv","uOffsetScale","uDiffuse","uBlend","uBlendColor","uBrightness","uPartOpacity","uTransparent","uTexture","uSampler","uDiscardSelectable","uFix","uPick","uReverseFlip","uFixPickReverseColor","uBatchBrightness","aBatchBrightness","uBatchColor","aBatchColor","uBatchBlend","aBatchBlend","uDash","aLineDistance","uDashDistance","uDashGapDistance","uLight","uHeadlightRange","uHeadlightColor","uFogColor","uFogNear","uFogFar"];w&&H.push("uDirColor","uDirPosition"),A&&H.push("uSpotColor","uSpotRange","uSpotAngle","uSpotExponent","uSpotPosition","uSpotCenter"),k&&H.push("uPointColor","uPointRange","uPointPosition"),bm(h,[0,0,0,0]),h.clearDepth(1),h.enable(h.DEPTH_TEST),h.depthFunc(h.LEQUAL),h.enable(h.BLEND),h.blendFunc(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA),Gq||(xo=Dq(xo.substring(0,xo.indexOf("^#"))),bc=Dq(bc),Gq=!0);var l=["#define MAX_DIR "+w,"#define MAX_SPOT "+A,"#define MAX_POINT "+k,f._fogDisabled?"":"#define FOG",f._dashDisabled?"":"#define DASH",f._batchColorDisabled?"":"#define BATCHCOLOR",f._batchBlendDisabled?"":"#define BATCHBLEND",f._batchBrightnessDisabled?"":"#define BATCHBRIGHTNESS",""].join("\n"),b=Yl(h,K,h.VERTEX_SHADER,xo.replace("PREFIX",l)),r=Yl(h,K,h.FRAGMENT_SHADER,bc.replace("PREFIX",l));q?H.push("aPosition"):(K.aPosition=0,h.bindAttribLocation(K,0,"aPosition")),h.linkProgram(K),H.forEach(function(E){K[E]=/^u/.test(E)?h.getUniformLocation(K,E):h.getAttribLocation(K,E)}),h.useProgram(K),h.deleteShader(b),h.deleteShader(r)}return h},getBrightness:function(u){var f=u.s("brightness"),U=this.isSelected(u)?u.s("select.brightness"):v;return f==v?U:U==v?f:f*U},getWireframe:function(P){var R=P.s("wf.visible"),f=P.s("wf.width");return R===!0||f>0&&"selected"===R&&this.isSelected(P)?{color:P.s("wf.color"),width:f,"short":P.s("wf.short"),mat:P.s("wf.mat")}:void 0},getBodyColor:function(p){return p.s("body.color")},getMat:function(E){return E.getMat?E.getMat():E.s("mat")},getFaceMat:function(Y,w){return Y.getFaceMat?Y.getFaceMat(w):Y.s(w+".mat")},getFaceBlend:function(u,e){return u.s(e+".blend")||u.s("all.blend")},getFaceColor:function(R,X){return R.s(X+".color")||R.s("all.color")},getFaceImage:function(A,l){return A.s(l+".image")||A.s("all.image")},getFaceDiscardSelectable:function(r,I){var q=r.s(I+".discard.selectable");return q==v?r.s("all.discard.selectable"):q},getFaceUv:function(L,d){return L.s(d+".uv")||L.s("all.uv")},getFaceUvOffset:function(d,W){return d.s(W+".uv.offset")||d.s("all.uv.offset")},getFaceUvScale:function(C,Y){return C.s(Y+".uv.scale")||C.s("all.uv.scale")},getFaceLight:function(J,z){var x=J.s(z+".light");return x==v?J.s("all.light"):x},getFaceVisible:function(R,f){var g=R.s(f+".visible");return g==v?R.s("all.visible"):g},getFaceOpacity:function(H,F){var B=H.s(F+".opacity");return B==v?H.s("all.opacity"):B},getFaceTransparent:function(c,r){var M=c.s(r+".transparent");return M==v?c.s("all.transparent"):M},getFaceReverseColor:function(c,j){return c.s(j+".reverse.color")||c.s("all.reverse.color")},getFaceReverseFlip:function(G,W){var K=G.s(W+".reverse.flip");return K==v?G.s("all.reverse.flip"):K},getFaceReverseCull:function(Z,r){var x=Z.s(r+".reverse.cull");return x==v?Z.s("all.reverse.cull"):x},getTextureMap:function(){return this._2O},deleteTexture:function(A){var Z=this,p=Z._2O[A];p&&(delete Z._2O[A],Z.getGL().deleteTexture(p))},getTexture:function($,f){if(!$)return v;var F=this,A=F.getGL(),u=F._2O[$];if(!u){var n=Ep($);if(n)if(n.tagName){if(n.dynamic)return Fl(A,n,F._1O);u=F._2O[$]=Fl(A,n)}else{var E=ob(n,f),W=ee(n,f);if(E>=1&&W>=1){var G=vb(E,W);return Dk(G,n,0,0,E,W,f,F),G.restore(),Fl(A,nq,F._1O)}}}return u},redraw:function(){this.iv()},validateImpl:function(){var q=this;if(q._lightChanged){q._lightChanged=!1;var u=[],V=[],r=[];q.dm().each(function(c){if(oq(c)){var T=c.s("light.type");T===oh?u.push(c):T===Li?V.push(c):T===Ir&&r.push(c)}}),(u.length!==q._59O.length||V.length!==q._spots.length||r.length!==q._dirs.length)&&Kg(q),q._59O=u,q._spots=V,q._dirs=r}q._42(),q._1o.iv()},_42:function(O,D){var c=this;if(!c._35O&&(!kj||Ej(kj))){var y,i;O&&(O instanceof Zp?i=O:y=O);var F=c._canvas,r=c.getWidth(),V=c.getHeight(),R=c.getGL(),d=c._prg;if(R){if(D?O||Zn(F,r,V,D):(D=c._devicePixelRatio||Oj,O||r===F.clientWidth&&V===F.clientHeight||Zn(F,r,V,D)),R.viewport(0,0,r*D,V*D),c._81O=v,R.clear(R.COLOR_BUFFER_BIT|R.DEPTH_BUFFER_BIT),Oh(R,d.uBrightness,1),Oh(R,d.uOpacity,1),Oh(R,d.uPartOpacity,1),R._picking=!!O,Oh(R,d.uPick,!!O),Oh(R,d.uTexture,!1),Oh(R,d.uFix,!1),Oh(R,d.uTransparent,!1),Oh(R,d.uBatchColor,!1),Oh(R,d.uBatchBlend,!1),Oh(R,d.uBatchBrightness,!1),O||(Bq(c,R,d),c._fogDisabled||(Oh(R,d.uFogColor,c._fogColor),Oh(R,d.uFogNear,c._fogNear),Oh(R,d.uFogFar,c._fogFar))),dq(R,d.aPosition),dq(R,d.aNormal),Qg(R,d.aUv),Qg(R,d.aBatchColor),Qg(R,d.aBatchBlend),Qg(R,d.aBatchBrightness),Qg(R,d.aLineDistance),Oh(R,d.uPMatrix,Jc(c)),Oh(R,d.uViewMatrix,_q(c,c._7O)),i){var C=R.getParameter(R.COLOR_CLEAR_VALUE);R.clearColor(0,0,0,0),R.disable(R.BLEND),Qg(R,d.aNormal),uc(R,c._cube.vs,v,d.aPosition),qe(R,c._cube.is),Zi(i,c,Kp,0),Zi(i,c,Cf,6),Zi(i,c,be,12),Zi(i,c,uj,18),Zi(i,c,ph,24),Zi(i,c,ud,30),dq(R,d.aNormal),bm(R,C)}else if(y){y.value=2;var C=R.getParameter(R.COLOR_CLEAR_VALUE);R.clearColor(0,0,0,0),R.disable(R.BLEND),c._95I(R,d,y),af(c,y),Db(c,c._polylineModelMap,y),Db(c,c._wireframeModelMap,y),Oh(R,d.uTransparent,!0),c._95I(R,d,y,!0),af(c,y,!0),Db(c,c._polylineModelMap,y,!0),Db(c,c._wireframeModelMap,y,!0),Oh(R,d.uTransparent,!1),R.disable(R.DEPTH_TEST),c._30O._42(R,d,y),R.enable(R.DEPTH_TEST),bm(R,C)}else R.disable(R.BLEND),c._31O._42(R,d),c._95I(R,d),af(c),Db(c,c._polylineModelMap),Db(c,c._wireframeModelMap),R.enable(R.BLEND),R.depthMask(!1),Oh(R,d.uTransparent,!0),c._95I(R,d,v,!0),af(c,v,!0),Db(c,c._polylineModelMap,v,!0),Db(c,c._wireframeModelMap,v,!0),Oh(R,d.uTransparent,!1),R.depthMask(!0),R.disable(R.BLEND),R.disable(R.DEPTH_TEST),c._32O._42(R,d),c._30O._42(R,d),R.enable(R.DEPTH_TEST);uc(R,v),qe(R,v),c._33Q=!1}}},_95I:function(o,u,O,Y){var g=this,p=function(C){return Y?C:!C};g.dm().each(function(l){if(g.isVisible(l)&&(!N||T)){if(!O&&g.isTransparentMask(l))return;var F=g.getData3dUI(l);F&&F._42(o,u,O,p)}})},getLogicalPoint:function(q){return zp(q,this._canvas)},getHitFaceInfo:function(B){B.target&&(B=this.lp(B));var q=this.getDataInfoAt(B);if(q){var b=this._1o.face(q.data,zq(B.x,B.y));if(b)return{data:q.data,face:b}}return v},getDataAt:function(Y){var Z=this.getDataInfoAt(Y);return Z?Z.data:v},getDataInfoAt:function(h,f){return h.target&&(h=this.lp(h)),this._1o.get(zq(h.x,h.y,f),!0)},getDatasInRect:function(U){return this._1o.get(U)},setEditable:function(l){var u=this,Z=u._editable;u._editable=l,this.fp(Kr,Z,l)},isEditable:function(U){var z=this;return z._editable?Qn(U)?U.s("3d.editable")?z._editableFunc?z._editableFunc(U):!0:!1:!1:!1},isSelectable:function(W){return W.s("3d.selectable")&&this.sm().isSelectable(W)},isMovable:function(o){var T=this;return qg(o)&&o.getStyle(ke)!==cd?!1:o.s("3d.movable")?T._movableFunc?T._movableFunc(o):!0:!1},isSizeEditable:function(O){return Qn(O)?this._sizeEditableFunc?this._sizeEditableFunc(O):!0:!1},isRotationEditable:function(B){return Qn(B)&&B.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(B):!0:!1},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(a){this.setZoom(fh,a)},zoomOut:function(x){this.setZoom(1/fh,x)},setZoom:function(B,C){if(1!==B){var R=this;if(R._ortho)return R.setOrthoZoom(B,C),void 0;R._14o&&R._14o.stop(!0);var w=1/B,q=R._eye,o=R._center,r=o[0]+(q[0]-o[0])*w-q[0],T=o[1]+(q[1]-o[1])*w-q[1],M=o[2]+(q[2]-o[2])*w-q[2];if(!(Kd(q,o)<R._moveStep&&1>w)){if(C=qr(C)){var O=ui(q);return C.action=function(A){R.fi({kind:R._zooming?"betweenZoom":"beginZoom"}),R._zooming=1,q[0]=O[0]+r*A,q[1]=O[1]+T*A,q[2]=O[2]+M*A,R.fp(Sc,v,q)},C._37o=function(){delete R._14o,delete R._zooming,R.fi({kind:"endZoom"}),R.onZoomEnded()},R._14o=tb(C)}q[0]+=r,q[1]+=T,q[2]+=M,R.fp(Sc,v,q)}}},setOrthoZoom:function(X,u){if(1!==X){var Z=this;Z._14o&&Z._14o.stop(!0);var v=Z._orthoWidth,x=v/X-v;if(!(v<Z._moveStep&&X>1))return(u=qr(u))?(u.action=function(y){Z.fi({kind:Z._zooming?"betweenZoom":"beginZoom"}),Z._zooming=1,Z.setOrthoWidth(v+x*y)},u._37o=function(){delete Z._14o,delete Z._zooming,Z.fi({kind:"endZoom"}),Z.onZoomEnded()},Z._14o=tb(u)):(Z.setOrthoWidth(v/X),void 0)}},getPositionInfo:function(i){var v=this,V=v._eye,w=v._center,O=v.getAspect(),u=i?lr(Fk(w,V,!0),Fk(i,V)):Kd(V,w);if(v._ortho){var o=v._orthoWidth;return{length:u,height:o/O,width:o}}var e=2*H(v._fovy/2)*u;return{length:u,height:e,width:e*O}},getCenterInfo:function(){var J=this;return J._81O||(J._81O=J.getPositionInfo()),ui(J._81O)},rotate:function(F,g,J,U){var K=this;if(F||g){U==v&&(U=K._firstPersonMode),K._88O&&K._88O.stop(!0);var H=K._center,T=K._eye,R=K.getCenterInfo().length,t=U?H:T,h=U?T:H,W=Fk(t,h),A=B(W[0],W[2]),P=B(L(W[0]*W[0]+W[2]*W[2]),W[1]),S=U?Dm:Sc;return U&&(g=-g),(J=qr(J))?(J.action=function(k){K.fi({kind:K._rotating?"betweenRotate":"beginRotate"}),K._rotating=1;var z=A+F*k,J=P+g*k;J=xf(J),W[0]=R*j(J)*j(z),W[1]=R*C(J),W[2]=R*j(J)*C(z),t[0]=h[0]+W[0],t[1]=h[1]+W[1],t[2]=h[2]+W[2],K.fp(S,v,t)},J._37o=function(){delete K._88O,delete K._rotating,K.fi({kind:"endRotate"}),K.onRotateEnded()},K._88O=tb(J)):(A+=F,P+=g,P=xf(P),W[0]=R*j(P)*j(A),W[1]=R*C(P),W[2]=R*j(P)*C(A),t[0]=h[0]+W[0],t[1]=h[1]+W[1],t[2]=h[2]+W[2],K.fp(S,v,t),void 0)}},pan:function(h,F,D,T){if(h||F){var r=this;T==v&&(T=r._firstPersonMode),r._89O&&r._89O.stop(!0);var j=_q(r),A=[j[0]*h,j[4]*h,j[8]*h],G=[j[1]*F,j[5]*F,j[9]*F],_=A[0]+G[0],C=A[1]+G[1],B=A[2]+G[2],J=r._center,E=r._eye;if(T){var K=Cr(r.getBoundaries(),E[0],E[2],E[0]+_,E[2]+B,L(_*_+B*B));_=K[0],B=K[1]}if(D=qr(D)){var S=ui(E),H=ui(J);return D.action=function(b){r.fi({kind:r._panning?"betweenPan":"beginPan"}),r._panning=1,J[0]=H[0]+_*b,J[1]=H[1]+C*b,J[2]=H[2]+B*b,E[0]=S[0]+_*b,E[1]=S[1]+C*b,E[2]=S[2]+B*b,r.fp(Sc,v,E),r.fp(Dm,v,J)},D._37o=function(){delete r._89O,delete r._panning,r.fi({kind:"endPan"}),r.onPanEnded()},r._89O=tb(D)}J[0]+=_,J[1]+=C,J[2]+=B,E[0]+=_,E[1]+=C,E[2]+=B,r.fp(Sc,v,E),r.fp(Dm,v,J)}},walk:function(B,m,u){if(B){var r=this;u==v&&(u=r._firstPersonMode),r._90O&&r._90O.stop(!0);var $=r._center,c=r._eye,s=Fk($,c,!0);if(u){var k=Cr(r.getBoundaries(),c[0],c[2],c[0]+s[0]*B,c[2]+s[2]*B,a(B));if(B=Kd(k),!B)return;s=[k[0]/B,0,k[1]/B]}if(m=qr(m)){var x=ui(c),M=ui($);return m.action=function(X){r.fi({kind:r._walking?"betweenWalk":"beginWalk"}),r._walking=1;var S=B*X;c[0]=x[0]+s[0]*S,c[1]=x[1]+s[1]*S,c[2]=x[2]+s[2]*S,$[0]=M[0]+s[0]*S,$[1]=M[1]+s[1]*S,$[2]=M[2]+s[2]*S,r.fp(Sc,v,c),r.fp(Dm,v,$)},m._37o=function(){delete r._90O,delete r._walking,r.fi({kind:"endWalk"}),r.onWalkEnded()},r._90O=tb(m)}c[0]+=s[0]*B,c[1]+=s[1]*B,c[2]+=s[2]*B,$[0]+=s[0]*B,$[1]+=s[1]*B,$[2]+=s[2]*B,r.fp(Sc,v,c),r.fp(Dm,v,$)}},handleScroll:function(y,P){y.preventDefault();var Y=this,$=Y._moveStep;Y.isFirstPersonMode()?Y.isPannable()&&Y.pan(0,P>0?$:-$):Y.isZoomable()&&Y.setZoom(0>P?1/xh:xh)},handlePinch:function(l,L){this.isZoomable()&&this.setZoom(L>l?1/Co:Co)},reset:function(){this.setCenter(r.graph3dViewCenter),this.setEye(r.graph3dViewEye),this.setUp(r.graph3dViewUp)},moveSelection:function(p,K,y){var $,v=this,n=v.dm();n&&($=n.getHistoryManager()),$&&$.beginInteraction(),zl(this.sm().toSelection(this.isMovable,this),p,K,y),$&&$.endInteraction()
},getMoveMode:function(W,d){var h=d.s("3d.move.mode");if(h)return h;var x="88",g="89",L="90";return Qe(W)||no[x]&&no[g]&&no[L]?"xyz":no[x]&&no[g]?"xy":no[x]&&no[L]?"xz":no[g]&&no[L]?"yz":no[x]?"x":no[g]?"y":no[L]?"z":"xz"},handleTick:function(){var r=this,c=!1,t=r._moveStep,w=t,l=!1,P=!0,E=r._rotateStep*(P?-1:1);if(r.isWalkable()||(w=0),r.isPannable()||(t=0),r.isRotatable()||(E=0),r._32Q){var z=(ad()-r._32Q)/50;w*=z,t*=z,E*=z}r._31Q&&(qf(r._31Q),delete r._31Q,delete r._32Q),Bk()&&(c=!0,r.pan(-t,0,l,P)),Mc()&&(c=!0,r.pan(t,0,l,P)),er()&&(c=!0,Qe()?r.pan(0,t,l,P):r.walk(w,l,P)),Ge()&&(c=!0,Qe()?r.pan(0,-t,l,P):r.walk(-w,l,P)),xn()&&(c=!0,r.rotate(-E,0,l,P)),yn()&&(c=!0,r.rotate(E,0,l,P)),Ho()&&(c=!0,r.rotate(0,-E/2,l,P)),Lm()&&(c=!0,r.rotate(0,E/2,l,P)),c&&(r._32Q=ad(),r._31Q=oj(r.handleTick,r))},handleKeyDown:function(m){var H=this;!ne(m)&&Do[m.keyCode]?H.handleTick():td(m)?H.selectAll():Mo(m)?H.handleDelete(m):th(m)&&this.isResettable()&&H.reset()},checkDoubleClickOnNote:function(m,I,k){var o=this;if(k===to){if(I.s("note.toggleable"))return I.s(Rf,!I.s(Rf)),o.fi({kind:"toggleNote",event:m,data:I,part:k}),!0}else if(k===Tp&&I.s("note2.toggleable"))return I.s(eb,!I.s(eb)),o.fi({kind:"toggleNote2",event:m,data:I,part:k}),!0;return!1},checkDoubleClickOnRotation:function(j,Y,t){return t===Br?(Y.setRotationX(0),!0):t===Pm?(Y.setRotationY(0),!0):t===zj?(Y.setRotationZ(0),!0):!1},onRotateEnded:function(){},onWalkEnded:function(){},toViewPosition:function(m){var _=this,U=_.getWidth()/2,c=_.getHeight()/2,T=_._18Q;return T||(T=Jc(_),_._18Q=dh(T,T,_q(_))),m=Dg([m[0],m[1],m[2],1],T),{x:U+U*m[0]/m[3],y:c-c*m[1]/m[3]}},getHitPosition:function(c,A,B){var m=this,p=m.getWidth(),P=m.getHeight(),h=c.target?m.lp(c):c,n=h.x-p/2,I=h.y-P/2,o=m.getCenterInfo(),l=_q(m);A=A?A:[0,0,0],B=B?B:[0,1,0],n=n/p*o.width,I=-1*I/P*o.height;var R=[l[0]*n,l[4]*n,l[8]*n],O=[l[1]*I,l[5]*I,l[9]*I],D=[R[0]+O[0],R[1]+O[1],R[2]+O[2]],$=m.getCenter(),K=wg(m,A,B,[D[0]+$[0],D[1]+$[1],D[2]+$[2]]);return K?K:[0,0,0]},getLineLength:function(d){this.validate();var F=this.getData3dUI(d);if(F&&F.getCache){var b=F.getCache();if(b)return b[b.length-1].length}return 0},getLineOffset:function(z,N){var E=this.getData3dUI(z);if(E&&E.getCache){var A=E.getCache();if(A)return Sj(A,N)}return v},isLabelVisible:function(){return!0},isNoteVisible:function(){return!0}});var Pr=Wq.Interactor=function(Y){this.gv=Y};ip("Interactor",t,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()}});var gj=Wq.DefaultInteractor=function($){lj(gj,this,[$])};ip("DefaultInteractor",Pr,{handle_contextmenu:function(V){Se(V)},handle_mousewheel:function(v){this.gv.handleScroll(v,v.wheelDelta/40)},handle_DOMMouseScroll:function(q){2===q.axis&&this.gv.handleScroll(q,-q.detail)},handle_keydown:function(H){this.gv.handleKeyDown(H)},handle_mousedown:function(M){this.handle_touchstart(M)},handle_touchstart:function(D){Se(D);var a=this,W=a.gv,P=Rr(D),j=W.getDataInfoAt(D),g=j?j.data:v,z=j?j.part:v,l=W.sm(),G=Th(D),x=Mm(D);W.setFocus(D)&&(a._62O=v,a._57I=v,g?ne(D)?l.co(g)?l.rs(g):l.as(g):l.co(g)||l.ss(g):P&&(ne(D)?W.isRectSelectable()&&(a._62O=Gl):a._57I=sk(D)),a._31Q&&(qf(a._31Q),delete a._31Q,delete a._32Q),a._62O||(W.isFirstPersonMode()&&(Qe(D)||x>2?a._62O="pan":W.isMouseRoamable()||E?(a._62O="roaming",a.foward=G&&Rr(D),a._32Q=ad(),a._31Q=oj(a.tick,a)):P||(a._62O="roaming")),a._62O||(P&&G&&wb[z]?(a._62O=z,a.p3=g.p3()):P&&G&&Qn(g)&&W.isSelected(g)&&W.isMovable(g)?(a._62O="move",a.p3=g.p3(),a.movedata=g):E&&(x>2?a._62O="pan":2===x&&(a.dist=km(D),a._62O="pinch")))),a.point=W.lp(D),$m(a,D),Gj(D)?W.handleDoubleClick(D,g,z):W.handleClick(D,g,z))},tick:function(){var F=this,l=F.gv,A=l._moveStep;F.point&&l.isWalkable()&&(F._32Q&&(A*=(ad()-F._32Q)/50),l.walk(F.foward?A:-A),F._32Q=ad(),F._31Q=oj(F.tick,F))},handle_mouseup:function(u){this.handle_touchend(u)},handle_touchend:function(U){var F=this._57I;F&&(Kd(F,sk(U))<=1&&this.gv.sm().cs(),this._57I=v)},handleWindowMouseMove:function(H){this.handleWindowTouchMove(H)},handleWindowTouchMove:function(M){var n,k,U=this,H=U.gv,O=U._62O,l=U.point,h=H.dm(),Z=h.getHistoryManager(),z=H.lp(M),s=z.x-l.x,I=z.y-l.y,R=-X*s/H.getWidth(),$=-X*I/H.getHeight();if("roaming"===O)U.rotate(M,R/2,$/2);else if(O===Br||O===Pm||O===zj)Z&&!H._86O&&Z.beginInteraction(),H.fi({kind:H._86O?"betweenEditRotation":"beginEditRotation",event:M}),H._86O=1,H.sm().each(function(c){if(Qn(c)&&H.isRotationEditable(c)){var I=a(R)>a($)?R:$;O===Br?c.setRotationX(c.getRotationX()+I):O===Pm?c.setRotationY(c.getRotationY()+I):O===zj&&c.setRotationZ(c.getRotationZ()+I)}});else if("move"===O||wb[O]){O===Ld||O===An||O===uf?(Z&&!H._87O&&Z.beginInteraction(),H.fi({kind:H._87O?"betweenEditSize":"beginEditSize",event:M}),H._87O=1):(Z&&!H._moving&&Z.beginInteraction(),H.fi({kind:H._moving?"betweenMove":"beginMove",event:M}),H._moving=1);var C,d=U.p3,x=H.getPositionInfo(d),t=_q(H);C=O===fp?"x":O===hm?"y":O===uq?"z":O===Ld?"sx":O===An?"sy":O===uf?"sz":H.getMoveMode(M,U.movedata),s=s/H.getWidth()*x.width,I=-1*I/H.getHeight()*x.height;var p,V,T=[t[0]*s,t[4]*s,t[8]*s],W=[t[1]*I,t[5]*I,t[9]*I],e=T[0]+W[0],i=T[1]+W[1],K=T[2]+W[2],A=[d[0]+e,d[1]+i,d[2]+K],m=Fk(H.getEye(),A,!0);if("xyz"===C?(p=A,H.moveSelection(e,i,K)):"xz"===C?(p=wg(H,d,[0,1,0],A),p&&H.moveSelection(p[0]-d[0],0,p[2]-d[2])):"xy"===C?(p=wg(H,d,[0,0,1],A),p&&H.moveSelection(p[0]-d[0],p[1]-d[1],0)):"yz"===C?(p=wg(H,d,[1,0,0],A),p&&H.moveSelection(0,p[1]-d[1],p[2]-d[2])):"x"===C||"sx"===C?(m[0]=0,p=wg(H,d,m,A),p&&(V=p[0]-d[0],"x"===C?H.moveSelection(V,0,0):H.sm().each(function(s){Qn(s)&&H.isSizeEditable(s)&&(n=w(Vk,s.getWidth()+V),k=n/s.getWidth(),s.setWidth(n),Qe(M)&&(s.setHeight(s.getHeight()*k),s.setTall(s.getTall()*k)))}))):"y"===C||"sy"===C?(m[1]=0,p=wg(H,d,m,A),p&&(V=p[1]-d[1],"y"===C?H.moveSelection(0,V,0):H.sm().each(function(Y){Qn(Y)&&H.isSizeEditable(Y)&&(n=w(Vk,Y.getTall()+V),k=n/Y.getTall(),Y.setTall(n),Qe(M)&&(Y.setHeight(Y.getHeight()*k),Y.setWidth(Y.getWidth()*k)))}))):("z"===C||"sz"===C)&&(m[2]=0,p=wg(H,d,m,A),p&&(V=p[2]-d[2],"z"===C?H.moveSelection(0,0,V):H.sm().each(function(l){Qn(l)&&H.isSizeEditable(l)&&(n=w(Vk,l.getHeight()+V),k=n/l.getHeight(),l.setHeight(n),Qe(M)&&(l.setTall(l.getTall()*k),l.setWidth(l.getWidth()*k)))}))),!p)return;U.p3=p}else if(O===Gl){var j=U.div;j||(j=U.div=Yn(),Yr(U.getView(),j),j.op=l,j.style.background=H.getRectSelectBackground()),H.fi({kind:H._rectSelecting?"betweenRectSelect":"beginRectSelect",event:M}),H._rectSelecting=1,j.rect=ao(j.op,z),oi(j,j.rect)}else if("pinch"===O&&2===Mm(M)){H.fi({kind:H._pinching?"betweenPinch":"beginPinch",event:M}),H._pinching=1;var V=km(M);H.handlePinch(V,U.dist),U.dist=V}else"pan"===O||Qe(M)?U.pan(M,s,I):H.isFirstPersonMode()||(Rr(M)?U.rotate(M,R,$):(U.pan(M,s,0),H.isWalkable()&&(H.fi({kind:H._walking?"betweenWalk":"beginWalk",event:M}),H._walking=1,H.walk(I/H.getHeight()*H.getCenterInfo().height))));U.point=z},pan:function(w,O,q){var J=this.gv;if(J.isPannable()){var o=J.getCenterInfo(),H=O/J.getWidth()*o.width,z=-1*q/J.getHeight()*o.height;J.fi({kind:J._panning?"betweenPan":"beginPan",event:w}),J._panning=1,J.pan(-H,-z)}},rotate:function(i,U,u){var l=this.gv;l.isRotatable()&&(l.fi({kind:l._rotating?"betweenRotate":"beginRotate",event:i}),l._rotating=1,l.rotate(U,u))},handleWindowMouseUp:function(y){this.handleWindowTouchEnd(y)},handleWindowTouchEnd:function(C){var z=this,o=z.gv,r=o.dm(),e=r.getHistoryManager(),I=z.div;if(I){var w=o.getDatasInRect(I.rect);if(!w.isEmpty()){var t=o.sm(),S=t.toSelection();w.each(function(Z){t.co(Z)?S.remove(Z):S.add(Z)}),t.ss(S)}gp(I)}o._moving&&(delete o._moving,o.fi({kind:"endMove",event:C}),o.onMoveEnded(),e&&e.endInteraction()),o._panning&&(delete o._panning,o.fi({kind:"endPan",event:C}),o.onPanEnded()),o._rotating&&(delete o._rotating,o.fi({kind:"endRotate",event:C}),o.onRotateEnded()),o._86O&&(delete o._86O,o.fi({kind:"endEditRotation",event:C}),e&&e.endInteraction()),o._87O&&(delete o._87O,o.fi({kind:"endEditSize",event:C}),e&&e.endInteraction()),o._pinching&&(delete o._pinching,o.fi({kind:"endPinch",event:C}),o.onPinchEnded()),o._rectSelecting&&(delete o._rectSelecting,o.fi({kind:"endRectSelect",event:C}),o.onRectSelectEnded()),o._walking&&(delete o._walking,o.fi({kind:"endWalk",event:C}),o.onWalkEnded()),z.dist=z.point=z._62O=z.p3=z.movedata=z.div=z._57I=z._32Q=z._31Q=z.foward=v}});var nj=function(i){this.gv=i};Uf(nj,t,{_iv:!0,iv:function(){this._iv=!0},face:function(D,k){var b=this,q=b.gv.getGL();if(!q||!Qn(D))return v;var n=k.x,O=k.width,I=k.height,z=b.height-k.y-I,f=P(O/2),G=new Uint8Array(4*O*I),l=0;for(b.iv(),b.validate(D),Fp(q,b.frame),q.readPixels(n,z,O,I,q.RGBA,q.UNSIGNED_BYTE,G),Fp(q,v),b.iv();f>=l;l++)for(var Y=f-l,H=f+l,W=Y;H>=W;W++)for(var S=Y;H>=S;S++)if(W===Y||W===H||S===Y||S===H){var K=Zg.m[G[4*(W*O+S)]];if(K)return K}},get:function(V,X){this.validate();var S=this,b=S.gv.getGL();if(!b)return v;var O,w,i=V.x,C=V.width,y=V.height,A=S.height-V.y-y,z=P(C/2),c=new Uint8Array(4*C*y),f=0,s=c.length,Z=X?v:new Sd,K=X?v:{};if(Fp(b,S.frame),b.readPixels(i,A,C,y,b.RGBA,b.UNSIGNED_BYTE,c),Fp(b,v),X){for(;z>=f;f++)for(var n=z-f,U=z+f,r=n;U>=r;r++)for(var m=n;U>=m;m++)if((r===n||r===U||m===n||m===U)&&(O=S.info(c,4*(r*C+m))))return O}else for(;s>f;f+=4)O=S.info(c,f),O&&(w=O.data,K[w._id]||(Z.add(w),K[w._id]=w));return Z},info:function(I,q){return this.colorMap[(I[q]<<24)+(I[q+1]<<16)+(I[q+2]<<8)+I[q+3]]},validate:function(o){var t=this,E=t.gv,Z=E.getGL();if(Z){var c=E.getWidth(),A=E.getHeight(),I=Z.RGBA,h=Z.TEXTURE_2D,x=Z.RENDERBUFFER,_=Z.FRAMEBUFFER;t.texture||(t.texture=Fl(Z),t.render=Z.createRenderbuffer(),t.frame=Z.createFramebuffer()),(t.width!==c||t.height!==A)&&(pp(Z,t.texture),Z.texImage2D(h,0,I,c,A,0,I,Z.UNSIGNED_BYTE,v),yo(Z,Z.TEXTURE_MIN_FILTER,Z.LINEAR),Z.bindRenderbuffer(x,t.render),Z.renderbufferStorage(x,Z.DEPTH_COMPONENT16,c,A),Fp(Z,t.frame),Z.framebufferTexture2D(_,Z.COLOR_ATTACHMENT0,h,t.texture,0),Z.framebufferRenderbuffer(_,Z.DEPTH_ATTACHMENT,x,t.render),pp(Z,v),Z.bindRenderbuffer(x,v),Fp(Z,v),t.width=c,t.height=A),t._iv&&(t._iv=!1,Fp(Z,t.frame),E._42(o||(t.colorMap={}),1),Fp(Z,v))}}});var dk=function(D){this.gv=D};Uf(dk,t,{gap:0,size:0,_42:function(b,j){var H=this,K=H.gv,s=K._gridGap,l=K._gridSize;if(K._gridVisible){if(H.gap!==s||H.size!==l){for(var $=[],D=K._gridSize/2,O=s*D,n=0;2*D+1>n;n++){var J=6*n,k=6*(2*D+1)+J;$[J]=-O,$[J+1]=0,$[J+2]=-O+n*s,$[J+3]=O,$[J+4]=0,$[J+5]=-O+n*s,$[k]=-O+n*s,$[k+1]=0,$[k+2]=-O,$[k+3]=-O+n*s,$[k+4]=0,$[k+5]=O}H.vs=new bk($),H.gap=s,H.size=l}ul(K),Rb(b,j),hh(b),hk(b,j,1,K._gridColor,K._buffer.vs,H.vs),tl(b,0,H.vs.length/3,b.LINES),hs(b),xc(b,j)}else H.vs=H.gap=H.size=v}});var Si=function(n){this.gv=n};Uf(Si,t,{_42:function(V,j){var X=this.gv,H=X._buffer.vs,C=X._axisXColor,N=X._axisYColor,W=X._axisZColor,n=X._originAxisVisible,e=X._centerAxisVisible;if(n||e){var R=q?V.TRIANGLES:V.TRIANGLE_FAN,x=V.LINES;if(ul(X),Rb(V,j),hh(V),n){var B=X.getCenterInfo(),z=o(B.width,B.height)/5,s=.8*z,t=.05*z;hk(V,j,1.5,C,H,new bk([0,0,0,z,0,0,s,t,0,s,0,t,s,-t,0,s,0,-t,s,t,0,0,0,0,0,z,0,t,s,0,0,s,t,-t,s,0,0,s,-t,t,s,0,0,0,0,0,0,z,t,0,s,0,t,s,-t,0,s,0,-t,s,t,0,s])),tl(V,0,2,x),tl(V,1,6,R),hk(V,j,v,N),tl(V,7,2,x),tl(V,8,6,R),hk(V,j,v,W),tl(V,14,2,x),tl(V,15,6,R)}if(e){var I=X._center,d=I[0],O=I[1],g=I[2],B=X.getPositionInfo(I);z=o(B.width,B.height)/20,hk(V,j,1.5,C,H,new bk([d,O,g,d+z,O,g,d,O,g,d,O+z,g,d,O,g,d,O,g+z])),tl(V,0,2,x),hk(V,j,v,N),tl(V,2,2,x),hk(V,j,v,W),tl(V,4,2,x)}hs(V),xc(V,j)}}});var qn=function(s){this.gv=s},fp="edit_tx",hm="edit_ty",uq="edit_tz",Br="edit_rx",Pm="edit_ry",zj="edit_rz",Ld="edit_sx",An="edit_sy",uf="edit_sz",wb={};wb[fp]=1,wb[hm]=1,wb[uq]=1,wb[Br]=1,wb[Pm]=1,wb[zj]=1,wb[Ld]=1,wb[An]=1,wb[uf]=1,Uf(qn,t,{_42:function(r,$,I){var t=this,Y=t.gv,M=Y.sm().ld();if(Y.isEditable(M)&&Qn(M)&&(!Y.isFirstPersonMode()||!Y.isMouseRoamable()&&!E)){ul(Y);var a,C,X=Y.isMovable(M),Z=Y.isRotationEditable(M),K=Y.isSizeEditable(M),x=Y._axisXColor,V=Y._axisYColor,A=Y._axisZColor,s=Y._editSizeColor,h=Y.getCenterInfo(),e=o(h.width,h.height)/10,l=e/(I?5:10),L=.7*e,v=.4*L,J=M.p3(),b=J[0],T=J[1],z=J[2];a=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],X&&t._17O(r,$,M,I,fp,x,a,[b,T-l,z,b+L,T-l,z,b+L,T,z,b+L,T,z,b,T,z,b,T-l,z,b,T-l,z+l,b+L,T-l,z+l,b+L,T-l,z,b+L,T-l,z,b,T-l,z,b,T-l,z+l]),C=b+L,K&&t._17O(r,$,M,I,Ld,s,a,[C,T-l,z,C+v,T-l,z,C+v,T,z,C+v,T,z,C,T,z,C,T-l,z,C,T-l,z+l,C+v,T-l,z+l,C+v,T-l,z,C+v,T-l,z,C,T-l,z,C,T-l,z+l]),C+=v,Z&&t._17O(r,$,M,I,Br,x,a,[C,T-l,z,C+v,T-l,z,C+v,T,z,C+v,T,z,C,T,z,C,T-l,z,C,T-l,z+l,C+v,T-l,z+l,C+v,T-l,z,C+v,T-l,z,C,T-l,z,C,T-l,z+l]),a=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],X&&t._17O(r,$,M,I,hm,V,a,[b,T,z,b,T+L,z,b-l,T+L,z,b-l,T+L,z,b-l,T,z,b,T,z,b,T,z,b,T,z-l,b,T+L,z-l,b,T+L,z-l,b,T+L,z,b,T,z]),C=T+L,K&&t._17O(r,$,M,I,An,s,a,[b,C,z,b,C+v,z,b-l,C+v,z,b-l,C+v,z,b-l,C,z,b,C,z,b,C,z,b,C,z-l,b,C+v,z-l,b,C+v,z-l,b,C+v,z,b,C,z]),C+=v,Z&&t._17O(r,$,M,I,Pm,V,a,[b,C,z,b,C+v,z,b-l,C+v,z,b-l,C+v,z,b-l,C,z,b,C,z,b,C,z,b,C,z-l,b,C+v,z-l,b,C+v,z-l,b,C+v,z,b,C,z]),a=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],X&&t._17O(r,$,M,I,uq,A,a,[b,T,z,b,T,z+L,b,T-l,z+L,b,T-l,z+L,b,T-l,z,b,T,z,b,T-l,z,b-l,T-l,z,b-l,T-l,z+L,b-l,T-l,z+L,b,T-l,z+L,b,T-l,z]),C=z+L,K&&t._17O(r,$,M,I,uf,s,a,[b,T,C,b,T,C+v,b,T-l,C+v,b,T-l,C+v,b,T-l,C,b,T,C,b,T-l,C,b-l,T-l,C,b-l,T-l,C+v,b-l,T-l,C+v,b,T-l,C+v,b,T-l,C]),C+=v,Z&&t._17O(r,$,M,I,zj,A,a,[b,T,C,b,T,C+v,b,T-l,C+v,b,T-l,C+v,b,T-l,C,b,T,C,b,T-l,C,b-l,T-l,C,b-l,T-l,C+v,b-l,T-l,C+v,b,T-l,C+v,b,T-l,C])}},_17O:function(T,i,s,U,e,V,m,Q){var y=this.gv._buffer;mk(T,i,U,!0,s,e),ai(T,i,v,!0,v,!0,v,!1),Oh(T,i.uDiffuse,V),uc(T,y.vs,new bk(Q),i.aPosition),uc(T,y.ns,new bk(m),i.aNormal),hh(T),tl(T,0,12),hs(T),Ub(T,i)}});var Ln=function(u,R){this.gv=u,this.s=function(J,I,w){return I==v&&(I=w),I==v?R.getStyle(J):hf(I,R,u)},this.data=R};Uf(Ln,t,{I3d:!0,ms_icons:1,_iv:!0,iv:function(){this._iv=!0},_42:function(r,X,O,V){var k,b,w,F,x,u,I,Z=this,G=Z.gv,g=Z.data,i=g._id,M=Z.s("batch"),E=G._34O,Q=G._33O,o=G.isSelectable(g),c=G.getBrightness(g),s=c!=v&&1!==c;if(Z._iv){if(w=gh(E,Q,g,M),Z.validate(w,M?Im[M]||Hg:v),w&&(F=E[i],x=F.size=w.vs.length/3-F.begin,I=w.rs))for(c=s?c:1,u=0;x>u;u++)I.push(c);if(Qn(g)){var z=G.getWireframe(g);z&&Tj(G,g,z)}Z.labelInfo=Z.label2Info=Z.noteInfo=Z.note2Info=Z._38o=v,Z._24O(bo,"getLabel"),Z._24O(fj,"getLabel2"),Z._26O(to,"getNote"),Z._26O(Tp,"getNote2"),Z._15O(),Z._iv=!1}s&&Oh(r,X.uBrightness,c),b=mk(r,X,O,o,g,mh),b&&(wo(b,E[i],Q),wo(b,G._polylineIndexMap[i],G._polylineModelMap),wo(b,G._wireframeIndexMap[i],G._wireframeModelMap)),E[i]||Z._80o(r,X,V),G.isLabelVisible(g)&&((k=Z.labelInfo)&&(mk(r,X,O,o,g,bo),Z._28O(k,bo,V)),(k=Z.label2Info)&&(mk(r,X,O,o,g,fj),Z._28O(k,fj,V))),G.isNoteVisible(g)&&((k=Z.noteInfo)&&(mk(r,X,O,o,g,to),Z._29O(k,to,V)),(k=Z.note2Info)&&(mk(r,X,O,o,g,Tp),Z._29O(k,Tp,V))),(k=Z._38o)&&Z._99O(r,X,k,O,o,V),s&&Oh(r,X.uBrightness,1)},validate:function(){},_16O:function(){return Lo},_80o:function(){},dispose:function(){},getBodyColor:function(_){var n=this.data,E=this.gv.getBodyColor(n);return E?E:_?n.getStyle(_):v},_24O:function(r,z){var $=this,M=$.data,J=$.gv,T=$.s,Z=J[z](M);if(Z!=v){var q=T(r+".scale"),p=T(r+".max"),I=$[r+"Info"]={label:Z,textureScale:T(r+".texture.scale"),color:J[z+"Color"](M),font:T(r+".font"),align:T(r+".align"),background:J[z+"Background"](M)},O=I.rect=ci(I,Z);p>0&&p<O.width&&(I.labelWidth=O.width,O.width=p),O.x=O.y=0,O.width*=q,O.height*=q,I.mat=$._16O(T(r+".autorotate"),T(r+".position"),O,T(r+".face"),T(r+".t3"),T(r+".r3"),T(r+".rotationMode"));var X=O.width/2,P=O.height/2;I.vs=new bk([-X,P,0,-X,-P,0,X,-P,0,X,P,0]),O.width/=q,O.height/=q}},_26O:function(t,B){var H=this,m=H.data,U=H.gv,F=H.s,p=U[B](m);if(p!=v){var x=F(t+".scale"),b=this[t+"Info"]={note:p,textureScale:F(t+".texture.scale"),expanded:F(t+".expanded"),font:F(t+".font"),color:F(t+".color"),align:F(t+".align"),borderWidth:F(t+".border.width"),borderColor:F(t+".border.color"),background:U[B+"Background"](m)};if(b.expanded){var S=F(t+".max"),Y=ci(b,p);Y.width+=6,Y.height+=2,S>0&&S<Y.width&&(b.labelWidth=Y.width,Y.width=S);var k={x:-Y.width/2,y:-8-Y.height,width:Y.width,height:Y.height+8}}else k={x:-6,y:-18,width:12,height:18};b.mat=H._16O(F(t+".autorotate"),F(t+".position"),v,F(t+".face"),F(t+".t3"),F(t+".r3"),F(t+".rotationMode")),b.rect=k,1!==x&&(k=ui(k),k.x*=x,k.height*=x,k.y=-k.height,k.width*=x);var Q=k.x,g=k.y,i=k.width,E=k.height;b.vs=new bk([Q,-g,0,Q,-g-E,0,Q+i,-g-E,0,Q+i,-g,0])}},_28O:function(k,S,g){if(g(this.s(S+".transparent"))){var J=k.rect,s=k.textureScale,$=J.width*s,h=J.height*s;if($>=1&&h>=1){var C=vb($,h);1!==s&&(C.translate(C,J.x,J.y),C.scale(s,s),C.translate(C,-J.x,-J.y)),Qo(C,k),C.restore(),$f(this,S,k.mat,k.vs,!0)}}},_29O:function(Y,P,D){if(D(this.s(P+".transparent"))){var v=Y.rect,N=Y.textureScale,k=v.x,t=v.y,g=v.width*N,L=v.height*N;if(g>=1&&L>=1){v.x=v.y=0;var b=vb(g,L);1!==N&&b.scale(N,N),No(b,Y),b.restore(),v.x=k,v.y=t,$f(this,P,Y.mat,Y.vs,!1)}}},_99O:function(u,G,b,n,x,g){if(b){var r=this,B=r.gv,H=r.data,F=B._buffer,s=B._1O,k=b.icons;for(var y in k){var J=k[y],R=b.rects[y];if(R&&g(hf(J.transparent,H,B))){mk(u,G,n,x,H,y);var I=hf(J.shape3d,H,B),Y=I?[I]:hf(J.names,H,B),O=Y?Y.length:0,i=hf(J.textureScale,H,B)||1,d=hf(J.light,H,B);d==v&&(d=I?!0:!1),ai(u,G,hf(J.blend,H,B),d,hf(J.opacity,H,B),hf(J.reverseFlip,H,B),hf(J.reverseColor,H,B),hf(J.reverseCull,H,B));for(var z=0;O>z;z++){var q=Y[z],W=R[z];if(Xo(r,W.mat),I)aq(B,H,Di(r,I),r);else{var T=Ep(q);if(T){var U=W.width*i,l=W.height*i;if(U>=1&&l>=1){var N=vb(U,l);Cb(N,T,hf(J.stretch,H,B),0,0,U,l,H,B),N.restore(),Fl(u,nq,s),hh(u,G,s,hf(J.discardSelectable,H,B),F.uv,_c),uc(u,F.vs,W.vs,G.aPosition),uc(u,F.ns,_n,G.aNormal),qe(u,F.is,nr),kk(u,0,nr.length),hs(u,G,s)}}}jr(B)}Ub(u,G)}}}}});var _g=function(B,y){lj(_g,this,[B,y])};Uf(_g,Ln,{_16O:function(I,n,o,l,K,j,u,T,F){var r=this.data,f=ih(n,r.s3(),o,l,T,F);return el(rh(),f,r.p3(),l,K,j,u,I,r.r3(),r.getRotationMode())},clear:function(){var $=this;$.faceMat=$.mat=$.shapeModel=$.left=$.right=$.front=$.back=$.top=$.bottom=$.csg=v},validate:function(B,t){var Z=this,M=Z.gv,b=Z.data,j=Di(Z),v=Bi(b,M.getMat(b),j?Z.s("shape3d.scaleable"):!0);if(Z.clear(),B){var W=[];j?nl(M,b,j,Z,Z.getBodyColor(),[v],B,W):(Ac(M,b,B,t,v,Kp,W,gs),Ac(M,b,B,t,v,be,W,oc),Ac(M,b,B,t,v,ph,W,fm),Ac(M,b,B,t,v,ud,W,Pd),Ac(M,b,B,t,v,Cf,W,yf),Ac(M,b,B,t,v,uj,W,fc)),W.length&&(Cl(B.vs,W),Cl(B.ns,Ki(W)))}else Z.mat=v,(Z.shapeModel=j)||(Z.vf(Kp),Z.vf(be),Z.vf(Cf),Z.vf(uj),Z.vf(ph),Z.vf(ud))},vf:function(l){var c=this;if(c.gv.getFaceVisible(c.data,l)){var O=$o(c,l);return O.mat&&(c.faceMat=!0),O}},_80o:function(g,F,B){var k=this,f=k.gv,O=k.data,h=f._cube,T=k.shapeModel;ul(f,k.mat),T?aq(f,O,T,k,k.getBodyColor(),B):(uc(g,h.vs,v,F.aPosition),uc(g,h.ns,v,F.aNormal),qe(g,h.is),k._18O(g,F,k.left,0,B),k._18O(g,F,k.front,6,B),k._18O(g,F,k.right,12,B),k._18O(g,F,k.back,18,B),k._18O(g,F,k.top,24,B),k._18O(g,F,k.bottom,30,B)),jr(f),k.faceMat&&(k._18O(g,F,k.left,0,B,!0),k._18O(g,F,k.front,6,B,!0),k._18O(g,F,k.right,12,B,!0),k._18O(g,F,k.back,18,B,!0),k._18O(g,F,k.top,24,B,!0),k._18O(g,F,k.bottom,30,B,!0))},_18O:function(g,d,h,e,T,s){if(h){if(!T(h.transparent))return;if(s&&!h.mat||!s&&h.mat)return;s&&ul(this.gv,h.mat);var N=this,Y=N.data,X=N.gv,x=X.getTexture(h.texture,Y),t=h.uv,B=h.uvScale,P=h.uvOffset,O=h.discardSelectable;if(x)if(t){for(var I=8*(e/6),H=0;8>H;H++)mr[I+H]=t[H];hh(g,d,x,O,X._buffer.uv,mr,P,B)}else hh(g,d,x,O,X._cube.uv,v,P,B);else hh(g);ai(g,d,h.blend,h.light,h.opacity,h.reverseFlip,h.reverseColor,h.reverseCull),Oh(g,d.uDiffuse,h.color),kk(g,e,6),Ub(g,d),hs(g,d,x),s&&jr(X)}}});var Am=function(g,L){lj(Am,this,[g,L])};Uf(Am,Ln,{_25Q:1,validate:function(R){var K=this,c=K.gv,W=K.data,j=K.s,h=j("edge.width"),A=W._40I,$=W._41I;if(K.shapeModel=K.info=v,A&&$){var k,i,V,s,E,g,y,B,m,t,P=W.isLooped(),X=j(ke),b=r.getEdgeType(X);if(b){var I=b(W,Cm(K,c,W,P,X),c,K._19Q);if(!I.points||I.points.isEmpty())return;g=K.info={},y=I.segments,E=I.points,B=E.size();for(var f=A.getElevation(),Z=$.getElevation(),x=0;B>x;x++){var M=E.get(x);M.e==v&&(M.e=f+(Z-f)*x/(B-1))}m=Re(E.get(0)),t=Re(E.get(B-1));var q=B%2;0===q?(g.c1=Re(E.get(B/2-1)),g.c2=Re(E.get(B/2))):g.p3=Re(E.get((B-q)/2)),g.s1=m,g.s2=Re(E.get(1)),g.t1=Re(E.get(B-2)),g.t2=t}else{E=new Sd,g=K.info={};var e=j("edge.offset"),Y=j("edge.center"),C=j("edge.source.t3"),z=j("edge.target.t3"),p=A.p3(),l=$.p3();if(C&&(p[0]+=C[0],p[1]+=C[1],p[2]+=C[2]),z&&(l[0]+=z[0],l[1]+=z[1],l[2]+=z[2]),X===cd){y=j("edge.segments");var O=g.points=j(pc)||Ke;if(B=O.size()){m=Re(O.get(0)),t=Re(O.get(B-1)),!Y&&e&&(V=Fk(m,p,!0),e=o(e,Kd(p,m)),p=[p[0]+V[0]*e,p[1]+V[1]*e,p[2]+V[2]*e],V=Fk(l,t,!0),e=o(e,Kd(t,l)),l=[l[0]-V[0]*e,l[1]-V[1]*e,l[2]-V[2]*e]);var q=B%2;0===q?(k=Re(O.get(B/2-1)),i=Re(O.get(B/2))):g.p3=Re(O.get((B-q)/2)),g.s1=p,g.s2=m,g.t1=t,g.t2=l}else!Y&&e&&(V=Fk(l,p,!0),s=Kd(p,l),e=om(e,s),p=[p[0]+V[0]*e,p[1]+V[1]*e,p[2]+V[2]*e],l=[l[0]-V[0]*e,l[1]-V[1]*e,l[2]-V[2]*e]),k=p,i=l;E.add({x:p[0],y:p[2],e:p[1]}),E.addAll(O),E.add({x:l[0],y:l[2],e:l[1]})}else{var G=Cm(K,c,W,P,X);if(K._19Q||(G=-G),P){var U=p[0],u=p[1],N=p[2],L=A.getTall()/2+G;k=[U-G,u+L,N],i=[U+G,u+L,N],E.add({x:U-G,y:N,e:u}),E.add({x:U-G,y:N,e:u+L}),E.add({x:U+G,y:N,e:u+L}),E.add({x:U+G,y:N,e:u})}else{V=Fk(l,p,!0),s=Kd(p,l);var D={x:p[0],y:p[2]},F={x:l[0],y:l[2]},d=Dn(v,D,F,G),T=d.x-D.x,a=d.y-D.y;e=om(e,s),V[0]*=e,V[1]*=e,V[2]*=e,k=[p[0]+V[0]+T,p[1]+V[1],p[2]+V[2]+a],i=[l[0]-V[0]+T,l[1]-V[1],l[2]-V[2]+a],Y?(E.add({x:p[0],y:p[2],e:p[1]}),E.add({x:k[0],y:k[2],e:k[1]}),E.add({x:i[0],y:i[2],e:i[1]}),E.add({x:l[0],y:l[2],e:l[1]})):(E.add({x:k[0],y:k[2],e:k[1]}),E.add({x:i[0],y:i[2],e:i[1]}))}}g.c1=k,g.c2=i}g.list=j(Ai)===Wc?K.createTubeModel(E,y,h/2,R):K.createLineModel(E,y,h,"edge","edge.dash")}}});var mj=function(C,E){lj(mj,this,[C,E])};Uf(mj,_g,{_80o:function(Z,o,H){var e=this,O=e.gv,h=e.shapeModel;ul(O,e.mat),h?aq(O,e.data,h,e,e.getBodyColor(),H):(Sn(e,Z,o,e.left,H),Sn(e,Z,o,e.front,H),Sn(e,Z,o,e.right,H),Sn(e,Z,o,e.back,H),Sn(e,Z,o,e.top,H),Sn(e,Z,o,e.bottom,H)),jr(O)},validate:function(W,X){var g,h,t=this,z=t.s,q=t.data,V=q.p3(),N=q._thickness/2,K=q.isClosePath(),o=q.getPoints(),M=q.getSegments(),S=z(Mj),w=W&&W.uv;if(t.clear(),0>N)h=t.shapeModel=ng(o,M,z(yp),z(Bg),S,z(yi),q.getTall(),q.getElevation(),K),z(cc)?z("shape3d.image")||delete h.uv:(delete h.vs,delete h.ns,delete h.uv),z("shape3d.top.image")||delete h.top_uv,z("shape3d.bottom.image")||delete h.bottom_uv;else if(z(Ai)===Wc)g=bs(o,M,S,K),h=t.shapeModel={vs:[]},z("shape3d.image")&&(h.uv=[],h.sum=z(yi)||nh(g)||1,h.len=0),z(yp)&&!K&&(h.top_vs=[],z("shape3d.top.image")&&(h.top_uv=[])),z(Bg)&&!K&&(h.bottom_vs=[],z("shape3d.bottom.image")&&(h.bottom_uv=[])),t._12O(g,N);else{var B,A,l,b,Q,e,L,f,m,R;g=bs(o,M,S,K),Q=t.vf(Cf,w,!1,X),N&&(e=t.vf(uj,w,!1,X),L=K?v:t.vf(Kp,w,!1,X),f=K?v:t.vf(be,w,!1,X),m=t.vf(ph,w,!1,X),R=t.vf(ud,w,!1,X)),N?t._12O(g,N):Q&&g.forEach(function(u){if(b=u.length,b>0)for(B=u[0],l=1;b>l;l++)A=u[l],t.addV(Q.vs,B,A),B=A}),t._20Q(g),W||(Q&&(Q.ns=Ki(Q.vs),Yp(Q,"vs"),Yp(Q,uo)),N&&(e&&(e.ns=Ki(e.vs),Yp(e,"vs"),Yp(e,uo)),L&&(L.ns=Ki(L.vs),Yp(L,"vs"),Yp(L,uo)),f&&(f.ns=Ki(f.vs),Yp(f,"vs"),Yp(f,uo)),m&&(m.ns=Ki(m.vs),Yp(m,"vs"),Yp(m,uo)),R&&(R.ns=Ki(R.vs),Yp(R,"vs"),Yp(R,uo))))}var Y=t.mat=rh();Ag(Y,V),on(Y,q.r3(),q.getRotationMode()),Ag(Y,wp(V)),W&&(js(t,Y,W,h),t.clear())},_20Q:function(M){var D,W,_,t,d,b,B,N=this,z=N.front,q=N.back,u=N.top,c=N.bottom,L=z?z.tuv:v,C=q?q.tuv:v,P=u?u.tuv:v,R=c?c.tuv:v,h=0;(L||C||P||R)&&(D=N.s(yi)||nh(M)||1,M.forEach(function(P){if(W=P.length,W>0)for(b=P[0],_=1;W>_;_++)B=P[_],t=h/D,h+=Kd(b,B),d=h/D,N._14O(z,t,d),N._14O(q,1-d,1-t),N._14O(u,t,d),N._14O(c,t,d),b=B}))},_14O:function(Q,K,J){if(Q){var h=Q.uv,z=Q.tuv;if(z){if(h)var H=h[0]+(h[6]-h[0])*K,Z=h[1]+(h[7]-h[1])*K,U=h[2]+(h[4]-h[2])*K,m=h[3]+(h[5]-h[3])*K,F=h[2]+(h[4]-h[2])*J,b=h[3]+(h[5]-h[3])*J,s=h[0]+(h[6]-h[0])*J,r=h[1]+(h[7]-h[1])*J;else H=K,Z=0,U=K,m=1,F=J,b=1,s=J,r=0;z.push(U,m,F,b,s,r,s,r,H,Z,U,m)}}},_13O:function(X){var B=X.uv,i=X.tuv;i&&(B?i.push(B[2],B[3],B[4],B[5],B[6],B[7],B[6],B[7],B[0],B[1],B[2],B[3]):i.push(0,1,1,1,1,0,1,0,0,0,0,1))},_12O:function(Y,w){var n,m,H,y,F,U=this;Y.forEach(function(c){if(F=c.length,F>0)for(n={p:c[0],n:!0},y=1;F>y;y++)m=c[y],H=F-1>y?c[y+1]:v,U.addPoint(n,m,H,w,c)})},addPoint:function(u,O,r,g,J){var y,M,f,q,Z,Q,c,p,R,P=this,t=u.p,G=u.f,Y=u.b,X=P.s("shape3d.side")||Hq,s=P.s("shape3d.start.angle"),l=P.shapeModel,I=P.data.isClosePath();if(u.n&&(u.n=!1,G=I&&J.length>2?Dn(J[J.length-2],t,O,g):Dn(v,t,O,g),Y=qh(t,G),l?l.top_vs&&P._10O(Y,G,X,s,l.top_vs,l.top_uv):(y=P.left)&&(P.addV(y.vs,Y,G),P._13O(y))),M=r?Dn(t,O,r,g):I&&J.length>2?Dn(t,O,J[1],g):Dn(t,O,v,g),f=qh(O,M),l){var j,V,K=l.vs,E=l.uv,n=l.sum;for(E&&(j=l.len/n,l.len+=Kd(t,O),V=l.len/n),Q=P._9O(Y,G,X,s),c=P._9O(f,M,X,s),p=0;X>p;p++)R=p+1,Cl(K,Q[R]),Cl(K,c[p]),Cl(K,Q[p]),Cl(K,c[p]),Cl(K,Q[R]),Cl(K,c[R]),E&&(q=p/X,Z=R/X,E.push(j,Z,V,q,j,q,V,q,j,Z,V,Z));!r&&l.bottom_vs&&P._10O(f,M,X,s,l.bottom_vs,l.bottom_uv,!0)}else!r&&(y=P.right)&&(P.addV(y.vs,M,f),P._13O(y)),(y=P.front)&&P.addV(y.vs,G,M),(y=P.back)&&P.addV(y.vs,f,Y),(y=P.top)&&P.addH(y.vs,G,M,f,Y,!0),(y=P.bottom)&&P.addH(y.vs,Y,f,M,G);u.p=O,u.f=M,u.b=f},_10O:function(y,F,R,T,o,b,u){var m,A,H=this,S=H.data,V=H._9O(y,F,R,T),f=(y.x+F.x)/2,w=(y.y+F.y)/2,i=S.getElevation(),U=0;for(U=0;R>U;U++)u?(Cl(o,V[U]),Cl(o,V[U+1])):(Cl(o,V[U+1]),Cl(o,V[U])),Cl(o,[f,i,w]),b&&(u?(m=X*(U+1)/R+T,A=X*U/R+T):(m=X*U/R+T,A=X*(U+1)/R+T),b.push(.5-.5*C(A),.5-.5*j(A),.5-.5*C(m),.5-.5*j(m),.5,.5))},_9O:function(E,B,x,p){for(var J,F,w=this,G=w.data,Q=[],W=(E.x+B.x)/2,d=(E.y+B.y)/2,t=G.getTall()/2,r=G.getElevation(),K=0;x>=K;K++)J=X*K/x+p,F=C(J),Q.push([W+(E.x-W)*F,r+t*j(J),d+(E.y-d)*F]);return Q},addV:function(s,D,q){var E=D.x,K=D.y,p=q.x,l=q.y,v=this.data,S=v.getElevation(),H=v.getTall()/2;s.push(E,S-H,K,p,S-H,l,p,S+H,l,p,S+H,l,E,S+H,K,E,S-H,K)},addH:function(L,M,B,r,k,K){var y=this.data,C=y.getTall()/2,J=y.getElevation()+(K?C:-C);L.push(M.x,J,M.y,B.x,J,B.y,r.x,J,r.y,r.x,J,r.y,k.x,J,k.y,M.x,J,M.y)},vf:function(g,b,$,C){var t,N=this,B=N.gv.getFaceVisible(N.data,g);return($||B)&&(t=$o(N,g,C),t.vs=[],t.tuv=B&&(t.texture||b)?[]:v,t.visible=B),t}});var gg=function(E,q){lj(gg,this,[E,q])};Uf(gg,Ln,{_25Q:1,validate:function(e){var C=this,_=C.data,d=C.s,g=_.getPoints(),W=g.size();if(C.shapeModel=C.info=v,W>1){var K=C.info={},Y=_.getSegments(),o=_.getThickness(),P=Re(g.get(0)),s=Re(g.get(W-1)),A=W%2;0===A?(K.c1=Re(g.get(W/2-1)),K.c2=Re(g.get(W/2))):K.p3=Re(g.get((W-A)/2)),K.s1=P,K.s2=Re(g.get(1)),K.t1=Re(g.get(W-2)),K.t2=s,K.list=d(Ai)===Wc?C.createTubeModel(g,Y,o/2,e):C.createLineModel(g,Y,o,"shape.border","shape.dash")}}}),ik(r,{accordionViewExpandIcon:Dh(vo),accordionViewCollapseIcon:Dh(vo,!0),accordionViewLabelColor:pk,accordionViewLabelFont:Qk,accordionViewTitleBackground:Ni,accordionViewSelectBackground:Rh,accordionViewSelectWidth:3,accordionViewSeparatorColor:z,splitViewDividerSize:1,splitViewDividerBackground:Ni,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:_b,rect:[2,2,12,12],background:vo}]},propertyViewLabelColor:$l,propertyViewLabelSelectColor:pk,propertyViewLabelFont:Qk,propertyViewExpandIcon:Dh(so),propertyViewCollapseIcon:Dh(so,!0),propertyViewBackground:Nh,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:Aj,propertyViewColumnLineColor:Aj,propertyViewSelectBackground:Rh,listViewLabelColor:$l,listViewLabelSelectColor:pk,listViewLabelFont:Qk,listViewRowLineVisible:!1,listViewRowLineColor:Aj,listViewSelectBackground:Rh,treeViewLabelColor:$l,treeViewLabelSelectColor:pk,treeViewLabelFont:Qk,treeViewExpandIcon:Dh(yd),treeViewCollapseIcon:Dh(yd,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:Aj,treeViewSelectBackground:Rh,treeViewDoubleClickToToggle:!0,tableViewLabelColor:$l,tableViewLabelSelectColor:pk,tableViewLabelFont:Qk,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:Aj,tableViewColumnLineColor:Aj,tableViewSelectBackground:Rh,treeTableViewLabelColor:$l,treeTableViewLabelSelectColor:pk,treeTableViewLabelFont:Qk,treeTableViewExpandIcon:Dh(yd),treeTableViewCollapseIcon:Dh(yd,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:Aj,treeTableViewColumnLineColor:Aj,treeTableViewSelectBackground:Rh,tableHeaderLabelColor:$l,tableHeaderLabelFont:Qk,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:Wk,tableHeaderBackground:Nh,tableHeaderMoveBackground:$q,tableHeaderInsertColor:Rh,tableHeaderSortDescIcon:Lr(so,!0),tableHeaderSortAscIcon:Lr(so),tabViewTabGap:1,tabViewLabelColor:pk,tabViewLabelFont:Qk,tabViewTabBackground:Ni,tabViewSelectWidth:3,tabViewSelectBackground:Rh,tabViewMoveBackground:$q,tabViewInsertColor:Rh,toolbarLabelColor:$l,toolbarLabelSelectColor:pk,toolbarLabelFont:Qk,toolbarBackground:Nh,toolbarSelectBackground:Rh,toolbarItemGap:8,toolbarSeparatorColor:Wd},!0);var Yb={translateX:1,sortColumn:1},Tg={sortable:1,sortOrder:1,sortFunc:1},Xh={focusData:1},Xi={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},cs={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},Pl=function(p,Y){Y.add(p),p.hasChildren()&&p.eachChild(function(P){Pl(P,Y)})},Yf=function(P,C,y,q,A,o,U,I,R,Y,V){var d,x=y.getValueType(Y),e=y.getAlign(Y);if(y.getEnumValues(Y)){var w=y.toEnumLabel(C,Y),L=gk||0,b=0,j=o,O=r.getTextSize(q,w).width;return d=Ep(y.toEnumIcon(C,Y)),d&&(b=o+gk/2,"center"===e?b+=(I-(L+O))/2:"right"===e&&(b=b+I-(L+O)),Df(P,d,b,U+R/2),j=b+gk/2),w!=v&&(d?fr(P,w,q,A,j,U,I-(j-o),R):fr(P,w,q,A,o,U,I,R,e)),void 0}return C=y.formatValue(C),C!=v?x===dn?(_r(P,o,U,I,R,C),void 0):x===wm||!x&&$g(C)?(d=Ep(C?bq:jl),Df(P,d,o+I/2,U+R/2,Y,V),void 0):(fr(P,C,q,A,o,U,I,R,e),void 0):void 0},Dp=function(i,R){var G=R.view,s=G.getDataModel().getHistoryManager(),W=ug(i),O=R.column||R.property;s&&s.beginInteraction(),R.editor=i,i.info=R,G.setCurrentEditor(i),G.getView().insertBefore(W,G._79O),oi(i,R.editorRect),i.setFocus?i.setFocus():Fc(i),i.commitValue=function(){i._17Q&&(i=i._17Q),G.setValue(R.data,O,i.getValue?i.getValue():i.value),i.close&&i.close(),gp(W)},O.onEditorCreated&&O.onEditorCreated(R)},Wn=function(X,j,U,q,H){var Y=Qf(X,U),t=j.value,N=j.view,F=H.getValueType(j.data);return Y.onblur=Y.onchange=function(){N.endEditing()},"input"===X?(t=H.formatValue(t),t!=v&&(Y.value=t),Y.onkeydown=function(M){Nd(M)&&N.endEditing()},(F===xd||F===Er)&&Y.addEventListener(mg,r.numberListener,!1)):X===Gl&&q.forEach(function(x){var n=W.createElement("option");n.innerHTML=H.toEnumLabel(x),n.value=x,H.isEnumEqual(t,x)&&(n.selected=!0),Yr(Y,n)}),Dp(Y,j),Y},kc=n.widget={},Nb=function(V,K,I){Uf(Q+".widget."+V,K,I)};ik(Af,{ms_value:function(h){h.getValue=function(G){var c=this.getItemById(G),N=c.element;return hb(N)?N:N?N.getValue?N.getValue():N.value:c.selected},h.setValue=function(R,A){var J=this.getItemById(R),p=J.element;p&&!hb(p)?p.setValue?p.setValue(A):p.value=A:$g(A)?(J.selected=A,this.iv()):(J.element=A,this.iv())},h.v=function(b,g){var f=this;if(2===arguments.length)f.setValue(b,g);else{if(!Dj(b))return f.getValue(b);for(var G in b)f.setValue(G,b[G])}return f}},_46o:function(r){r._icon=v,r._accessType=v,r._valueType=v,r._editable=!1,r._batchEditable=!0,r._align=Kp,r._nullable=!0,r._emptiable=!1,r.setParent=vl,r.formatValue=function(j){var r=this,e=r._valueType;if(r.getEnumValues())return r.toEnumLabel(j);if(e===wm)return!!j;if(j!=v){if(e===xd)return u(j);if($n(j))return ko(j)}return j},r.setEnum=function(n,L,A,y,P,V,G){var g=this;n&&!ym(n)&&n.values&&(y=n.editable,A=n.icons,L=n.labels,P=n.strict,V=n.maxHeight,G=n.dropDownWidth,n=n.values),Wl(n)&&(n=n._as),Wl(L)&&(L=L._as),Wl(A)&&(A=A._as),g._enumValues=n,g._enumLabels=L,g._enumIcons=A,g._enumEditable=y,g._enumStrict=P==v?!0:P,g._enumMaxHeight=V,g._enumDropDownWidth=G,n&&n.length&&$n(n[0])&&(g._valueType=Er),g.fp("enum",!1,!0)},r.getEnumDropDownWidth=function(){return this._enumDropDownWidth},r.getEnumMaxHeight=function(){return this._enumMaxHeight},r.isEnumEditable=function(){return this._enumEditable
},r.getEnumValues=function(){return this._enumValues},r.getEnumLabels=function(){return this._enumLabels},r.getEnumIcons=function(){return this._enumIcons},r.isEnumStrict=function(){return this._enumStrict},r.isEnumEqual=function(r,H){return this._enumStrict?r===H:r==H},r.toEnumLabel=function(n,A){var m=this,a=m.getEnumValues(A),E=m.getEnumLabels(A);if(a&&E)for(var V=0;V<a.length;V++)if(m.isEnumEqual(n,a[V]))return E[V];return n},r.toEnumIcon=function(H,E){var F=this,n=F.getEnumValues(E),y=F.getEnumIcons(E);if(n&&y)for(var x=0;x<n.length;x++)if(F.isEnumEqual(H,n[x]))return y[x];return z}},_45o:function(g){g._87o=function(g,D,Z,G,f,K){if(g){var b=this,_=b._90I,o=Yn(1);b._columnLineVisible&&(f-=1),b._rowLineVisible&&(K-=1),0>=f||0>=K||(b._90I||(_=b._90I={}),_[D]||(_[D]=new Sd),oi(o,b.tx()+Z,b.ty()+G,f,K),Yr(o,g),b._view.insertBefore(o,b._79O),g.onParentAdded&&g.onParentAdded(o),_[D].add(o))}},g._76o=function(){var U=this,x=U._90I;if(x){for(var b in x)x[b].each(function(Z){gp(Z)});delete U._90I}},g._77o=function(Y){var s=this;if(s._90I){var r=s._90I[Y];r&&(r.each(function(q){gp(q)}),delete s._90I[Y])}}},_47o:function($){$.getValue=function(p,y){return y.getValue?y.getValue(p,y,this):zh(p,y.getAccessType(),y.getName())},$.setValue=function(p,n,r){if(n.isEmptiable(p)||""!==r||(r=z),n.isNullable(p)||r!=v){var K=this,f=n.getName(p),k=n.getAccessType(p),m=n.getValueType(p);m===xd&&hb(r)?r=s(r):m===Er&&hb(r)?r=parseFloat(r):m===wm&&hb(r)&&(r="true"===r),K._batchEditable&&n._batchEditable&&K.isSelected(p)?K.sm().each(function(m){n.setValue?n.setValue(m,n,r,K):ep(m,k,f,r)}):n.setValue?n.setValue(p,n,r,K):ep(p,k,f,r)}},$.setCurrentEditor=function(x){this.endEditing(),this._currentEditor=x,this.redraw()},$.isEditing=function(o,p){var d=this,z=d._currentEditor;if(!z)return!1;if(p){var H=z.info;return H?(H.column||H.property)===p&&H.data===o:!1}return!0},$.endEditing=function(){var b=this,Y=b._currentEditor,I=b.getDataModel().getHistoryManager();Y&&(delete b._currentEditor,Y.commitValue&&Y.commitValue(Y.info),b.redraw(),I&&I.endInteraction())},$.beginEditing=function(Z){this.endEditing();var b=this,d=Z.column||Z.property;if(d.beginEditing)d.beginEditing(Z);else{var H=Z.data,f=Z.value,e=b.getSelectBackground(H),B=d.getEnumValues(H),X=d.getSlider(H),K=d.getColorPicker(H);if(X){var q=Ec(kc.Slider,X);return q.setValue(f),q.getView().onblur=function(){b.endEditing()},q.isInstant()&&(q.onValueChanged=function(){b.setValue(H,d,q.getValue())}),Dp(q,Z),void 0}if(K||d.getValueType(H)===dn){var h=Ec(kc.ColorPicker,K);return h.setValue(f),h.onClosed=function(){b.endEditing()},h.isInstant()&&(h.onValueChanged=function(N,l){b.setValue(H,d,l)}),Dp(h,Z),h.open(),void 0}if(B){if(kc.ComboBox){var Y=new kc.ComboBox;Y.setValue(f),Y.setValues(B),Y.setLabels(d.getEnumLabels(H)),Y.setIcons(d.getEnumIcons(H)),Y.setEditable(d.isEnumEditable(H)),Y.setStrict(d.isEnumStrict(H)),Y.setMaxHeight(d.getEnumMaxHeight(H)),Y.setDropDownWidth(d.getEnumDropDownWidth(H)),Y.onClosed=function(){b.endEditing()},Dp(Y,Z),Y.open()}else Wn(Gl,Z,e,B,d);return}var N=d.getValueType(H);if(N===wm||$g(f))return b.setValue(H,d,!f),void 0;if(d.getItemEditor(H)){var C=Qd(d.getItemEditor(H)),y=new C(H,d,b,Z),t=y.getView();return t._17Q=y,y.setValue(f),Ck(t),Dp(t,Z),y.editBeginning&&y.editBeginning(),void 0}Wn("input",Z,e,v,d)}}},_44o:function(I){I.init=function(X){var K=this,n=K.th=new io(X),j=K._view=xr(1,K);K.tv=K._tableView=X,Yr(j,n.getView()),Yr(j,X.getView()),n.mp(function(R){R.property===jq&&K.iv()}),K.iv()},I.getTableView=function(){return this.tv},I.getTableHeader=function(){return this.th},I.getDataModel=function(){return this.tv.dm()},I.getColumnModel=function(){return this.tv.getColumnModel()},I.setColumns=function(z){this.tv.setColumns(z)},I.addColumns=function(E){this.tv.addColumns(E)},I.endEditing=function(){this.tv.endEditing()},I.validateImpl=function(){var b=this,$=b.th,W=am($),h={x:0,y:0,width:b.getWidth(),height:W};oi($,h),h.y=W,h.height=w(0,b.getHeight()-W),oi(b.tv,h)}},ms_vs:function(U){U._41o=function(){return this._29I.height<this._59I},U._43o=function(){var Q=this;Q._41o()&&(Q._58I||(m(function(){Q._94O()},ff),Q.iv()),Q._58I=new Date)},U._94O=function(){var J=this;if(J._58I){var o=new Date;o.getTime()-J._58I.getTime()>=ff?(delete J._58I,J.iv()):m(function(){J._94O()},ff)}},U._93I=function(){var h=this,y=h._27I;if(h._58I||!h._autoHideScrollBar){y||Yr(h._79O,y=h._27I=Yn());var b=h._29I,W=b.height,d=h._59I,t=h.getScrollBarSize(),k=b.width-t-2,B=W*(-h.ty()/d),R=W*(W/d),N=y.style;d>W?(bh>R&&(B=B+R/2-bh/2,0>B&&(B=0),B+bh>W&&(B=W-bh),R=bh),N.visibility=bl,N.background=h.getScrollBarColor(),N.borderRadius=t/2+co,oi(y,k,B,t,R)):N.visibility=zm}else y&&(y.style.visibility=zm)}},ms_hs:function(r){r._40o=function(){return this._29I.width<this._91I},r._42o=function(){var g=this;g._40o()&&(g._95O||(m(function(){g._94I()},ff),g.iv()),g._95O=new Date)},r._94I=function(){var v=this;if(v._95O){var f=new Date;f.getTime()-v._95O.getTime()>=ff?(delete v._95O,v.iv()):m(function(){v._94I()},ff)}},r._92I=function(){var k=this,i=k._28I;if(k._95O||!k._autoHideScrollBar){i||Yr(k._79O,i=k._28I=Yn());var I=k._29I,N=I.width,y=k._91I,$=k.getScrollBarSize(),F=I.height-$-2,K=N*(-k.tx()/y),L=N*(N/y),h=i.style;y>N?(bh>L&&(K=K+L/2-bh/2,0>K&&(K=0),K+bh>N&&(K=N-bh),L=bh),h.visibility=bl,h.background=k.getScrollBarColor(),h.borderRadius=$/2+co,oi(i,K,F,L,$)):h.visibility=zm}else i&&(i.style.visibility=zm)}}}),$i(bq,ue(16,16,[{type:xq,rect:[1,1,14,14],background:Rh},{type:gq,rect:[1,1,14,14],width:1,color:wh},{type:kl,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),$i(jl,ue(16,16,{type:gq,rect:[1,1,14,14],width:1,color:wh})),$i(Zd,ue(16,16,[{type:pi,rect:[2,2,12,12],borderWidth:1,borderColor:wh,background:"#FFF"},{type:pi,rect:[4,4,8,8],background:Rh}])),$i(qo,ue(16,16,{type:pi,rect:[2,2,12,12],borderWidth:1,borderColor:wh})),Af._15Q=function(y){y._29I=Zb,y._59I=0,y._91I=0,y._5o=function(Q){var j=this;j._30I=new Sd,j._rows=new Sd,j._rowMap={},j._31I=0,j._14I=0,j._view=xr(1,j),j._canvas=yj(j._view),Yr(j._view,j._79O=Yn()),j.dm(Q?Q:new Ko)},y.getCheckIcon=function(P){var W=this.sm(),s=W.co(P);return W.sg()?Ep(s?Zd:qo):Ep(s?bq:jl)},y.checkData=function(z){var j=this.sm(),x=j.co(z);j.sg()&&x||(this._32o=1,x?j.rs(z):j.as(z),delete this._32o)},y.getDataAt=function(s){s.target&&(s=this.lp(s));var F=P(s.y/this._rowHeight),A=this._rows;return 0>F||F>=A.size()?v:A.get(F)},y.onDataDoubleClicked=function(){},y.onDataClicked=function(){},y.adjustTranslateX=function(){return 0},y.adjustTranslateY=function(b){var T=this.getHeight()-this._59I;return T>b&&(b=T),b>0?0:u(b)},y.onPropertyChanged=function(z){var y=this,s=z.property;Xi[s]?y.ivm():Xh[s]||y.redraw(),s===Gg?y._42o():s===Go&&y._43o()},y.getLabel=function(r){return r.toLabel()},y.getLabelFont=function(){return this._labelFont},y.getLabelColor=function(A){var C=this;if(C.isCheckMode()){if(C._focusData===A)return C._labelSelectColor}else if(C.isSelected(A))return C._labelSelectColor;return C._labelColor},y.getStartRowIndex=function(){return this._31I},y.getEndRowIndex=function(){return this._14I},y.getRowDatas=function(){return this._rows},y.getRowIndex=function(p){return this._rowMap[p._id]},y.getRowSize=function(){return this._rows.size()},y.getViewRect=function(){return ui(this._29I)},y.isVisible=function(z){return this._visibleFunc?this._visibleFunc(z):!0},y.getCurrentSortFunc=function(){return this._sortFunc},y.setDataModel=function(i){var Y=this,d=Y._dataModel,R=Y._selectionModel;d!==i&&(d&&(d.umm(Y.handleDataModelChange,Y),d.umd(Y.handleDataPropertyChange,Y),d.umh(Y.handleHierarchyChange,Y),R||d.sm().ums(Y.handleSelectionChange,Y)),Y._dataModel=i,i.mm(Y.handleDataModelChange,Y),i.md(Y.handleDataPropertyChange,Y),i.mh(Y.handleHierarchyChange,Y),R?R._21I(i):i.sm().ms(Y.handleSelectionChange,Y),Y.fp("dataModel",d,i))},y.validateModel=function(){var h=this;h._rows.clear(),h._rowMap={},h.buildChildren(h._dataModel._roots);var p=h._rows=h._rows.toList(h.isVisible,h),R=0,$=h.getCurrentSortFunc(),J=p.size();for($&&p.sort($);J>R;R++)h._rowMap[p.get(R)._id]=R},y.buildChildren=function(o){var E=this;o.each(function(c){E._rows.add(c),E.buildChildren(c._children)})},y.handleDataModelChange=function(){this.ivm()},y.handleDataPropertyChange=function(u){"parent"===u.property?this.ivm():this.invalidateData(u.data)},y.handleHierarchyChange=function(){this.ivm()},y.handleSelectionChange=function(X){X.datas.each(this.invalidateData,this),this.onSelectionChanged(X)},y.onSelectionChanged=function(n){var O=this,c=O.sm();!O.isAutoMakeVisible()||1!==c.size()||"set"!==n.kind&&"append"!==n.kind||O._32o||O.makeVisible(c.ld())},y.handleBackgroundClick=function(Q){Rr(Q)&&!this.isCheckMode()&&this.sm().cs()},y.makeVisible=function(d){d&&(this._23I=d,this.iv())},y.scrollToIndex=function(q){var Z=this,N=Z._29I,c=N.height,k=Z._rowHeight,v=k*q;q>=0&&q<Z._rows.size()&&c>0&&(v+k>N.y+c?Z.ty(-v+c-k):v<N.y&&Z.ty(-v))},y.autoScroll=function(H,r){var q=this,D=q._rowHeight,E=D,i=D/4,b=q._29I,v=q.lp(H),n={x:q.tx(),y:q.ty()};return D>0&&b&&(v.x-b.x<E?q.translate(i,0):b.x+b.width-v.x<E&&q.translate(-i,0),v.y-b.y<E?q.translate(0,i):b.y+b.height-v.y<E&&q.translate(0,-i)),n.x=q.tx()-n.x,n.y=q.ty()-n.y,r&&(r.x+=n.x,r.y+=n.y),n},y.getTopRowOrderSelection=function(){var W=this.sm().getTopSelection(),i={},P=new Sd;return W.each(function(D){i[D._id]=D}),this._rows.each(function(N){i[N._id]&&P.add(N)}),P},y.getRowOrderSelection=function(){var k=new Sd;return this._rows.each(function(R){this.isSelected(R)&&k.add(R)},this),k},y.ivm=function(){this.invalidateModel()},y.invalidateModel=function(){var A=this;A._96I||(A._96I=1,A._32I=1,delete A._24I),A.iv()},y.redraw=function(){var i=this;i._32I||(i._32I=1,delete i._24I,i.iv())},y.invalidateData=function(e){var j=this;i?j.redraw():j._32I||(j._24I||(j._24I={}),j._24I[e._id]=e,j.iv())},y.getFocusData=function(){return this._focusData},y.setFocusDataById=function(o){this.setFocusData(this.dm().getDataById(o))},y.setFocusData=function(Z){var S=this,M=S._focusData;M!==Z&&(S._focusData=Z,S.fp("focusData",M,Z),M&&S.invalidateData(M),Z&&(S.invalidateData(Z),S.isAutoMakeVisible()&&S.makeVisible(Z)))},y.drawRowBackground=function(L,o,T,E,d,x,y){var $=this,v=$.isCheckMode();(o===$._focusData&&v||T&&!v)&&_r(L,E,d,x,y,$.getSelectBackground(o))},y.drawData=function(l,T,S){var $=this,J=$._rowHeight,t=J*S,_=$._29I,G=_.x,k=_.width;l.save(),l.beginPath(),l.rect(G,t,k,J),l.clip(),$._87o($.drawRow(l,T,$.isSelected(T),G,t,k,J),S,G,t,k,J),l.restore(),$._rowLineVisible&&_r(l,G,t+J-1,k,1,$._rowLineColor)},y._12I=function(K){var j=this,b=j._31I,F=j._29I,M=F.x,e=F.y,V=F.width,Z=F.height;for(K.beginPath(),K.rect(M,e,V,Z),K.clip(),K.clearRect(M,e,V,Z),j._76o(),j._93db(K);b<j._14I;b++)j.drawData(K,j._rows.get(b),b);j._92db(K)},y._13I=function(L){for(var y,a=this,M=a._rowHeight,I=a._29I,p=I.x,k=I.width,P=a._31I,E=a._30I;P<a._14I;P++)y=a._rows.get(P),a._24I[y._id]&&E.add({data:y,index:P});E.isEmpty()||(L.beginPath(),E.each(function(w){L.rect(p,w.index*M,k,M)}),L.clip(),E.each(function(t){L.clearRect(p,t.index*M,k,M)}),E.each(function(d){a._77o(d.index)}),a._93db(L),E.each(function(i){a.drawData(L,i.data,i.index)}),a._92db(L),E.clear())},y.validateImpl=function(){var X=this,I=X._canvas,f=X.getWidth(),W=X.getHeight(),a=X._rowHeight,L=X._32I;(f!==I.clientWidth||W!==I.clientHeight)&&(Zn(I,f,W),L=1);var U=N&&!T;X._96I&&!U&&X.validateModel();var j=X._29I,w={x:-X.tx(),y:-X.ty(),width:f,height:W},O=X._rows.size(),e=Un(I),u=X._23I;L||od(w,j)||(L=1),X._29I=w,X._59I=O*a,X._31I=P(w.y/a),X._14I=p((w.y+w.height)/a),X._31I<0&&(X._31I=0),X._14I>O&&(X._14I=O),X._99I&&L&&X._99I(),ag(e,X.tx(),X.ty(),1),L?X._12I(e):X._24I&&X._13I(e),X._93I(),X._92I(),e.restore(),X._32I=X._24I=X._96I=v,u&&(X.scrollToIndex(X.getRowIndex(u)),delete X._23I),X.tx(X.tx()),X.ty(X.ty())}},Af._48o=function(O){O._rootVisible=!0,O._rootData=v,O._35o=function(){this._expandMap={},this._levelMap={}},O.validateModel=function(){var D=this,H=D._rootData;D._rows.clear(),D._levelMap={},D._rowMap={},D._currentLevel=0,H?D._rootVisible?D.isVisible(H)&&D.buildData(H):D.buildChildren(H):D.buildChildren(),delete D._currentLevel},O.buildData=function(s){var L=this,t=s._id,q=L._rows;L._rowMap[t]=q.size(),q.add(s),L._levelMap[t]=L._currentLevel,L.isExpanded(s)&&(L._currentLevel++,L.buildChildren(s),L._currentLevel--)},O.buildChildren=function(F){var D=this,i=F?F._children:D._dataModel._roots,a=D.getCurrentSortFunc();a&&D.isChildrenSortable(F)?i.toList(D.isVisible,D).sort(a).each(D.buildData,D):i.each(function(f){D.isVisible(f)&&D.buildData(f)})},O.getLevel=function(o){return this._levelMap[o._id]},O.getToggleIcon=function(L){var E=this,x=E._loader,R=E._collapseIcon;return x&&!x.isLoaded(L)?R:L.hasChildren()?E.isExpanded(L)?E._expandIcon:R:v},O.isCheckMode=function(){return this._checkMode!=v},O.isChildrenSortable=function(){return!0},O.handleDataModelChange=function(n){var C=this;n.kind===ss?delete C._expandMap[n.data._id]:n.kind===zf&&(C._expandMap={}),C.ivm()},O.toggle=function(I){var Q=this;Q.isExpanded(I)?Q.collapse(I):Q.expand(I)},O.isExpanded=function(D){return 1===this._expandMap[D._id]},O.expand=function(u){var S=this,V=S._loader;S.isExpanded(u)||(V&&!V.isLoaded(u)&&V.load(u),S._expandMap[u._id]=1,S.ivm(),S.onExpanded(u))},O.onExpanded=function(){},O.collapse=function(k){var b=this;b.isExpanded(k)&&(delete b._expandMap[k._id],b.ivm(),b.onCollapsed(k))},O.onCollapsed=function(){},O.expandAll=function(){var y=this;y._dataModel.each(function(I){I.hasChildren()&&(y._expandMap[I._id]=1)}),y.ivm()},O.collapseAll=function(){this._expandMap={},this.ivm()},O.makeVisible=function(N){if(N){var r=this;if(!r._rootData||N.isDescendantOf(r._rootData)){for(var Y=N._parent;Y;)r.expand(Y),Y=Y._parent;r._23I=N,r.iv()}}},O.checkData=function(i){var Y,G=this,E=G._checkMode,c=G.sm(),d=c.co(i);if(!c.sg()||!d){if(G._32o=1,E===S)d?c.rs(i):c.as(i);else if(E===gm)Y=new Sd(i),Y.addAll(i._children);else if("descendant"===E)Y=new Sd,Pl(i,Y);else if("all"===E&&(Y=new Sd,Pl(i,Y),!d))for(var r=i._parent;r;)Y.add(r),r=r._parent;Y&&(d?c.rs(Y):c.as(Y)),delete G._32o}},O._97I=function(c,K,P,R,H,r,o){var u=this,p=u._indent,W=u._levelMap[K._id],n=u.getIconWidth(K),m=Ep(u.getToggleIcon(K));m?(R+=p*W,Df(c,m,R+p/2,H+o/2,K,u),R+=p):R+=p*(W+1),u._checkMode&&(Df(c,u.getCheckIcon(K),R+p/2,H+o/2,K,u),R+=p),u.drawIcon(c,K,R,H,n,o),u.drawLabel(c,K,R+n,H,o)}},Af._14Q=function(K){K.getIcon=function(f){return f.getIcon()},K.getIconWidth=function(F){return this.getIcon(F)?this._indent:0},K.drawIcon=function(g,Y,V,y,p,d){if(p){var K=this,l=K.getBodyColor(Y),S=Ep(K.getIcon(Y),l);S&&(d-=K.isRowLineVisible()?1:0,Cb(g,S,ir,V,y,p,d,Y,K,l),Fi(g,K.getBorderColor(Y),V,y,p,d))}},K.drawLabel=function(g,U,T,M,P){var X=this;fr(g,X.getLabel(U),X.getLabelFont(U),X.getLabelColor(U),T,M,0,P)}},Af._50o=function(c){c._98I=function(){var c=this,y=c._39o=new Ko;c._60I=new Sd,y.mm(c._17o,c),y.md(c._18o,c),y.mh(c._19o,c)},c.setColumns=function(l){this._39o.clear(),this.addColumns(l)},c.addColumns=function($){var Y=this._39o;$.forEach(function(y){if(!(y instanceof ms)){var s=Qd(y.className);y=Ec(s?s:ms,y)}Y.add(y)})},c.onColumnClicked=function(){},c.onCheckColumnClicked=function(){},c._3Q=function(C){for(var U,r=0,I=this._60I,e=I.size();e>r;r++)if(U=I.get(r),U.column===C)return U;return v},c.getColumnAt=function(q){var o=this._4Q(q);return o?o.column:v},c._4Q=function(p){for(var m=this,D=p.target?m.lp(p).x:p.x,X=m._60I,w=0;w<X.size();w++){var b=X.get(w),L=b.startX;if(D>=L&&D<L+b.column.getWidth())return b}return v},c.getToolTip=function(Y){var d=this,B=d.getDataAt(Y),g=d.getColumnAt(Y);return B&&g?g.getToolTip(B,d):v},c.adjustTranslateX=function(c){var w=this.getWidth()-this._91I;return w>c&&(c=w),c>0?0:u(c)},c._99I=function(){var I=this,X=I._29I,x=I._60I;x.clear(),I._91I=0,I._39o._roots.each(function(Y){if(Y.isVisible()){var H=I._91I+Y.getWidth();I._91I<=X.x+X.width&&H>=X.x&&x.add({column:Y,startX:I._91I}),I._91I=H}})},c.drawData=function(t,U,Y){var i=this,Z=i._rowHeight,F=Z*Y,e=i.isSelected(U),j=i._29I,q=j.x,z=j.width;i.drawRowBackground(t,U,e,q,F,z,Z),i._60I.each(function(h){var B=h.column,z=h.startX,c=B.getWidth();c>0&&!i.isEditing(U,B)&&(t.save(),t.beginPath(),t.rect(z,F,c,Z),t.clip(),i._87o(i.drawCell(t,U,e,B,z,F,c,Z),Y,z,F,c,Z),i._columnLineVisible&&_r(t,z+c-1,F,1,Z,i._columnLineColor),t.restore())}),i._rowLineVisible&&_r(t,q,F+Z-1,z,1,i._rowLineColor)},c.drawCell=function(d,L,n,s,w,q,h,l){var o=this;if(s.drawCell)return s.drawCell(d,L,n,s,w,q,h,l,o);var K=o.getValue(L,s);Yf(d,K,s,o.getLabelFont(L,s,K),o.getLabelColor(L,s,K),w,q,h,l,L,o)},c.getColumnModel=function(){return this._39o},c._17o=function(){this.redraw()},c._18o=function(S){var l=this;S.data===l._sortColumn&&Tg[S.property]?l.ivm():(l._42o(),l.redraw())},c._19o=function(){this.redraw()},c.getCurrentSortFunc=function(){var d=this,F=d._sortColumn;if(F&&F.isSortable()){var W=F.getSortFunc(),U=cg===F.getSortOrder()?1:-1;return W||(W=Mr),function(Z,u){return W.call(d,d.getValue(Z,F),d.getValue(u,F),Z,u)*U}}return d._sortFunc},c.isCellEditable=function(v,C){return C.isEditable()&&this.isEditable()},c._37O=function(m,N){if(Rr(N))for(var C=this,D=C.lp(N),p=C._60I,S=C._rowHeight,v=C._29I,W=v.x,P=v.y,i=v.width,T=v.height,t=0;t<p.size();t++){var x=p.get(t),Z=x.startX,H=x.column,R=H.getWidth();if(H!==C._31o&&H!==C._4o&&C.isCellEditable(m,H,N)&&D.x>=Z&&D.x<Z+R){var b={x:Z,y:C.getRowIndex(m)*S,width:R,height:S},F={x:b.x+C.tx(),y:b.y+C.ty(),width:b.width,height:b.height},X=0,j=0;return b.x<W?X=b.x-W:b.x+b.width>W+i&&(X=b.x+b.width-W-i),X&&(C.tx(C.tx()-X),F.x-=X),b.y<P?j=b.y-P:b.y+S>P+T&&(j=b.y+S-P-T),j&&(C.ty(C.ty()-j),F.y-=j),C.beginEditing({data:m,column:H,value:C.getValue(m,H),event:N,rect:b,editorRect:F,view:C}),void 0}}}},kc.BaseItemEditor=function(e,G,f,A){this._data=e,this._column=G,this._master=f,this._editInfo=A},Nb("BaseItemEditor",t,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var sl=n.Tab=function(){lj(sl,this)};ts("Tab",Mh,{ms_ac:["view","closable","disabled"],_icon:v,_closable:!1,_disabled:!1,setParent:vl});var ms=n.Column=function(){lj(ms,this)};ts("Column",Mh,{_46o:1,ms_ac:["accessType","valueType",bl,Kr,Ih,le,"align",dn,"sortOrder",Cp,"sortable","clickable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:cg,_sortFunc:v,_sortable:!0,_clickable:!0,setWidth:function(t){16>t&&(t=16);var p=this._width;this._width=t,this.fp(le,p,t)},getToolTip:function(n,h){return this.formatValue(h.getValue(n,this))}});var Ok=n.Property=function(){lj(Ok,this)};ts("Property",Mh,{_46o:1,ms_ac:["accessType","valueType",Kr,Ih,"categoryName",dn,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:v,getToolTip:function(h,c,u){var j=this;return c?j.formatValue(u.getValue(h,j)):u.getPropertyName(j)}}),kc.AccordionView=function(){var V=this;V._20o={},V._21o=new Sd,V._10o=v,V._9o=v,V._11o=v,V._view=xr(0,V),V.iv()},Nb("AccordionView",t,{ms_v:1,ms_fire:1,ms_ac:[Cc,nn,"titleHeight",de,Qb,"titleBackground","selectWidth",Gr,"orientation","separatorColor"],_expandIcon:r.accordionViewExpandIcon,_collapseIcon:r.accordionViewCollapseIcon,_titleHeight:nm,_labelColor:r.accordionViewLabelColor,_labelFont:r.accordionViewLabelFont,_titleBackground:r.accordionViewTitleBackground,_selectBackground:r.accordionViewSelectBackground,_selectWidth:r.accordionViewSelectWidth,_orientation:"v",_separatorColor:r.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(v,l,g,w){var j=this,m=Yn();if(j._20o[v])throw v+" already exists";m.onmousedown=Se,m.style.cursor=Ic,m.addEventListener(E?ls:En,function(K){Se(K)},!1),m.addEventListener(E?wd:ah,function(s){Se(s),Rr(s)&&(j._10o===v?j.collapse():j.expand(v))},!1),Yr(j._view,m),j._20o[v]={content:l,div:m,canvas:yj(m),icon:w},j._21o.add(v),g&&j.expand(v),j.iv()},remove:function(q){var d=this,A=d._20o[q];A&&(gp(A.div),delete d._20o[q],d._21o.remove(q),d.iv())},clear:function(){var Z=this;Z._20o={},Z._21o.clear(),Z.iv()},isExpanded:function(b){return this._10o===b},expand:function(B){var i=this;i._20o[B]&&i._10o!==B&&(i._10o=B,i.onExpanded(B),i.iv())},onExpanded:function(){},collapse:function(){var O=this;O._10o&&(O.onCollapsed(O._10o),delete O._10o,O.iv())},onCollapsed:function(){},initCanvas:function(T,z,i){Zn(T,z,i);var H=Un(T);return ag(H,0,0,1),H.clearRect(0,0,z,i),H},drawTitle:function(W,y,t,Z,N){var Q=this,i=Ep(N.icon),M=Q.isExpanded(y),A=Q._titleHeight,m=Q._titleBackground,P=Q._selectWidth,b=Q._separatorColor,U=Ep(M?Q._expandIcon:Q._collapseIcon),I=P+4;_r(W,0,0,t,Z,m),M&&P&&_r(W,0,0,P,Z,Q._selectBackground),(M||Q._21o.get(Q._21o.size()-1)!==y)&&_r(W,0,Z-1,t,1,b?b:Up(m)),i&&(Df(W,i,I+ob(i)/2,A/2),I+=ob(i)+2),fr(W,y,Q.getLabelFont(y),Q.getLabelColor(y),I,0,0,A),U&&Df(W,U,t-ob(U)/2-4,A/2)},validateImpl:function(){var K=this,j=K._view,D=0,i=0,U=K.getWidth(),A=K.getHeight(),Y=K._titleHeight,g=K._21o.size()*Y,B=K._11o,E=K._9o;delete K._11o,delete K._9o,K._21o.each(function(P){var F,u,s=K._20o[P],z=s.content,V=K._10o===P;Mk(K)?(oi(s.div,D,0,Y,A),F=K.initCanvas(s.canvas,Y,A),pj(F,0,A),sr(F,-x),K.drawTitle(F,P,A,Y,s),F.restore(),V?(u=w(0,U-g),z&&(K._11o=z,K._9o=ug(z),oi(z,D+Y,0,u,A)),D+=Y+u):D+=Y):(oi(s.div,0,i,U,Y),F=K.initCanvas(s.canvas,U,Y),K.drawTitle(F,P,U,Y,s),F.restore(),V?(u=w(0,A-g),z&&(K._11o=z,K._9o=ug(z),oi(z,0,i+Y,U,u)),i+=Y+u):i+=Y)});var z=K._9o;B&&B!==K._11o&&B.endEditing&&B.endEditing(),z&&z!==E&&Yr(j,z),E&&E!==z&&gp(E)}}),kc.SplitView=function(X,Q,e,H){var d=this,U=d._dividerDiv=Yn(),K=d._60O=yj(),i=d._61O=yj(),T=K.style,O=i.style;d._view=xr(1,d),Yr(d._view,U),T.msTouchAction=jp,T.pointerEvents=jp,T.cursor=Ic,O.msTouchAction=jp,O.pointerEvents=jp,O.cursor=Ic,X&&d.setLeftView(X),Q&&d.setRightView(Q),e&&d.setOrientation(e),H!=v&&d.setPosition(H),d.setStatus(rk),new bj(d)},Nb("SplitView",t,{ms_v:1,ms_fire:1,ms_ac:["continuousLayout","dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_continuousLayout:!1,_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:r.splitViewDividerSize,_dividerBackground:r.splitViewDividerBackground,_dragOpacity:r.splitViewDragOpacity,_toggleIcon:r.splitViewToggleIcon,onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(R,p){var H=this,z=H._position;isNaN(R)||(p||(H._82O=0>R?-1:R>1?1:0),H._position=R,H.fp(fs,z,R))},getLeftView:function(){return this._leftView},setLeftView:function(o){var N=this,A=N._leftView,$=N._view;if(N._leftView!==o){if(A&&A!==N._rightView){var n=ug(A);n.parentNode===$&&gp(n)}if(N._leftView=o,o){var H=ug(o);H.parentNode!==$&&$.insertBefore(H,N._dividerDiv)}N.fp("leftView",A,o)}},getRightView:function(){return this._rightView},setRightView:function(e){var Z=this,K=Z._rightView,m=Z._view;if(Z._rightView!==e){if(K&&K!==Z._leftView){var U=ug(K);U.parentNode===m&&gp(U)}if(Z._rightView=e,e){var j=ug(e);j.parentNode!==m&&m.insertBefore(j,Z._dividerDiv)}Z.fp("rightView",K,e)}},validateImpl:function(){var v=this,W=v._draggable,a=v._position,U=v.getWidth(),C=v.getHeight(),Y=v._dividerSize,H=v._dividerBackground,X=E?18:8,S=v._dividerDiv,s=v._82O,p=v._60O,k=v._61O,F=v._toggleIcon,V=v._status,n=S.style,J=null,h=E?20:4,d=F.comps[0];Y>=X||0===Y?v._coverDiv&&(gp(v._coverDiv),delete v._coverDiv):v._coverDiv||(v._coverDiv=Yn(),q&&(v._coverDiv.style.background=Xf),Yr(S,v._coverDiv)),v._togglable?p.parentNode||(Yr(S,p),Yr(S,k)):(gp(p),gp(k));var G=v._coverDiv,t=v._leftView,D=v._rightView;if(Mk(v)){if(Y>U&&(Y=U),V===rk)if(1===s)var I=o(a,U),P=w(0,U-Y-I);else-1===s?(P=o(-a,U),I=w(0,U-Y-P)):(I=u((U-Y)*a),P=w(0,U-Y-I));else"cl"===V?(I=0,P=w(0,U-Y)):"cr"===V&&(P=0,I=w(0,U-Y));t&&oi(t,0,0,I,C),D&&oi(D,I+Y,0,P,C),oi(S,I,0,Y,C),v._22o=I,G&&(oi(G,Y/2-X/2,0,X,C),G.style.cursor=W?Ul:""),S.style.cursor=W?Ul:"";var O=S.clientHeight/2,B=S.clientWidth;Zn(p,B,B),oi(p,0,O-B-h,B,B),J=Un(p),ag(J,0,0,1),d.rotation=-x,Dk(J,F,0,0,B,B),J.restore(),Zn(k,B,B),oi(k,0,O+h,B,B),J=Un(k),ag(J,0,0,1),d.rotation=x,Dk(J,F,0,0,B,B),J.restore()}else{if(Y>C&&(Y=C),V===rk)if(1===s)var L=o(a,C),l=w(0,C-Y-L);else-1===s?(l=o(-a,C),L=w(0,C-Y-l)):(L=u((C-Y)*a),l=w(0,C-Y-L));else"cl"===V?(L=0,l=w(0,C-Y)):"cr"===V&&(l=0,L=w(0,C-Y));t&&oi(t,0,0,U,L),D&&oi(D,0,L+Y,U,l),oi(S,0,L,U,Y),v._22o=L,G&&(oi(G,0,Y/2-X/2,U,X),G.style.cursor=W?eo:""),n.cursor=W?eo:"";var j=S.clientWidth/2,B=S.clientHeight;Zn(p,B,B),oi(p,j-B-h,0,B,B),J=Un(p),ag(J,0,0,1),d.rotation=0,Dk(J,F,0,0,B,B),J.restore(),Zn(k,B,B),oi(k,j+h,0,B,B),J=Un(k),ag(J,0,0,1),d.rotation=K,Dk(J,F,0,0,B,B),J.restore()}n.background=H}});var bj=function(b){this.sv=b,this.addListeners()};Uf(bj,t,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(v){var q=this,S=q.sv,j=S._dividerDiv,z=S._60O,i=S._61O,Z=S._status,g=v.target;if(g===z)Z===rk?S.setStatus("cl"):"cr"===Z&&S.setStatus(rk);else if(g===i)Z===rk?S.setStatus("cr"):"cl"===Z&&S.setStatus(rk);else if(Th(v)&&(g===j||g===S._coverDiv)&&(Se(v),S.isDraggable())){S.getLeftView(),S.getRightView();var o=q.maskDiv=Yn();if(o.style.left=0,o.style.top=0,o.style.width=S.getWidth()+"px",o.style.height=S.getHeight()+"px",S.getView().appendChild(o),!S.isContinuousLayout()){var K=q.resizeDiv=Yn();K.style.left=j.style.left,K.style.top=j.style.top,K.style.width=j.style.width,K.style.height=j.style.height,K.style.opacity=S.getDragOpacity(),K.style.background=S.getDividerBackground(),Yr(q.getView(),K)}q._lastAbsPosition=S._22o,q._86o=Mk(S)?sk(v).x:sk(v).y,$m(q,v)}},handleWindowTouchMove:function(f){Th(f)&&this.update(f,this.sv.isContinuousLayout())},handleWindowTouchEnd:function(W){var i=this;i.update(W,!0),i.sv.setStatus(rk),i.maskDiv&&gp(i.maskDiv),i.resizeDiv&&gp(i.resizeDiv),i.maskDiv=i.resizeDiv=v},handle_mousedown:function(o){Rr(o)&&this.handle_touchstart(o)},handleWindowMouseMove:function(P){this.handleWindowTouchMove(P)},handleWindowMouseUp:function(R){this.handleWindowTouchEnd(R)},update:function(Q,M){var t=this,T=t.sv,x=Mk(T)?T.getWidth():T.getHeight(),o=T._dividerSize,U=t._lastAbsPosition-t._86o;Mk(T)?(U+=sk(Q).x,U>x-o&&(U=x-o),0>U&&(U=0),t.resizeDiv&&(t.resizeDiv.style.left=U+co)):(U+=sk(Q).y,U>x-o&&(U=x-o),0>U&&(U=0),t.resizeDiv&&(t.resizeDiv.style.top=U+co)),M&&x!==o&&(1===T._82O?T.setPosition(U,1):-1===T._82O?T.setPosition(U-x+o,1):T.setPosition(U/(x-o),1))}}),kc.TabView=function(){var p=this,J=p._view=xr(1,p),u=p._91O=Yn(1),s=p._tabModel=new Ko,e=s.sm(),n=p.invalidate;p._7o=new Sd,p._canvas=yj(u),Yr(J,u),Yr(J,p._92O=Yn(1)),e.setSelectionMode(U),e.ms(n,p),s.mm(n,p),s.md(n,p),s.mh(n,p),new Om(p),p.iv()},Nb("TabView",t,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",de,Qb,"tabBackground","selectWidth",Gr,"moveBackground","insertColor"],_tabPosition:ph,_tabHeight:nm,_tabGap:r.tabViewTabGap,_labelColor:r.tabViewLabelColor,_labelFont:r.tabViewLabelFont,_tabBackground:r.tabViewTabBackground,_selectWidth:r.tabViewSelectWidth,_selectBackground:r.tabViewSelectBackground,_moveBackground:r.tabViewMoveBackground,_insertColor:r.tabViewInsertColor,_movable:!0,getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(Z,s,G){var J=new sl,o=this._tabModel;return J.setName(Z),J.setView(s),o.add(J),G&&o.sm().ss(J),J},getLabel:function(T){return T.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(T){this._23o=T,this.iv()},get:function(S){var I=this,T=I._tabModel;if($n(S))return T._roots.get(S);if(hb(S)){var h;return T.each(function(w){S===I.getLabel(w)&&(h=w)}),h}return S instanceof sl?S:v},select:function(Z){this._tabModel.sm().ss(this.get(Z))},remove:function(P){var y=this;if(P=y.get(P)){var n=y._tabModel,p=n._roots.indexOf(P);y._tabModel.remove(P),y._12Q(--p)}},getCurrentTab:function(){return this._8o},hideTabView:function(C,d){d.parentNode===this._92O&&(Jr(d)?(d.style.display=_h,d._tab_=C):gp(d),Yj())},showTabView:function(i,k){Jr(k)&&(k.style.display="block",k._tab_=i),k.parentNode!==this._92O&&(Yr(this._92O,k),Yj())},_24o:function(){var g,h=this,C=h._8o,E=h._9o,U=h._tabModel.sm().ld();U&&(g=ug(U.getView())),g!==E&&(E&&(C.getView()&&C.getView().endEditing&&C.getView().endEditing(),h.hideTabView(C,E)),g&&h.showTabView(U,g)),h._8o=U,h._9o=g,C!==U&&h.onTabChanged(C,U)},onTabClosing:function(){return!0},onTabChanged:function(){},onTabClosed:function(T,o){this._12Q(--o)},_12Q:function(s){var K=this,x=K._tabModel,I=x.size();if(I&&!x.sm().ld()){s==v&&(s=0),s>=I&&(s=I-1),0>s&&(s=0);for(var q=s;q>=0;q--){var y=K.get(q);if(!y.isDisabled())return K.select(y),y}for(q=s+1;I>q;q++)if(y=K.get(q),!y.isDisabled())return K.select(y),y}},_9Q:function(I){var c=4,z=Ep(I.getIcon());z&&(c+=ob(z,I)+4);var F=this.getLabel(I);return F&&(c+=og(this.getLabelFont(I),F).width+4),I.isClosable()&&(c+=10),c},drawTab:function(h,q,t,C,f,g,b){var M,R=this,Q=R._tabPosition,S=t+4,j=R._selectWidth,W=Ep(q.getIcon()),l=q.isDisabled(),o=R.getLabelColor(q),i=R.getLabelFont(q),U=R.getLabel(q),_=R._selectBackground,r=Q===Kp+"-vertical",k=Q===be+"-vertical";(r||k)&&(S=C+4),l&&(h.globalAlpha=Oc),_r(h,t,C,f,g,b),q===R._8o&&j&&(Q===ph?_r(h,t,C+g-j,f,j,_):Q===Kp?_r(h,t+f-j,C,j,g,_):Q===be?_r(h,t,C,j,g,_):r?_r(h,t+f-j,C,j,g,_):k?_r(h,t,C,j,g,_):_r(h,t,C,f,j,_));var c=f/2;if(r&&(pj(h,c,C+g/2),sr(h,K),pj(h,-c,-C-g/2)),W){var a=ee(W,q),n=ob(W,q);if(r||k){var P=t+f/2,F=S+a/2;pj(h,P,F),sr(h,x),pj(h,-P,-F),Df(h,W,t+f/2,S+a/2,q,R),pj(h,P,F),sr(h,-x),pj(h,-P,-F),S+=a+4}else Df(h,W,S+n/2,C+g/2,q,R),S+=n+4}return r||k?(pj(h,f/2,S+f/2),sr(h,x),pj(h,-f/2,-S-f/2),fr(h,U,i,o,t,S,g,f),pj(h,f/2,S+f/2),sr(h,-x),pj(h,-f/2,-S-f/2)):fr(h,U,i,o,S,C,f,g),r&&(pj(h,c,C+g/2),sr(h,-K),pj(h,-c,-C-g/2)),q.isClosable()&&(M=k?{x:t+f-12,y:C+g-12,width:12,height:12}:{x:t+f-12,y:C+2,width:12,height:12},this.drawCloseIcon(q,h,o,M)),l&&(h.globalAlpha=1),M},drawCloseIcon:function(W,Q,h,c){var N=c.x,P=c.y;Q.strokeStyle=h,Q.lineWidth=1,Q.beginPath(),Q.moveTo(N+2,P+8),Q.lineTo(N+8,P+2),Q.moveTo(N+8,P+8),Q.lineTo(N+2,P+2),Q.stroke()},validateImpl:function(){var d=this;d._24o();var q,k=d._canvas,v=d._tabPosition,_=d._91O,t=d._92O,G=d._tabModel,Y=d.getWidth(),E=d.getHeight(),L=d._tabHeight,I=d._7o,c=d._tabGap,S=v===ph,u=v===Kp,$=v===be,i=v===Kp+"-vertical",o=v===be+"-vertical",V=d._23o,D=0;if((u||$)&&G._roots.each(function(b){D=w(d._9Q(b),D)}),S?(oi(_,0,0,Y,L),q={x:0,y:L,width:Y,height:w(0,E-L)}):u?(oi(_,0,0,D,E),q={x:D,y:0,width:w(0,Y-D),height:E}):$?(oi(_,Y-D,0,D,E),q={x:0,y:0,width:w(0,Y-D),height:E}):i?(oi(_,0,0,L,E),q={x:L,y:0,width:w(0,Y-L),height:E}):o?(oi(_,Y-L,0,L,E),q={x:0,y:0,width:w(0,Y-L),height:E}):(oi(_,0,E-L,Y,L),q={x:0,y:0,width:Y,height:w(0,E-L)}),oi(t,q),i||o){d._9o&&(q.x=0,oi(d._8o.getView(),q)),Zn(k,L,E);var U=Un(k),M=0;if(ag(U,0,d.ty(),1),U.clearRect(0,0,L,E),I.clear(),G._roots.each(function(q){var p,X=d._9Q(q);V&&V.tab===q||(p=d.drawTab(U,q,0,M,L,X,d._tabBackground)),I.add({_75o:p,tab:q,startY:M,endY:M+X,height:X}),M+=X+c}),d._23Q=w(0,M-c),V){var g=V.position;d.drawTab(U,V.tab,0,V.startY,L,V.height,d._moveBackground),_r(U,0,g,L,1,d._insertColor)}U.restore(),d.ty(d.ty())}else if(u||$){d._9o&&(q.x=0,oi(d._8o.getView(),q)),Zn(k,D,E);var U=Un(k),M=0;if(ag(U,0,d.ty(),1),U.clearRect(0,0,D,E),I.clear(),G._roots.each(function(k){var $;V&&V.tab===k||($=d.drawTab(U,k,0,M,D,L,d._tabBackground)),I.add({_75o:$,tab:k,startY:M,endY:M+L,height:L}),M+=L+c}),d._23Q=w(0,M-c),V){var g=V.position;d.drawTab(U,V.tab,0,V.startY,D,V.height,d._moveBackground),_r(U,0,g,D,1,d._insertColor)}U.restore(),d.ty(d.ty())}else{d._9o&&(q.y=0,oi(d._8o.getView(),q)),Zn(k,Y,L);var U=Un(k),j=0;if(ag(U,d.tx(),0,1),U.clearRect(0,0,Y,L),I.clear(),G._roots.each(function(v){var O,E=d._9Q(v);V&&V.tab===v||(O=d.drawTab(U,v,j,0,E,L,d._tabBackground)),I.add({_75o:O,tab:v,startX:j,endX:j+E,width:E}),j+=E+c}),d._64I=w(0,j-c),V){var g=V.position;
d.drawTab(U,V.tab,V.startX,0,V.width,L,d._moveBackground),as(U,d._insertColor,g,0,L)}U.restore(),d.tx(d.tx())}for(var x=[],b=t.children,F=0;F<b.length;F++){var N=b[F],h=N._tab_;h&&!G.contains(h)&&x.push(N)}x.forEach(function(D){t.removeChild(D)})}});var Om=function(p){this.tv=p,this.addListeners()};Uf(Om,t,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(E){this.handleScroll(E,10*(E.wheelDelta/40))},handle_DOMMouseScroll:function(C){this.handleScroll(C,10*-C.detail)},handleScroll:function(E,t){Se(E);var s=this.tv,Q=s._tabPosition;!s._40o()||Q!==ph&&Q!==ud||s.tx(this.tv.tx()+t),!s._41o()||Q!==Kp&&Q!==be&&Q!==Kp+"-vertical"&&Q!==be+"-vertical"||s.ty(this.tv.ty()+t)},_8Q:function(K){var k,Q,g=this.tv,U=g._tabPosition,r=g._7o;if(U===ph||U===ud){var d=g.lp(K).x;for(k=0;k<r.size();k++)if(Q=r.get(k),Q.startX<=d&&d<=Q.endX)return Q}else if(U===Kp||U===be||U===Kp+"-vertical"||U===be+"-vertical"){var Z=g.lp(K).y;for(k=0;k<r.size();k++)if(Q=r.get(k),Q.startY<=Z&&Z<=Q.endY)return Q}return v},isClickable:function(_){var n=this.tv,I=n._tabPosition,t=this._73o=this._8Q(_);return!n._40o()||I!==ph&&I!==ud?!n._41o()||I!==Kp&&I!==be&&I!==Kp+"-vertical"&&I!==be+"-vertical"?t&&(!t.tab.isDisabled()||n.isMovable()):!0:!0},handle_mousemove:function(G){var c=this;wj?c._74o=c._8Q(G):c.getView().style.cursor=c.isClickable(G)?Ic:""},handle_mousedown:function(Z){this.handle_mousemove(Z),this.handle_touchstart(Z)},handle_touchstart:function(X){var d=this,h=d.tv,L=h._tabPosition;Se(X),d.isClickable(X)&&(L===ph||L===ud?(d.x=sk(X).x,d.lp=h.lp(X),d.tx=h.tx()):(d.y=sk(X).y,d.lp=h.lp(X),d.ty=h.ty()),$m(d,X))},handleWindowMouseMove:function(P){this.handleWindowTouchMove(P)},handleWindowTouchMove:function(P){var h,t=this,T=t.tv,i=T._tabPosition,f=t._73o;if(i===ph||i===ud){if(h=sk(P).x-t.x,!t._25o&&!t.moving&&a(h)>2&&(T._40o()&&!ne(P)?t._25o=1:f&&T.isMovable()&&(t.moving=1)),t._25o)T.tx(t.tx+h);else if(t.moving){var b=t.lp.x+h,q=T._tabGap/2;T._7o.each(function(z){var D=z.endX,J=b-z.startX<D-b;b>=z.startX&&D>=b&&T._7Q({tab:f.tab,startX:f.startX+h,width:f.width,front:J,insertTab:z.tab,position:J?w(0,z.startX-q):o(T._64I,D+q)})})}}else if(h=sk(P).y-t.y,!t._25o&&!t.moving&&a(h)>2&&(T._41o()&&!ne(P)?t._25o=1:f&&T.isMovable()&&(t.moving=1)),t._25o)T.ty(t.ty+h);else if(t.moving){var U=t.lp.y+h,q=T._tabGap/2;T._7o.each(function($){var R=$.endY,p=U-$.startY<R-U;U>=$.startY&&R>=U&&T._7Q({tab:f.tab,startY:f.startY+h,height:f.height,front:p,insertTab:$.tab,position:p?w(0,$.startY-q):o(T._23Q,R+q)})})}},handleWindowMouseUp:function(w){this.handleWindowTouchEnd(w)},handleWindowTouchEnd:function(){var V=this,S=V.tv,u=S._tabPosition,X=S.getTabModel(),U=X._roots,e=V._73o;if(V.moving){var y=S._23o;if(y&&y.insertTab!==y.tab){var x=y.tab,J=U.remove(x),h=U.indexOf(y.insertTab);h>=0&&(y.front||h++,h<=U.size()&&(U.add(x,h),X._38I(x,J,h)))}S._7Q(v),delete V.moving}else if(!V._25o&&e){x=e.tab;var i=V._74o;if(!i||i.tab===x)if(!x.isDisabled()&&Fo(e._75o,V.lp)){var k=function(){var J=U.indexOf(x);X.remove(x),S.onTabClosed(x,J)};S.onTabClosing(x,k)&&k()}else x.isDisabled()||S._8o===x||X.sm().ss(x)}V._25o=V._73o=V._74o=u===ph||u===ud?V.x=V.lp=V.tx=v:V.y=V.lp=V.ty=v}}),kc.PropertyView=function(B){var O=this;O._view=xr(1,O),O._canvas=yj(O._view),Yr(O._view,O._79O=Yn()),O._rows=new Sd,O._28o=new Sd,O._26o={},O._26Q={};var V=O._propertyModel=new Ko,H=O.ivm;V.mm(H,O),V.md(H,O),V.mh(H,O),O.dm(B?B:new Ko),new wf(O)},Nb("PropertyView",t,{ms_ac:[de,$p,Qb,Kr,Ih,"categorizable",Cj,Cp,Zc,Cc,nn,kb,Vc,Ae,"selectRowIndex",Gr,"background",yr,Uh,vk,Bo,sb],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:Zb,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:gk,_background:r.propertyViewBackground,_expandIcon:r.propertyViewExpandIcon,_collapseIcon:r.propertyViewCollapseIcon,_scrollBarColor:cm,_scrollBarSize:Mp,_autoHideScrollBar:Pb,_selectBackground:r.propertyViewSelectBackground,_rowHeight:hg,_rowLineVisible:r.propertyViewRowLineVisible,_rowLineColor:r.propertyViewRowLineColor,_10I:.5,_columnLineVisible:r.propertyViewColumnLineVisible,_columnLineColor:r.propertyViewColumnLineColor,_labelColor:r.propertyViewLabelColor,_labelSelectColor:r.propertyViewLabelSelectColor,_labelFont:r.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(d){0>d&&(d=0),d>1&&(d=1);var K=this,y=K._10I;K._10I=d,K.fp("columnPosition",y,d)},getPropertyName:function(W){return W.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(c,j,y){return y===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(N,b){return b===this._selectRowIndex?this._labelSelectColor:N.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(I){var V=this.getHeight()-this._59I;return V>I&&(I=V),I>0?0:u(I)},isExpanded:function(n){if(!n)return!0;var K=this._26o[n];return K?K.isExpanded:!(this._26Q[n]===!1)},toggle:function(V){var M=this;M.isExpanded(V)?M.collapse(V):M.expand(V)},expandAll:function(){this.validate();for(var O in this._26o)this.expand(O)},expand:function(O){if(O&&O!==_h){var k=this,N=k._26o[O];N&&!N.isExpanded&&(N.isExpanded=!0,k.onExpanded(O),k.ivm())}},onExpanded:function(){},collapseAll:function(){this.validate();for(var J in this._26o)this.collapse(J)},collapse:function(G){if(G&&G!==_h){var V=this,P=V._26o[G];P&&P.isExpanded&&(P.isExpanded=!1,V.onCollapsed(G),V.ivm())}},onCollapsed:function(){},getCategoryName:function(j){if(!this.isCategorizable())return _h;var y=j.getCategoryName();return y?y:_h},getPropertyModel:function(){return this._propertyModel},setDataModel:function(v){var E=this,B=E._dataModel;B!==v&&(B&&(B.umd(E.handlePropertyChange,E),E._selectionModel||B.sm().ums(E.ivm,E)),E._dataModel=v,v.md(E.handlePropertyChange,E),E._selectionModel?E._selectionModel._21I(v):v.sm().ms(E.ivm,E),E.fp(Uq,B,v))},isVisible:function(N){return this._visibleFunc?this._visibleFunc(N):!0},onPropertyChanged:function(U){var t=this,s=U.property;cs[s]?t.ivm():t.iv(),s===Go&&t._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:Ke},handlePropertyChange:function(c){this._27o===c.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){var v=this;v._96I||(v.setSelectRowIndex(-1),v._96I=1,v.iv())},redraw:function(){this.iv()},validateModel:function(){var c=this,m=c._rows,F=c._28o,B={},u=new Sd,A=c._27o;c.updateCurrentData(),A!==c._27o&&c.endEditing(),m.clear(),F.clear(),c.getRawProperties().each(function(A){if(c.isVisible(A)){u.add(A);var _=c.getCategoryName(A);B[_]||(F.add(_,_===_h?0:z),B[_]={isExpanded:c.isExpanded(_),properties:new Sd})}}),c._sortFunc&&u.sort(c._sortFunc);for(var y in c._26o)c._26Q[y]=c.isExpanded(y);c._26o=B,F.each(function(I){I!==_h&&m.add(I);var _=B[I];_.isExpanded&&u.each(function(V){c.getCategoryName(V)===I&&(_.properties.add(V),m.add({property:V,data:c._27o}))},c)})},validateImpl:function(){var O=this;O._76o(),O._96I&&(O.validateModel(),delete O._96I);var z=O._canvas,x=O.getWidth(),R=O.getHeight(),Q=-O.ty(),C=O._rowHeight,D=O._indent,K=x-D,r=O._rows,t=r.size(),L=O._9I=D+K*O._10I,o=O._59I=t*C;Zn(z,x,R),O._29I={x:0,y:Q,width:x,height:R},O._31I=P(Q/C),O._14I=p((Q+R)/C),O._31I<0&&(O._31I=0),O._14I>t&&(O._14I=t);var Y,e=Un(z),I=O._background;ag(e,0,-Q,1),e.beginPath(),e.rect(0,Q,x,R),e.clip(),e.clearRect(0,Q,x,R),O._93db(e),I&&_r(e,0,0,D,o,I);for(var B=O._31I;B<O._14I;B++){var j=r.get(B),Q=C*B;if(hb(j))I&&_r(e,D,Q,K,C,I),Y=Ep(O.isExpanded(j)?O._expandIcon:O._collapseIcon),Y&&Cb(e,Y,ir,0,Q,D,C),e.save(),e.beginPath(),e.rect(D,Q,K,C),e.clip(),O.drawCategoryName(e,j,B,D,Q,K,C),e.restore();else{var q=j.property,N=j.data,Y=Ep(q.getIcon()),c=O._selectRowIndex===B?O.getSelectBackground():v;if(Y&&Cb(e,Y,ir,0,Q,D,C),c&&_r(e,D,Q,K,C,c),e.save(),e.beginPath(),e.rect(D,Q,L-D,C),e.clip(),O.drawPropertyName(e,q,B,D,Q,L-D,C),e.restore(),!O.isEditing(N,q)){var n=L+1,F=x-L-1;e.save(),e.beginPath(),e.rect(n,Q,F,C),e.clip(),O._87o(O.drawPropertyValue(e,q,O.getValue(N,q),B,n,Q,F,C,N),B,n,Q,F,C),e.restore()}}O._rowLineVisible&&_r(e,D,Q+C-1,K,1,O._rowLineColor)}O._columnLineVisible&&(_r(e,L,0,1,o,O._columnLineColor),_r(e,x-1,0,1,o)),O._92db(e),O._93I(),e.restore(),O.ty(O.ty())},drawCategoryName:function(Z,o,n,y,$,u,N){fr(Z,o,this.getCategoryFont(o),this.getCategoryColor(o),y,$,u,N)},drawPropertyName:function(v,M,u,V,f,l,m){return M.drawPropertyName?(M.drawPropertyName(v,M,u,V,f,l,m,this),void 0):(fr(v,this.getPropertyName(M),this.getPropertyFont(M,u),this.getPropertyColor(M,u),V,f,l,m),void 0)},drawPropertyValue:function(R,G,$,b,H,S,A,i,d){return G.drawPropertyValue?G.drawPropertyValue(R,G,$,b,H,S,A,i,d,this):(Yf(R,$,G,this.getLabelFont(G,$,b),this.getLabelColor(G,$,b),H,S,A,i,d,this),void 0)},isPropertyEditable:function(Z){return Z.isEditable()&&this.isEditable()},setProperties:function(A){this._propertyModel.clear(),this.addProperties(A)},addProperties:function(d){if(d){var n=this._propertyModel;d.forEach(function(W){if(!(W instanceof Ok)){var m=Qd(W.className);W=Ec(m?m:Ok,W)}n.add(W)})}},getRowIndexAt:function(g){var b=this,q=P(b.lp(g).y/b._rowHeight);return q>=0&&q<b._rows.size()?q:-1},getPropertyAt:function(t){var C=this,w=C.getRowIndexAt(t);return w>=0?C._rows.get(w).property:v},getToolTip:function(D){var C=this,I=C.getPropertyAt(D),O=C._27o;return I&&O?I.getToolTip(O,C._9I<C.lp(D).x,C):v}});var wf=function(M){this.pv=M,this.addListeners()};Uf(wf,t,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(h){this.getView().style.cursor=h},clear:function(){var Y=this;Y._62O=Y.cp=Y.ty=Y.p=v,Y.setCursor(S)},handle_mousedown:function(W){this.handle_touchstart(W)},handle_touchstart:function(p){var k=this,T=k.pv;Se(p),T.setFocus(p)&&(Rr(p)?(k.cp=sk(p),k.ty=T.ty(),k.p=T.getColumnPosition(),k.handle_touchmove(p)):T.setSelectRowIndex(T.getRowIndexAt(p)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(z){this.handle_touchend(z)},handle_touchend:function(N){var I=this;if(I.cp&&!I._62O){var b=I.pv,l=b.lp(N),R=l.x,$=l.y,E=b._indent,z=b.getRowIndexAt(N),d=b._9I;if(z>=0){var k=b._rowHeight,s=k*z,A=b._rows.get(z),y=A.property;if(hb(A))Ep(b.isExpanded(A)?b._expandIcon:b._collapseIcon)&&R>=0&&E>=R&&$>=s&&s+k>=$?b.toggle(A):Gj(N)&&b.toggle(A);else if(R>d&&b.isPropertyEditable(y,N)){var T={x:d+1,y:s,width:b.getWidth()-d-1,height:k},C={x:T.x+b.tx(),y:T.y+b.ty(),width:T.width,height:T.height},M=0,K=b._29I;T.y<K.y?M=T.y-K.y:T.y+k>K.y+K.height&&(M=T.y+k-K.y-K.height),M&&(b.ty(b.ty()-M),C.y-=M),b.beginEditing({data:A.data,property:y,value:b.getValue(A.data,y),event:N,rect:T,editorRect:C,view:b})}}b.setSelectRowIndex(z)}I.clear()},handleWindowMouseMove:function(g){this.handleWindowTouchMove(g)},handleWindowTouchMove:function(k){var O=this,h=O.pv,Z=O.ty,z=O.cp,t=sk(k),M=O._62O;if("p"===M)h.setTranslateY(Z+t.y-z.y);else if("c"===M){var j=h.getWidth()-h._indent;if(j>16){var X=O.p-(z.x-t.x)/j,e=16/j;e>X&&(X=e),X>1-e&&(X=1-e),h.setColumnPosition(X)}}else"s"===M&&h.setTranslateY(Z+(z.y-t.y)*h._59I/h._29I.height)},handle_mousemove:function(H){this.handle_touchmove(H)},handle_touchmove:function(U){if(!wj&&Rr(U)){var n=this,j=n.pv,V=a(j.lp(U).x-j._9I)<=(E?8:3);n.cp?n._62O||(V?(n._62O="c",$m(n)):a(sk(U).y-n.cp.y)>=2&&(n._62O=n.isV(U)?"s":"p",$m(n))):(V?n.setCursor(Ul):n.setCursor(S),n.isV(U)&&j._43o())}},isV:function(e){var B=this.pv,P=B._29I;return B._41o()&&P.x+P.width-B.lp(e).x<Vq},handle_mousewheel:function($){this.handleScroll($,$.wheelDelta/40)},handle_DOMMouseScroll:function(K){2===K.axis&&this.handleScroll(K,-K.detail)},handleScroll:function(j,Y){var h=this.pv;Se(j),h.endEditing(),h.translate(0,Y*h.getRowHeight())},handle_keydown:function(N){var t=this.pv,R=t._rows.size(),L=t._selectRowIndex+(Ho(N)?-1:1);(Ho(N)||Lm(N))&&(0>L&&(L=0),L>=R&&(L=R-1),t.setSelectRowIndex(L))}}),kc.ListView=function(h){this._5o(h),new ar(this)},Nb("ListView",t,{ms_ac:[de,$p,Qb,yr,Cj,Uh,vk,Cp,Zc,kb,Vc,Ae,md,Gr],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:gk,_rowHeight:hg,_rowLineVisible:r.listViewRowLineVisible,_rowLineColor:r.listViewRowLineColor,_scrollBarColor:cm,_scrollBarSize:Mp,_autoMakeVisible:ok,_autoHideScrollBar:Pb,_selectBackground:r.listViewSelectBackground,_labelColor:r.listViewLabelColor,_labelSelectColor:r.listViewLabelSelectColor,_labelFont:r.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(r){var v=this,u=v._checkMode;v._checkMode=r,v.fp(Dd,u,r)},drawRow:function(C,B,P,U,H,J,L){var p=this,x=0,Z=p._indent,j=p.getIconWidth(B);p.drawRowBackground(C,B,P,U,H,J,L),p._checkMode&&(Df(C,p.getCheckIcon(B),x+Z/2,H+L/2,B,p),x+=Z),p.drawIcon(C,B,x,H,j,L),p.drawLabel(C,B,x+j,H,L)}});var ar=function(m){this.list=m,this._lastSelectDataTime=ad(),this.addListeners()};Uf(ar,t,{ms_listener:1,getView:function(){return this.list._view},clear:function(U){var k=this,V=k.list;U&&"d"===k._62O&&!k.dragCancel&&V.handleDragAndDrop(U,"end"),V.draggingData&&(V.draggingData=null,V.redraw()),k.dragCancel=k._62O=k._isV=k._isH=k.cp=k.tx=k.ty=v},handle_mousedown:function(R){this.handle_touchstart(R)},handle_touchstart:function(h){var v=this,i=v.list;if(Se(h),i.setFocus(h)){var u=i.getDataAt(h);v.cp=sk(h),v.tx=i.tx(),v.ty=i.ty(),Rr(h)?u&&i.handleDragAndDrop&&!v.isV(h)&&!v.isH(h)&&(i.draggingData=u,i.redraw(),i.handleDragAndDrop(h,"prepare")):(u&&v._33o(h,u),v.clear(h))}},handleWindowMouseUp:function(N){this.clear(N)},handleWindowTouchEnd:function(B){this.clear(B)},handle_mouseup:function(r){this.handle_touchend(r)},handle_touchend:function(e){var u=this,t=u.list;if(!u._isV&&!u._isH&&u.cp&&!u._62O){var L=t.getDataAt(e);L?(t.isCheckMode()?u._34o(e,L):u._33o(e,L),Gj(e)?t.onDataDoubleClicked(L,e):t.onDataClicked(L,e)):t.handleBackgroundClick(e)}u.clear(e)},handleWindowMouseMove:function(j){this.handleWindowTouchMove(j)},handleWindowTouchMove:function(x){var A=this,R=A.list,Y=A._62O,G=A.tx,$=A.ty,m=A.cp,P=sk(x),i=R._29I;"p"===Y?R.setTranslate(G+P.x-m.x,$+P.y-m.y):"v"===Y?R.ty($+(m.y-P.y)*R._59I/i.height):"h"===Y?R.tx(G+(m.x-P.x)*R._91I/i.width):"d"===Y&&(A.dragCancel||R.handleDragAndDrop(x,"between"))},handle_mousemove:function(p){this.handle_touchmove(p)},handle_touchmove:function(w){if(!wj&&Rr(w)){var O=this,z=O.list;if(O._isV=O.isV(w),O._isH=O.isH(w),O.cp){if(!O._62O){if(Kd(sk(w),O.cp)<2)return;O._isV?O._62O="v":O._isH?O._62O="h":z.draggingData&&!this.dragCancel?(O._62O="d",z.handleDragAndDrop(w,"begin")):O._62O="p",O._62O&&"d"!==O._62O&&z.draggingData&&(z.draggingData=null,z.redraw()),$m(O)}}else O._isV&&z._43o(),O._isH&&z._42o()}},isV:function(e){var h=this.list,n=h._29I;return h._41o()&&n.x+n.width-h.lp(e).x<Vq},isH:function(U){var G=this.list,u=G._29I;return G._40o()&&u.y+u.height-G.lp(U).y<Vq},handle_mousewheel:function(w){this.handleScroll(w,w.wheelDelta/40,w.wheelDelta!==w.wheelDeltaX)},handle_DOMMouseScroll:function(X){this.handleScroll(X,-X.detail,1)},handleScroll:function(b,r,x){var Q=this.list;Se(b),Q.endEditing&&Q.endEditing(),x&&Q._41o()?Q.translate(0,r*Q.getRowHeight()):Q._40o()&&Q.translate(10*r,0)},handle_keydown:function(k){if(!r.isInput(k.target)){var y,b=this.list,x=b.sm(),T=b._rows,D=T.size();if(td(k))b.selectAll();else if(Mo(k))b.handleDelete&&b.handleDelete(k);else if(Sb(k))"d"!==this._62O||this.dragCancel||(b.handleDragAndDrop(k,"cancel"),this.dragCancel=!0);else if(th(k))b.isCheckMode()&&(y=b.getFocusData(),y&&b.checkData(y));else if(Ho(k)||Lm(k)){var E=b.isCheckMode();if(y=E?b.getFocusData():x.ld()){var G=b.getRowIndex(y);G>=0&&(Ho(k)?0!==G&&(y=T.get(G-1),E?b.setFocusData(y):x.ss(y)):G!==D-1&&(y=T.get(G+1),E?b.setFocusData(y):x.ss(y)))}else D>0&&(y=T.get(0),E?b.setFocusData(y):x.ss(y))}}},_34o:function(B,y){var f=this.list,o=f.lp(B).x;return o>=0&&o<=f._indent?(f.checkData(y),void 0):(f.setFocusData(y),void 0)},_33o:function(N,p){var b=this.list,q=b.sm(),Z=q.ld();if(ne(N))b.isSelected(p)?q.rs(p):q.as(p);else if(Qe(N))if(Z)for(var l=b.getRowIndex(Z),a=b.getRowIndex(p);l!==a;)l+=a>l?1:-1,q.as(b._rows.get(l));else q.ss(p);else if(Rr(N)){var T=ad();if(q.contains(p)){var D=T-this._lastSelectDataTime;b.handleDataDoubleSelect&&D>500&&1500>D&&b.handleDataDoubleSelect(N,p)}q.ss(p),this._lastSelectDataTime=T}else q.contains(p)||q.ss(p)}}),kc.TreeView=function(Z){var R=this;R._35o(),R._5o(Z),new Tf(R)},Nb("TreeView",t,{ms_ac:[de,$p,Qb,"rootVisible",Dd,"rootData",Cp,Zc,kb,Vc,Ae,Cj,yr,Uh,vk,Cc,nn,md,Gr,"loader","doubleClickToToggle"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:v,_indent:gk,_rowHeight:hg,_rowLineVisible:r.treeViewRowLineVisible,_rowLineColor:r.treeViewRowLineColor,_scrollBarColor:cm,_scrollBarSize:Mp,_autoHideScrollBar:Pb,_expandIcon:r.treeViewExpandIcon,_collapseIcon:r.treeViewCollapseIcon,_autoMakeVisible:ok,_selectBackground:r.treeViewSelectBackground,_labelColor:r.treeViewLabelColor,_labelSelectColor:r.treeViewLabelSelectColor,_labelFont:r.treeViewLabelFont,_doubleClickToToggle:r.treeViewDoubleClickToToggle,drawRow:function(E,Y,X,S,C,_,c){var J=this;J.drawRowBackground(E,Y,X,S,C,_,c),J._97I(E,Y,X,0,C,_,c)},isOnToggleIcon:function(f){var R=this.getDataAt(f);if(R){var k=this.getIndent(),I=this.lp(f).x;if(Ep(this.getToggleIcon(R))){var U=k*this.getLevel(R);if(I>=U&&U+k>=I)return!0}}return!1}});var Tf=function(K){lj(Tf,this,[K])};Uf(Tf,ar,{toggle:function(W,P,m,Z){var b=this.list,T=b.lp(W).x;if(Ep(b.getToggleIcon(P))){var G=m*Z;if(T>=G&&G+m>=T)return b.toggle(P),!0}return b.isDoubleClickToToggle()&&Gj(W)?(b.toggle(P),!0):!1},_34o:function(G,A){var b=this.list,T=b.lp(G).x,e=b._levelMap[A._id],d=b._indent,i=d*(e+1);return T>=i&&i+d>=T?(b.checkData(A),void 0):(this.toggle(G,A,d,e)||b.setFocusData(A),void 0)},_33o:function(J,i){var G=this,s=G.list;G.toggle(J,i,s._indent,s.getLevel(i))||Tf.superClass._33o.call(G,J,i)},handle_keydown:function(d){if(xn(d)||yn(d)){var i=this.list,D=i._rows,$=i.isCheckMode(),Z=i.sm(),b=$?i.getFocusData():Z.ld();b?b.hasChildren()&&(xn(d)?i.collapse(b):i.expand(b)):D.size()>0&&(b=D.get(0),$?i.setFocusData(b):Z.ss(b))}else Tf.superClass.handle_keydown.call(this,d)}});var ni=kc.TableView=function(U){this._98I(),this._5o(U),new zr(this)};Nb("TableView",t,{ms_ac:[de,$p,Qb,"sortMode",Kr,Ih,yr,Uh,vk,Bo,sb,"sortColumn",Cp,Zc,kb,Vc,Ae,md,Gr],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:Hm,_editable:!0,_batchEditable:!1,_rowHeight:hg,_rowLineVisible:r.tableViewRowLineVisible,_rowLineColor:r.tableViewRowLineColor,_columnLineVisible:r.tableViewColumnLineVisible,_columnLineColor:r.tableViewColumnLineColor,_scrollBarColor:cm,_scrollBarSize:Mp,_autoHideScrollBar:Pb,_autoMakeVisible:ok,_selectBackground:r.tableViewSelectBackground,_labelColor:r.tableViewLabelColor,_labelSelectColor:r.tableViewLabelSelectColor,_labelFont:r.tableViewLabelFont,getCheckColumn:function(){var x=this;if(!x._31o){var p=x._31o=new ms;p.setEditable(!0),p.setWidth(40),p.getValue=x.getCheckColumValue,p.drawCell=x.drawCheckColumnCell}return x._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(y){var M=this,f=M._39o,U=M.getCheckColumn();y!==M.isCheckMode()&&(y?f.add(U,0):f.remove(U),M.fp(Dd,!y,y))},getCheckColumValue:function(k,G,Y){return Y.isSelected(k)},drawCheckColumnCell:function(R,x,p,Y,Z,_,n,k,z){Df(R,z.getCheckIcon(x),Z+n/2,_+k/2,x,z)}});var zr=function(G){lj(zr,this,[G])};Uf(zr,ar,{_34o:function(L,q){var e=this.list,A=e._31o;if(e.isCellEditable(q,A,L)){var O=e._3Q(A),l=e.lp(L).x;if(O&&l>=O.startX&&l<O.startX+A.getWidth())return e.checkData(q),void 0}e.setFocusData(q),e._37O(q,L)},_33o:function(T,E){zr.superClass._33o.apply(this,arguments),this.list._37O(E,T)}});var Oi=kc.TreeTableView=function(O){var e=this,V=e._4o=new ms;e._35o(),e._98I(),e._5o(O),V.setDisplayName("Name"),V.setEditable(!0),V.setWidth(180),V.drawCell=ln,V.getValue=lc,e._39o.add(V),new hj(e)},ln=function(M,w,J,T,f,O,L,X,o){o._97I(M,w,J,f,O,L,X)},lc=function(D,t,X){return X.getLabel(D)};Nb("TreeTableView",t,{ms_ac:[de,$p,Qb,"sortMode",Kr,Ih,Cj,Dd,"rootData","rootVisible",Cp,Zc,"sortColumn",Cc,nn,kb,Vc,Ae,md,vk,yr,Uh,Bo,sb,Gr,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:Hm,_checkMode:v,_editable:!0,_batchEditable:!1,_indent:gk,_rowHeight:hg,_rowLineVisible:r.treeTableViewRowLineVisible,_rowLineColor:r.treeTableViewRowLineColor,_columnLineVisible:r.treeTableViewColumnLineVisible,_columnLineColor:r.treeTableViewColumnLineColor,_expandIcon:r.treeTableViewExpandIcon,_collapseIcon:r.treeTableViewCollapseIcon,_scrollBarColor:cm,_scrollBarSize:Mp,_autoHideScrollBar:Pb,_autoMakeVisible:ok,_selectBackground:r.treeTableViewSelectBackground,_labelColor:r.treeTableViewLabelColor,_labelSelectColor:r.treeTableViewLabelSelectColor,_labelFont:r.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}});var hj=function(a){lj(hj,this,[a])};Uf(hj,ar,{_34o:function(e,I){var B=this.list,T=B._4o,M=B._3Q(T),P=B.lp(e).x;if(M){var p=B._indent,L=M.startX+p*B.getLevel(I);if(Ep(B.getToggleIcon(I))&&P>=L&&L+p>=P)return B.toggle(I),void 0;if(B.isCellEditable(I,T)&&(L+=p,P>=L&&L+p>=P))return B.checkData(I),void 0}B.setFocusData(I),B._37O(I,e)},_33o:function(e,t){var F=this.list,E=F.lp(e).x;if(Ep(F.getToggleIcon(t))){var J=F._3Q(F._4o);if(J){var I=F._indent,N=J.startX+I*F.getLevel(t);if(E>=N&&N+I>=E)return F.toggle(t),void 0}}hj.superClass._33o.apply(this,arguments),F._37O(t,e)}});var io=kc.TableHeader=function(G){var j=this,C=j._view=xr(1,j),K=j._39o=G.getColumnModel(),q=j.iv;j.tv=j._tableView=G,j._60I=new Sd,j._canvas=yj(C),C.style.background=r.tableHeaderBackground||"",C.style.height=Xm+co,K.mm(q,j),K.md(q,j),K.mh(q,j),G.mp(function(Q){Yb[Q.property]&&j.iv()},j),new ec(j),j.iv()};Nb("TableHeader",t,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",de,Qb,Cj,"moveBackground","insertColor",Bo,sb,"resizable","movable"],_checkIcon:jl,_movable:!0,_resizable:!0,_labelColor:r.tableHeaderLabelColor,_labelFont:r.tableHeaderLabelFont,_columnLineColor:r.tableHeaderColumnLineColor,_columnLineVisible:r.tableHeaderColumnLineVisible,_sortDescIcon:r.tableHeaderSortDescIcon,_sortAscIcon:r.tableHeaderSortAscIcon,_moveBackground:r.tableHeaderMoveBackground,_insertColor:r.tableHeaderInsertColor,_indent:gk,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(u){return u.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(V){return V.getColor()||this._labelColor},getLabelAlign:function(p){return p._align},onPropertyChanged:function(){this.iv()},_5Q:function(M){this._61I=M,this.iv()},getLogicalPoint:function(l){return zp(l,this._canvas,this.tv.tx())},validateImpl:function(){var I=this,A=I._canvas,z=I.getWidth(),P=I.getHeight(),q=I.tv,F=I._60I,c=I._61I,E=-q.tx(),_=0;(z!==A.clientWidth||P!==A.clientHeight)&&Zn(A,z,P),F.clear(),I._39o._roots.each(function(I){if(I.isVisible()){var n=_+I.getWidth();E+z>=_&&n>=E&&F.add({column:I,startX:_}),_=n}});var g=Un(A);if(ag(g,-E,0,1),g.beginPath(),g.rect(E,0,z,P),g.clip(),g.clearRect(E,0,z,P),F.each(function(K){var r=K.column,U=K.startX,T=r.getWidth();T>0&&(g.save(),g.beginPath(),g.rect(U,0,T,P),g.clip(),c&&c.column===r||I.drawColumn(g,r,U,0,T,P),I._columnLineVisible&&_r(g,U+T-1,0,1,P,I._columnLineColor),g.restore())}),c){var Q=c.column,_=c.startX,a=c.position,u=Q.getWidth();g.save(),g.beginPath(),g.rect(_,0,u,P),g.clip(),g.fillStyle=I._moveBackground,g.fill(),I.drawColumn(g,Q,_,0,u,P),g.restore(),as(g,I._insertColor,a,0,P)}g.restore()},_6Q:function(i){var V=this.tv;return V._31o===i&&V.sm().getSelectionMode()===Te},drawColumn:function(R,J,o,i,T,Q){var D=this,U=D.tv,Z=Ep(J.getIcon()),$=D.getLabelAlign(J);if(D._6Q(J)){var Y=Ep(D._checkIcon);Df(R,Y,o+T/2,i+Q/2,J,D)}else{var n=D.getLabel(J),B=D.getLabelFont(J),C=D.getLabelColor(J),g=og(B,n).width,t=Z?D._indent:0;$===Kp?(Z&&Cb(R,Z,ir,o,i,t,Q),fr(R,n,B,C,o+t,i,T,Q,Kp)):$===be?(Z&&Cb(R,Z,ir,o+T-g-t,i,t,Q),fr(R,n,B,C,o,i,T,Q,be)):(Z&&Cb(R,Z,ir,o+(T-g-t)/2,i,t,Q),fr(R,n,B,C,o+(T-g+t)/2,i,0,Q,Kp))}if(J.isSortable()&&U.getSortColumn()===J&&(Z=Ep(J.getSortOrder()===cg?D._sortAscIcon:D._sortDescIcon))){var G=ob(Z,J)/2+2;Df(R,Z,$===be?o+G:o+T-G,i+Q/2,J,U)}}});var ec=function(J){var H=this;H.th=J,H.tv=J._tableView,H.addListeners()};Uf(ec,t,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(Y){this.getView().style.cursor=Y},handle_mousemove:function(K){if(!wj){var _=this;delete _._29o,_.setCursor(S);for(var s=_.th,h=s._60I,b=s.lp(K).x,y=h.size()-1;y>=0;y--){var T=h.get(y),M=T.column,L=T.startX+M.getWidth();if(s.isResizable()&&a(L-b)<=(E?10:3))return _._29o=T,_.setCursor(Ul),void 0;b>T.startX&&L>b&&(_._29o=T),(M.isClickable()||M.isSortable()||s.isMovable()||M===_.tv.getCheckColumn())&&b>T.startX&&L>b&&_.setCursor(Ic)}}},handle_mousedown:function(V){this.handle_touchstart(V)},handle_touchstart:function(l){var z=this;Se(l),z.tv.endEditing(),z.handle_mousemove(l),z._29o&&(z.x=sk(l).x,z.lx=z.th.lp(l).x,z.w=z._29o.column.getWidth(),$m(z,l))},handleWindowMouseMove:function(E){this.handleWindowTouchMove(E)},handleWindowTouchMove:function(n){var Q=this,P=Q.th,Y=Q.getView().style.cursor,K=Q._29o,k=sk(n).x-Q.x;if(Q.resizing||Q.moving||(Y===Ul?Q.resizing=1:P.isMovable()&&Y===Ic&&a(k)>2&&(Q.moving=1)),Q.resizing)K.column.setWidth(Q.w+k);else if(Q.moving){var R=Q.lx+k;P._60I.each(function(n){var H=n.startX,y=H+n.column.getWidth();if(R>=H&&y>=R){var b={column:K.column,startX:K.startX+k,front:y-R>R-H,insertColumn:n.column};b.position=b.front?H:y,P._5Q(b)}})}},_16Q:function(c,i){var $=this,D=$.tv,A=$.th,j=A._checkIcon;if(A._6Q(c)){var S=Ep(j),G=$.lx,Z=c.getWidth(),s=ob(S,c);if(G>=i+Z/2-s&&i+Z/2+s>=G){A.setCheckIcon(j===bq?jl:bq);var y=D.sm(),l=D._rows;return j===bq?y.rs(l):y.ss(l),D.onCheckColumnClicked(c),!0}}return!1},handleWindowMouseUp:function(U){this.handleWindowTouchEnd(U)},handleWindowTouchEnd:function(P){var u=this,_=u.tv,x=u.th,A=u._29o;if(u.moving){var G=x._61I;if(G&&G.insertColumn!==G.column){var X=G.column,D=_.getColumnModel()._roots,n=D.remove(X),J=D.indexOf(G.insertColumn);J>=0&&(G.front||J++,J<=D.size()&&(D.add(X,J),_.getColumnModel()._38I(X,n,J)))}x._5Q(v),delete u.moving}else if(!u.resizing&&A){X=A.column;var h=x.lp(P).x,j=A.startX,c=!0;if(x.onColumnClicked){var e=x.onColumnClicked(X,P,j);e===!1&&(c=!1)}if(c&&h>=j&&h<=j+X.getWidth()&&!u._16Q(X,j)){if(X.isSortable()){var C=_.getSortMode(),M=X.getSortOrder();C===Hm?_.getSortColumn()===X?(M===mm&&_.setSortColumn(v),X.setSortOrder(M===cg?mm:cg)):_.setSortColumn(X):"bistate"===C&&(_.getSortColumn()===X?X.setSortOrder(M===cg?mm:cg):_.setSortColumn(X))}_.onColumnClicked(X,P,j)}}u._29o=u.resizing=u.x=u.lx=u.w=v}}),kc.TablePane=function(H){this.init(new ni(H))},Nb("TablePane",t,{ms_v:1,_44o:1}),kc.TreeTablePane=function(T){this.init(new Oi(T))},Nb("TreeTablePane",t,{ms_v:1,_44o:1}),kc.Toolbar=function(p){var N=this,L=N._view=xr(1,N),Z=L.style;Z.background=r.toolbarBackground||"",Z.height=nm+co,N._canvas=yj(L),N._30o=new Sd,N._90I=new Sd,N.setItems(p||[]),L.handleGroupSelectedChanged=function(d){if(d.isSelected()){var U=d.getGroupId();null!=U&&N._items.forEach(function(h){var Y=h.element;Y&&Y!==d&&Y.setSelected&&Y.getGroupId&&Y.getGroupId()===U&&Y.setSelected(!1)})}},new ae(N)},Nb("Toolbar",t,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[nb,de,Qb,$p,Gr,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:r.toolbarLabelColor,_labelSelectColor:r.toolbarLabelSelectColor,_labelFont:r.toolbarLabelFont,_selectBackground:r.toolbarSelectBackground,_itemGap:r.toolbarItemGap,_separatorColor:r.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(Z){var W=this.getItemInfoAt(Z);return W?W.item.toolTip:v},getLabelColor:function(S){return S&&S.selected&&S.type!==bq&&S.type!==re?this._labelSelectColor:this._labelColor},onPropertyChanged:function(F){this.iv(),F.property===nb&&this._items.forEach(function(z){we(z)})},redraw:function(){this.iv()},addItem:function(Z,u){var K=this._items;u==v?K.push(Z):K.splice(u,0,Z),this.fp(nb,v,K)},removeItem:function(D){if(D)for(var G=this._items,t=0;t<G.length;t++)D===G[t]&&(G.splice(t,1),this.fp(nb,v,G))},removeItemById:function(D){if(D!=v)for(var c=this._items,k=0;k<c.length;k++)D===c[k].id&&(c.splice(k,1),this.fp(nb,v,c))},getItemById:function(V){if(V!=v)for(var h=this._items,s=0;s<h.length;s++){var x=h[s];if(V===x.id)return x}},getItemInfos:function(){return this._30o},getItemInfoAt:function(z){var q=this,k=0,x=q._30o,R=q.lp(z),u=R.x,n=R.y;if(n>=0&&n<=q.getHeight())for(;k<x.size();k++){var o=x.get(k);if(o.startX<=u&&u<=o.endX)return o}return v},drawItem:function(H,d,G,l,g){if(d.visible===!1)return 0;if(Qr(d.visible)&&d.visible()===!1)return 0;var J=this,X=d.disabled;X&&(H.globalAlpha=Oc);var e=J.drawItemImpl(H,d,G,l,g),b=J._itemGap;return X&&(H.globalAlpha=1),this._currentItem!==d||"separator"===d||d.separator===!0||d.unfocusable||Fi(H,J._separatorColor,G-b/2,0,e+b,l),e},drawItemImpl:function(N,c,S,B,k){var n=this,Z=n._view,C=n._itemGap,L=B/2,Q=c.type,j=c.element,q=c.label;hb(j)&&(q=j,j=v);var r,O=n.getLabelFont(c),l=n.getLabelColor(c),x=c.selected,a=Ep(c.icon),D=ob(a,c),g=0,m=D+(q?og(O,q).width:0);if("separator"===c||c.separator===!0)return as(N,n._separatorColor,S,B/4,L),1;if(j){a&&Df(N,a,S+D/2,L),fr(N,q,O,l,S+D,0,0,B);var A=ug(j);k||n._90I.add(A),A.parentNode!==Z&&Yr(Z,A),j.iv&&j.iv(),j.validate&&j.validate();var P=A.getBoundingClientRect(),p=P.width,T=A.style;return Ck(A),T.left=n.tx()+S+m+co,T.top=(B-P.height)/2+co,m+p}return Q===re?r=Ep(x?Zd:qo):Q===bq&&(r=Ep(x?bq:jl)),r?(g=ob(r,c),Df(N,r,S+g/2,L),S+=g,m+=g):x&&_r(N,S-C/2,0,m+C,B,n.getSelectBackground(c)),a&&Df(N,a,S+D/2,L),fr(N,q,O,l,S+D,0,0,B),m},validateImpl:function(){var N=this,V=N._canvas,M=N.getWidth(),e=N.getHeight(),E=N._30o,U=N._items;Zn(V,M,e);var C=Un(V),q=N._itemGap,z=q/2;ag(C,N.tx(),0,1),C.clearRect(0,0,M,e);var Q=N._90I;N._90I=new Sd,E.clear(),U.forEach(function($){var p=N.drawItem(C,$,z,e);E.add({item:$,startX:z,endX:z+p,width:p}),p&&(z+=p+q)}),Q.each(function(u){N._90I.contains(u)||gp(u)}),N._64I=w(0,z),C.restore(),N._stickToRight?(N._65O=0,C=Un(V),z=M-N._64I+q,ag(C,0,0,1),C.clearRect(0,0,M,e),E.clear(),U.forEach(function(i){var r=N.drawItem(C,i,z,e,!0);E.add({item:i,startX:z,endX:z+r,width:r}),r&&(z+=r+q)}),C.restore()):N.tx(N.tx())},handleClick:function(d){var M=this,F=d.type,j=d.action,X=d.groupId,U=d.selected;d.disabled||(X!=v?U||(d.selected=!0,this._items.forEach(function(z){z.groupId===X&&d!==z&&(z.selected=!1)}),j&&d.action(d,M)):F===bq||"toggle"===F?(d.selected=!U,j&&d.action(d,M)):j&&d.action(d,M)),Yj(),M.iv()}});var ae=function(t){this.tb=t,this.addListeners()};Uf(ae,t,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(z){this.handleScroll(z,10*(z.wheelDelta/40))},handle_DOMMouseScroll:function(i){this.handleScroll(i,10*-i.detail)},handleScroll:function(q,r){Se(q);var l=this.tb;l.isScrollable()&&!l._stickToRight&&(l.tx(l.tx()+r),Wb())},handle_mousemove:function(W){var x=this;wj?x.info2=x.tb.getItemInfoAt(W):x.setItem(W)},handle_mouseout:function(z){var M=this;z.target===M.getView()?M.tb.setCurrentItem(v):M.handle_mousemove(z)},handle_mousedown:function(f){this.handle_mousemove(f),this.handle_touchstart(f)},handle_touchstart:function(Q){var M=this,e=M.tb,L=Q.target;Rr(Q)&&(L===M.getView()||L===e._canvas)&&(Se(Q),e.setFocus(Q)&&(this.setItem(Q,!0),(e.isScrollable()||M.info&&!M.info.item.disabled)&&(M.x=sk(Q).x,M.tx=e.tx(),$m(M,Q))))
},handleWindowMouseMove:function(M){this.handleWindowTouchMove(M)},handleWindowTouchMove:function(X){var A=this,I=A.tb;if(!I._stickToRight){var k=sk(X).x-A.x;!A._25o&&a(k)>2&&I.isScrollable()&&(A._25o=1),A._25o&&I.tx(A.tx+k)}},handleWindowMouseUp:function(c){this.handleWindowTouchEnd(c)},handleWindowTouchEnd:function(){var S=this,n=S.tb,D=S.info,u=S.info2;if(!S._25o&&D){var m=D.item;u&&u.item!==m||n.handleClick(m)}S._25o=S.x=S.tx=S.info2=v,S.setItem()},setItem:function(u,r){var P=this,d=P.tb,y=P.info=u?d.getItemInfoAt(u):v,F=y?y.item:v;d.setCurrentItem(F),r&&F&&Qr(F.onDown)&&F.onDown(u)}}),kc.BorderPane=function(){this._view=xr(1,this),this.iv()},Nb("BorderPane",t,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(n,i){this._12o("leftView",n),i!=v&&this.setLeftWidth(i)},getRightView:function(){return this._rightView},setRightView:function(b,w){this._12o("rightView",b),w!=v&&this.setRightWidth(w)},getTopView:function(){return this._topView},setTopView:function(H,C){this._12o("topView",H),C!=v&&this.setTopHeight(C)},getBottomView:function(){return this._bottomView},setBottomView:function(Y,_){this._12o("bottomView",Y),_!=v&&this.setBottomHeight(_)},getCenterView:function(){return this._centerView},setCenterView:function(s){this._12o("centerView",s)},_12o:function(K,c){var $=this,r="_"+K,Z=$._view,o=$[r];o!==c&&(o&&(o.getView?gp(o.getView()):gp(o)),$[r]=c,c&&(c.getView?Yr(Z,c.getView(),1):Yr(Z,c,1)),$.fp(K,o,c))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var P=this,j=P._topView,h=P._bottomView,A=P._leftView,M=P._rightView,V=P._centerView,g=P.getWidth(),N=P.getHeight(),O=0,I=0,J=g,q=N,e=0,l=0,k=0,r=0;j&&(e=P._topHeight==v?am(j):P._topHeight,I=e),h&&(l=P._bottomHeight==v?am(h):P._bottomHeight,q=N-l),A&&(k=P._leftWidth==v?Ik(A):P._leftWidth,O=k),M&&(r=P._rightWidth==v?Ik(M):P._rightWidth,J=g-r);var G=w(0,J-O),C=w(0,q-I);j&&oi(j,0,0,g,e),h&&oi(h,0,q,g,l),A&&oi(A,0,I,k,C),M&&oi(M,J,I,r,C),V&&oi(V,O,I,G,C)}})}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);