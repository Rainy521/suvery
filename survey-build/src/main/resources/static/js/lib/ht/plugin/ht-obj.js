!function(H,m,K){"use strict";var V="ht",S=H[V],h=null,l=Math,B=l.abs,Y=l.max,r=Number.MAX_VALUE,I=S.Default,Z=I.getInternal(),C=I.clone,U=Z.vec3TransformMat4,O=Z.appendArray,$=function(){var D=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,n=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,L=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,G=/f( +\d+)( +\d+)( +\d+)( +\d+)?/,x=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))?/,v=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))?/,J=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))?/,N=function(f,J){return J=parseInt(J),J>=0?f[J-1]:f[J+f.length]},F=function(w,J,S,u,B,r){if(w.vs){var L=N(J,u),y=N(J,B),D=N(J,r),p=S.matrix,q=w.vs;if(S.flipFace){var P=y;y=D,D=P}p?(O(q,U(C(L),p)),O(q,U(C(y),p)),O(q,U(C(D),p))):(O(q,L),O(q,y),O(q,D))}},j=function(h,H,j,m,C,L){if(h.vs){var d=N(H,m),p=N(H,C),T=N(H,L),v=j.flipY;if(j.flipFace){var R=p;p=T,T=R}h.uv.push(d[0],v?1-d[1]:d[1],p[0],v?1-p[1]:p[1],T[0],v?1-T[1]:T[1])}},i=function(b,B,j,v,y,D){if(b.vs){var Y=N(B,v),i=N(B,y),L=N(B,D),M=j.normalMatrix,K=b.ns;if(j.flipFace){var W=i;i=L,L=W}M?(O(K,U(C(Y),M)),O(K,U(C(i),M)),O(K,U(C(L),M))):(O(K,Y),O(K,i),O(K,L))}},Q=function(t,$,J,p,n,I,X,M){var x=p&&p.length&&M;I[3]===K?(F(t,$,n,I[0],I[1],I[2]),X&&j(t,J,n,X[0],X[1],X[2]),x&&i(t,p,n,M[0],M[1],M[2])):(F(t,$,n,I[0],I[1],I[3]),F(t,$,n,I[1],I[2],I[3]),X&&(j(t,J,n,X[0],X[1],X[3]),j(t,J,n,X[1],X[2],X[3])),x&&(i(t,p,n,M[0],M[1],M[3]),i(t,p,n,M[1],M[2],M[3])))},y=function(R,k,q,U){var D,S,t,y,o,T,A,J=r,W=r,p=r,Q=-r,w=-r,g=-r;for(D in R)for(T=R[D].vs,A=T.length,S=0;A>S;S+=3)t=T[S+0],y=T[S+1],o=T[S+2],J>t&&(J=t),W>y&&(W=y),p>o&&(p=o),t>Q&&(Q=t),y>w&&(w=y),o>g&&(g=o);if(q){var E=J+(Q-J)/2,n=W+(w-W)/2,i=p+(g-p)/2;for(D in R)for(T=R[D].vs,A=T.length,S=0;A>S;S+=3)T[S+0]-=E,T[S+1]-=n,T[S+2]-=i}var M,x,l;q?(M=Q-J,x=w-W,l=g-p):(M=2*Y(B(J),B(Q)),x=2*Y(B(W),B(w)),l=2*Y(B(p),B(g))),U.rawS3=[M,x,l];for(D in R){if(T=R[D].vs,k)for(A=T.length,S=0;A>S;S+=3)M&&(T[S+0]/=M),x&&(T[S+1]/=x),l&&(T[S+2]/=l);R[D].rawS3=U.rawS3}};return function(w,W,r){if(!w)return h;Z.isString(W)&&(W=E(W)),r||(r={}),r.flipY==h&&(r.flipY=!0),(r.s3||r.r3||r.t3||r.mat)&&(r.matrix=Z.createWorldMatrix(r.mat,r.s3,r.r3,r.rotationMode,r.t3));var z,o,u,j,$,e,b=[],H=[],f=r.ignoreNormal?h:[],g=r.reverseFlipMtls,S={vs:[],uv:[],ns:f?[]:h},s={htdefault:S},l=w.split("\n"),K=0;for(f&&r.matrix&&(r.normalMatrix=Z.createNormalMatrix(r.matrix));K<l.length;K++)if(o=l[K].trim(),0!==o.length&&"#"!==o.charAt(0))if(u=D.exec(o))b.push([parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])]);else if(u=n.exec(o))H.push([parseFloat(u[1]),parseFloat(u[2])]);else if(f&&(u=L.exec(o)))r.flipFace?f.push([parseFloat(-u[1]),parseFloat(-u[2]),parseFloat(-u[3])]):f.push([parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])]);else if(u=G.exec(o))Q(S,b,H,f,r,[u[1],u[2],u[3],u[4]]);else if(u=x.exec(o))Q(S,b,H,f,r,[u[2],u[5],u[8],u[11]],[u[3],u[6],u[9],u[12]]);else if(u=v.exec(o))Q(S,b,H,f,r,[u[2],u[6],u[10],u[14]],[u[3],u[7],u[11],u[15]],[u[4],u[8],u[12],u[16]]);else if(u=J.exec(o))Q(S,b,H,f,r,[u[2],u[5],u[8],u[11]],h,[u[3],u[6],u[9],u[12]]);else if(/^usemtl /.test(o)&&(j=o.substring(7).trim(),!(S=s[j]))){if(S={name:j,vs:[],uv:[],ns:f?[]:h},r.ignoreMtls&&r.ignoreMtls.indexOf(j)>=0&&delete S.vs,(r.reverseFlip||"*"===g||g&&g.indexOf(j)>=0)&&(S.reverseFlip=!0),W&&($=W[j],$&&(r.ignoreColor||(S.color=$.kd),!r.ignoreTransparent&&$.d>0&&$.d<1&&(S.transparent=!0,S.opacity=$.d),!r.ignoreImage&&(e=$.map_kd)))){for(e=e.split(" "),z=0;z<e.length;z++)"-o"===e[z]?(S.uvOffset=[parseFloat(e[z+1]),parseFloat(e[z+2])],z+=2):"-s"===e[z]&&(S.uvScale=[parseFloat(e[z+1]),parseFloat(e[z+2])],z+=2);S.image=(r.prefix||"")+e[e.length-1]}s[j]=S}var X=[];for(var k in s){var V=s[k].vs;V&&0!==V.length||X.push(k)}X.forEach(function(Z){delete s[Z]}),y(s,r.cube,r.center,r);var B=r.shape3d;if(B){var C=[];for(var j in s){var S=s[j];C.rawS3=S.rawS3,C.push(S)}I.setShape3dModel(B,C)}return s}}(),E=function(a){var c={};if(a)for(var f,r,X,K,S,P,d=a.split("\n"),E=/\s+/,j=0;j<d.length;j++)r=d[j].trim(),0!==r.length&&"#"!==r.charAt(0)&&(X=r.indexOf(" "),K=(X?r.substring(0,X):r).toLowerCase(),S=(X?r.substring(X+1):"").trim(),"newmtl"===K?c[S]=f={name:S}:f&&("ka"===K||"kd"===K||"ks"===K?(P=S.split(E,3),f[K]=[parseFloat(P[0]),parseFloat(P[1]),parseFloat(P[2]),1]):f[K]="ns"===K||"d"===K?parseFloat(S):S));return c};Z.addMethod(I,{loadObj:function(L,M,E){E=E||{},I.xhrLoad(M?[L,M]:[L],function(U){var e,F=E.finishFunc,h=E.shape3d,m=U?$(U[0],U[1],E):null;if(m){if(h)e=I.getShape3dModel(h);else{e=[];for(var r in m){var c=m[r];e.rawS3=c.rawS3,e.push(c)}}F&&F(m,e,e.rawS3)}else F&&F(null)},E)},parseObj:function(c,B,z){return $(c,B,z)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);